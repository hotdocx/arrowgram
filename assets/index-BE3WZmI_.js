const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mermaid.core-nSwYP8W5.js","assets/step-CdWOLO1w.js","assets/vega.module-DlPeonZJ.js","assets/linear-BfjZ8xob.js","assets/init-Dmth1JHB.js","assets/defaultLocale-CNpUPyHh.js","assets/time-BEjrHOyX.js","assets/range-OtVwhkKS.js","assets/ordinal-BeghXfj9.js","assets/colors-Cc3OSVma.js","assets/arc-r7J50yS7.js","assets/index-Bi7T_FA4.js","assets/index-ByJ9Ii8b.js"])))=>i.map(i=>d[i]);
(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function a6(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zh={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var py;function GS(){if(py)return tu;py=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:e,type:a,key:u,ref:s!==void 0?s:null,props:o}}return tu.Fragment=t,tu.jsx=r,tu.jsxs=r,tu}var gy;function VS(){return gy||(gy=1,Zh.exports=GS()),Zh.exports}var w=VS(),Gh={exports:{}},rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function FS(){if(vy)return rt;vy=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function y(L){return L===null||typeof L!="object"?null:(L=b&&L[b]||L["@@iterator"],typeof L=="function"?L:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function R(L,ne,ee){this.props=L,this.context=ne,this.refs=T,this.updater=ee||k}R.prototype.isReactComponent={},R.prototype.setState=function(L,ne){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,ne,"setState")},R.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function O(){}O.prototype=R.prototype;function M(L,ne,ee){this.props=L,this.context=ne,this.refs=T,this.updater=ee||k}var j=M.prototype=new O;j.constructor=M,_(j,R.prototype),j.isPureReactComponent=!0;var I=Array.isArray;function $(){}var E={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function V(L,ne,ee){var re=ee.ref;return{$$typeof:e,type:L,key:ne,ref:re!==void 0?re:null,props:ee}}function de(L,ne){return V(L.type,ne,L.props)}function Q(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function G(L){var ne={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(ee){return ne[ee]})}var X=/\/+/g;function K(L,ne){return typeof L=="object"&&L!==null&&L.key!=null?G(""+L.key):ne.toString(36)}function ae(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then($,$):(L.status="pending",L.then(function(ne){L.status==="pending"&&(L.status="fulfilled",L.value=ne)},function(ne){L.status==="pending"&&(L.status="rejected",L.reason=ne)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function q(L,ne,ee,re,we){var Ee=typeof L;(Ee==="undefined"||Ee==="boolean")&&(L=null);var ue=!1;if(L===null)ue=!0;else switch(Ee){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(L.$$typeof){case e:case t:ue=!0;break;case p:return ue=L._init,q(ue(L._payload),ne,ee,re,we)}}if(ue)return we=we(L),ue=re===""?"."+K(L,0):re,I(we)?(ee="",ue!=null&&(ee=ue.replace(X,"$&/")+"/"),q(we,ne,ee,"",function(oe){return oe})):we!=null&&(Q(we)&&(we=de(we,ee+(we.key==null||L&&L.key===we.key?"":(""+we.key).replace(X,"$&/")+"/")+ue)),ne.push(we)),1;ue=0;var Ce=re===""?".":re+":";if(I(L))for(var H=0;H<L.length;H++)re=L[H],Ee=Ce+K(re,H),ue+=q(re,ne,ee,Ee,we);else if(H=y(L),typeof H=="function")for(L=H.call(L),H=0;!(re=L.next()).done;)re=re.value,Ee=Ce+K(re,H++),ue+=q(re,ne,ee,Ee,we);else if(Ee==="object"){if(typeof L.then=="function")return q(ae(L),ne,ee,re,we);throw ne=String(L),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return ue}function F(L,ne,ee){if(L==null)return L;var re=[],we=0;return q(L,re,"","",function(Ee){return ne.call(ee,Ee,we++)}),re}function J(L){if(L._status===-1){var ne=L._result;ne=ne(),ne.then(function(ee){(L._status===0||L._status===-1)&&(L._status=1,L._result=ee)},function(ee){(L._status===0||L._status===-1)&&(L._status=2,L._result=ee)}),L._status===-1&&(L._status=0,L._result=ne)}if(L._status===1)return L._result.default;throw L._result}var Ae=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},De={map:F,forEach:function(L,ne,ee){F(L,function(){ne.apply(this,arguments)},ee)},count:function(L){var ne=0;return F(L,function(){ne++}),ne},toArray:function(L){return F(L,function(ne){return ne})||[]},only:function(L){if(!Q(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return rt.Activity=v,rt.Children=De,rt.Component=R,rt.Fragment=r,rt.Profiler=s,rt.PureComponent=M,rt.StrictMode=a,rt.Suspense=f,rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=E,rt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return E.H.useMemoCache(L)}},rt.cache=function(L){return function(){return L.apply(null,arguments)}},rt.cacheSignal=function(){return null},rt.cloneElement=function(L,ne,ee){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var re=_({},L.props),we=L.key;if(ne!=null)for(Ee in ne.key!==void 0&&(we=""+ne.key),ne)!D.call(ne,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&ne.ref===void 0||(re[Ee]=ne[Ee]);var Ee=arguments.length-2;if(Ee===1)re.children=ee;else if(1<Ee){for(var ue=Array(Ee),Ce=0;Ce<Ee;Ce++)ue[Ce]=arguments[Ce+2];re.children=ue}return V(L.type,we,re)},rt.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},rt.createElement=function(L,ne,ee){var re,we={},Ee=null;if(ne!=null)for(re in ne.key!==void 0&&(Ee=""+ne.key),ne)D.call(ne,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(we[re]=ne[re]);var ue=arguments.length-2;if(ue===1)we.children=ee;else if(1<ue){for(var Ce=Array(ue),H=0;H<ue;H++)Ce[H]=arguments[H+2];we.children=Ce}if(L&&L.defaultProps)for(re in ue=L.defaultProps,ue)we[re]===void 0&&(we[re]=ue[re]);return V(L,Ee,we)},rt.createRef=function(){return{current:null}},rt.forwardRef=function(L){return{$$typeof:c,render:L}},rt.isValidElement=Q,rt.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:J}},rt.memo=function(L,ne){return{$$typeof:h,type:L,compare:ne===void 0?null:ne}},rt.startTransition=function(L){var ne=E.T,ee={};E.T=ee;try{var re=L(),we=E.S;we!==null&&we(ee,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then($,Ae)}catch(Ee){Ae(Ee)}finally{ne!==null&&ee.types!==null&&(ne.types=ee.types),E.T=ne}},rt.unstable_useCacheRefresh=function(){return E.H.useCacheRefresh()},rt.use=function(L){return E.H.use(L)},rt.useActionState=function(L,ne,ee){return E.H.useActionState(L,ne,ee)},rt.useCallback=function(L,ne){return E.H.useCallback(L,ne)},rt.useContext=function(L){return E.H.useContext(L)},rt.useDebugValue=function(){},rt.useDeferredValue=function(L,ne){return E.H.useDeferredValue(L,ne)},rt.useEffect=function(L,ne){return E.H.useEffect(L,ne)},rt.useEffectEvent=function(L){return E.H.useEffectEvent(L)},rt.useId=function(){return E.H.useId()},rt.useImperativeHandle=function(L,ne,ee){return E.H.useImperativeHandle(L,ne,ee)},rt.useInsertionEffect=function(L,ne){return E.H.useInsertionEffect(L,ne)},rt.useLayoutEffect=function(L,ne){return E.H.useLayoutEffect(L,ne)},rt.useMemo=function(L,ne){return E.H.useMemo(L,ne)},rt.useOptimistic=function(L,ne){return E.H.useOptimistic(L,ne)},rt.useReducer=function(L,ne,ee){return E.H.useReducer(L,ne,ee)},rt.useRef=function(L){return E.H.useRef(L)},rt.useState=function(L){return E.H.useState(L)},rt.useSyncExternalStore=function(L,ne,ee){return E.H.useSyncExternalStore(L,ne,ee)},rt.useTransition=function(){return E.H.useTransition()},rt.version="19.2.4",rt}var yy;function Np(){return yy||(yy=1,Gh.exports=FS()),Gh.exports}var ye=Np();const Ir=a6(ye);var Vh={exports:{}},ru={},Fh={exports:{}},Yh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function YS(){return by||(by=1,function(e){function t(q,F){var J=q.length;q.push(F);e:for(;0<J;){var Ae=J-1>>>1,De=q[Ae];if(0<s(De,F))q[Ae]=F,q[J]=De,J=Ae;else break e}}function r(q){return q.length===0?null:q[0]}function a(q){if(q.length===0)return null;var F=q[0],J=q.pop();if(J!==F){q[0]=J;e:for(var Ae=0,De=q.length,L=De>>>1;Ae<L;){var ne=2*(Ae+1)-1,ee=q[ne],re=ne+1,we=q[re];if(0>s(ee,J))re<De&&0>s(we,ee)?(q[Ae]=we,q[re]=J,Ae=re):(q[Ae]=ee,q[ne]=J,Ae=ne);else if(re<De&&0>s(we,J))q[Ae]=we,q[re]=J,Ae=re;else break e}}return F}function s(q,F){var J=q.sortIndex-F.sortIndex;return J!==0?J:q.id-F.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var f=[],h=[],p=1,v=null,b=3,y=!1,k=!1,_=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function j(q){for(var F=r(h);F!==null;){if(F.callback===null)a(h);else if(F.startTime<=q)a(h),F.sortIndex=F.expirationTime,t(f,F);else break;F=r(h)}}function I(q){if(_=!1,j(q),!k)if(r(f)!==null)k=!0,$||($=!0,G());else{var F=r(h);F!==null&&ae(I,F.startTime-q)}}var $=!1,E=-1,D=5,V=-1;function de(){return T?!0:!(e.unstable_now()-V<D)}function Q(){if(T=!1,$){var q=e.unstable_now();V=q;var F=!0;try{e:{k=!1,_&&(_=!1,O(E),E=-1),y=!0;var J=b;try{t:{for(j(q),v=r(f);v!==null&&!(v.expirationTime>q&&de());){var Ae=v.callback;if(typeof Ae=="function"){v.callback=null,b=v.priorityLevel;var De=Ae(v.expirationTime<=q);if(q=e.unstable_now(),typeof De=="function"){v.callback=De,j(q),F=!0;break t}v===r(f)&&a(f),j(q)}else a(f);v=r(f)}if(v!==null)F=!0;else{var L=r(h);L!==null&&ae(I,L.startTime-q),F=!1}}break e}finally{v=null,b=J,y=!1}F=void 0}}finally{F?G():$=!1}}}var G;if(typeof M=="function")G=function(){M(Q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,K=X.port2;X.port1.onmessage=Q,G=function(){K.postMessage(null)}}else G=function(){R(Q,0)};function ae(q,F){E=R(function(){q(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(q){q.callback=null},e.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<q?Math.floor(1e3/q):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(q){switch(b){case 1:case 2:case 3:var F=3;break;default:F=b}var J=b;b=F;try{return q()}finally{b=J}},e.unstable_requestPaint=function(){T=!0},e.unstable_runWithPriority=function(q,F){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var J=b;b=q;try{return F()}finally{b=J}},e.unstable_scheduleCallback=function(q,F,J){var Ae=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Ae+J:Ae):J=Ae,q){case 1:var De=-1;break;case 2:De=250;break;case 5:De=1073741823;break;case 4:De=1e4;break;default:De=5e3}return De=J+De,q={id:p++,callback:F,priorityLevel:q,startTime:J,expirationTime:De,sortIndex:-1},J>Ae?(q.sortIndex=J,t(h,q),r(f)===null&&q===r(h)&&(_?(O(E),E=-1):_=!0,ae(I,J-Ae))):(q.sortIndex=De,t(f,q),k||y||(k=!0,$||($=!0,G()))),q},e.unstable_shouldYield=de,e.unstable_wrapCallback=function(q){var F=b;return function(){var J=b;b=F;try{return q.apply(this,arguments)}finally{b=J}}}}(Yh)),Yh}var xy;function XS(){return xy||(xy=1,Fh.exports=YS()),Fh.exports}var Xh={exports:{}},Fr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function KS(){if(wy)return Fr;wy=1;var e=Np();function t(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)h+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var a={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(f,h,p){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:v==null?null:""+v,children:f,containerInfo:h,implementation:p}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Fr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Fr.createPortal=function(f,h){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(f,h,null,p)},Fr.flushSync=function(f){var h=u.T,p=a.p;try{if(u.T=null,a.p=2,f)return f()}finally{u.T=h,a.p=p,a.d.f()}},Fr.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(f,h))},Fr.prefetchDNS=function(f){typeof f=="string"&&a.d.D(f)},Fr.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var p=h.as,v=c(p,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,y=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;p==="style"?a.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:y}):p==="script"&&a.d.X(f,{crossOrigin:v,integrity:b,fetchPriority:y,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Fr.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var p=c(h.as,h.crossOrigin);a.d.M(f,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(f)},Fr.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var p=h.as,v=c(p,h.crossOrigin);a.d.L(f,p,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Fr.preloadModule=function(f,h){if(typeof f=="string")if(h){var p=c(h.as,h.crossOrigin);a.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(f)},Fr.requestFormReset=function(f){a.d.r(f)},Fr.unstable_batchedUpdates=function(f,h){return f(h)},Fr.useFormState=function(f,h,p){return u.H.useFormState(f,h,p)},Fr.useFormStatus=function(){return u.H.useHostTransitionStatus()},Fr.version="19.2.4",Fr}var Sy;function n6(){if(Sy)return Xh.exports;Sy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Xh.exports=KS(),Xh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function JS(){if(_y)return ru;_y=1;var e=XS(),t=Np(),r=n6();function a(n){var i="https://react.dev/errors/"+n;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)i+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var i=n,l=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(l=i.return),n=i.return;while(n)}return i.tag===3?l:null}function u(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function c(n){if(n.tag===31){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function f(n){if(o(n)!==n)throw Error(a(188))}function h(n){var i=n.alternate;if(!i){if(i=o(n),i===null)throw Error(a(188));return i!==n?null:n}for(var l=n,d=i;;){var m=l.return;if(m===null)break;var g=m.alternate;if(g===null){if(d=m.return,d!==null){l=d;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===l)return f(m),n;if(g===d)return f(m),i;g=g.sibling}throw Error(a(188))}if(l.return!==d.return)l=m,d=g;else{for(var z=!1,N=m.child;N;){if(N===l){z=!0,l=m,d=g;break}if(N===d){z=!0,d=m,l=g;break}N=N.sibling}if(!z){for(N=g.child;N;){if(N===l){z=!0,l=g,d=m;break}if(N===d){z=!0,d=g,l=m;break}N=N.sibling}if(!z)throw Error(a(189))}}if(l.alternate!==d)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?n:i}function p(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n;for(n=n.child;n!==null;){if(i=p(n),i!==null)return i;n=n.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.consumer"),M=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function G(n){return n===null||typeof n!="object"?null:(n=Q&&n[Q]||n["@@iterator"],typeof n=="function"?n:null)}var X=Symbol.for("react.client.reference");function K(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===X?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case R:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case $:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case k:return"Portal";case M:return n.displayName||"Context";case O:return(n._context.displayName||"Context")+".Consumer";case j:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case E:return i=n.displayName||null,i!==null?i:K(n.type)||"Memo";case D:i=n._payload,n=n._init;try{return K(n(i))}catch{}}return null}var ae=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Ae=[],De=-1;function L(n){return{current:n}}function ne(n){0>De||(n.current=Ae[De],Ae[De]=null,De--)}function ee(n,i){De++,Ae[De]=n.current,n.current=i}var re=L(null),we=L(null),Ee=L(null),ue=L(null);function Ce(n,i){switch(ee(Ee,i),ee(we,n),ee(re,null),i.nodeType){case 9:case 11:n=(n=i.documentElement)&&(n=n.namespaceURI)?B4(n):0;break;default:if(n=i.tagName,i=i.namespaceURI)i=B4(i),n=L4(i,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ne(re),ee(re,n)}function H(){ne(re),ne(we),ne(Ee)}function oe(n){n.memoizedState!==null&&ee(ue,n);var i=re.current,l=L4(i,n.type);i!==l&&(ee(we,n),ee(re,l))}function ge(n){we.current===n&&(ne(re),ne(we)),ue.current===n&&(ne(ue),Jl._currentValue=J)}var Me,_e;function je(n){if(Me===void 0)try{throw Error()}catch(l){var i=l.stack.trim().match(/\n( *(at )?)/);Me=i&&i[1]||"",_e=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Me+n+_e}var Ye=!1;function qe(n,i){if(!n||Ye)return"";Ye=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(i){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(fe){var ce=fe}Reflect.construct(n,[],ve)}else{try{ve.call()}catch(fe){ce=fe}n.call(ve.prototype)}}else{try{throw Error()}catch(fe){ce=fe}(ve=n())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(fe){if(fe&&ce&&typeof fe.stack=="string")return[fe.stack,ce.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=d.DetermineComponentFrameRoot(),z=g[0],N=g[1];if(z&&N){var P=z.split(`
`),le=N.split(`
`);for(m=d=0;d<P.length&&!P[d].includes("DetermineComponentFrameRoot");)d++;for(;m<le.length&&!le[m].includes("DetermineComponentFrameRoot");)m++;if(d===P.length||m===le.length)for(d=P.length-1,m=le.length-1;1<=d&&0<=m&&P[d]!==le[m];)m--;for(;1<=d&&0<=m;d--,m--)if(P[d]!==le[m]){if(d!==1||m!==1)do if(d--,m--,0>m||P[d]!==le[m]){var me=`
`+P[d].replace(" at new "," at ");return n.displayName&&me.includes("<anonymous>")&&(me=me.replace("<anonymous>",n.displayName)),me}while(1<=d&&0<=m);break}}}finally{Ye=!1,Error.prepareStackTrace=l}return(l=n?n.displayName||n.name:"")?je(l):""}function ct(n,i){switch(n.tag){case 26:case 27:case 5:return je(n.type);case 16:return je("Lazy");case 13:return n.child!==i&&i!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return qe(n.type,!1);case 11:return qe(n.type.render,!1);case 1:return qe(n.type,!0);case 31:return je("Activity");default:return""}}function nt(n){try{var i="",l=null;do i+=ct(n,l),l=n,n=n.return;while(n);return i}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var dt=Object.prototype.hasOwnProperty,Gt=e.unstable_scheduleCallback,jt=e.unstable_cancelCallback,ht=e.unstable_shouldYield,ur=e.unstable_requestPaint,nr=e.unstable_now,Re=e.unstable_getCurrentPriorityLevel,Ot=e.unstable_ImmediatePriority,rn=e.unstable_UserBlockingPriority,mn=e.unstable_NormalPriority,Ys=e.unstable_LowPriority,Kr=e.unstable_IdlePriority,Xs=e.log,jr=e.unstable_setDisableYieldValue,pr=null,St=null;function ya(n){if(typeof Xs=="function"&&jr(n),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(pr,n)}catch{}}var Vr=Math.clz32?Math.clz32:Lu,mi=Math.log,Dd=Math.LN2;function Lu(n){return n>>>=0,n===0?32:31-(mi(n)/Dd|0)|0}var ls=256,pn=262144,Mr=4194304;function ia(n){var i=n&42;if(i!==0)return i;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function us(n,i,l){var d=n.pendingLanes;if(d===0)return 0;var m=0,g=n.suspendedLanes,z=n.pingedLanes;n=n.warmLanes;var N=d&134217727;return N!==0?(d=N&~g,d!==0?m=ia(d):(z&=N,z!==0?m=ia(z):l||(l=N&~n,l!==0&&(m=ia(l))))):(N=d&~g,N!==0?m=ia(N):z!==0?m=ia(z):l||(l=d&~n,l!==0&&(m=ia(l)))),m===0?0:i!==0&&i!==m&&(i&g)===0&&(g=m&-m,l=i&-i,g>=l||g===32&&(l&4194048)!==0)?i:m}function On(n,i){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&i)===0}function ul(n,i){switch(n){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uu(){var n=Mr;return Mr<<=1,(Mr&62914560)===0&&(Mr=4194304),n}function cl(n){for(var i=[],l=0;31>l;l++)i.push(n);return i}function pi(n,i){n.pendingLanes|=i,i!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function qu(n,i,l,d,m,g){var z=n.pendingLanes;n.pendingLanes=l,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=l,n.entangledLanes&=l,n.errorRecoveryDisabledLanes&=l,n.shellSuspendCounter=0;var N=n.entanglements,P=n.expirationTimes,le=n.hiddenUpdates;for(l=z&~l;0<l;){var me=31-Vr(l),ve=1<<me;N[me]=0,P[me]=-1;var ce=le[me];if(ce!==null)for(le[me]=null,me=0;me<ce.length;me++){var fe=ce[me];fe!==null&&(fe.lane&=-536870913)}l&=~ve}d!==0&&Rn(n,d,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(z&~i))}function Rn(n,i,l){n.pendingLanes|=i,n.suspendedLanes&=~i;var d=31-Vr(i);n.entangledLanes|=i,n.entanglements[d]=n.entanglements[d]|1073741824|l&261930}function dl(n,i){var l=n.entangledLanes|=i;for(n=n.entanglements;l;){var d=31-Vr(l),m=1<<d;m&i|n[d]&i&&(n[d]|=i),l&=~m}}function Pu(n,i){var l=i&-i;return l=(l&42)!==0?1:fl(l),(l&(n.suspendedLanes|i))!==0?0:l}function fl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function In(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function gi(){var n=F.p;return n!==0?n:(n=window.event,n===void 0?32:ly(n.type))}function Ks(n,i){var l=F.p;try{return F.p=n,i()}finally{F.p=l}}var Da=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Da,$r="__reactProps$"+Da,Br="__reactContainer$"+Da,cs="__reactEvents$"+Da,Hu="__reactListeners$"+Da,ja="__reactHandles$"+Da,hl="__reactResources$"+Da,Ze="__reactMarker$"+Da;function gr(n){delete n[Wt],delete n[$r],delete n[cs],delete n[Hu],delete n[ja]}function $a(n){var i=n[Wt];if(i)return i;for(var l=n.parentNode;l;){if(i=l[Br]||l[Wt]){if(l=i.alternate,i.child!==null||l!==null&&l.child!==null)for(n=V4(n);n!==null;){if(l=n[Wt])return l;n=V4(n)}return i}n=l,l=n.parentNode}return null}function Ba(n){if(n=n[Wt]||n[Br]){var i=n.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return n}return null}function gn(n){var i=n.tag;if(i===5||i===26||i===27||i===6)return n.stateNode;throw Error(a(33))}function Lt(n){var i=n[hl];return i||(i=n[hl]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Vt(n){n[Ze]=!0}var Js=new Set,Qt={};function an(n,i){Ws(n,i),Ws(n+"Capture",i)}function Ws(n,i){for(Qt[n]=i,n=0;n<i.length;n++)Js.add(i[n])}var jw=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),E1={},M1={};function $w(n){return dt.call(M1,n)?!0:dt.call(E1,n)?!1:jw.test(n)?M1[n]=!0:(E1[n]=!0,!1)}function Zu(n,i,l){if($w(i))if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":n.removeAttribute(i);return;case"boolean":var d=i.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){n.removeAttribute(i);return}}n.setAttribute(i,""+l)}}function Gu(n,i,l){if(l===null)n.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(i);return}n.setAttribute(i,""+l)}}function Dn(n,i,l,d){if(d===null)n.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttributeNS(i,l,""+d)}}function La(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function N1(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Bw(n,i,l){var d=Object.getOwnPropertyDescriptor(n.constructor.prototype,i);if(!n.hasOwnProperty(i)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var m=d.get,g=d.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return m.call(this)},set:function(z){l=""+z,g.call(this,z)}}),Object.defineProperty(n,i,{enumerable:d.enumerable}),{getValue:function(){return l},setValue:function(z){l=""+z},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function jd(n){if(!n._valueTracker){var i=N1(n)?"checked":"value";n._valueTracker=Bw(n,i,""+n[i])}}function C1(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var l=i.getValue(),d="";return n&&(d=N1(n)?n.checked?"true":"false":n.value),n=d,n!==l?(i.setValue(n),!0):!1}function Vu(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Lw=/[\n"\\]/g;function Ua(n){return n.replace(Lw,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function $d(n,i,l,d,m,g,z,N){n.name="",z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"?n.type=z:n.removeAttribute("type"),i!=null?z==="number"?(i===0&&n.value===""||n.value!=i)&&(n.value=""+La(i)):n.value!==""+La(i)&&(n.value=""+La(i)):z!=="submit"&&z!=="reset"||n.removeAttribute("value"),i!=null?Bd(n,z,La(i)):l!=null?Bd(n,z,La(l)):d!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?n.name=""+La(N):n.removeAttribute("name")}function O1(n,i,l,d,m,g,z,N){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),i!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){jd(n);return}l=l!=null?""+La(l):"",i=i!=null?""+La(i):l,N||i===n.value||(n.value=i),n.defaultValue=i}d=d??m,d=typeof d!="function"&&typeof d!="symbol"&&!!d,n.checked=N?n.checked:!!d,n.defaultChecked=!!d,z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(n.name=z),jd(n)}function Bd(n,i,l){i==="number"&&Vu(n.ownerDocument)===n||n.defaultValue===""+l||(n.defaultValue=""+l)}function Qs(n,i,l,d){if(n=n.options,i){i={};for(var m=0;m<l.length;m++)i["$"+l[m]]=!0;for(l=0;l<n.length;l++)m=i.hasOwnProperty("$"+n[l].value),n[l].selected!==m&&(n[l].selected=m),m&&d&&(n[l].defaultSelected=!0)}else{for(l=""+La(l),i=null,m=0;m<n.length;m++){if(n[m].value===l){n[m].selected=!0,d&&(n[m].defaultSelected=!0);return}i!==null||n[m].disabled||(i=n[m])}i!==null&&(i.selected=!0)}}function R1(n,i,l){if(i!=null&&(i=""+La(i),i!==n.value&&(n.value=i),l==null)){n.defaultValue!==i&&(n.defaultValue=i);return}n.defaultValue=l!=null?""+La(l):""}function I1(n,i,l,d){if(i==null){if(d!=null){if(l!=null)throw Error(a(92));if(ae(d)){if(1<d.length)throw Error(a(93));d=d[0]}l=d}l==null&&(l=""),i=l}l=La(i),n.defaultValue=l,d=n.textContent,d===l&&d!==""&&d!==null&&(n.value=d),jd(n)}function eo(n,i){if(i){var l=n.firstChild;if(l&&l===n.lastChild&&l.nodeType===3){l.nodeValue=i;return}}n.textContent=i}var Uw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function D1(n,i,l){var d=i.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?d?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="":d?n.setProperty(i,l):typeof l!="number"||l===0||Uw.has(i)?i==="float"?n.cssFloat=l:n[i]=(""+l).trim():n[i]=l+"px"}function j1(n,i,l){if(i!=null&&typeof i!="object")throw Error(a(62));if(n=n.style,l!=null){for(var d in l)!l.hasOwnProperty(d)||i!=null&&i.hasOwnProperty(d)||(d.indexOf("--")===0?n.setProperty(d,""):d==="float"?n.cssFloat="":n[d]="");for(var m in i)d=i[m],i.hasOwnProperty(m)&&l[m]!==d&&D1(n,m,d)}else for(var g in i)i.hasOwnProperty(g)&&D1(n,g,i[g])}function Ld(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qw=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pw=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fu(n){return Pw.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function jn(){}var Ud=null;function qd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var to=null,ro=null;function $1(n){var i=Ba(n);if(i&&(n=i.stateNode)){var l=n[$r]||null;e:switch(n=i.stateNode,i.type){case"input":if($d(n,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),i=l.name,l.type==="radio"&&i!=null){for(l=n;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ua(""+i)+'"][type="radio"]'),i=0;i<l.length;i++){var d=l[i];if(d!==n&&d.form===n.form){var m=d[$r]||null;if(!m)throw Error(a(90));$d(d,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(i=0;i<l.length;i++)d=l[i],d.form===n.form&&C1(d)}break e;case"textarea":R1(n,l.value,l.defaultValue);break e;case"select":i=l.value,i!=null&&Qs(n,!!l.multiple,i,!1)}}}var Pd=!1;function B1(n,i,l){if(Pd)return n(i,l);Pd=!0;try{var d=n(i);return d}finally{if(Pd=!1,(to!==null||ro!==null)&&(I0(),to&&(i=to,n=ro,ro=to=null,$1(i),n)))for(i=0;i<n.length;i++)$1(n[i])}}function ml(n,i){var l=n.stateNode;if(l===null)return null;var d=l[$r]||null;if(d===null)return null;l=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(n=n.type,d=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!d;break e;default:n=!1}if(n)return null;if(l&&typeof l!="function")throw Error(a(231,i,typeof l));return l}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Hd=!1;if($n)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Hd=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Hd=!1}var vi=null,Zd=null,Yu=null;function L1(){if(Yu)return Yu;var n,i=Zd,l=i.length,d,m="value"in vi?vi.value:vi.textContent,g=m.length;for(n=0;n<l&&i[n]===m[n];n++);var z=l-n;for(d=1;d<=z&&i[l-d]===m[g-d];d++);return Yu=m.slice(n,1<d?1-d:void 0)}function Xu(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function Ku(){return!0}function U1(){return!1}function sa(n){function i(l,d,m,g,z){this._reactName=l,this._targetInst=m,this.type=d,this.nativeEvent=g,this.target=z,this.currentTarget=null;for(var N in n)n.hasOwnProperty(N)&&(l=n[N],this[N]=l?l(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ku:U1,this.isPropagationStopped=U1,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ku)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ku)},persist:function(){},isPersistent:Ku}),i}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=sa(ds),gl=v({},ds,{view:0,detail:0}),Hw=sa(gl),Gd,Vd,vl,Wu=v({},gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vl&&(vl&&n.type==="mousemove"?(Gd=n.screenX-vl.screenX,Vd=n.screenY-vl.screenY):Vd=Gd=0,vl=n),Gd)},movementY:function(n){return"movementY"in n?n.movementY:Vd}}),q1=sa(Wu),Zw=v({},Wu,{dataTransfer:0}),Gw=sa(Zw),Vw=v({},gl,{relatedTarget:0}),Fd=sa(Vw),Fw=v({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),Yw=sa(Fw),Xw=v({},ds,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Kw=sa(Xw),Jw=v({},ds,{data:0}),P1=sa(Jw),Ww={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t9(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=e9[n])?!!i[n]:!1}function Yd(){return t9}var r9=v({},gl,{key:function(n){if(n.key){var i=Ww[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Xu(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Qw[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(n){return n.type==="keypress"?Xu(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Xu(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),a9=sa(r9),n9=v({},Wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=sa(n9),i9=v({},gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),s9=sa(i9),o9=v({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),l9=sa(o9),u9=v({},Wu,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),c9=sa(u9),d9=v({},ds,{newState:0,oldState:0}),f9=sa(d9),h9=[9,13,27,32],Xd=$n&&"CompositionEvent"in window,yl=null;$n&&"documentMode"in document&&(yl=document.documentMode);var m9=$n&&"TextEvent"in window&&!yl,Z1=$n&&(!Xd||yl&&8<yl&&11>=yl),G1=" ",V1=!1;function F1(n,i){switch(n){case"keyup":return h9.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y1(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ao=!1;function p9(n,i){switch(n){case"compositionend":return Y1(i);case"keypress":return i.which!==32?null:(V1=!0,G1);case"textInput":return n=i.data,n===G1&&V1?null:n;default:return null}}function g9(n,i){if(ao)return n==="compositionend"||!Xd&&F1(n,i)?(n=L1(),Yu=Zd=vi=null,ao=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Z1&&i.locale!=="ko"?null:i.data;default:return null}}var v9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X1(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!v9[n.type]:i==="textarea"}function K1(n,i,l,d){to?ro?ro.push(d):ro=[d]:to=d,i=q0(i,"onChange"),0<i.length&&(l=new Ju("onChange","change",null,l,d),n.push({event:l,listeners:i}))}var bl=null,xl=null;function y9(n){O4(n,0)}function Qu(n){var i=gn(n);if(C1(i))return n}function J1(n,i){if(n==="change")return i}var W1=!1;if($n){var Kd;if($n){var Jd="oninput"in document;if(!Jd){var Q1=document.createElement("div");Q1.setAttribute("oninput","return;"),Jd=typeof Q1.oninput=="function"}Kd=Jd}else Kd=!1;W1=Kd&&(!document.documentMode||9<document.documentMode)}function eg(){bl&&(bl.detachEvent("onpropertychange",tg),xl=bl=null)}function tg(n){if(n.propertyName==="value"&&Qu(xl)){var i=[];K1(i,xl,n,qd(n)),B1(y9,i)}}function b9(n,i,l){n==="focusin"?(eg(),bl=i,xl=l,bl.attachEvent("onpropertychange",tg)):n==="focusout"&&eg()}function x9(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Qu(xl)}function w9(n,i){if(n==="click")return Qu(i)}function S9(n,i){if(n==="input"||n==="change")return Qu(i)}function _9(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var ba=typeof Object.is=="function"?Object.is:_9;function wl(n,i){if(ba(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var l=Object.keys(n),d=Object.keys(i);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var m=l[d];if(!dt.call(i,m)||!ba(n[m],i[m]))return!1}return!0}function rg(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ag(n,i){var l=rg(n);n=0;for(var d;l;){if(l.nodeType===3){if(d=n+l.textContent.length,n<=i&&d>=i)return{node:l,offset:i-n};n=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=rg(l)}}function ng(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?ng(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function ig(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var i=Vu(n.document);i instanceof n.HTMLIFrameElement;){try{var l=typeof i.contentWindow.location.href=="string"}catch{l=!1}if(l)n=i.contentWindow;else break;i=Vu(n.document)}return i}function Wd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}var z9=$n&&"documentMode"in document&&11>=document.documentMode,no=null,Qd=null,Sl=null,ef=!1;function sg(n,i,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ef||no==null||no!==Vu(d)||(d=no,"selectionStart"in d&&Wd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Sl&&wl(Sl,d)||(Sl=d,d=q0(Qd,"onSelect"),0<d.length&&(i=new Ju("onSelect","select",null,i,l),n.push({event:i,listeners:d}),i.target=no)))}function fs(n,i){var l={};return l[n.toLowerCase()]=i.toLowerCase(),l["Webkit"+n]="webkit"+i,l["Moz"+n]="moz"+i,l}var io={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},tf={},og={};$n&&(og=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function hs(n){if(tf[n])return tf[n];if(!io[n])return n;var i=io[n],l;for(l in i)if(i.hasOwnProperty(l)&&l in og)return tf[n]=i[l];return n}var lg=hs("animationend"),ug=hs("animationiteration"),cg=hs("animationstart"),k9=hs("transitionrun"),T9=hs("transitionstart"),A9=hs("transitioncancel"),dg=hs("transitionend"),fg=new Map,rf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rf.push("scrollEnd");function nn(n,i){fg.set(n,i),an(i,[n])}var e0=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},qa=[],so=0,af=0;function t0(){for(var n=so,i=af=so=0;i<n;){var l=qa[i];qa[i++]=null;var d=qa[i];qa[i++]=null;var m=qa[i];qa[i++]=null;var g=qa[i];if(qa[i++]=null,d!==null&&m!==null){var z=d.pending;z===null?m.next=m:(m.next=z.next,z.next=m),d.pending=m}g!==0&&hg(l,m,g)}}function r0(n,i,l,d){qa[so++]=n,qa[so++]=i,qa[so++]=l,qa[so++]=d,af|=d,n.lanes|=d,n=n.alternate,n!==null&&(n.lanes|=d)}function nf(n,i,l,d){return r0(n,i,l,d),a0(n)}function ms(n,i){return r0(n,null,null,i),a0(n)}function hg(n,i,l){n.lanes|=l;var d=n.alternate;d!==null&&(d.lanes|=l);for(var m=!1,g=n.return;g!==null;)g.childLanes|=l,d=g.alternate,d!==null&&(d.childLanes|=l),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&i!==null&&(m=31-Vr(l),n=g.hiddenUpdates,d=n[m],d===null?n[m]=[i]:d.push(i),i.lane=l|536870912),g):null}function a0(n){if(50<Zl)throw Zl=0,mh=null,Error(a(185));for(var i=n.return;i!==null;)n=i,i=n.return;return n.tag===3?n.stateNode:null}var oo={};function E9(n,i,l,d){this.tag=n,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xa(n,i,l,d){return new E9(n,i,l,d)}function sf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Bn(n,i){var l=n.alternate;return l===null?(l=xa(n.tag,i,n.key,n.mode),l.elementType=n.elementType,l.type=n.type,l.stateNode=n.stateNode,l.alternate=n,n.alternate=l):(l.pendingProps=i,l.type=n.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=n.flags&65011712,l.childLanes=n.childLanes,l.lanes=n.lanes,l.child=n.child,l.memoizedProps=n.memoizedProps,l.memoizedState=n.memoizedState,l.updateQueue=n.updateQueue,i=n.dependencies,l.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},l.sibling=n.sibling,l.index=n.index,l.ref=n.ref,l.refCleanup=n.refCleanup,l}function mg(n,i){n.flags&=65011714;var l=n.alternate;return l===null?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=l.childLanes,n.lanes=l.lanes,n.child=l.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=l.memoizedProps,n.memoizedState=l.memoizedState,n.updateQueue=l.updateQueue,n.type=l.type,i=l.dependencies,n.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),n}function n0(n,i,l,d,m,g){var z=0;if(d=n,typeof n=="function")sf(n)&&(z=1);else if(typeof n=="string")z=RS(n,l,re.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=xa(31,l,i,m),n.elementType=V,n.lanes=g,n;case _:return ps(l.children,m,g,i);case T:z=8,m|=24;break;case R:return n=xa(12,l,i,m|2),n.elementType=R,n.lanes=g,n;case I:return n=xa(13,l,i,m),n.elementType=I,n.lanes=g,n;case $:return n=xa(19,l,i,m),n.elementType=$,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case M:z=10;break e;case O:z=9;break e;case j:z=11;break e;case E:z=14;break e;case D:z=16,d=null;break e}z=29,l=Error(a(130,n===null?"null":typeof n,"")),d=null}return i=xa(z,l,i,m),i.elementType=n,i.type=d,i.lanes=g,i}function ps(n,i,l,d){return n=xa(7,n,d,i),n.lanes=l,n}function of(n,i,l){return n=xa(6,n,null,i),n.lanes=l,n}function pg(n){var i=xa(18,null,null,0);return i.stateNode=n,i}function lf(n,i,l){return i=xa(4,n.children!==null?n.children:[],n.key,i),i.lanes=l,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}var gg=new WeakMap;function Pa(n,i){if(typeof n=="object"&&n!==null){var l=gg.get(n);return l!==void 0?l:(i={value:n,source:i,stack:nt(i)},gg.set(n,i),i)}return{value:n,source:i,stack:nt(i)}}var lo=[],uo=0,i0=null,_l=0,Ha=[],Za=0,yi=null,vn=1,yn="";function Ln(n,i){lo[uo++]=_l,lo[uo++]=i0,i0=n,_l=i}function vg(n,i,l){Ha[Za++]=vn,Ha[Za++]=yn,Ha[Za++]=yi,yi=n;var d=vn;n=yn;var m=32-Vr(d)-1;d&=~(1<<m),l+=1;var g=32-Vr(i)+m;if(30<g){var z=m-m%5;g=(d&(1<<z)-1).toString(32),d>>=z,m-=z,vn=1<<32-Vr(i)+m|l<<m|d,yn=g+n}else vn=1<<g|l<<m|d,yn=n}function uf(n){n.return!==null&&(Ln(n,1),vg(n,1,0))}function cf(n){for(;n===i0;)i0=lo[--uo],lo[uo]=null,_l=lo[--uo],lo[uo]=null;for(;n===yi;)yi=Ha[--Za],Ha[Za]=null,yn=Ha[--Za],Ha[Za]=null,vn=Ha[--Za],Ha[Za]=null}function yg(n,i){Ha[Za++]=vn,Ha[Za++]=yn,Ha[Za++]=yi,vn=i.id,yn=i.overflow,yi=n}var qr=null,Ft=null,bt=!1,bi=null,Ga=!1,df=Error(a(519));function xi(n){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw zl(Pa(i,n)),df}function bg(n){var i=n.stateNode,l=n.type,d=n.memoizedProps;switch(i[Wt]=n,i[$r]=d,l){case"dialog":pt("cancel",i),pt("close",i);break;case"iframe":case"object":case"embed":pt("load",i);break;case"video":case"audio":for(l=0;l<Vl.length;l++)pt(Vl[l],i);break;case"source":pt("error",i);break;case"img":case"image":case"link":pt("error",i),pt("load",i);break;case"details":pt("toggle",i);break;case"input":pt("invalid",i),O1(i,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":pt("invalid",i);break;case"textarea":pt("invalid",i),I1(i,d.value,d.defaultValue,d.children)}l=d.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||i.textContent===""+l||d.suppressHydrationWarning===!0||j4(i.textContent,l)?(d.popover!=null&&(pt("beforetoggle",i),pt("toggle",i)),d.onScroll!=null&&pt("scroll",i),d.onScrollEnd!=null&&pt("scrollend",i),d.onClick!=null&&(i.onclick=jn),i=!0):i=!1,i||xi(n,!0)}function xg(n){for(qr=n.return;qr;)switch(qr.tag){case 5:case 31:case 13:Ga=!1;return;case 27:case 3:Ga=!0;return;default:qr=qr.return}}function co(n){if(n!==qr)return!1;if(!bt)return xg(n),bt=!0,!1;var i=n.tag,l;if((l=i!==3&&i!==27)&&((l=i===5)&&(l=n.type,l=!(l!=="form"&&l!=="button")||Mh(n.type,n.memoizedProps)),l=!l),l&&Ft&&xi(n),xg(n),i===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ft=G4(n)}else if(i===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(317));Ft=G4(n)}else i===27?(i=Ft,Ii(n.type)?(n=Ih,Ih=null,Ft=n):Ft=i):Ft=qr?Fa(n.stateNode.nextSibling):null;return!0}function gs(){Ft=qr=null,bt=!1}function ff(){var n=bi;return n!==null&&(ca===null?ca=n:ca.push.apply(ca,n),bi=null),n}function zl(n){bi===null?bi=[n]:bi.push(n)}var hf=L(null),vs=null,Un=null;function wi(n,i,l){ee(hf,i._currentValue),i._currentValue=l}function qn(n){n._currentValue=hf.current,ne(hf)}function mf(n,i,l){for(;n!==null;){var d=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),n===l)break;n=n.return}}function pf(n,i,l,d){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var z=m.child;g=g.firstContext;e:for(;g!==null;){var N=g;g=m;for(var P=0;P<i.length;P++)if(N.context===i[P]){g.lanes|=l,N=g.alternate,N!==null&&(N.lanes|=l),mf(g.return,l,n),d||(z=null);break e}g=N.next}}else if(m.tag===18){if(z=m.return,z===null)throw Error(a(341));z.lanes|=l,g=z.alternate,g!==null&&(g.lanes|=l),mf(z,l,n),z=null}else z=m.child;if(z!==null)z.return=m;else for(z=m;z!==null;){if(z===n){z=null;break}if(m=z.sibling,m!==null){m.return=z.return,z=m;break}z=z.return}m=z}}function fo(n,i,l,d){n=null;for(var m=i,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var z=m.alternate;if(z===null)throw Error(a(387));if(z=z.memoizedProps,z!==null){var N=m.type;ba(m.pendingProps.value,z.value)||(n!==null?n.push(N):n=[N])}}else if(m===ue.current){if(z=m.alternate,z===null)throw Error(a(387));z.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Jl):n=[Jl])}m=m.return}n!==null&&pf(i,n,l,d),i.flags|=262144}function s0(n){for(n=n.firstContext;n!==null;){if(!ba(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ys(n){vs=n,Un=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Pr(n){return wg(vs,n)}function o0(n,i){return vs===null&&ys(n),wg(n,i)}function wg(n,i){var l=i._currentValue;if(i={context:i,memoizedValue:l,next:null},Un===null){if(n===null)throw Error(a(308));Un=i,n.dependencies={lanes:0,firstContext:i},n.flags|=524288}else Un=Un.next=i;return l}var M9=typeof AbortController<"u"?AbortController:function(){var n=[],i=this.signal={aborted:!1,addEventListener:function(l,d){n.push(d)}};this.abort=function(){i.aborted=!0,n.forEach(function(l){return l()})}},N9=e.unstable_scheduleCallback,C9=e.unstable_NormalPriority,wr={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gf(){return{controller:new M9,data:new Map,refCount:0}}function kl(n){n.refCount--,n.refCount===0&&N9(C9,function(){n.controller.abort()})}var Tl=null,vf=0,ho=0,mo=null;function O9(n,i){if(Tl===null){var l=Tl=[];vf=0,ho=xh(),mo={status:"pending",value:void 0,then:function(d){l.push(d)}}}return vf++,i.then(Sg,Sg),i}function Sg(){if(--vf===0&&Tl!==null){mo!==null&&(mo.status="fulfilled");var n=Tl;Tl=null,ho=0,mo=null;for(var i=0;i<n.length;i++)(0,n[i])()}}function R9(n,i){var l=[],d={status:"pending",value:null,reason:null,then:function(m){l.push(m)}};return n.then(function(){d.status="fulfilled",d.value=i;for(var m=0;m<l.length;m++)(0,l[m])(i)},function(m){for(d.status="rejected",d.reason=m,m=0;m<l.length;m++)(0,l[m])(void 0)}),d}var _g=q.S;q.S=function(n,i){s4=nr(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&O9(n,i),_g!==null&&_g(n,i)};var bs=L(null);function yf(){var n=bs.current;return n!==null?n:$t.pooledCache}function l0(n,i){i===null?ee(bs,bs.current):ee(bs,i.pool)}function zg(){var n=yf();return n===null?null:{parent:wr._currentValue,pool:n}}var po=Error(a(460)),bf=Error(a(474)),u0=Error(a(542)),c0={then:function(){}};function kg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Tg(n,i,l){switch(l=n[l],l===void 0?n.push(i):l!==i&&(i.then(jn,jn),i=l),i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Eg(n),n;default:if(typeof i.status=="string")i.then(jn,jn);else{if(n=$t,n!==null&&100<n.shellSuspendCounter)throw Error(a(482));n=i,n.status="pending",n.then(function(d){if(i.status==="pending"){var m=i;m.status="fulfilled",m.value=d}},function(d){if(i.status==="pending"){var m=i;m.status="rejected",m.reason=d}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw n=i.reason,Eg(n),n}throw ws=i,po}}function xs(n){try{var i=n._init;return i(n._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(ws=l,po):l}}var ws=null;function Ag(){if(ws===null)throw Error(a(459));var n=ws;return ws=null,n}function Eg(n){if(n===po||n===u0)throw Error(a(483))}var go=null,Al=0;function d0(n){var i=Al;return Al+=1,go===null&&(go=[]),Tg(go,n,i)}function El(n,i){i=i.props.ref,n.ref=i!==void 0?i:null}function f0(n,i){throw i.$$typeof===b?Error(a(525)):(n=Object.prototype.toString.call(i),Error(a(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)))}function Mg(n){function i(te,Z){if(n){var ie=te.deletions;ie===null?(te.deletions=[Z],te.flags|=16):ie.push(Z)}}function l(te,Z){if(!n)return null;for(;Z!==null;)i(te,Z),Z=Z.sibling;return null}function d(te){for(var Z=new Map;te!==null;)te.key!==null?Z.set(te.key,te):Z.set(te.index,te),te=te.sibling;return Z}function m(te,Z){return te=Bn(te,Z),te.index=0,te.sibling=null,te}function g(te,Z,ie){return te.index=ie,n?(ie=te.alternate,ie!==null?(ie=ie.index,ie<Z?(te.flags|=67108866,Z):ie):(te.flags|=67108866,Z)):(te.flags|=1048576,Z)}function z(te){return n&&te.alternate===null&&(te.flags|=67108866),te}function N(te,Z,ie,pe){return Z===null||Z.tag!==6?(Z=of(ie,te.mode,pe),Z.return=te,Z):(Z=m(Z,ie),Z.return=te,Z)}function P(te,Z,ie,pe){var Ge=ie.type;return Ge===_?me(te,Z,ie.props.children,pe,ie.key):Z!==null&&(Z.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===D&&xs(Ge)===Z.type)?(Z=m(Z,ie.props),El(Z,ie),Z.return=te,Z):(Z=n0(ie.type,ie.key,ie.props,null,te.mode,pe),El(Z,ie),Z.return=te,Z)}function le(te,Z,ie,pe){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ie.containerInfo||Z.stateNode.implementation!==ie.implementation?(Z=lf(ie,te.mode,pe),Z.return=te,Z):(Z=m(Z,ie.children||[]),Z.return=te,Z)}function me(te,Z,ie,pe,Ge){return Z===null||Z.tag!==7?(Z=ps(ie,te.mode,pe,Ge),Z.return=te,Z):(Z=m(Z,ie),Z.return=te,Z)}function ve(te,Z,ie){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=of(""+Z,te.mode,ie),Z.return=te,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return ie=n0(Z.type,Z.key,Z.props,null,te.mode,ie),El(ie,Z),ie.return=te,ie;case k:return Z=lf(Z,te.mode,ie),Z.return=te,Z;case D:return Z=xs(Z),ve(te,Z,ie)}if(ae(Z)||G(Z))return Z=ps(Z,te.mode,ie,null),Z.return=te,Z;if(typeof Z.then=="function")return ve(te,d0(Z),ie);if(Z.$$typeof===M)return ve(te,o0(te,Z),ie);f0(te,Z)}return null}function ce(te,Z,ie,pe){var Ge=Z!==null?Z.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ge!==null?null:N(te,Z,""+ie,pe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:return ie.key===Ge?P(te,Z,ie,pe):null;case k:return ie.key===Ge?le(te,Z,ie,pe):null;case D:return ie=xs(ie),ce(te,Z,ie,pe)}if(ae(ie)||G(ie))return Ge!==null?null:me(te,Z,ie,pe,null);if(typeof ie.then=="function")return ce(te,Z,d0(ie),pe);if(ie.$$typeof===M)return ce(te,Z,o0(te,ie),pe);f0(te,ie)}return null}function fe(te,Z,ie,pe,Ge){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return te=te.get(ie)||null,N(Z,te,""+pe,Ge);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case y:return te=te.get(pe.key===null?ie:pe.key)||null,P(Z,te,pe,Ge);case k:return te=te.get(pe.key===null?ie:pe.key)||null,le(Z,te,pe,Ge);case D:return pe=xs(pe),fe(te,Z,ie,pe,Ge)}if(ae(pe)||G(pe))return te=te.get(ie)||null,me(Z,te,pe,Ge,null);if(typeof pe.then=="function")return fe(te,Z,ie,d0(pe),Ge);if(pe.$$typeof===M)return fe(te,Z,ie,o0(Z,pe),Ge);f0(Z,pe)}return null}function $e(te,Z,ie,pe){for(var Ge=null,kt=null,Pe=Z,lt=Z=0,yt=null;Pe!==null&&lt<ie.length;lt++){Pe.index>lt?(yt=Pe,Pe=null):yt=Pe.sibling;var Tt=ce(te,Pe,ie[lt],pe);if(Tt===null){Pe===null&&(Pe=yt);break}n&&Pe&&Tt.alternate===null&&i(te,Pe),Z=g(Tt,Z,lt),kt===null?Ge=Tt:kt.sibling=Tt,kt=Tt,Pe=yt}if(lt===ie.length)return l(te,Pe),bt&&Ln(te,lt),Ge;if(Pe===null){for(;lt<ie.length;lt++)Pe=ve(te,ie[lt],pe),Pe!==null&&(Z=g(Pe,Z,lt),kt===null?Ge=Pe:kt.sibling=Pe,kt=Pe);return bt&&Ln(te,lt),Ge}for(Pe=d(Pe);lt<ie.length;lt++)yt=fe(Pe,te,lt,ie[lt],pe),yt!==null&&(n&&yt.alternate!==null&&Pe.delete(yt.key===null?lt:yt.key),Z=g(yt,Z,lt),kt===null?Ge=yt:kt.sibling=yt,kt=yt);return n&&Pe.forEach(function(Li){return i(te,Li)}),bt&&Ln(te,lt),Ge}function We(te,Z,ie,pe){if(ie==null)throw Error(a(151));for(var Ge=null,kt=null,Pe=Z,lt=Z=0,yt=null,Tt=ie.next();Pe!==null&&!Tt.done;lt++,Tt=ie.next()){Pe.index>lt?(yt=Pe,Pe=null):yt=Pe.sibling;var Li=ce(te,Pe,Tt.value,pe);if(Li===null){Pe===null&&(Pe=yt);break}n&&Pe&&Li.alternate===null&&i(te,Pe),Z=g(Li,Z,lt),kt===null?Ge=Li:kt.sibling=Li,kt=Li,Pe=yt}if(Tt.done)return l(te,Pe),bt&&Ln(te,lt),Ge;if(Pe===null){for(;!Tt.done;lt++,Tt=ie.next())Tt=ve(te,Tt.value,pe),Tt!==null&&(Z=g(Tt,Z,lt),kt===null?Ge=Tt:kt.sibling=Tt,kt=Tt);return bt&&Ln(te,lt),Ge}for(Pe=d(Pe);!Tt.done;lt++,Tt=ie.next())Tt=fe(Pe,te,lt,Tt.value,pe),Tt!==null&&(n&&Tt.alternate!==null&&Pe.delete(Tt.key===null?lt:Tt.key),Z=g(Tt,Z,lt),kt===null?Ge=Tt:kt.sibling=Tt,kt=Tt);return n&&Pe.forEach(function(ZS){return i(te,ZS)}),bt&&Ln(te,lt),Ge}function Dt(te,Z,ie,pe){if(typeof ie=="object"&&ie!==null&&ie.type===_&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case y:e:{for(var Ge=ie.key;Z!==null;){if(Z.key===Ge){if(Ge=ie.type,Ge===_){if(Z.tag===7){l(te,Z.sibling),pe=m(Z,ie.props.children),pe.return=te,te=pe;break e}}else if(Z.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===D&&xs(Ge)===Z.type){l(te,Z.sibling),pe=m(Z,ie.props),El(pe,ie),pe.return=te,te=pe;break e}l(te,Z);break}else i(te,Z);Z=Z.sibling}ie.type===_?(pe=ps(ie.props.children,te.mode,pe,ie.key),pe.return=te,te=pe):(pe=n0(ie.type,ie.key,ie.props,null,te.mode,pe),El(pe,ie),pe.return=te,te=pe)}return z(te);case k:e:{for(Ge=ie.key;Z!==null;){if(Z.key===Ge)if(Z.tag===4&&Z.stateNode.containerInfo===ie.containerInfo&&Z.stateNode.implementation===ie.implementation){l(te,Z.sibling),pe=m(Z,ie.children||[]),pe.return=te,te=pe;break e}else{l(te,Z);break}else i(te,Z);Z=Z.sibling}pe=lf(ie,te.mode,pe),pe.return=te,te=pe}return z(te);case D:return ie=xs(ie),Dt(te,Z,ie,pe)}if(ae(ie))return $e(te,Z,ie,pe);if(G(ie)){if(Ge=G(ie),typeof Ge!="function")throw Error(a(150));return ie=Ge.call(ie),We(te,Z,ie,pe)}if(typeof ie.then=="function")return Dt(te,Z,d0(ie),pe);if(ie.$$typeof===M)return Dt(te,Z,o0(te,ie),pe);f0(te,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,Z!==null&&Z.tag===6?(l(te,Z.sibling),pe=m(Z,ie),pe.return=te,te=pe):(l(te,Z),pe=of(ie,te.mode,pe),pe.return=te,te=pe),z(te)):l(te,Z)}return function(te,Z,ie,pe){try{Al=0;var Ge=Dt(te,Z,ie,pe);return go=null,Ge}catch(Pe){if(Pe===po||Pe===u0)throw Pe;var kt=xa(29,Pe,null,te.mode);return kt.lanes=pe,kt.return=te,kt}finally{}}}var Ss=Mg(!0),Ng=Mg(!1),Si=!1;function xf(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wf(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _i(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function zi(n,i,l){var d=n.updateQueue;if(d===null)return null;if(d=d.shared,(At&2)!==0){var m=d.pending;return m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i,i=a0(n),hg(n,null,l),i}return r0(n,d,i,l),a0(n)}function Ml(n,i,l){if(i=i.updateQueue,i!==null&&(i=i.shared,(l&4194048)!==0)){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,dl(n,l)}}function Sf(n,i){var l=n.updateQueue,d=n.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var m=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var z={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?m=g=z:g=g.next=z,l=l.next}while(l!==null);g===null?m=g=i:g=g.next=i}else m=g=i;l={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:d.shared,callbacks:d.callbacks},n.updateQueue=l;return}n=l.lastBaseUpdate,n===null?l.firstBaseUpdate=i:n.next=i,l.lastBaseUpdate=i}var _f=!1;function Nl(){if(_f){var n=mo;if(n!==null)throw n}}function Cl(n,i,l,d){_f=!1;var m=n.updateQueue;Si=!1;var g=m.firstBaseUpdate,z=m.lastBaseUpdate,N=m.shared.pending;if(N!==null){m.shared.pending=null;var P=N,le=P.next;P.next=null,z===null?g=le:z.next=le,z=P;var me=n.alternate;me!==null&&(me=me.updateQueue,N=me.lastBaseUpdate,N!==z&&(N===null?me.firstBaseUpdate=le:N.next=le,me.lastBaseUpdate=P))}if(g!==null){var ve=m.baseState;z=0,me=le=P=null,N=g;do{var ce=N.lane&-536870913,fe=ce!==N.lane;if(fe?(vt&ce)===ce:(d&ce)===ce){ce!==0&&ce===ho&&(_f=!0),me!==null&&(me=me.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var $e=n,We=N;ce=i;var Dt=l;switch(We.tag){case 1:if($e=We.payload,typeof $e=="function"){ve=$e.call(Dt,ve,ce);break e}ve=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=We.payload,ce=typeof $e=="function"?$e.call(Dt,ve,ce):$e,ce==null)break e;ve=v({},ve,ce);break e;case 2:Si=!0}}ce=N.callback,ce!==null&&(n.flags|=64,fe&&(n.flags|=8192),fe=m.callbacks,fe===null?m.callbacks=[ce]:fe.push(ce))}else fe={lane:ce,tag:N.tag,payload:N.payload,callback:N.callback,next:null},me===null?(le=me=fe,P=ve):me=me.next=fe,z|=ce;if(N=N.next,N===null){if(N=m.shared.pending,N===null)break;fe=N,N=fe.next,fe.next=null,m.lastBaseUpdate=fe,m.shared.pending=null}}while(!0);me===null&&(P=ve),m.baseState=P,m.firstBaseUpdate=le,m.lastBaseUpdate=me,g===null&&(m.shared.lanes=0),Mi|=z,n.lanes=z,n.memoizedState=ve}}function Cg(n,i){if(typeof n!="function")throw Error(a(191,n));n.call(i)}function Og(n,i){var l=n.callbacks;if(l!==null)for(n.callbacks=null,n=0;n<l.length;n++)Cg(l[n],i)}var vo=L(null),h0=L(0);function Rg(n,i){n=Kn,ee(h0,n),ee(vo,i),Kn=n|i.baseLanes}function zf(){ee(h0,Kn),ee(vo,vo.current)}function kf(){Kn=h0.current,ne(vo),ne(h0)}var wa=L(null),Va=null;function ki(n){var i=n.alternate;ee(vr,vr.current&1),ee(wa,n),Va===null&&(i===null||vo.current!==null||i.memoizedState!==null)&&(Va=n)}function Tf(n){ee(vr,vr.current),ee(wa,n),Va===null&&(Va=n)}function Ig(n){n.tag===22?(ee(vr,vr.current),ee(wa,n),Va===null&&(Va=n)):Ti()}function Ti(){ee(vr,vr.current),ee(wa,wa.current)}function Sa(n){ne(wa),Va===n&&(Va=null),ne(vr)}var vr=L(0);function m0(n){for(var i=n;i!==null;){if(i.tag===13){var l=i.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Oh(l)||Rh(l)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Pn=0,st=null,Rt=null,Sr=null,p0=!1,yo=!1,_s=!1,g0=0,Ol=0,bo=null,I9=0;function cr(){throw Error(a(321))}function Af(n,i){if(i===null)return!1;for(var l=0;l<i.length&&l<n.length;l++)if(!ba(n[l],i[l]))return!1;return!0}function Ef(n,i,l,d,m,g){return Pn=g,st=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,q.H=n===null||n.memoizedState===null?vv:Hf,_s=!1,g=l(d,m),_s=!1,yo&&(g=jg(i,l,d,m)),Dg(n),g}function Dg(n){q.H=Dl;var i=Rt!==null&&Rt.next!==null;if(Pn=0,Sr=Rt=st=null,p0=!1,Ol=0,bo=null,i)throw Error(a(300));n===null||_r||(n=n.dependencies,n!==null&&s0(n)&&(_r=!0))}function jg(n,i,l,d){st=n;var m=0;do{if(yo&&(bo=null),Ol=0,yo=!1,25<=m)throw Error(a(301));if(m+=1,Sr=Rt=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}q.H=yv,g=i(l,d)}while(yo);return g}function D9(){var n=q.H,i=n.useState()[0];return i=typeof i.then=="function"?Rl(i):i,n=n.useState()[0],(Rt!==null?Rt.memoizedState:null)!==n&&(st.flags|=1024),i}function Mf(){var n=g0!==0;return g0=0,n}function Nf(n,i,l){i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~l}function Cf(n){if(p0){for(n=n.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}p0=!1}Pn=0,Sr=Rt=st=null,yo=!1,Ol=g0=0,bo=null}function Jr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Sr===null?st.memoizedState=Sr=n:Sr=Sr.next=n,Sr}function yr(){if(Rt===null){var n=st.alternate;n=n!==null?n.memoizedState:null}else n=Rt.next;var i=Sr===null?st.memoizedState:Sr.next;if(i!==null)Sr=i,Rt=n;else{if(n===null)throw st.alternate===null?Error(a(467)):Error(a(310));Rt=n,n={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Sr===null?st.memoizedState=Sr=n:Sr=Sr.next=n}return Sr}function v0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(n){var i=Ol;return Ol+=1,bo===null&&(bo=[]),n=Tg(bo,n,i),i=st,(Sr===null?i.memoizedState:Sr.next)===null&&(i=i.alternate,q.H=i===null||i.memoizedState===null?vv:Hf),n}function y0(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Rl(n);if(n.$$typeof===M)return Pr(n)}throw Error(a(438,String(n)))}function Of(n){var i=null,l=st.updateQueue;if(l!==null&&(i=l.memoCache),i==null){var d=st.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(i={data:d.data.map(function(m){return m.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),l===null&&(l=v0(),st.updateQueue=l),l.memoCache=i,l=i.data[i.index],l===void 0)for(l=i.data[i.index]=Array(n),d=0;d<n;d++)l[d]=de;return i.index++,l}function Hn(n,i){return typeof i=="function"?i(n):i}function b0(n){var i=yr();return Rf(i,Rt,n)}function Rf(n,i,l){var d=n.queue;if(d===null)throw Error(a(311));d.lastRenderedReducer=l;var m=n.baseQueue,g=d.pending;if(g!==null){if(m!==null){var z=m.next;m.next=g.next,g.next=z}i.baseQueue=m=g,d.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{i=m.next;var N=z=null,P=null,le=i,me=!1;do{var ve=le.lane&-536870913;if(ve!==le.lane?(vt&ve)===ve:(Pn&ve)===ve){var ce=le.revertLane;if(ce===0)P!==null&&(P=P.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),ve===ho&&(me=!0);else if((Pn&ce)===ce){le=le.next,ce===ho&&(me=!0);continue}else ve={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},P===null?(N=P=ve,z=g):P=P.next=ve,st.lanes|=ce,Mi|=ce;ve=le.action,_s&&l(g,ve),g=le.hasEagerState?le.eagerState:l(g,ve)}else ce={lane:ve,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},P===null?(N=P=ce,z=g):P=P.next=ce,st.lanes|=ve,Mi|=ve;le=le.next}while(le!==null&&le!==i);if(P===null?z=g:P.next=N,!ba(g,n.memoizedState)&&(_r=!0,me&&(l=mo,l!==null)))throw l;n.memoizedState=g,n.baseState=z,n.baseQueue=P,d.lastRenderedState=g}return m===null&&(d.lanes=0),[n.memoizedState,d.dispatch]}function If(n){var i=yr(),l=i.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=n;var d=l.dispatch,m=l.pending,g=i.memoizedState;if(m!==null){l.pending=null;var z=m=m.next;do g=n(g,z.action),z=z.next;while(z!==m);ba(g,i.memoizedState)||(_r=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),l.lastRenderedState=g}return[g,d]}function $g(n,i,l){var d=st,m=yr(),g=bt;if(g){if(l===void 0)throw Error(a(407));l=l()}else l=i();var z=!ba((Rt||m).memoizedState,l);if(z&&(m.memoizedState=l,_r=!0),m=m.queue,$f(Ug.bind(null,d,m,n),[n]),m.getSnapshot!==i||z||Sr!==null&&Sr.memoizedState.tag&1){if(d.flags|=2048,xo(9,{destroy:void 0},Lg.bind(null,d,m,l,i),null),$t===null)throw Error(a(349));g||(Pn&127)!==0||Bg(d,i,l)}return l}function Bg(n,i,l){n.flags|=16384,n={getSnapshot:i,value:l},i=st.updateQueue,i===null?(i=v0(),st.updateQueue=i,i.stores=[n]):(l=i.stores,l===null?i.stores=[n]:l.push(n))}function Lg(n,i,l,d){i.value=l,i.getSnapshot=d,qg(i)&&Pg(n)}function Ug(n,i,l){return l(function(){qg(i)&&Pg(n)})}function qg(n){var i=n.getSnapshot;n=n.value;try{var l=i();return!ba(n,l)}catch{return!0}}function Pg(n){var i=ms(n,2);i!==null&&da(i,n,2)}function Df(n){var i=Jr();if(typeof n=="function"){var l=n;if(n=l(),_s){ya(!0);try{l()}finally{ya(!1)}}}return i.memoizedState=i.baseState=n,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:n},i}function Hg(n,i,l,d){return n.baseState=l,Rf(n,Rt,typeof d=="function"?d:Hn)}function j9(n,i,l,d,m){if(S0(n))throw Error(a(485));if(n=i.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(z){g.listeners.push(z)}};q.T!==null?l(!0):g.isTransition=!1,d(g),l=i.pending,l===null?(g.next=i.pending=g,Zg(i,g)):(g.next=l.next,i.pending=l.next=g)}}function Zg(n,i){var l=i.action,d=i.payload,m=n.state;if(i.isTransition){var g=q.T,z={};q.T=z;try{var N=l(m,d),P=q.S;P!==null&&P(z,N),Gg(n,i,N)}catch(le){jf(n,i,le)}finally{g!==null&&z.types!==null&&(g.types=z.types),q.T=g}}else try{g=l(m,d),Gg(n,i,g)}catch(le){jf(n,i,le)}}function Gg(n,i,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(d){Vg(n,i,d)},function(d){return jf(n,i,d)}):Vg(n,i,l)}function Vg(n,i,l){i.status="fulfilled",i.value=l,Fg(i),n.state=l,i=n.pending,i!==null&&(l=i.next,l===i?n.pending=null:(l=l.next,i.next=l,Zg(n,l)))}function jf(n,i,l){var d=n.pending;if(n.pending=null,d!==null){d=d.next;do i.status="rejected",i.reason=l,Fg(i),i=i.next;while(i!==d)}n.action=null}function Fg(n){n=n.listeners;for(var i=0;i<n.length;i++)(0,n[i])()}function Yg(n,i){return i}function Xg(n,i){if(bt){var l=$t.formState;if(l!==null){e:{var d=st;if(bt){if(Ft){t:{for(var m=Ft,g=Ga;m.nodeType!==8;){if(!g){m=null;break t}if(m=Fa(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){Ft=Fa(m.nextSibling),d=m.data==="F!";break e}}xi(d)}d=!1}d&&(i=l[0])}}return l=Jr(),l.memoizedState=l.baseState=i,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yg,lastRenderedState:i},l.queue=d,l=mv.bind(null,st,d),d.dispatch=l,d=Df(!1),g=Pf.bind(null,st,!1,d.queue),d=Jr(),m={state:i,dispatch:null,action:n,pending:null},d.queue=m,l=j9.bind(null,st,m,g,l),m.dispatch=l,d.memoizedState=n,[i,l,!1]}function Kg(n){var i=yr();return Jg(i,Rt,n)}function Jg(n,i,l){if(i=Rf(n,i,Yg)[0],n=b0(Hn)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var d=Rl(i)}catch(z){throw z===po?u0:z}else d=i;i=yr();var m=i.queue,g=m.dispatch;return l!==i.memoizedState&&(st.flags|=2048,xo(9,{destroy:void 0},$9.bind(null,m,l),null)),[d,g,n]}function $9(n,i){n.action=i}function Wg(n){var i=yr(),l=Rt;if(l!==null)return Jg(i,l,n);yr(),i=i.memoizedState,l=yr();var d=l.queue.dispatch;return l.memoizedState=n,[i,d,!1]}function xo(n,i,l,d){return n={tag:n,create:l,deps:d,inst:i,next:null},i=st.updateQueue,i===null&&(i=v0(),st.updateQueue=i),l=i.lastEffect,l===null?i.lastEffect=n.next=n:(d=l.next,l.next=n,n.next=d,i.lastEffect=n),n}function Qg(){return yr().memoizedState}function x0(n,i,l,d){var m=Jr();st.flags|=n,m.memoizedState=xo(1|i,{destroy:void 0},l,d===void 0?null:d)}function w0(n,i,l,d){var m=yr();d=d===void 0?null:d;var g=m.memoizedState.inst;Rt!==null&&d!==null&&Af(d,Rt.memoizedState.deps)?m.memoizedState=xo(i,g,l,d):(st.flags|=n,m.memoizedState=xo(1|i,g,l,d))}function ev(n,i){x0(8390656,8,n,i)}function $f(n,i){w0(2048,8,n,i)}function B9(n){st.flags|=4;var i=st.updateQueue;if(i===null)i=v0(),st.updateQueue=i,i.events=[n];else{var l=i.events;l===null?i.events=[n]:l.push(n)}}function tv(n){var i=yr().memoizedState;return B9({ref:i,nextImpl:n}),function(){if((At&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function rv(n,i){return w0(4,2,n,i)}function av(n,i){return w0(4,4,n,i)}function nv(n,i){if(typeof i=="function"){n=n();var l=i(n);return function(){typeof l=="function"?l():i(null)}}if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function iv(n,i,l){l=l!=null?l.concat([n]):null,w0(4,4,nv.bind(null,i,n),l)}function Bf(){}function sv(n,i){var l=yr();i=i===void 0?null:i;var d=l.memoizedState;return i!==null&&Af(i,d[1])?d[0]:(l.memoizedState=[n,i],n)}function ov(n,i){var l=yr();i=i===void 0?null:i;var d=l.memoizedState;if(i!==null&&Af(i,d[1]))return d[0];if(d=n(),_s){ya(!0);try{n()}finally{ya(!1)}}return l.memoizedState=[d,i],d}function Lf(n,i,l){return l===void 0||(Pn&1073741824)!==0&&(vt&261930)===0?n.memoizedState=i:(n.memoizedState=l,n=l4(),st.lanes|=n,Mi|=n,l)}function lv(n,i,l,d){return ba(l,i)?l:vo.current!==null?(n=Lf(n,l,d),ba(n,i)||(_r=!0),n):(Pn&42)===0||(Pn&1073741824)!==0&&(vt&261930)===0?(_r=!0,n.memoizedState=l):(n=l4(),st.lanes|=n,Mi|=n,i)}function uv(n,i,l,d,m){var g=F.p;F.p=g!==0&&8>g?g:8;var z=q.T,N={};q.T=N,Pf(n,!1,i,l);try{var P=m(),le=q.S;if(le!==null&&le(N,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var me=R9(P,d);Il(n,i,me,ka(n))}else Il(n,i,d,ka(n))}catch(ve){Il(n,i,{then:function(){},status:"rejected",reason:ve},ka())}finally{F.p=g,z!==null&&N.types!==null&&(z.types=N.types),q.T=z}}function L9(){}function Uf(n,i,l,d){if(n.tag!==5)throw Error(a(476));var m=cv(n).queue;uv(n,m,i,J,l===null?L9:function(){return dv(n),l(d)})}function cv(n){var i=n.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:J},next:null};var l={};return i.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:l},next:null},n.memoizedState=i,n=n.alternate,n!==null&&(n.memoizedState=i),i}function dv(n){var i=cv(n);i.next===null&&(i=n.alternate.memoizedState),Il(n,i.next.queue,{},ka())}function qf(){return Pr(Jl)}function fv(){return yr().memoizedState}function hv(){return yr().memoizedState}function U9(n){for(var i=n.return;i!==null;){switch(i.tag){case 24:case 3:var l=ka();n=_i(l);var d=zi(i,n,l);d!==null&&(da(d,i,l),Ml(d,i,l)),i={cache:gf()},n.payload=i;return}i=i.return}}function q9(n,i,l){var d=ka();l={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},S0(n)?pv(i,l):(l=nf(n,i,l,d),l!==null&&(da(l,n,d),gv(l,i,d)))}function mv(n,i,l){var d=ka();Il(n,i,l,d)}function Il(n,i,l,d){var m={lane:d,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(S0(n))pv(i,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var z=i.lastRenderedState,N=g(z,l);if(m.hasEagerState=!0,m.eagerState=N,ba(N,z))return r0(n,i,m,0),$t===null&&t0(),!1}catch{}finally{}if(l=nf(n,i,m,d),l!==null)return da(l,n,d),gv(l,i,d),!0}return!1}function Pf(n,i,l,d){if(d={lane:2,revertLane:xh(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},S0(n)){if(i)throw Error(a(479))}else i=nf(n,l,d,2),i!==null&&da(i,n,2)}function S0(n){var i=n.alternate;return n===st||i!==null&&i===st}function pv(n,i){yo=p0=!0;var l=n.pending;l===null?i.next=i:(i.next=l.next,l.next=i),n.pending=i}function gv(n,i,l){if((l&4194048)!==0){var d=i.lanes;d&=n.pendingLanes,l|=d,i.lanes=l,dl(n,l)}}var Dl={readContext:Pr,use:y0,useCallback:cr,useContext:cr,useEffect:cr,useImperativeHandle:cr,useLayoutEffect:cr,useInsertionEffect:cr,useMemo:cr,useReducer:cr,useRef:cr,useState:cr,useDebugValue:cr,useDeferredValue:cr,useTransition:cr,useSyncExternalStore:cr,useId:cr,useHostTransitionStatus:cr,useFormState:cr,useActionState:cr,useOptimistic:cr,useMemoCache:cr,useCacheRefresh:cr};Dl.useEffectEvent=cr;var vv={readContext:Pr,use:y0,useCallback:function(n,i){return Jr().memoizedState=[n,i===void 0?null:i],n},useContext:Pr,useEffect:ev,useImperativeHandle:function(n,i,l){l=l!=null?l.concat([n]):null,x0(4194308,4,nv.bind(null,i,n),l)},useLayoutEffect:function(n,i){return x0(4194308,4,n,i)},useInsertionEffect:function(n,i){x0(4,2,n,i)},useMemo:function(n,i){var l=Jr();i=i===void 0?null:i;var d=n();if(_s){ya(!0);try{n()}finally{ya(!1)}}return l.memoizedState=[d,i],d},useReducer:function(n,i,l){var d=Jr();if(l!==void 0){var m=l(i);if(_s){ya(!0);try{l(i)}finally{ya(!1)}}}else m=i;return d.memoizedState=d.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},d.queue=n,n=n.dispatch=q9.bind(null,st,n),[d.memoizedState,n]},useRef:function(n){var i=Jr();return n={current:n},i.memoizedState=n},useState:function(n){n=Df(n);var i=n.queue,l=mv.bind(null,st,i);return i.dispatch=l,[n.memoizedState,l]},useDebugValue:Bf,useDeferredValue:function(n,i){var l=Jr();return Lf(l,n,i)},useTransition:function(){var n=Df(!1);return n=uv.bind(null,st,n.queue,!0,!1),Jr().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,i,l){var d=st,m=Jr();if(bt){if(l===void 0)throw Error(a(407));l=l()}else{if(l=i(),$t===null)throw Error(a(349));(vt&127)!==0||Bg(d,i,l)}m.memoizedState=l;var g={value:l,getSnapshot:i};return m.queue=g,ev(Ug.bind(null,d,g,n),[n]),d.flags|=2048,xo(9,{destroy:void 0},Lg.bind(null,d,g,l,i),null),l},useId:function(){var n=Jr(),i=$t.identifierPrefix;if(bt){var l=yn,d=vn;l=(d&~(1<<32-Vr(d)-1)).toString(32)+l,i="_"+i+"R_"+l,l=g0++,0<l&&(i+="H"+l.toString(32)),i+="_"}else l=I9++,i="_"+i+"r_"+l.toString(32)+"_";return n.memoizedState=i},useHostTransitionStatus:qf,useFormState:Xg,useActionState:Xg,useOptimistic:function(n){var i=Jr();i.memoizedState=i.baseState=n;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=l,i=Pf.bind(null,st,!0,l),l.dispatch=i,[n,i]},useMemoCache:Of,useCacheRefresh:function(){return Jr().memoizedState=U9.bind(null,st)},useEffectEvent:function(n){var i=Jr(),l={impl:n};return i.memoizedState=l,function(){if((At&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},Hf={readContext:Pr,use:y0,useCallback:sv,useContext:Pr,useEffect:$f,useImperativeHandle:iv,useInsertionEffect:rv,useLayoutEffect:av,useMemo:ov,useReducer:b0,useRef:Qg,useState:function(){return b0(Hn)},useDebugValue:Bf,useDeferredValue:function(n,i){var l=yr();return lv(l,Rt.memoizedState,n,i)},useTransition:function(){var n=b0(Hn)[0],i=yr().memoizedState;return[typeof n=="boolean"?n:Rl(n),i]},useSyncExternalStore:$g,useId:fv,useHostTransitionStatus:qf,useFormState:Kg,useActionState:Kg,useOptimistic:function(n,i){var l=yr();return Hg(l,Rt,n,i)},useMemoCache:Of,useCacheRefresh:hv};Hf.useEffectEvent=tv;var yv={readContext:Pr,use:y0,useCallback:sv,useContext:Pr,useEffect:$f,useImperativeHandle:iv,useInsertionEffect:rv,useLayoutEffect:av,useMemo:ov,useReducer:If,useRef:Qg,useState:function(){return If(Hn)},useDebugValue:Bf,useDeferredValue:function(n,i){var l=yr();return Rt===null?Lf(l,n,i):lv(l,Rt.memoizedState,n,i)},useTransition:function(){var n=If(Hn)[0],i=yr().memoizedState;return[typeof n=="boolean"?n:Rl(n),i]},useSyncExternalStore:$g,useId:fv,useHostTransitionStatus:qf,useFormState:Wg,useActionState:Wg,useOptimistic:function(n,i){var l=yr();return Rt!==null?Hg(l,Rt,n,i):(l.baseState=n,[n,l.queue.dispatch])},useMemoCache:Of,useCacheRefresh:hv};yv.useEffectEvent=tv;function Zf(n,i,l,d){i=n.memoizedState,l=l(d,i),l=l==null?i:v({},i,l),n.memoizedState=l,n.lanes===0&&(n.updateQueue.baseState=l)}var Gf={enqueueSetState:function(n,i,l){n=n._reactInternals;var d=ka(),m=_i(d);m.payload=i,l!=null&&(m.callback=l),i=zi(n,m,d),i!==null&&(da(i,n,d),Ml(i,n,d))},enqueueReplaceState:function(n,i,l){n=n._reactInternals;var d=ka(),m=_i(d);m.tag=1,m.payload=i,l!=null&&(m.callback=l),i=zi(n,m,d),i!==null&&(da(i,n,d),Ml(i,n,d))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var l=ka(),d=_i(l);d.tag=2,i!=null&&(d.callback=i),i=zi(n,d,l),i!==null&&(da(i,n,l),Ml(i,n,l))}};function bv(n,i,l,d,m,g,z){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(d,g,z):i.prototype&&i.prototype.isPureReactComponent?!wl(l,d)||!wl(m,g):!0}function xv(n,i,l,d){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(l,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(l,d),i.state!==n&&Gf.enqueueReplaceState(i,i.state,null)}function zs(n,i){var l=i;if("ref"in i){l={};for(var d in i)d!=="ref"&&(l[d]=i[d])}if(n=n.defaultProps){l===i&&(l=v({},l));for(var m in n)l[m]===void 0&&(l[m]=n[m])}return l}function wv(n){e0(n)}function Sv(n){console.error(n)}function _v(n){e0(n)}function _0(n,i){try{var l=n.onUncaughtError;l(i.value,{componentStack:i.stack})}catch(d){setTimeout(function(){throw d})}}function zv(n,i,l){try{var d=n.onCaughtError;d(l.value,{componentStack:l.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Vf(n,i,l){return l=_i(l),l.tag=3,l.payload={element:null},l.callback=function(){_0(n,i)},l}function kv(n){return n=_i(n),n.tag=3,n}function Tv(n,i,l,d){var m=l.type.getDerivedStateFromError;if(typeof m=="function"){var g=d.value;n.payload=function(){return m(g)},n.callback=function(){zv(i,l,d)}}var z=l.stateNode;z!==null&&typeof z.componentDidCatch=="function"&&(n.callback=function(){zv(i,l,d),typeof m!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var N=d.stack;this.componentDidCatch(d.value,{componentStack:N!==null?N:""})})}function P9(n,i,l,d,m){if(l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(i=l.alternate,i!==null&&fo(i,l,m,!0),l=wa.current,l!==null){switch(l.tag){case 31:case 13:return Va===null?D0():l.alternate===null&&dr===0&&(dr=3),l.flags&=-257,l.flags|=65536,l.lanes=m,d===c0?l.flags|=16384:(i=l.updateQueue,i===null?l.updateQueue=new Set([d]):i.add(d),vh(n,d,m)),!1;case 22:return l.flags|=65536,d===c0?l.flags|=16384:(i=l.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([d])},l.updateQueue=i):(l=i.retryQueue,l===null?i.retryQueue=new Set([d]):l.add(d)),vh(n,d,m)),!1}throw Error(a(435,l.tag))}return vh(n,d,m),D0(),!1}if(bt)return i=wa.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=m,d!==df&&(n=Error(a(422),{cause:d}),zl(Pa(n,l)))):(d!==df&&(i=Error(a(423),{cause:d}),zl(Pa(i,l))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,d=Pa(d,l),m=Vf(n.stateNode,d,m),Sf(n,m),dr!==4&&(dr=2)),!1;var g=Error(a(520),{cause:d});if(g=Pa(g,l),Hl===null?Hl=[g]:Hl.push(g),dr!==4&&(dr=2),i===null)return!0;d=Pa(d,l),l=i;do{switch(l.tag){case 3:return l.flags|=65536,n=m&-m,l.lanes|=n,n=Vf(l.stateNode,d,n),Sf(l,n),!1;case 1:if(i=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Ni===null||!Ni.has(g))))return l.flags|=65536,m&=-m,l.lanes|=m,m=kv(m),Tv(m,n,l,d),Sf(l,m),!1}l=l.return}while(l!==null);return!1}var Ff=Error(a(461)),_r=!1;function Hr(n,i,l,d){i.child=n===null?Ng(i,null,l,d):Ss(i,n.child,l,d)}function Av(n,i,l,d,m){l=l.render;var g=i.ref;if("ref"in d){var z={};for(var N in d)N!=="ref"&&(z[N]=d[N])}else z=d;return ys(i),d=Ef(n,i,l,z,g,m),N=Mf(),n!==null&&!_r?(Nf(n,i,m),Zn(n,i,m)):(bt&&N&&uf(i),i.flags|=1,Hr(n,i,d,m),i.child)}function Ev(n,i,l,d,m){if(n===null){var g=l.type;return typeof g=="function"&&!sf(g)&&g.defaultProps===void 0&&l.compare===null?(i.tag=15,i.type=g,Mv(n,i,g,d,m)):(n=n0(l.type,null,d,i,i.mode,m),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!th(n,m)){var z=g.memoizedProps;if(l=l.compare,l=l!==null?l:wl,l(z,d)&&n.ref===i.ref)return Zn(n,i,m)}return i.flags|=1,n=Bn(g,d),n.ref=i.ref,n.return=i,i.child=n}function Mv(n,i,l,d,m){if(n!==null){var g=n.memoizedProps;if(wl(g,d)&&n.ref===i.ref)if(_r=!1,i.pendingProps=d=g,th(n,m))(n.flags&131072)!==0&&(_r=!0);else return i.lanes=n.lanes,Zn(n,i,m)}return Yf(n,i,l,d,m)}function Nv(n,i,l,d){var m=d.children,g=n!==null?n.memoizedState:null;if(n===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,n!==null){for(d=i.child=n.child,m=0;d!==null;)m=m|d.lanes|d.childLanes,d=d.sibling;d=m&~g}else d=0,i.child=null;return Cv(n,i,g,l,d)}if((l&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},n!==null&&l0(i,g!==null?g.cachePool:null),g!==null?Rg(i,g):zf(),Ig(i);else return d=i.lanes=536870912,Cv(n,i,g!==null?g.baseLanes|l:l,l,d)}else g!==null?(l0(i,g.cachePool),Rg(i,g),Ti(),i.memoizedState=null):(n!==null&&l0(i,null),zf(),Ti());return Hr(n,i,m,l),i.child}function jl(n,i){return n!==null&&n.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Cv(n,i,l,d,m){var g=yf();return g=g===null?null:{parent:wr._currentValue,pool:g},i.memoizedState={baseLanes:l,cachePool:g},n!==null&&l0(i,null),zf(),Ig(i),n!==null&&fo(n,i,d,!0),i.childLanes=m,null}function z0(n,i){return i=T0({mode:i.mode,children:i.children},n.mode),i.ref=n.ref,n.child=i,i.return=n,i}function Ov(n,i,l){return Ss(i,n.child,null,l),n=z0(i,i.pendingProps),n.flags|=2,Sa(i),i.memoizedState=null,n}function H9(n,i,l){var d=i.pendingProps,m=(i.flags&128)!==0;if(i.flags&=-129,n===null){if(bt){if(d.mode==="hidden")return n=z0(i,d),i.lanes=536870912,jl(null,n);if(Tf(i),(n=Ft)?(n=Z4(n,Ga),n=n!==null&&n.data==="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:yi!==null?{id:vn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},l=pg(n),l.return=i,i.child=l,qr=i,Ft=null)):n=null,n===null)throw xi(i);return i.lanes=536870912,null}return z0(i,d)}var g=n.memoizedState;if(g!==null){var z=g.dehydrated;if(Tf(i),m)if(i.flags&256)i.flags&=-257,i=Ov(n,i,l);else if(i.memoizedState!==null)i.child=n.child,i.flags|=128,i=null;else throw Error(a(558));else if(_r||fo(n,i,l,!1),m=(l&n.childLanes)!==0,_r||m){if(d=$t,d!==null&&(z=Pu(d,l),z!==0&&z!==g.retryLane))throw g.retryLane=z,ms(n,z),da(d,n,z),Ff;D0(),i=Ov(n,i,l)}else n=g.treeContext,Ft=Fa(z.nextSibling),qr=i,bt=!0,bi=null,Ga=!1,n!==null&&yg(i,n),i=z0(i,d),i.flags|=4096;return i}return n=Bn(n.child,{mode:d.mode,children:d.children}),n.ref=i.ref,i.child=n,n.return=i,n}function k0(n,i){var l=i.ref;if(l===null)n!==null&&n.ref!==null&&(i.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(n===null||n.ref!==l)&&(i.flags|=4194816)}}function Yf(n,i,l,d,m){return ys(i),l=Ef(n,i,l,d,void 0,m),d=Mf(),n!==null&&!_r?(Nf(n,i,m),Zn(n,i,m)):(bt&&d&&uf(i),i.flags|=1,Hr(n,i,l,m),i.child)}function Rv(n,i,l,d,m,g){return ys(i),i.updateQueue=null,l=jg(i,d,l,m),Dg(n),d=Mf(),n!==null&&!_r?(Nf(n,i,g),Zn(n,i,g)):(bt&&d&&uf(i),i.flags|=1,Hr(n,i,l,g),i.child)}function Iv(n,i,l,d,m){if(ys(i),i.stateNode===null){var g=oo,z=l.contextType;typeof z=="object"&&z!==null&&(g=Pr(z)),g=new l(d,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Gf,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=d,g.state=i.memoizedState,g.refs={},xf(i),z=l.contextType,g.context=typeof z=="object"&&z!==null?Pr(z):oo,g.state=i.memoizedState,z=l.getDerivedStateFromProps,typeof z=="function"&&(Zf(i,l,z,d),g.state=i.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(z=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),z!==g.state&&Gf.enqueueReplaceState(g,g.state,null),Cl(i,d,g,m),Nl(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),d=!0}else if(n===null){g=i.stateNode;var N=i.memoizedProps,P=zs(l,N);g.props=P;var le=g.context,me=l.contextType;z=oo,typeof me=="object"&&me!==null&&(z=Pr(me));var ve=l.getDerivedStateFromProps;me=typeof ve=="function"||typeof g.getSnapshotBeforeUpdate=="function",N=i.pendingProps!==N,me||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(N||le!==z)&&xv(i,g,d,z),Si=!1;var ce=i.memoizedState;g.state=ce,Cl(i,d,g,m),Nl(),le=i.memoizedState,N||ce!==le||Si?(typeof ve=="function"&&(Zf(i,l,ve,d),le=i.memoizedState),(P=Si||bv(i,l,P,d,ce,le,z))?(me||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=le),g.props=d,g.state=le,g.context=z,d=P):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{g=i.stateNode,wf(n,i),z=i.memoizedProps,me=zs(l,z),g.props=me,ve=i.pendingProps,ce=g.context,le=l.contextType,P=oo,typeof le=="object"&&le!==null&&(P=Pr(le)),N=l.getDerivedStateFromProps,(le=typeof N=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(z!==ve||ce!==P)&&xv(i,g,d,P),Si=!1,ce=i.memoizedState,g.state=ce,Cl(i,d,g,m),Nl();var fe=i.memoizedState;z!==ve||ce!==fe||Si||n!==null&&n.dependencies!==null&&s0(n.dependencies)?(typeof N=="function"&&(Zf(i,l,N,d),fe=i.memoizedState),(me=Si||bv(i,l,me,d,ce,fe,P)||n!==null&&n.dependencies!==null&&s0(n.dependencies))?(le||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(d,fe,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(d,fe,P)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||z===n.memoizedProps&&ce===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||z===n.memoizedProps&&ce===n.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=fe),g.props=d,g.state=fe,g.context=P,d=me):(typeof g.componentDidUpdate!="function"||z===n.memoizedProps&&ce===n.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||z===n.memoizedProps&&ce===n.memoizedState||(i.flags|=1024),d=!1)}return g=d,k0(n,i),d=(i.flags&128)!==0,g||d?(g=i.stateNode,l=d&&typeof l.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,n!==null&&d?(i.child=Ss(i,n.child,null,m),i.child=Ss(i,null,l,m)):Hr(n,i,l,m),i.memoizedState=g.state,n=i.child):n=Zn(n,i,m),n}function Dv(n,i,l,d){return gs(),i.flags|=256,Hr(n,i,l,d),i.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Kf(n){return{baseLanes:n,cachePool:zg()}}function Jf(n,i,l){return n=n!==null?n.childLanes&~l:0,i&&(n|=za),n}function jv(n,i,l){var d=i.pendingProps,m=!1,g=(i.flags&128)!==0,z;if((z=g)||(z=n!==null&&n.memoizedState===null?!1:(vr.current&2)!==0),z&&(m=!0,i.flags&=-129),z=(i.flags&32)!==0,i.flags&=-33,n===null){if(bt){if(m?ki(i):Ti(),(n=Ft)?(n=Z4(n,Ga),n=n!==null&&n.data!=="&"?n:null,n!==null&&(i.memoizedState={dehydrated:n,treeContext:yi!==null?{id:vn,overflow:yn}:null,retryLane:536870912,hydrationErrors:null},l=pg(n),l.return=i,i.child=l,qr=i,Ft=null)):n=null,n===null)throw xi(i);return Rh(n)?i.lanes=32:i.lanes=536870912,null}var N=d.children;return d=d.fallback,m?(Ti(),m=i.mode,N=T0({mode:"hidden",children:N},m),d=ps(d,m,l,null),N.return=i,d.return=i,N.sibling=d,i.child=N,d=i.child,d.memoizedState=Kf(l),d.childLanes=Jf(n,z,l),i.memoizedState=Xf,jl(null,d)):(ki(i),Wf(i,N))}var P=n.memoizedState;if(P!==null&&(N=P.dehydrated,N!==null)){if(g)i.flags&256?(ki(i),i.flags&=-257,i=Qf(n,i,l)):i.memoizedState!==null?(Ti(),i.child=n.child,i.flags|=128,i=null):(Ti(),N=d.fallback,m=i.mode,d=T0({mode:"visible",children:d.children},m),N=ps(N,m,l,null),N.flags|=2,d.return=i,N.return=i,d.sibling=N,i.child=d,Ss(i,n.child,null,l),d=i.child,d.memoizedState=Kf(l),d.childLanes=Jf(n,z,l),i.memoizedState=Xf,i=jl(null,d));else if(ki(i),Rh(N)){if(z=N.nextSibling&&N.nextSibling.dataset,z)var le=z.dgst;z=le,d=Error(a(419)),d.stack="",d.digest=z,zl({value:d,source:null,stack:null}),i=Qf(n,i,l)}else if(_r||fo(n,i,l,!1),z=(l&n.childLanes)!==0,_r||z){if(z=$t,z!==null&&(d=Pu(z,l),d!==0&&d!==P.retryLane))throw P.retryLane=d,ms(n,d),da(z,n,d),Ff;Oh(N)||D0(),i=Qf(n,i,l)}else Oh(N)?(i.flags|=192,i.child=n.child,i=null):(n=P.treeContext,Ft=Fa(N.nextSibling),qr=i,bt=!0,bi=null,Ga=!1,n!==null&&yg(i,n),i=Wf(i,d.children),i.flags|=4096);return i}return m?(Ti(),N=d.fallback,m=i.mode,P=n.child,le=P.sibling,d=Bn(P,{mode:"hidden",children:d.children}),d.subtreeFlags=P.subtreeFlags&65011712,le!==null?N=Bn(le,N):(N=ps(N,m,l,null),N.flags|=2),N.return=i,d.return=i,d.sibling=N,i.child=d,jl(null,d),d=i.child,N=n.child.memoizedState,N===null?N=Kf(l):(m=N.cachePool,m!==null?(P=wr._currentValue,m=m.parent!==P?{parent:P,pool:P}:m):m=zg(),N={baseLanes:N.baseLanes|l,cachePool:m}),d.memoizedState=N,d.childLanes=Jf(n,z,l),i.memoizedState=Xf,jl(n.child,d)):(ki(i),l=n.child,n=l.sibling,l=Bn(l,{mode:"visible",children:d.children}),l.return=i,l.sibling=null,n!==null&&(z=i.deletions,z===null?(i.deletions=[n],i.flags|=16):z.push(n)),i.child=l,i.memoizedState=null,l)}function Wf(n,i){return i=T0({mode:"visible",children:i},n.mode),i.return=n,n.child=i}function T0(n,i){return n=xa(22,n,null,i),n.lanes=0,n}function Qf(n,i,l){return Ss(i,n.child,null,l),n=Wf(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function $v(n,i,l){n.lanes|=i;var d=n.alternate;d!==null&&(d.lanes|=i),mf(n.return,i,l)}function eh(n,i,l,d,m,g){var z=n.memoizedState;z===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:m,treeForkCount:g}:(z.isBackwards=i,z.rendering=null,z.renderingStartTime=0,z.last=d,z.tail=l,z.tailMode=m,z.treeForkCount=g)}function Bv(n,i,l){var d=i.pendingProps,m=d.revealOrder,g=d.tail;d=d.children;var z=vr.current,N=(z&2)!==0;if(N?(z=z&1|2,i.flags|=128):z&=1,ee(vr,z),Hr(n,i,d,l),d=bt?_l:0,!N&&n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&$v(n,l,i);else if(n.tag===19)$v(n,l,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(l=i.child,m=null;l!==null;)n=l.alternate,n!==null&&m0(n)===null&&(m=l),l=l.sibling;l=m,l===null?(m=i.child,i.child=null):(m=l.sibling,l.sibling=null),eh(i,!1,m,l,g,d);break;case"backwards":case"unstable_legacy-backwards":for(l=null,m=i.child,i.child=null;m!==null;){if(n=m.alternate,n!==null&&m0(n)===null){i.child=m;break}n=m.sibling,m.sibling=l,l=m,m=n}eh(i,!0,l,null,g,d);break;case"together":eh(i,!1,null,null,void 0,d);break;default:i.memoizedState=null}return i.child}function Zn(n,i,l){if(n!==null&&(i.dependencies=n.dependencies),Mi|=i.lanes,(l&i.childLanes)===0)if(n!==null){if(fo(n,i,l,!1),(l&i.childLanes)===0)return null}else return null;if(n!==null&&i.child!==n.child)throw Error(a(153));if(i.child!==null){for(n=i.child,l=Bn(n,n.pendingProps),i.child=l,l.return=i;n.sibling!==null;)n=n.sibling,l=l.sibling=Bn(n,n.pendingProps),l.return=i;l.sibling=null}return i.child}function th(n,i){return(n.lanes&i)!==0?!0:(n=n.dependencies,!!(n!==null&&s0(n)))}function Z9(n,i,l){switch(i.tag){case 3:Ce(i,i.stateNode.containerInfo),wi(i,wr,n.memoizedState.cache),gs();break;case 27:case 5:oe(i);break;case 4:Ce(i,i.stateNode.containerInfo);break;case 10:wi(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Tf(i),null;break;case 13:var d=i.memoizedState;if(d!==null)return d.dehydrated!==null?(ki(i),i.flags|=128,null):(l&i.child.childLanes)!==0?jv(n,i,l):(ki(i),n=Zn(n,i,l),n!==null?n.sibling:null);ki(i);break;case 19:var m=(n.flags&128)!==0;if(d=(l&i.childLanes)!==0,d||(fo(n,i,l,!1),d=(l&i.childLanes)!==0),m){if(d)return Bv(n,i,l);i.flags|=128}if(m=i.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ee(vr,vr.current),d)break;return null;case 22:return i.lanes=0,Nv(n,i,l,i.pendingProps);case 24:wi(i,wr,n.memoizedState.cache)}return Zn(n,i,l)}function Lv(n,i,l){if(n!==null)if(n.memoizedProps!==i.pendingProps)_r=!0;else{if(!th(n,l)&&(i.flags&128)===0)return _r=!1,Z9(n,i,l);_r=(n.flags&131072)!==0}else _r=!1,bt&&(i.flags&1048576)!==0&&vg(i,_l,i.index);switch(i.lanes=0,i.tag){case 16:e:{var d=i.pendingProps;if(n=xs(i.elementType),i.type=n,typeof n=="function")sf(n)?(d=zs(n,d),i.tag=1,i=Iv(null,i,n,d,l)):(i.tag=0,i=Yf(null,i,n,d,l));else{if(n!=null){var m=n.$$typeof;if(m===j){i.tag=11,i=Av(null,i,n,d,l);break e}else if(m===E){i.tag=14,i=Ev(null,i,n,d,l);break e}}throw i=K(n)||n,Error(a(306,i,""))}}return i;case 0:return Yf(n,i,i.type,i.pendingProps,l);case 1:return d=i.type,m=zs(d,i.pendingProps),Iv(n,i,d,m,l);case 3:e:{if(Ce(i,i.stateNode.containerInfo),n===null)throw Error(a(387));d=i.pendingProps;var g=i.memoizedState;m=g.element,wf(n,i),Cl(i,d,null,l);var z=i.memoizedState;if(d=z.cache,wi(i,wr,d),d!==g.cache&&pf(i,[wr],l,!0),Nl(),d=z.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:z.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Dv(n,i,d,l);break e}else if(d!==m){m=Pa(Error(a(424)),i),zl(m),i=Dv(n,i,d,l);break e}else{switch(n=i.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ft=Fa(n.firstChild),qr=i,bt=!0,bi=null,Ga=!0,l=Ng(i,null,d,l),i.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(gs(),d===m){i=Zn(n,i,l);break e}Hr(n,i,d,l)}i=i.child}return i;case 26:return k0(n,i),n===null?(l=K4(i.type,null,i.pendingProps,null))?i.memoizedState=l:bt||(l=i.type,n=i.pendingProps,d=P0(Ee.current).createElement(l),d[Wt]=i,d[$r]=n,Zr(d,l,n),Vt(d),i.stateNode=d):i.memoizedState=K4(i.type,n.memoizedProps,i.pendingProps,n.memoizedState),null;case 27:return oe(i),n===null&&bt&&(d=i.stateNode=F4(i.type,i.pendingProps,Ee.current),qr=i,Ga=!0,m=Ft,Ii(i.type)?(Ih=m,Ft=Fa(d.firstChild)):Ft=m),Hr(n,i,i.pendingProps.children,l),k0(n,i),n===null&&(i.flags|=4194304),i.child;case 5:return n===null&&bt&&((m=d=Ft)&&(d=xS(d,i.type,i.pendingProps,Ga),d!==null?(i.stateNode=d,qr=i,Ft=Fa(d.firstChild),Ga=!1,m=!0):m=!1),m||xi(i)),oe(i),m=i.type,g=i.pendingProps,z=n!==null?n.memoizedProps:null,d=g.children,Mh(m,g)?d=null:z!==null&&Mh(m,z)&&(i.flags|=32),i.memoizedState!==null&&(m=Ef(n,i,D9,null,null,l),Jl._currentValue=m),k0(n,i),Hr(n,i,d,l),i.child;case 6:return n===null&&bt&&((n=l=Ft)&&(l=wS(l,i.pendingProps,Ga),l!==null?(i.stateNode=l,qr=i,Ft=null,n=!0):n=!1),n||xi(i)),null;case 13:return jv(n,i,l);case 4:return Ce(i,i.stateNode.containerInfo),d=i.pendingProps,n===null?i.child=Ss(i,null,d,l):Hr(n,i,d,l),i.child;case 11:return Av(n,i,i.type,i.pendingProps,l);case 7:return Hr(n,i,i.pendingProps,l),i.child;case 8:return Hr(n,i,i.pendingProps.children,l),i.child;case 12:return Hr(n,i,i.pendingProps.children,l),i.child;case 10:return d=i.pendingProps,wi(i,i.type,d.value),Hr(n,i,d.children,l),i.child;case 9:return m=i.type._context,d=i.pendingProps.children,ys(i),m=Pr(m),d=d(m),i.flags|=1,Hr(n,i,d,l),i.child;case 14:return Ev(n,i,i.type,i.pendingProps,l);case 15:return Mv(n,i,i.type,i.pendingProps,l);case 19:return Bv(n,i,l);case 31:return H9(n,i,l);case 22:return Nv(n,i,l,i.pendingProps);case 24:return ys(i),d=Pr(wr),n===null?(m=yf(),m===null&&(m=$t,g=gf(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=l),m=g),i.memoizedState={parent:d,cache:m},xf(i),wi(i,wr,m)):((n.lanes&l)!==0&&(wf(n,i),Cl(i,null,null,l),Nl()),m=n.memoizedState,g=i.memoizedState,m.parent!==d?(m={parent:d,cache:d},i.memoizedState=m,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=m),wi(i,wr,d)):(d=g.cache,wi(i,wr,d),d!==m.cache&&pf(i,[wr],l,!0))),Hr(n,i,i.pendingProps.children,l),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function Gn(n){n.flags|=4}function rh(n,i,l,d,m){if((i=(n.mode&32)!==0)&&(i=!1),i){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(f4())n.flags|=8192;else throw ws=c0,bf}else n.flags&=-16777217}function Uv(n,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!ty(i))if(f4())n.flags|=8192;else throw ws=c0,bf}function A0(n,i){i!==null&&(n.flags|=4),n.flags&16384&&(i=n.tag!==22?Uu():536870912,n.lanes|=i,zo|=i)}function $l(n,i){if(!bt)switch(n.tailMode){case"hidden":i=n.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?n.tail=null:l.sibling=null;break;case"collapsed":l=n.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:d.sibling=null}}function Yt(n){var i=n.alternate!==null&&n.alternate.child===n.child,l=0,d=0;if(i)for(var m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags&65011712,d|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)l|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=d,n.childLanes=l,i}function G9(n,i,l){var d=i.pendingProps;switch(cf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(i),null;case 1:return Yt(i),null;case 3:return l=i.stateNode,d=null,n!==null&&(d=n.memoizedState.cache),i.memoizedState.cache!==d&&(i.flags|=2048),qn(wr),H(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(n===null||n.child===null)&&(co(i)?Gn(i):n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ff())),Yt(i),null;case 26:var m=i.type,g=i.memoizedState;return n===null?(Gn(i),g!==null?(Yt(i),Uv(i,g)):(Yt(i),rh(i,m,null,d,l))):g?g!==n.memoizedState?(Gn(i),Yt(i),Uv(i,g)):(Yt(i),i.flags&=-16777217):(n=n.memoizedProps,n!==d&&Gn(i),Yt(i),rh(i,m,n,d,l)),null;case 27:if(ge(i),l=Ee.current,m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==d&&Gn(i);else{if(!d){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}n=re.current,co(i)?bg(i):(n=F4(m,d,l),i.stateNode=n,Gn(i))}return Yt(i),null;case 5:if(ge(i),m=i.type,n!==null&&i.stateNode!=null)n.memoizedProps!==d&&Gn(i);else{if(!d){if(i.stateNode===null)throw Error(a(166));return Yt(i),null}if(g=re.current,co(i))bg(i);else{var z=P0(Ee.current);switch(g){case 1:g=z.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=z.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=z.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=z.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=z.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof d.is=="string"?z.createElement("select",{is:d.is}):z.createElement("select"),d.multiple?g.multiple=!0:d.size&&(g.size=d.size);break;default:g=typeof d.is=="string"?z.createElement(m,{is:d.is}):z.createElement(m)}}g[Wt]=i,g[$r]=d;e:for(z=i.child;z!==null;){if(z.tag===5||z.tag===6)g.appendChild(z.stateNode);else if(z.tag!==4&&z.tag!==27&&z.child!==null){z.child.return=z,z=z.child;continue}if(z===i)break e;for(;z.sibling===null;){if(z.return===null||z.return===i)break e;z=z.return}z.sibling.return=z.return,z=z.sibling}i.stateNode=g;e:switch(Zr(g,m,d),m){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Gn(i)}}return Yt(i),rh(i,i.type,n===null?null:n.memoizedProps,i.pendingProps,l),null;case 6:if(n&&i.stateNode!=null)n.memoizedProps!==d&&Gn(i);else{if(typeof d!="string"&&i.stateNode===null)throw Error(a(166));if(n=Ee.current,co(i)){if(n=i.stateNode,l=i.memoizedProps,d=null,m=qr,m!==null)switch(m.tag){case 27:case 5:d=m.memoizedProps}n[Wt]=i,n=!!(n.nodeValue===l||d!==null&&d.suppressHydrationWarning===!0||j4(n.nodeValue,l)),n||xi(i,!0)}else n=P0(n).createTextNode(d),n[Wt]=i,i.stateNode=n}return Yt(i),null;case 31:if(l=i.memoizedState,n===null||n.memoizedState!==null){if(d=co(i),l!==null){if(n===null){if(!d)throw Error(a(318));if(n=i.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(a(557));n[Wt]=i}else gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),n=!1}else l=ff(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=l),n=!0;if(!n)return i.flags&256?(Sa(i),i):(Sa(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Yt(i),null;case 13:if(d=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=co(i),d!==null&&d.dehydrated!==null){if(n===null){if(!m)throw Error(a(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));m[Wt]=i}else gs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Yt(i),m=!1}else m=ff(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return i.flags&256?(Sa(i),i):(Sa(i),null)}return Sa(i),(i.flags&128)!==0?(i.lanes=l,i):(l=d!==null,n=n!==null&&n.memoizedState!==null,l&&(d=i.child,m=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(m=d.alternate.memoizedState.cachePool.pool),g=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(g=d.memoizedState.cachePool.pool),g!==m&&(d.flags|=2048)),l!==n&&l&&(i.child.flags|=8192),A0(i,i.updateQueue),Yt(i),null);case 4:return H(),n===null&&zh(i.stateNode.containerInfo),Yt(i),null;case 10:return qn(i.type),Yt(i),null;case 19:if(ne(vr),d=i.memoizedState,d===null)return Yt(i),null;if(m=(i.flags&128)!==0,g=d.rendering,g===null)if(m)$l(d,!1);else{if(dr!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(g=m0(n),g!==null){for(i.flags|=128,$l(d,!1),n=g.updateQueue,i.updateQueue=n,A0(i,n),i.subtreeFlags=0,n=l,l=i.child;l!==null;)mg(l,n),l=l.sibling;return ee(vr,vr.current&1|2),bt&&Ln(i,d.treeForkCount),i.child}n=n.sibling}d.tail!==null&&nr()>O0&&(i.flags|=128,m=!0,$l(d,!1),i.lanes=4194304)}else{if(!m)if(n=m0(g),n!==null){if(i.flags|=128,m=!0,n=n.updateQueue,i.updateQueue=n,A0(i,n),$l(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!bt)return Yt(i),null}else 2*nr()-d.renderingStartTime>O0&&l!==536870912&&(i.flags|=128,m=!0,$l(d,!1),i.lanes=4194304);d.isBackwards?(g.sibling=i.child,i.child=g):(n=d.last,n!==null?n.sibling=g:i.child=g,d.last=g)}return d.tail!==null?(n=d.tail,d.rendering=n,d.tail=n.sibling,d.renderingStartTime=nr(),n.sibling=null,l=vr.current,ee(vr,m?l&1|2:l&1),bt&&Ln(i,d.treeForkCount),n):(Yt(i),null);case 22:case 23:return Sa(i),kf(),d=i.memoizedState!==null,n!==null?n.memoizedState!==null!==d&&(i.flags|=8192):d&&(i.flags|=8192),d?(l&536870912)!==0&&(i.flags&128)===0&&(Yt(i),i.subtreeFlags&6&&(i.flags|=8192)):Yt(i),l=i.updateQueue,l!==null&&A0(i,l.retryQueue),l=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),d=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),d!==l&&(i.flags|=2048),n!==null&&ne(bs),null;case 24:return l=null,n!==null&&(l=n.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),qn(wr),Yt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function V9(n,i){switch(cf(i),i.tag){case 1:return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return qn(wr),H(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 26:case 27:case 5:return ge(i),null;case 31:if(i.memoizedState!==null){if(Sa(i),i.alternate===null)throw Error(a(340));gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 13:if(Sa(i),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(a(340));gs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return ne(vr),null;case 4:return H(),null;case 10:return qn(i.type),null;case 22:case 23:return Sa(i),kf(),n!==null&&ne(bs),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 24:return qn(wr),null;case 25:return null;default:return null}}function qv(n,i){switch(cf(i),i.tag){case 3:qn(wr),H();break;case 26:case 27:case 5:ge(i);break;case 4:H();break;case 31:i.memoizedState!==null&&Sa(i);break;case 13:Sa(i);break;case 19:ne(vr);break;case 10:qn(i.type);break;case 22:case 23:Sa(i),kf(),n!==null&&ne(bs);break;case 24:qn(wr)}}function Bl(n,i){try{var l=i.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var m=d.next;l=m;do{if((l.tag&n)===n){d=void 0;var g=l.create,z=l.inst;d=g(),z.destroy=d}l=l.next}while(l!==m)}}catch(N){Mt(i,i.return,N)}}function Ai(n,i,l){try{var d=i.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var g=m.next;d=g;do{if((d.tag&n)===n){var z=d.inst,N=z.destroy;if(N!==void 0){z.destroy=void 0,m=i;var P=l,le=N;try{le()}catch(me){Mt(m,P,me)}}}d=d.next}while(d!==g)}}catch(me){Mt(i,i.return,me)}}function Pv(n){var i=n.updateQueue;if(i!==null){var l=n.stateNode;try{Og(i,l)}catch(d){Mt(n,n.return,d)}}}function Hv(n,i,l){l.props=zs(n.type,n.memoizedProps),l.state=n.memoizedState;try{l.componentWillUnmount()}catch(d){Mt(n,i,d)}}function Ll(n,i){try{var l=n.ref;if(l!==null){switch(n.tag){case 26:case 27:case 5:var d=n.stateNode;break;case 30:d=n.stateNode;break;default:d=n.stateNode}typeof l=="function"?n.refCleanup=l(d):l.current=d}}catch(m){Mt(n,i,m)}}function bn(n,i){var l=n.ref,d=n.refCleanup;if(l!==null)if(typeof d=="function")try{d()}catch(m){Mt(n,i,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(m){Mt(n,i,m)}else l.current=null}function Zv(n){var i=n.type,l=n.memoizedProps,d=n.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":l.autoFocus&&d.focus();break e;case"img":l.src?d.src=l.src:l.srcSet&&(d.srcset=l.srcSet)}}catch(m){Mt(n,n.return,m)}}function ah(n,i,l){try{var d=n.stateNode;mS(d,n.type,l,i),d[$r]=i}catch(m){Mt(n,n.return,m)}}function Gv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ii(n.type)||n.tag===4}function nh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Gv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ii(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ih(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(n,i):(i=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,i.appendChild(n),l=l._reactRootContainer,l!=null||i.onclick!==null||(i.onclick=jn));else if(d!==4&&(d===27&&Ii(n.type)&&(l=n.stateNode,i=null),n=n.child,n!==null))for(ih(n,i,l),n=n.sibling;n!==null;)ih(n,i,l),n=n.sibling}function E0(n,i,l){var d=n.tag;if(d===5||d===6)n=n.stateNode,i?l.insertBefore(n,i):l.appendChild(n);else if(d!==4&&(d===27&&Ii(n.type)&&(l=n.stateNode),n=n.child,n!==null))for(E0(n,i,l),n=n.sibling;n!==null;)E0(n,i,l),n=n.sibling}function Vv(n){var i=n.stateNode,l=n.memoizedProps;try{for(var d=n.type,m=i.attributes;m.length;)i.removeAttributeNode(m[0]);Zr(i,d,l),i[Wt]=n,i[$r]=l}catch(g){Mt(n,n.return,g)}}var Vn=!1,zr=!1,sh=!1,Fv=typeof WeakSet=="function"?WeakSet:Set,Lr=null;function F9(n,i){if(n=n.containerInfo,Ah=X0,n=ig(n),Wd(n)){if("selectionStart"in n)var l={start:n.selectionStart,end:n.selectionEnd};else e:{l=(l=n.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var m=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var z=0,N=-1,P=-1,le=0,me=0,ve=n,ce=null;t:for(;;){for(var fe;ve!==l||m!==0&&ve.nodeType!==3||(N=z+m),ve!==g||d!==0&&ve.nodeType!==3||(P=z+d),ve.nodeType===3&&(z+=ve.nodeValue.length),(fe=ve.firstChild)!==null;)ce=ve,ve=fe;for(;;){if(ve===n)break t;if(ce===l&&++le===m&&(N=z),ce===g&&++me===d&&(P=z),(fe=ve.nextSibling)!==null)break;ve=ce,ce=ve.parentNode}ve=fe}l=N===-1||P===-1?null:{start:N,end:P}}else l=null}l=l||{start:0,end:0}}else l=null;for(Eh={focusedElem:n,selectionRange:l},X0=!1,Lr=i;Lr!==null;)if(i=Lr,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,Lr=n;else for(;Lr!==null;){switch(i=Lr,g=i.alternate,n=i.flags,i.tag){case 0:if((n&4)!==0&&(n=i.updateQueue,n=n!==null?n.events:null,n!==null))for(l=0;l<n.length;l++)m=n[l],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,l=i,m=g.memoizedProps,g=g.memoizedState,d=l.stateNode;try{var $e=zs(l.type,m);n=d.getSnapshotBeforeUpdate($e,g),d.__reactInternalSnapshotBeforeUpdate=n}catch(We){Mt(l,l.return,We)}}break;case 3:if((n&1024)!==0){if(n=i.stateNode.containerInfo,l=n.nodeType,l===9)Ch(n);else if(l===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Ch(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(a(163))}if(n=i.sibling,n!==null){n.return=i.return,Lr=n;break}Lr=i.return}}function Yv(n,i,l){var d=l.flags;switch(l.tag){case 0:case 11:case 15:Yn(n,l),d&4&&Bl(5,l);break;case 1:if(Yn(n,l),d&4)if(n=l.stateNode,i===null)try{n.componentDidMount()}catch(z){Mt(l,l.return,z)}else{var m=zs(l.type,i.memoizedProps);i=i.memoizedState;try{n.componentDidUpdate(m,i,n.__reactInternalSnapshotBeforeUpdate)}catch(z){Mt(l,l.return,z)}}d&64&&Pv(l),d&512&&Ll(l,l.return);break;case 3:if(Yn(n,l),d&64&&(n=l.updateQueue,n!==null)){if(i=null,l.child!==null)switch(l.child.tag){case 27:case 5:i=l.child.stateNode;break;case 1:i=l.child.stateNode}try{Og(n,i)}catch(z){Mt(l,l.return,z)}}break;case 27:i===null&&d&4&&Vv(l);case 26:case 5:Yn(n,l),i===null&&d&4&&Zv(l),d&512&&Ll(l,l.return);break;case 12:Yn(n,l);break;case 31:Yn(n,l),d&4&&Jv(n,l);break;case 13:Yn(n,l),d&4&&Wv(n,l),d&64&&(n=l.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(l=rS.bind(null,l),SS(n,l))));break;case 22:if(d=l.memoizedState!==null||Vn,!d){i=i!==null&&i.memoizedState!==null||zr,m=Vn;var g=zr;Vn=d,(zr=i)&&!g?Xn(n,l,(l.subtreeFlags&8772)!==0):Yn(n,l),Vn=m,zr=g}break;case 30:break;default:Yn(n,l)}}function Xv(n){var i=n.alternate;i!==null&&(n.alternate=null,Xv(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&gr(i)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var er=null,oa=!1;function Fn(n,i,l){for(l=l.child;l!==null;)Kv(n,i,l),l=l.sibling}function Kv(n,i,l){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(pr,l)}catch{}switch(l.tag){case 26:zr||bn(l,i),Fn(n,i,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:zr||bn(l,i);var d=er,m=oa;Ii(l.type)&&(er=l.stateNode,oa=!1),Fn(n,i,l),Yl(l.stateNode),er=d,oa=m;break;case 5:zr||bn(l,i);case 6:if(d=er,m=oa,er=null,Fn(n,i,l),er=d,oa=m,er!==null)if(oa)try{(er.nodeType===9?er.body:er.nodeName==="HTML"?er.ownerDocument.body:er).removeChild(l.stateNode)}catch(g){Mt(l,i,g)}else try{er.removeChild(l.stateNode)}catch(g){Mt(l,i,g)}break;case 18:er!==null&&(oa?(n=er,P4(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,l.stateNode),Oo(n)):P4(er,l.stateNode));break;case 4:d=er,m=oa,er=l.stateNode.containerInfo,oa=!0,Fn(n,i,l),er=d,oa=m;break;case 0:case 11:case 14:case 15:Ai(2,l,i),zr||Ai(4,l,i),Fn(n,i,l);break;case 1:zr||(bn(l,i),d=l.stateNode,typeof d.componentWillUnmount=="function"&&Hv(l,i,d)),Fn(n,i,l);break;case 21:Fn(n,i,l);break;case 22:zr=(d=zr)||l.memoizedState!==null,Fn(n,i,l),zr=d;break;default:Fn(n,i,l)}}function Jv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{Oo(n)}catch(l){Mt(i,i.return,l)}}}function Wv(n,i){if(i.memoizedState===null&&(n=i.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Oo(n)}catch(l){Mt(i,i.return,l)}}function Y9(n){switch(n.tag){case 31:case 13:case 19:var i=n.stateNode;return i===null&&(i=n.stateNode=new Fv),i;case 22:return n=n.stateNode,i=n._retryCache,i===null&&(i=n._retryCache=new Fv),i;default:throw Error(a(435,n.tag))}}function M0(n,i){var l=Y9(n);i.forEach(function(d){if(!l.has(d)){l.add(d);var m=aS.bind(null,n,d);d.then(m,m)}})}function la(n,i){var l=i.deletions;if(l!==null)for(var d=0;d<l.length;d++){var m=l[d],g=n,z=i,N=z;e:for(;N!==null;){switch(N.tag){case 27:if(Ii(N.type)){er=N.stateNode,oa=!1;break e}break;case 5:er=N.stateNode,oa=!1;break e;case 3:case 4:er=N.stateNode.containerInfo,oa=!0;break e}N=N.return}if(er===null)throw Error(a(160));Kv(g,z,m),er=null,oa=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Qv(i,n),i=i.sibling}var sn=null;function Qv(n,i){var l=n.alternate,d=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:la(i,n),ua(n),d&4&&(Ai(3,n,n.return),Bl(3,n),Ai(5,n,n.return));break;case 1:la(i,n),ua(n),d&512&&(zr||l===null||bn(l,l.return)),d&64&&Vn&&(n=n.updateQueue,n!==null&&(d=n.callbacks,d!==null&&(l=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=l===null?d:l.concat(d))));break;case 26:var m=sn;if(la(i,n),ua(n),d&512&&(zr||l===null||bn(l,l.return)),d&4){var g=l!==null?l.memoizedState:null;if(d=n.memoizedState,l===null)if(d===null)if(n.stateNode===null){e:{d=n.type,l=n.memoizedProps,m=m.ownerDocument||m;t:switch(d){case"title":g=m.getElementsByTagName("title")[0],(!g||g[Ze]||g[Wt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(d),m.head.insertBefore(g,m.querySelector("head > title"))),Zr(g,d,l),g[Wt]=n,Vt(g),d=g;break e;case"link":var z=Q4("link","href",m).get(d+(l.href||""));if(z){for(var N=0;N<z.length;N++)if(g=z[N],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){z.splice(N,1);break t}}g=m.createElement(d),Zr(g,d,l),m.head.appendChild(g);break;case"meta":if(z=Q4("meta","content",m).get(d+(l.content||""))){for(N=0;N<z.length;N++)if(g=z[N],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){z.splice(N,1);break t}}g=m.createElement(d),Zr(g,d,l),m.head.appendChild(g);break;default:throw Error(a(468,d))}g[Wt]=n,Vt(g),d=g}n.stateNode=d}else ey(m,n.type,n.stateNode);else n.stateNode=W4(m,d,n.memoizedProps);else g!==d?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,d===null?ey(m,n.type,n.stateNode):W4(m,d,n.memoizedProps)):d===null&&n.stateNode!==null&&ah(n,n.memoizedProps,l.memoizedProps)}break;case 27:la(i,n),ua(n),d&512&&(zr||l===null||bn(l,l.return)),l!==null&&d&4&&ah(n,n.memoizedProps,l.memoizedProps);break;case 5:if(la(i,n),ua(n),d&512&&(zr||l===null||bn(l,l.return)),n.flags&32){m=n.stateNode;try{eo(m,"")}catch($e){Mt(n,n.return,$e)}}d&4&&n.stateNode!=null&&(m=n.memoizedProps,ah(n,m,l!==null?l.memoizedProps:m)),d&1024&&(sh=!0);break;case 6:if(la(i,n),ua(n),d&4){if(n.stateNode===null)throw Error(a(162));d=n.memoizedProps,l=n.stateNode;try{l.nodeValue=d}catch($e){Mt(n,n.return,$e)}}break;case 3:if(G0=null,m=sn,sn=H0(i.containerInfo),la(i,n),sn=m,ua(n),d&4&&l!==null&&l.memoizedState.isDehydrated)try{Oo(i.containerInfo)}catch($e){Mt(n,n.return,$e)}sh&&(sh=!1,e4(n));break;case 4:d=sn,sn=H0(n.stateNode.containerInfo),la(i,n),ua(n),sn=d;break;case 12:la(i,n),ua(n);break;case 31:la(i,n),ua(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,M0(n,d)));break;case 13:la(i,n),ua(n),n.child.flags&8192&&n.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(C0=nr()),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,M0(n,d)));break;case 22:m=n.memoizedState!==null;var P=l!==null&&l.memoizedState!==null,le=Vn,me=zr;if(Vn=le||m,zr=me||P,la(i,n),zr=me,Vn=le,ua(n),d&8192)e:for(i=n.stateNode,i._visibility=m?i._visibility&-2:i._visibility|1,m&&(l===null||P||Vn||zr||ks(n)),l=null,i=n;;){if(i.tag===5||i.tag===26){if(l===null){P=l=i;try{if(g=P.stateNode,m)z=g.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{N=P.stateNode;var ve=P.memoizedProps.style,ce=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;N.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch($e){Mt(P,P.return,$e)}}}else if(i.tag===6){if(l===null){P=i;try{P.stateNode.nodeValue=m?"":P.memoizedProps}catch($e){Mt(P,P.return,$e)}}}else if(i.tag===18){if(l===null){P=i;try{var fe=P.stateNode;m?H4(fe,!0):H4(P.stateNode,!1)}catch($e){Mt(P,P.return,$e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===n)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;l===i&&(l=null),i=i.return}l===i&&(l=null),i.sibling.return=i.return,i=i.sibling}d&4&&(d=n.updateQueue,d!==null&&(l=d.retryQueue,l!==null&&(d.retryQueue=null,M0(n,l))));break;case 19:la(i,n),ua(n),d&4&&(d=n.updateQueue,d!==null&&(n.updateQueue=null,M0(n,d)));break;case 30:break;case 21:break;default:la(i,n),ua(n)}}function ua(n){var i=n.flags;if(i&2){try{for(var l,d=n.return;d!==null;){if(Gv(d)){l=d;break}d=d.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var m=l.stateNode,g=nh(n);E0(n,g,m);break;case 5:var z=l.stateNode;l.flags&32&&(eo(z,""),l.flags&=-33);var N=nh(n);E0(n,N,z);break;case 3:case 4:var P=l.stateNode.containerInfo,le=nh(n);ih(n,le,P);break;default:throw Error(a(161))}}catch(me){Mt(n,n.return,me)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function e4(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var i=n;e4(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),n=n.sibling}}function Yn(n,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Yv(n,i.alternate,i),i=i.sibling}function ks(n){for(n=n.child;n!==null;){var i=n;switch(i.tag){case 0:case 11:case 14:case 15:Ai(4,i,i.return),ks(i);break;case 1:bn(i,i.return);var l=i.stateNode;typeof l.componentWillUnmount=="function"&&Hv(i,i.return,l),ks(i);break;case 27:Yl(i.stateNode);case 26:case 5:bn(i,i.return),ks(i);break;case 22:i.memoizedState===null&&ks(i);break;case 30:ks(i);break;default:ks(i)}n=n.sibling}}function Xn(n,i,l){for(l=l&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var d=i.alternate,m=n,g=i,z=g.flags;switch(g.tag){case 0:case 11:case 15:Xn(m,g,l),Bl(4,g);break;case 1:if(Xn(m,g,l),d=g,m=d.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(le){Mt(d,d.return,le)}if(d=g,m=d.updateQueue,m!==null){var N=d.stateNode;try{var P=m.shared.hiddenCallbacks;if(P!==null)for(m.shared.hiddenCallbacks=null,m=0;m<P.length;m++)Cg(P[m],N)}catch(le){Mt(d,d.return,le)}}l&&z&64&&Pv(g),Ll(g,g.return);break;case 27:Vv(g);case 26:case 5:Xn(m,g,l),l&&d===null&&z&4&&Zv(g),Ll(g,g.return);break;case 12:Xn(m,g,l);break;case 31:Xn(m,g,l),l&&z&4&&Jv(m,g);break;case 13:Xn(m,g,l),l&&z&4&&Wv(m,g);break;case 22:g.memoizedState===null&&Xn(m,g,l),Ll(g,g.return);break;case 30:break;default:Xn(m,g,l)}i=i.sibling}}function oh(n,i){var l=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(l=n.memoizedState.cachePool.pool),n=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(n=i.memoizedState.cachePool.pool),n!==l&&(n!=null&&n.refCount++,l!=null&&kl(l))}function lh(n,i){n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&kl(n))}function on(n,i,l,d){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)t4(n,i,l,d),i=i.sibling}function t4(n,i,l,d){var m=i.flags;switch(i.tag){case 0:case 11:case 15:on(n,i,l,d),m&2048&&Bl(9,i);break;case 1:on(n,i,l,d);break;case 3:on(n,i,l,d),m&2048&&(n=null,i.alternate!==null&&(n=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==n&&(i.refCount++,n!=null&&kl(n)));break;case 12:if(m&2048){on(n,i,l,d),n=i.stateNode;try{var g=i.memoizedProps,z=g.id,N=g.onPostCommit;typeof N=="function"&&N(z,i.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(P){Mt(i,i.return,P)}}else on(n,i,l,d);break;case 31:on(n,i,l,d);break;case 13:on(n,i,l,d);break;case 23:break;case 22:g=i.stateNode,z=i.alternate,i.memoizedState!==null?g._visibility&2?on(n,i,l,d):Ul(n,i):g._visibility&2?on(n,i,l,d):(g._visibility|=2,wo(n,i,l,d,(i.subtreeFlags&10256)!==0||!1)),m&2048&&oh(z,i);break;case 24:on(n,i,l,d),m&2048&&lh(i.alternate,i);break;default:on(n,i,l,d)}}function wo(n,i,l,d,m){for(m=m&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=n,z=i,N=l,P=d,le=z.flags;switch(z.tag){case 0:case 11:case 15:wo(g,z,N,P,m),Bl(8,z);break;case 23:break;case 22:var me=z.stateNode;z.memoizedState!==null?me._visibility&2?wo(g,z,N,P,m):Ul(g,z):(me._visibility|=2,wo(g,z,N,P,m)),m&&le&2048&&oh(z.alternate,z);break;case 24:wo(g,z,N,P,m),m&&le&2048&&lh(z.alternate,z);break;default:wo(g,z,N,P,m)}i=i.sibling}}function Ul(n,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var l=n,d=i,m=d.flags;switch(d.tag){case 22:Ul(l,d),m&2048&&oh(d.alternate,d);break;case 24:Ul(l,d),m&2048&&lh(d.alternate,d);break;default:Ul(l,d)}i=i.sibling}}var ql=8192;function So(n,i,l){if(n.subtreeFlags&ql)for(n=n.child;n!==null;)r4(n,i,l),n=n.sibling}function r4(n,i,l){switch(n.tag){case 26:So(n,i,l),n.flags&ql&&n.memoizedState!==null&&IS(l,sn,n.memoizedState,n.memoizedProps);break;case 5:So(n,i,l);break;case 3:case 4:var d=sn;sn=H0(n.stateNode.containerInfo),So(n,i,l),sn=d;break;case 22:n.memoizedState===null&&(d=n.alternate,d!==null&&d.memoizedState!==null?(d=ql,ql=16777216,So(n,i,l),ql=d):So(n,i,l));break;default:So(n,i,l)}}function a4(n){var i=n.alternate;if(i!==null&&(n=i.child,n!==null)){i.child=null;do i=n.sibling,n.sibling=null,n=i;while(n!==null)}}function Pl(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Lr=d,i4(d,n)}a4(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)n4(n),n=n.sibling}function n4(n){switch(n.tag){case 0:case 11:case 15:Pl(n),n.flags&2048&&Ai(9,n,n.return);break;case 3:Pl(n);break;case 12:Pl(n);break;case 22:var i=n.stateNode;n.memoizedState!==null&&i._visibility&2&&(n.return===null||n.return.tag!==13)?(i._visibility&=-3,N0(n)):Pl(n);break;default:Pl(n)}}function N0(n){var i=n.deletions;if((n.flags&16)!==0){if(i!==null)for(var l=0;l<i.length;l++){var d=i[l];Lr=d,i4(d,n)}a4(n)}for(n=n.child;n!==null;){switch(i=n,i.tag){case 0:case 11:case 15:Ai(8,i,i.return),N0(i);break;case 22:l=i.stateNode,l._visibility&2&&(l._visibility&=-3,N0(i));break;default:N0(i)}n=n.sibling}}function i4(n,i){for(;Lr!==null;){var l=Lr;switch(l.tag){case 0:case 11:case 15:Ai(8,l,i);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var d=l.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:kl(l.memoizedState.cache)}if(d=l.child,d!==null)d.return=l,Lr=d;else e:for(l=n;Lr!==null;){d=Lr;var m=d.sibling,g=d.return;if(Xv(d),d===l){Lr=null;break e}if(m!==null){m.return=g,Lr=m;break e}Lr=g}}}var X9={getCacheForType:function(n){var i=Pr(wr),l=i.data.get(n);return l===void 0&&(l=n(),i.data.set(n,l)),l},cacheSignal:function(){return Pr(wr).controller.signal}},K9=typeof WeakMap=="function"?WeakMap:Map,At=0,$t=null,mt=null,vt=0,Et=0,_a=null,Ei=!1,_o=!1,uh=!1,Kn=0,dr=0,Mi=0,Ts=0,ch=0,za=0,zo=0,Hl=null,ca=null,dh=!1,C0=0,s4=0,O0=1/0,R0=null,Ni=null,Nr=0,Ci=null,ko=null,Jn=0,fh=0,hh=null,o4=null,Zl=0,mh=null;function ka(){return(At&2)!==0&&vt!==0?vt&-vt:q.T!==null?xh():gi()}function l4(){if(za===0)if((vt&536870912)===0||bt){var n=pn;pn<<=1,(pn&3932160)===0&&(pn=262144),za=n}else za=536870912;return n=wa.current,n!==null&&(n.flags|=32),za}function da(n,i,l){(n===$t&&(Et===2||Et===9)||n.cancelPendingCommit!==null)&&(To(n,0),Oi(n,vt,za,!1)),pi(n,l),((At&2)===0||n!==$t)&&(n===$t&&((At&2)===0&&(Ts|=l),dr===4&&Oi(n,vt,za,!1)),xn(n))}function u4(n,i,l){if((At&6)!==0)throw Error(a(327));var d=!l&&(i&127)===0&&(i&n.expiredLanes)===0||On(n,i),m=d?Q9(n,i):gh(n,i,!0),g=d;do{if(m===0){_o&&!d&&Oi(n,i,0,!1);break}else{if(l=n.current.alternate,g&&!J9(l)){m=gh(n,i,!1),g=!1;continue}if(m===2){if(g=i,n.errorRecoveryDisabledLanes&g)var z=0;else z=n.pendingLanes&-536870913,z=z!==0?z:z&536870912?536870912:0;if(z!==0){i=z;e:{var N=n;m=Hl;var P=N.current.memoizedState.isDehydrated;if(P&&(To(N,z).flags|=256),z=gh(N,z,!1),z!==2){if(uh&&!P){N.errorRecoveryDisabledLanes|=g,Ts|=g,m=4;break e}g=ca,ca=m,g!==null&&(ca===null?ca=g:ca.push.apply(ca,g))}m=z}if(g=!1,m!==2)continue}}if(m===1){To(n,0),Oi(n,i,0,!0);break}e:{switch(d=n,g=m,g){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:Oi(d,i,za,!Ei);break e;case 2:ca=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(m=C0+300-nr(),10<m)){if(Oi(d,i,za,!Ei),us(d,0,!0)!==0)break e;Jn=i,d.timeoutHandle=U4(c4.bind(null,d,l,ca,R0,dh,i,za,Ts,zo,Ei,g,"Throttled",-0,0),m);break e}c4(d,l,ca,R0,dh,i,za,Ts,zo,Ei,g,null,-0,0)}}break}while(!0);xn(n)}function c4(n,i,l,d,m,g,z,N,P,le,me,ve,ce,fe){if(n.timeoutHandle=-1,ve=i.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:jn},r4(i,g,ve);var $e=(g&62914560)===g?C0-nr():(g&4194048)===g?s4-nr():0;if($e=DS(ve,$e),$e!==null){Jn=g,n.cancelPendingCommit=$e(y4.bind(null,n,i,g,l,d,m,z,N,P,me,ve,null,ce,fe)),Oi(n,g,z,!le);return}}y4(n,i,g,l,d,m,z,N,P)}function J9(n){for(var i=n;;){var l=i.tag;if((l===0||l===11||l===15)&&i.flags&16384&&(l=i.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var d=0;d<l.length;d++){var m=l[d],g=m.getSnapshot;m=m.value;try{if(!ba(g(),m))return!1}catch{return!1}}if(l=i.child,i.subtreeFlags&16384&&l!==null)l.return=i,i=l;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Oi(n,i,l,d){i&=~ch,i&=~Ts,n.suspendedLanes|=i,n.pingedLanes&=~i,d&&(n.warmLanes|=i),d=n.expirationTimes;for(var m=i;0<m;){var g=31-Vr(m),z=1<<g;d[g]=-1,m&=~z}l!==0&&Rn(n,l,i)}function I0(){return(At&6)===0?(Gl(0),!1):!0}function ph(){if(mt!==null){if(Et===0)var n=mt.return;else n=mt,Un=vs=null,Cf(n),go=null,Al=0,n=mt;for(;n!==null;)qv(n.alternate,n),n=n.return;mt=null}}function To(n,i){var l=n.timeoutHandle;l!==-1&&(n.timeoutHandle=-1,vS(l)),l=n.cancelPendingCommit,l!==null&&(n.cancelPendingCommit=null,l()),Jn=0,ph(),$t=n,mt=l=Bn(n.current,null),vt=i,Et=0,_a=null,Ei=!1,_o=On(n,i),uh=!1,zo=za=ch=Ts=Mi=dr=0,ca=Hl=null,dh=!1,(i&8)!==0&&(i|=i&32);var d=n.entangledLanes;if(d!==0)for(n=n.entanglements,d&=i;0<d;){var m=31-Vr(d),g=1<<m;i|=n[m],d&=~g}return Kn=i,t0(),l}function d4(n,i){st=null,q.H=Dl,i===po||i===u0?(i=Ag(),Et=3):i===bf?(i=Ag(),Et=4):Et=i===Ff?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,_a=i,mt===null&&(dr=1,_0(n,Pa(i,n.current)))}function f4(){var n=wa.current;return n===null?!0:(vt&4194048)===vt?Va===null:(vt&62914560)===vt||(vt&536870912)!==0?n===Va:!1}function h4(){var n=q.H;return q.H=Dl,n===null?Dl:n}function m4(){var n=q.A;return q.A=X9,n}function D0(){dr=4,Ei||(vt&4194048)!==vt&&wa.current!==null||(_o=!0),(Mi&134217727)===0&&(Ts&134217727)===0||$t===null||Oi($t,vt,za,!1)}function gh(n,i,l){var d=At;At|=2;var m=h4(),g=m4();($t!==n||vt!==i)&&(R0=null,To(n,i)),i=!1;var z=dr;e:do try{if(Et!==0&&mt!==null){var N=mt,P=_a;switch(Et){case 8:ph(),z=6;break e;case 3:case 2:case 9:case 6:wa.current===null&&(i=!0);var le=Et;if(Et=0,_a=null,Ao(n,N,P,le),l&&_o){z=0;break e}break;default:le=Et,Et=0,_a=null,Ao(n,N,P,le)}}W9(),z=dr;break}catch(me){d4(n,me)}while(!0);return i&&n.shellSuspendCounter++,Un=vs=null,At=d,q.H=m,q.A=g,mt===null&&($t=null,vt=0,t0()),z}function W9(){for(;mt!==null;)p4(mt)}function Q9(n,i){var l=At;At|=2;var d=h4(),m=m4();$t!==n||vt!==i?(R0=null,O0=nr()+500,To(n,i)):_o=On(n,i);e:do try{if(Et!==0&&mt!==null){i=mt;var g=_a;t:switch(Et){case 1:Et=0,_a=null,Ao(n,i,g,1);break;case 2:case 9:if(kg(g)){Et=0,_a=null,g4(i);break}i=function(){Et!==2&&Et!==9||$t!==n||(Et=7),xn(n)},g.then(i,i);break e;case 3:Et=7;break e;case 4:Et=5;break e;case 7:kg(g)?(Et=0,_a=null,g4(i)):(Et=0,_a=null,Ao(n,i,g,7));break;case 5:var z=null;switch(mt.tag){case 26:z=mt.memoizedState;case 5:case 27:var N=mt;if(z?ty(z):N.stateNode.complete){Et=0,_a=null;var P=N.sibling;if(P!==null)mt=P;else{var le=N.return;le!==null?(mt=le,j0(le)):mt=null}break t}}Et=0,_a=null,Ao(n,i,g,5);break;case 6:Et=0,_a=null,Ao(n,i,g,6);break;case 8:ph(),dr=6;break e;default:throw Error(a(462))}}eS();break}catch(me){d4(n,me)}while(!0);return Un=vs=null,q.H=d,q.A=m,At=l,mt!==null?0:($t=null,vt=0,t0(),dr)}function eS(){for(;mt!==null&&!ht();)p4(mt)}function p4(n){var i=Lv(n.alternate,n,Kn);n.memoizedProps=n.pendingProps,i===null?j0(n):mt=i}function g4(n){var i=n,l=i.alternate;switch(i.tag){case 15:case 0:i=Rv(l,i,i.pendingProps,i.type,void 0,vt);break;case 11:i=Rv(l,i,i.pendingProps,i.type.render,i.ref,vt);break;case 5:Cf(i);default:qv(l,i),i=mt=mg(i,Kn),i=Lv(l,i,Kn)}n.memoizedProps=n.pendingProps,i===null?j0(n):mt=i}function Ao(n,i,l,d){Un=vs=null,Cf(i),go=null,Al=0;var m=i.return;try{if(P9(n,m,i,l,vt)){dr=1,_0(n,Pa(l,n.current)),mt=null;return}}catch(g){if(m!==null)throw mt=m,g;dr=1,_0(n,Pa(l,n.current)),mt=null;return}i.flags&32768?(bt||d===1?n=!0:_o||(vt&536870912)!==0?n=!1:(Ei=n=!0,(d===2||d===9||d===3||d===6)&&(d=wa.current,d!==null&&d.tag===13&&(d.flags|=16384))),v4(i,n)):j0(i)}function j0(n){var i=n;do{if((i.flags&32768)!==0){v4(i,Ei);return}n=i.return;var l=G9(i.alternate,i,Kn);if(l!==null){mt=l;return}if(i=i.sibling,i!==null){mt=i;return}mt=i=n}while(i!==null);dr===0&&(dr=5)}function v4(n,i){do{var l=V9(n.alternate,n);if(l!==null){l.flags&=32767,mt=l;return}if(l=n.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!i&&(n=n.sibling,n!==null)){mt=n;return}mt=n=l}while(n!==null);dr=6,mt=null}function y4(n,i,l,d,m,g,z,N,P){n.cancelPendingCommit=null;do $0();while(Nr!==0);if((At&6)!==0)throw Error(a(327));if(i!==null){if(i===n.current)throw Error(a(177));if(g=i.lanes|i.childLanes,g|=af,qu(n,l,g,z,N,P),n===$t&&(mt=$t=null,vt=0),ko=i,Ci=n,Jn=l,fh=g,hh=m,o4=d,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,nS(mn,function(){return _4(),null})):(n.callbackNode=null,n.callbackPriority=0),d=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||d){d=q.T,q.T=null,m=F.p,F.p=2,z=At,At|=4;try{F9(n,i,l)}finally{At=z,F.p=m,q.T=d}}Nr=1,b4(),x4(),w4()}}function b4(){if(Nr===1){Nr=0;var n=Ci,i=ko,l=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||l){l=q.T,q.T=null;var d=F.p;F.p=2;var m=At;At|=4;try{Qv(i,n);var g=Eh,z=ig(n.containerInfo),N=g.focusedElem,P=g.selectionRange;if(z!==N&&N&&N.ownerDocument&&ng(N.ownerDocument.documentElement,N)){if(P!==null&&Wd(N)){var le=P.start,me=P.end;if(me===void 0&&(me=le),"selectionStart"in N)N.selectionStart=le,N.selectionEnd=Math.min(me,N.value.length);else{var ve=N.ownerDocument||document,ce=ve&&ve.defaultView||window;if(ce.getSelection){var fe=ce.getSelection(),$e=N.textContent.length,We=Math.min(P.start,$e),Dt=P.end===void 0?We:Math.min(P.end,$e);!fe.extend&&We>Dt&&(z=Dt,Dt=We,We=z);var te=ag(N,We),Z=ag(N,Dt);if(te&&Z&&(fe.rangeCount!==1||fe.anchorNode!==te.node||fe.anchorOffset!==te.offset||fe.focusNode!==Z.node||fe.focusOffset!==Z.offset)){var ie=ve.createRange();ie.setStart(te.node,te.offset),fe.removeAllRanges(),We>Dt?(fe.addRange(ie),fe.extend(Z.node,Z.offset)):(ie.setEnd(Z.node,Z.offset),fe.addRange(ie))}}}}for(ve=[],fe=N;fe=fe.parentNode;)fe.nodeType===1&&ve.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<ve.length;N++){var pe=ve[N];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}X0=!!Ah,Eh=Ah=null}finally{At=m,F.p=d,q.T=l}}n.current=i,Nr=2}}function x4(){if(Nr===2){Nr=0;var n=Ci,i=ko,l=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||l){l=q.T,q.T=null;var d=F.p;F.p=2;var m=At;At|=4;try{Yv(n,i.alternate,i)}finally{At=m,F.p=d,q.T=l}}Nr=3}}function w4(){if(Nr===4||Nr===3){Nr=0,ur();var n=Ci,i=ko,l=Jn,d=o4;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Nr=5:(Nr=0,ko=Ci=null,S4(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(Ni=null),In(l),i=i.stateNode,St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(pr,i,void 0,(i.current.flags&128)===128)}catch{}if(d!==null){i=q.T,m=F.p,F.p=2,q.T=null;try{for(var g=n.onRecoverableError,z=0;z<d.length;z++){var N=d[z];g(N.value,{componentStack:N.stack})}}finally{q.T=i,F.p=m}}(Jn&3)!==0&&$0(),xn(n),m=n.pendingLanes,(l&261930)!==0&&(m&42)!==0?n===mh?Zl++:(Zl=0,mh=n):Zl=0,Gl(0)}}function S4(n,i){(n.pooledCacheLanes&=i)===0&&(i=n.pooledCache,i!=null&&(n.pooledCache=null,kl(i)))}function $0(){return b4(),x4(),w4(),_4()}function _4(){if(Nr!==5)return!1;var n=Ci,i=fh;fh=0;var l=In(Jn),d=q.T,m=F.p;try{F.p=32>l?32:l,q.T=null,l=hh,hh=null;var g=Ci,z=Jn;if(Nr=0,ko=Ci=null,Jn=0,(At&6)!==0)throw Error(a(331));var N=At;if(At|=4,n4(g.current),t4(g,g.current,z,l),At=N,Gl(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(pr,g)}catch{}return!0}finally{F.p=m,q.T=d,S4(n,i)}}function z4(n,i,l){i=Pa(l,i),i=Vf(n.stateNode,i,2),n=zi(n,i,2),n!==null&&(pi(n,2),xn(n))}function Mt(n,i,l){if(n.tag===3)z4(n,n,l);else for(;i!==null;){if(i.tag===3){z4(i,n,l);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ni===null||!Ni.has(d))){n=Pa(l,n),l=kv(2),d=zi(i,l,2),d!==null&&(Tv(l,d,i,n),pi(d,2),xn(d));break}}i=i.return}}function vh(n,i,l){var d=n.pingCache;if(d===null){d=n.pingCache=new K9;var m=new Set;d.set(i,m)}else m=d.get(i),m===void 0&&(m=new Set,d.set(i,m));m.has(l)||(uh=!0,m.add(l),n=tS.bind(null,n,i,l),i.then(n,n))}function tS(n,i,l){var d=n.pingCache;d!==null&&d.delete(i),n.pingedLanes|=n.suspendedLanes&l,n.warmLanes&=~l,$t===n&&(vt&l)===l&&(dr===4||dr===3&&(vt&62914560)===vt&&300>nr()-C0?(At&2)===0&&To(n,0):ch|=l,zo===vt&&(zo=0)),xn(n)}function k4(n,i){i===0&&(i=Uu()),n=ms(n,i),n!==null&&(pi(n,i),xn(n))}function rS(n){var i=n.memoizedState,l=0;i!==null&&(l=i.retryLane),k4(n,l)}function aS(n,i){var l=0;switch(n.tag){case 31:case 13:var d=n.stateNode,m=n.memoizedState;m!==null&&(l=m.retryLane);break;case 19:d=n.stateNode;break;case 22:d=n.stateNode._retryCache;break;default:throw Error(a(314))}d!==null&&d.delete(i),k4(n,l)}function nS(n,i){return Gt(n,i)}var B0=null,Eo=null,yh=!1,L0=!1,bh=!1,Ri=0;function xn(n){n!==Eo&&n.next===null&&(Eo===null?B0=Eo=n:Eo=Eo.next=n),L0=!0,yh||(yh=!0,sS())}function Gl(n,i){if(!bh&&L0){bh=!0;do for(var l=!1,d=B0;d!==null;){if(n!==0){var m=d.pendingLanes;if(m===0)var g=0;else{var z=d.suspendedLanes,N=d.pingedLanes;g=(1<<31-Vr(42|n)+1)-1,g&=m&~(z&~N),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,M4(d,g))}else g=vt,g=us(d,d===$t?g:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(g&3)===0||On(d,g)||(l=!0,M4(d,g));d=d.next}while(l);bh=!1}}function iS(){T4()}function T4(){L0=yh=!1;var n=0;Ri!==0&&gS()&&(n=Ri);for(var i=nr(),l=null,d=B0;d!==null;){var m=d.next,g=A4(d,i);g===0?(d.next=null,l===null?B0=m:l.next=m,m===null&&(Eo=l)):(l=d,(n!==0||(g&3)!==0)&&(L0=!0)),d=m}Nr!==0&&Nr!==5||Gl(n),Ri!==0&&(Ri=0)}function A4(n,i){for(var l=n.suspendedLanes,d=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var z=31-Vr(g),N=1<<z,P=m[z];P===-1?((N&l)===0||(N&d)!==0)&&(m[z]=ul(N,i)):P<=i&&(n.expiredLanes|=N),g&=~N}if(i=$t,l=vt,l=us(n,n===i?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d=n.callbackNode,l===0||n===i&&(Et===2||Et===9)||n.cancelPendingCommit!==null)return d!==null&&d!==null&&jt(d),n.callbackNode=null,n.callbackPriority=0;if((l&3)===0||On(n,l)){if(i=l&-l,i===n.callbackPriority)return i;switch(d!==null&&jt(d),In(l)){case 2:case 8:l=rn;break;case 32:l=mn;break;case 268435456:l=Kr;break;default:l=mn}return d=E4.bind(null,n),l=Gt(l,d),n.callbackPriority=i,n.callbackNode=l,i}return d!==null&&d!==null&&jt(d),n.callbackPriority=2,n.callbackNode=null,2}function E4(n,i){if(Nr!==0&&Nr!==5)return n.callbackNode=null,n.callbackPriority=0,null;var l=n.callbackNode;if($0()&&n.callbackNode!==l)return null;var d=vt;return d=us(n,n===$t?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),d===0?null:(u4(n,d,i),A4(n,nr()),n.callbackNode!=null&&n.callbackNode===l?E4.bind(null,n):null)}function M4(n,i){if($0())return null;u4(n,i,!0)}function sS(){yS(function(){(At&6)!==0?Gt(Ot,iS):T4()})}function xh(){if(Ri===0){var n=ho;n===0&&(n=ls,ls<<=1,(ls&261888)===0&&(ls=256)),Ri=n}return Ri}function N4(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Fu(""+n)}function C4(n,i){var l=i.ownerDocument.createElement("input");return l.name=i.name,l.value=i.value,n.id&&l.setAttribute("form",n.id),i.parentNode.insertBefore(l,i),n=new FormData(n),l.parentNode.removeChild(l),n}function oS(n,i,l,d,m){if(i==="submit"&&l&&l.stateNode===m){var g=N4((m[$r]||null).action),z=d.submitter;z&&(i=(i=z[$r]||null)?N4(i.formAction):z.getAttribute("formAction"),i!==null&&(g=i,z=null));var N=new Ju("action","action",null,d,m);n.push({event:N,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Ri!==0){var P=z?C4(m,z):new FormData(m);Uf(l,{pending:!0,data:P,method:m.method,action:g},null,P)}}else typeof g=="function"&&(N.preventDefault(),P=z?C4(m,z):new FormData(m),Uf(l,{pending:!0,data:P,method:m.method,action:g},g,P))},currentTarget:m}]})}}for(var wh=0;wh<rf.length;wh++){var Sh=rf[wh],lS=Sh.toLowerCase(),uS=Sh[0].toUpperCase()+Sh.slice(1);nn(lS,"on"+uS)}nn(lg,"onAnimationEnd"),nn(ug,"onAnimationIteration"),nn(cg,"onAnimationStart"),nn("dblclick","onDoubleClick"),nn("focusin","onFocus"),nn("focusout","onBlur"),nn(k9,"onTransitionRun"),nn(T9,"onTransitionStart"),nn(A9,"onTransitionCancel"),nn(dg,"onTransitionEnd"),Ws("onMouseEnter",["mouseout","mouseover"]),Ws("onMouseLeave",["mouseout","mouseover"]),Ws("onPointerEnter",["pointerout","pointerover"]),Ws("onPointerLeave",["pointerout","pointerover"]),an("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),an("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),an("onBeforeInput",["compositionend","keypress","textInput","paste"]),an("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),an("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vl));function O4(n,i){i=(i&4)!==0;for(var l=0;l<n.length;l++){var d=n[l],m=d.event;d=d.listeners;e:{var g=void 0;if(i)for(var z=d.length-1;0<=z;z--){var N=d[z],P=N.instance,le=N.currentTarget;if(N=N.listener,P!==g&&m.isPropagationStopped())break e;g=N,m.currentTarget=le;try{g(m)}catch(me){e0(me)}m.currentTarget=null,g=P}else for(z=0;z<d.length;z++){if(N=d[z],P=N.instance,le=N.currentTarget,N=N.listener,P!==g&&m.isPropagationStopped())break e;g=N,m.currentTarget=le;try{g(m)}catch(me){e0(me)}m.currentTarget=null,g=P}}}}function pt(n,i){var l=i[cs];l===void 0&&(l=i[cs]=new Set);var d=n+"__bubble";l.has(d)||(R4(i,n,2,!1),l.add(d))}function _h(n,i,l){var d=0;i&&(d|=4),R4(l,n,d,i)}var U0="_reactListening"+Math.random().toString(36).slice(2);function zh(n){if(!n[U0]){n[U0]=!0,Js.forEach(function(l){l!=="selectionchange"&&(cS.has(l)||_h(l,!1,n),_h(l,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[U0]||(i[U0]=!0,_h("selectionchange",!1,i))}}function R4(n,i,l,d){switch(ly(i)){case 2:var m=BS;break;case 8:m=LS;break;default:m=Lh}l=m.bind(null,i,l,n),m=void 0,!Hd||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(m=!0),d?m!==void 0?n.addEventListener(i,l,{capture:!0,passive:m}):n.addEventListener(i,l,!0):m!==void 0?n.addEventListener(i,l,{passive:m}):n.addEventListener(i,l,!1)}function kh(n,i,l,d,m){var g=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var z=d.tag;if(z===3||z===4){var N=d.stateNode.containerInfo;if(N===m)break;if(z===4)for(z=d.return;z!==null;){var P=z.tag;if((P===3||P===4)&&z.stateNode.containerInfo===m)return;z=z.return}for(;N!==null;){if(z=$a(N),z===null)return;if(P=z.tag,P===5||P===6||P===26||P===27){d=g=z;continue e}N=N.parentNode}}d=d.return}B1(function(){var le=g,me=qd(l),ve=[];e:{var ce=fg.get(n);if(ce!==void 0){var fe=Ju,$e=n;switch(n){case"keypress":if(Xu(l)===0)break e;case"keydown":case"keyup":fe=a9;break;case"focusin":$e="focus",fe=Fd;break;case"focusout":$e="blur",fe=Fd;break;case"beforeblur":case"afterblur":fe=Fd;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=q1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=Gw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=s9;break;case lg:case ug:case cg:fe=Yw;break;case dg:fe=l9;break;case"scroll":case"scrollend":fe=Hw;break;case"wheel":fe=c9;break;case"copy":case"cut":case"paste":fe=Kw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=H1;break;case"toggle":case"beforetoggle":fe=f9}var We=(i&4)!==0,Dt=!We&&(n==="scroll"||n==="scrollend"),te=We?ce!==null?ce+"Capture":null:ce;We=[];for(var Z=le,ie;Z!==null;){var pe=Z;if(ie=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||ie===null||te===null||(pe=ml(Z,te),pe!=null&&We.push(Fl(Z,pe,ie))),Dt)break;Z=Z.return}0<We.length&&(ce=new fe(ce,$e,null,l,me),ve.push({event:ce,listeners:We}))}}if((i&7)===0){e:{if(ce=n==="mouseover"||n==="pointerover",fe=n==="mouseout"||n==="pointerout",ce&&l!==Ud&&($e=l.relatedTarget||l.fromElement)&&($a($e)||$e[Br]))break e;if((fe||ce)&&(ce=me.window===me?me:(ce=me.ownerDocument)?ce.defaultView||ce.parentWindow:window,fe?($e=l.relatedTarget||l.toElement,fe=le,$e=$e?$a($e):null,$e!==null&&(Dt=o($e),We=$e.tag,$e!==Dt||We!==5&&We!==27&&We!==6)&&($e=null)):(fe=null,$e=le),fe!==$e)){if(We=q1,pe="onMouseLeave",te="onMouseEnter",Z="mouse",(n==="pointerout"||n==="pointerover")&&(We=H1,pe="onPointerLeave",te="onPointerEnter",Z="pointer"),Dt=fe==null?ce:gn(fe),ie=$e==null?ce:gn($e),ce=new We(pe,Z+"leave",fe,l,me),ce.target=Dt,ce.relatedTarget=ie,pe=null,$a(me)===le&&(We=new We(te,Z+"enter",$e,l,me),We.target=ie,We.relatedTarget=Dt,pe=We),Dt=pe,fe&&$e)t:{for(We=dS,te=fe,Z=$e,ie=0,pe=te;pe;pe=We(pe))ie++;pe=0;for(var Ge=Z;Ge;Ge=We(Ge))pe++;for(;0<ie-pe;)te=We(te),ie--;for(;0<pe-ie;)Z=We(Z),pe--;for(;ie--;){if(te===Z||Z!==null&&te===Z.alternate){We=te;break t}te=We(te),Z=We(Z)}We=null}else We=null;fe!==null&&I4(ve,ce,fe,We,!1),$e!==null&&Dt!==null&&I4(ve,Dt,$e,We,!0)}}e:{if(ce=le?gn(le):window,fe=ce.nodeName&&ce.nodeName.toLowerCase(),fe==="select"||fe==="input"&&ce.type==="file")var kt=J1;else if(X1(ce))if(W1)kt=S9;else{kt=x9;var Pe=b9}else fe=ce.nodeName,!fe||fe.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?le&&Ld(le.elementType)&&(kt=J1):kt=w9;if(kt&&(kt=kt(n,le))){K1(ve,kt,l,me);break e}Pe&&Pe(n,ce,le),n==="focusout"&&le&&ce.type==="number"&&le.memoizedProps.value!=null&&Bd(ce,"number",ce.value)}switch(Pe=le?gn(le):window,n){case"focusin":(X1(Pe)||Pe.contentEditable==="true")&&(no=Pe,Qd=le,Sl=null);break;case"focusout":Sl=Qd=no=null;break;case"mousedown":ef=!0;break;case"contextmenu":case"mouseup":case"dragend":ef=!1,sg(ve,l,me);break;case"selectionchange":if(z9)break;case"keydown":case"keyup":sg(ve,l,me)}var lt;if(Xd)e:{switch(n){case"compositionstart":var yt="onCompositionStart";break e;case"compositionend":yt="onCompositionEnd";break e;case"compositionupdate":yt="onCompositionUpdate";break e}yt=void 0}else ao?F1(n,l)&&(yt="onCompositionEnd"):n==="keydown"&&l.keyCode===229&&(yt="onCompositionStart");yt&&(Z1&&l.locale!=="ko"&&(ao||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&ao&&(lt=L1()):(vi=me,Zd="value"in vi?vi.value:vi.textContent,ao=!0)),Pe=q0(le,yt),0<Pe.length&&(yt=new P1(yt,n,null,l,me),ve.push({event:yt,listeners:Pe}),lt?yt.data=lt:(lt=Y1(l),lt!==null&&(yt.data=lt)))),(lt=m9?p9(n,l):g9(n,l))&&(yt=q0(le,"onBeforeInput"),0<yt.length&&(Pe=new P1("onBeforeInput","beforeinput",null,l,me),ve.push({event:Pe,listeners:yt}),Pe.data=lt)),oS(ve,n,le,l,me)}O4(ve,i)})}function Fl(n,i,l){return{instance:n,listener:i,currentTarget:l}}function q0(n,i){for(var l=i+"Capture",d=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=ml(n,l),m!=null&&d.unshift(Fl(n,m,g)),m=ml(n,i),m!=null&&d.push(Fl(n,m,g))),n.tag===3)return d;n=n.return}return[]}function dS(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function I4(n,i,l,d,m){for(var g=i._reactName,z=[];l!==null&&l!==d;){var N=l,P=N.alternate,le=N.stateNode;if(N=N.tag,P!==null&&P===d)break;N!==5&&N!==26&&N!==27||le===null||(P=le,m?(le=ml(l,g),le!=null&&z.unshift(Fl(l,le,P))):m||(le=ml(l,g),le!=null&&z.push(Fl(l,le,P)))),l=l.return}z.length!==0&&n.push({event:i,listeners:z})}var fS=/\r\n?/g,hS=/\u0000|\uFFFD/g;function D4(n){return(typeof n=="string"?n:""+n).replace(fS,`
`).replace(hS,"")}function j4(n,i){return i=D4(i),D4(n)===i}function It(n,i,l,d,m,g){switch(l){case"children":typeof d=="string"?i==="body"||i==="textarea"&&d===""||eo(n,d):(typeof d=="number"||typeof d=="bigint")&&i!=="body"&&eo(n,""+d);break;case"className":Gu(n,"class",d);break;case"tabIndex":Gu(n,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Gu(n,l,d);break;case"style":j1(n,d,g);break;case"data":if(i!=="object"){Gu(n,"data",d);break}case"src":case"href":if(d===""&&(i!=="a"||l!=="href")){n.removeAttribute(l);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=Fu(""+d),n.setAttribute(l,d);break;case"action":case"formAction":if(typeof d=="function"){n.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(i!=="input"&&It(n,i,"name",m.name,m,null),It(n,i,"formEncType",m.formEncType,m,null),It(n,i,"formMethod",m.formMethod,m,null),It(n,i,"formTarget",m.formTarget,m,null)):(It(n,i,"encType",m.encType,m,null),It(n,i,"method",m.method,m,null),It(n,i,"target",m.target,m,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){n.removeAttribute(l);break}d=Fu(""+d),n.setAttribute(l,d);break;case"onClick":d!=null&&(n.onclick=jn);break;case"onScroll":d!=null&&pt("scroll",n);break;case"onScrollEnd":d!=null&&pt("scrollend",n);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(m.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"multiple":n.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":n.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){n.removeAttribute("xlink:href");break}l=Fu(""+d),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""+d):n.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,""):n.removeAttribute(l);break;case"capture":case"download":d===!0?n.setAttribute(l,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?n.setAttribute(l,d):n.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?n.setAttribute(l,d):n.removeAttribute(l);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?n.removeAttribute(l):n.setAttribute(l,d);break;case"popover":pt("beforetoggle",n),pt("toggle",n),Zu(n,"popover",d);break;case"xlinkActuate":Dn(n,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Dn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Dn(n,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Dn(n,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Dn(n,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Dn(n,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Dn(n,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":Zu(n,"is",d);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=qw.get(l)||l,Zu(n,l,d))}}function Th(n,i,l,d,m,g){switch(l){case"style":j1(n,d,g);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(a(61));if(l=d.__html,l!=null){if(m.children!=null)throw Error(a(60));n.innerHTML=l}}break;case"children":typeof d=="string"?eo(n,d):(typeof d=="number"||typeof d=="bigint")&&eo(n,""+d);break;case"onScroll":d!=null&&pt("scroll",n);break;case"onScrollEnd":d!=null&&pt("scrollend",n);break;case"onClick":d!=null&&(n.onclick=jn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qt.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(m=l.endsWith("Capture"),i=l.slice(2,m?l.length-7:void 0),g=n[$r]||null,g=g!=null?g[l]:null,typeof g=="function"&&n.removeEventListener(i,g,m),typeof d=="function")){typeof g!="function"&&g!==null&&(l in n?n[l]=null:n.hasAttribute(l)&&n.removeAttribute(l)),n.addEventListener(i,d,m);break e}l in n?n[l]=d:d===!0?n.setAttribute(l,""):Zu(n,l,d)}}}function Zr(n,i,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",n),pt("load",n);var d=!1,m=!1,g;for(g in l)if(l.hasOwnProperty(g)){var z=l[g];if(z!=null)switch(g){case"src":d=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:It(n,i,g,z,l,null)}}m&&It(n,i,"srcSet",l.srcSet,l,null),d&&It(n,i,"src",l.src,l,null);return;case"input":pt("invalid",n);var N=g=z=m=null,P=null,le=null;for(d in l)if(l.hasOwnProperty(d)){var me=l[d];if(me!=null)switch(d){case"name":m=me;break;case"type":z=me;break;case"checked":P=me;break;case"defaultChecked":le=me;break;case"value":g=me;break;case"defaultValue":N=me;break;case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(a(137,i));break;default:It(n,i,d,me,l,null)}}O1(n,g,N,P,le,z,m,!1);return;case"select":pt("invalid",n),d=z=g=null;for(m in l)if(l.hasOwnProperty(m)&&(N=l[m],N!=null))switch(m){case"value":g=N;break;case"defaultValue":z=N;break;case"multiple":d=N;default:It(n,i,m,N,l,null)}i=g,l=z,n.multiple=!!d,i!=null?Qs(n,!!d,i,!1):l!=null&&Qs(n,!!d,l,!0);return;case"textarea":pt("invalid",n),g=m=d=null;for(z in l)if(l.hasOwnProperty(z)&&(N=l[z],N!=null))switch(z){case"value":d=N;break;case"defaultValue":m=N;break;case"children":g=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(a(91));break;default:It(n,i,z,N,l,null)}I1(n,d,m,g);return;case"option":for(P in l)if(l.hasOwnProperty(P)&&(d=l[P],d!=null))switch(P){case"selected":n.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:It(n,i,P,d,l,null)}return;case"dialog":pt("beforetoggle",n),pt("toggle",n),pt("cancel",n),pt("close",n);break;case"iframe":case"object":pt("load",n);break;case"video":case"audio":for(d=0;d<Vl.length;d++)pt(Vl[d],n);break;case"image":pt("error",n),pt("load",n);break;case"details":pt("toggle",n);break;case"embed":case"source":case"link":pt("error",n),pt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in l)if(l.hasOwnProperty(le)&&(d=l[le],d!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:It(n,i,le,d,l,null)}return;default:if(Ld(i)){for(me in l)l.hasOwnProperty(me)&&(d=l[me],d!==void 0&&Th(n,i,me,d,l,void 0));return}}for(N in l)l.hasOwnProperty(N)&&(d=l[N],d!=null&&It(n,i,N,d,l,null))}function mS(n,i,l,d){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,z=null,N=null,P=null,le=null,me=null;for(fe in l){var ve=l[fe];if(l.hasOwnProperty(fe)&&ve!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":P=ve;default:d.hasOwnProperty(fe)||It(n,i,fe,null,d,ve)}}for(var ce in d){var fe=d[ce];if(ve=l[ce],d.hasOwnProperty(ce)&&(fe!=null||ve!=null))switch(ce){case"type":g=fe;break;case"name":m=fe;break;case"checked":le=fe;break;case"defaultChecked":me=fe;break;case"value":z=fe;break;case"defaultValue":N=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(a(137,i));break;default:fe!==ve&&It(n,i,ce,fe,d,ve)}}$d(n,z,N,P,le,me,g,m);return;case"select":fe=z=N=ce=null;for(g in l)if(P=l[g],l.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":fe=P;default:d.hasOwnProperty(g)||It(n,i,g,null,d,P)}for(m in d)if(g=d[m],P=l[m],d.hasOwnProperty(m)&&(g!=null||P!=null))switch(m){case"value":ce=g;break;case"defaultValue":N=g;break;case"multiple":z=g;default:g!==P&&It(n,i,m,g,d,P)}i=N,l=z,d=fe,ce!=null?Qs(n,!!l,ce,!1):!!d!=!!l&&(i!=null?Qs(n,!!l,i,!0):Qs(n,!!l,l?[]:"",!1));return;case"textarea":fe=ce=null;for(N in l)if(m=l[N],l.hasOwnProperty(N)&&m!=null&&!d.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:It(n,i,N,null,d,m)}for(z in d)if(m=d[z],g=l[z],d.hasOwnProperty(z)&&(m!=null||g!=null))switch(z){case"value":ce=m;break;case"defaultValue":fe=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(a(91));break;default:m!==g&&It(n,i,z,m,d,g)}R1(n,ce,fe);return;case"option":for(var $e in l)if(ce=l[$e],l.hasOwnProperty($e)&&ce!=null&&!d.hasOwnProperty($e))switch($e){case"selected":n.selected=!1;break;default:It(n,i,$e,null,d,ce)}for(P in d)if(ce=d[P],fe=l[P],d.hasOwnProperty(P)&&ce!==fe&&(ce!=null||fe!=null))switch(P){case"selected":n.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:It(n,i,P,ce,d,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in l)ce=l[We],l.hasOwnProperty(We)&&ce!=null&&!d.hasOwnProperty(We)&&It(n,i,We,null,d,ce);for(le in d)if(ce=d[le],fe=l[le],d.hasOwnProperty(le)&&ce!==fe&&(ce!=null||fe!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(a(137,i));break;default:It(n,i,le,ce,d,fe)}return;default:if(Ld(i)){for(var Dt in l)ce=l[Dt],l.hasOwnProperty(Dt)&&ce!==void 0&&!d.hasOwnProperty(Dt)&&Th(n,i,Dt,void 0,d,ce);for(me in d)ce=d[me],fe=l[me],!d.hasOwnProperty(me)||ce===fe||ce===void 0&&fe===void 0||Th(n,i,me,ce,d,fe);return}}for(var te in l)ce=l[te],l.hasOwnProperty(te)&&ce!=null&&!d.hasOwnProperty(te)&&It(n,i,te,null,d,ce);for(ve in d)ce=d[ve],fe=l[ve],!d.hasOwnProperty(ve)||ce===fe||ce==null&&fe==null||It(n,i,ve,ce,d,fe)}function $4(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pS(){if(typeof performance.getEntriesByType=="function"){for(var n=0,i=0,l=performance.getEntriesByType("resource"),d=0;d<l.length;d++){var m=l[d],g=m.transferSize,z=m.initiatorType,N=m.duration;if(g&&N&&$4(z)){for(z=0,N=m.responseEnd,d+=1;d<l.length;d++){var P=l[d],le=P.startTime;if(le>N)break;var me=P.transferSize,ve=P.initiatorType;me&&$4(ve)&&(P=P.responseEnd,z+=me*(P<N?1:(N-le)/(P-le)))}if(--d,i+=8*(g+z)/(m.duration/1e3),n++,10<n)break}}if(0<n)return i/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Ah=null,Eh=null;function P0(n){return n.nodeType===9?n:n.ownerDocument}function B4(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function L4(n,i){if(n===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&i==="foreignObject"?0:n}function Mh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Nh=null;function gS(){var n=window.event;return n&&n.type==="popstate"?n===Nh?!1:(Nh=n,!0):(Nh=null,!1)}var U4=typeof setTimeout=="function"?setTimeout:void 0,vS=typeof clearTimeout=="function"?clearTimeout:void 0,q4=typeof Promise=="function"?Promise:void 0,yS=typeof queueMicrotask=="function"?queueMicrotask:typeof q4<"u"?function(n){return q4.resolve(null).then(n).catch(bS)}:U4;function bS(n){setTimeout(function(){throw n})}function Ii(n){return n==="head"}function P4(n,i){var l=i,d=0;do{var m=l.nextSibling;if(n.removeChild(l),m&&m.nodeType===8)if(l=m.data,l==="/$"||l==="/&"){if(d===0){n.removeChild(m),Oo(i);return}d--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")d++;else if(l==="html")Yl(n.ownerDocument.documentElement);else if(l==="head"){l=n.ownerDocument.head,Yl(l);for(var g=l.firstChild;g;){var z=g.nextSibling,N=g.nodeName;g[Ze]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=z}}else l==="body"&&Yl(n.ownerDocument.body);l=m}while(l);Oo(i)}function H4(n,i){var l=n;n=0;do{var d=l.nextSibling;if(l.nodeType===1?i?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(i?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),d&&d.nodeType===8)if(l=d.data,l==="/$"){if(n===0)break;n--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||n++;l=d}while(l)}function Ch(n){var i=n.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var l=i;switch(i=i.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ch(l),gr(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}n.removeChild(l)}}function xS(n,i,l,d){for(;n.nodeType===1;){var m=l;if(n.nodeName.toLowerCase()!==i.toLowerCase()){if(!d&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(d){if(!n[Ze])switch(i){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(i==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Fa(n.nextSibling),n===null)break}return null}function wS(n,i,l){if(i==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=Fa(n.nextSibling),n===null))return null;return n}function Z4(n,i){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!i||(n=Fa(n.nextSibling),n===null))return null;return n}function Oh(n){return n.data==="$?"||n.data==="$~"}function Rh(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function SS(n,i){var l=n.ownerDocument;if(n.data==="$~")n._reactRetry=i;else if(n.data!=="$?"||l.readyState!=="loading")i();else{var d=function(){i(),l.removeEventListener("DOMContentLoaded",d)};l.addEventListener("DOMContentLoaded",d),n._reactRetry=d}}function Fa(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return n}var Ih=null;function G4(n){n=n.nextSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="/$"||l==="/&"){if(i===0)return Fa(n.nextSibling);i--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||i++}n=n.nextSibling}return null}function V4(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var l=n.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(i===0)return n;i--}else l!=="/$"&&l!=="/&"||i++}n=n.previousSibling}return null}function F4(n,i,l){switch(i=P0(l),n){case"html":if(n=i.documentElement,!n)throw Error(a(452));return n;case"head":if(n=i.head,!n)throw Error(a(453));return n;case"body":if(n=i.body,!n)throw Error(a(454));return n;default:throw Error(a(451))}}function Yl(n){for(var i=n.attributes;i.length;)n.removeAttributeNode(i[0]);gr(n)}var Ya=new Map,Y4=new Set;function H0(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Wn=F.d;F.d={f:_S,r:zS,D:kS,C:TS,L:AS,m:ES,X:NS,S:MS,M:CS};function _S(){var n=Wn.f(),i=I0();return n||i}function zS(n){var i=Ba(n);i!==null&&i.tag===5&&i.type==="form"?dv(i):Wn.r(n)}var Mo=typeof document>"u"?null:document;function X4(n,i,l){var d=Mo;if(d&&typeof i=="string"&&i){var m=Ua(i);m='link[rel="'+n+'"][href="'+m+'"]',typeof l=="string"&&(m+='[crossorigin="'+l+'"]'),Y4.has(m)||(Y4.add(m),n={rel:n,crossOrigin:l,href:i},d.querySelector(m)===null&&(i=d.createElement("link"),Zr(i,"link",n),Vt(i),d.head.appendChild(i)))}}function kS(n){Wn.D(n),X4("dns-prefetch",n,null)}function TS(n,i){Wn.C(n,i),X4("preconnect",n,i)}function AS(n,i,l){Wn.L(n,i,l);var d=Mo;if(d&&n&&i){var m='link[rel="preload"][as="'+Ua(i)+'"]';i==="image"&&l&&l.imageSrcSet?(m+='[imagesrcset="'+Ua(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(m+='[imagesizes="'+Ua(l.imageSizes)+'"]')):m+='[href="'+Ua(n)+'"]';var g=m;switch(i){case"style":g=No(n);break;case"script":g=Co(n)}Ya.has(g)||(n=v({rel:"preload",href:i==="image"&&l&&l.imageSrcSet?void 0:n,as:i},l),Ya.set(g,n),d.querySelector(m)!==null||i==="style"&&d.querySelector(Xl(g))||i==="script"&&d.querySelector(Kl(g))||(i=d.createElement("link"),Zr(i,"link",n),Vt(i),d.head.appendChild(i)))}}function ES(n,i){Wn.m(n,i);var l=Mo;if(l&&n){var d=i&&typeof i.as=="string"?i.as:"script",m='link[rel="modulepreload"][as="'+Ua(d)+'"][href="'+Ua(n)+'"]',g=m;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Co(n)}if(!Ya.has(g)&&(n=v({rel:"modulepreload",href:n},i),Ya.set(g,n),l.querySelector(m)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Kl(g)))return}d=l.createElement("link"),Zr(d,"link",n),Vt(d),l.head.appendChild(d)}}}function MS(n,i,l){Wn.S(n,i,l);var d=Mo;if(d&&n){var m=Lt(d).hoistableStyles,g=No(n);i=i||"default";var z=m.get(g);if(!z){var N={loading:0,preload:null};if(z=d.querySelector(Xl(g)))N.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":i},l),(l=Ya.get(g))&&Dh(n,l);var P=z=d.createElement("link");Vt(P),Zr(P,"link",n),P._p=new Promise(function(le,me){P.onload=le,P.onerror=me}),P.addEventListener("load",function(){N.loading|=1}),P.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Z0(z,i,d)}z={type:"stylesheet",instance:z,count:1,state:N},m.set(g,z)}}}function NS(n,i){Wn.X(n,i);var l=Mo;if(l&&n){var d=Lt(l).hoistableScripts,m=Co(n),g=d.get(m);g||(g=l.querySelector(Kl(m)),g||(n=v({src:n,async:!0},i),(i=Ya.get(m))&&jh(n,i),g=l.createElement("script"),Vt(g),Zr(g,"link",n),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(m,g))}}function CS(n,i){Wn.M(n,i);var l=Mo;if(l&&n){var d=Lt(l).hoistableScripts,m=Co(n),g=d.get(m);g||(g=l.querySelector(Kl(m)),g||(n=v({src:n,async:!0,type:"module"},i),(i=Ya.get(m))&&jh(n,i),g=l.createElement("script"),Vt(g),Zr(g,"link",n),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},d.set(m,g))}}function K4(n,i,l,d){var m=(m=Ee.current)?H0(m):null;if(!m)throw Error(a(446));switch(n){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(i=No(l.href),l=Lt(m).hoistableStyles,d=l.get(i),d||(d={type:"style",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){n=No(l.href);var g=Lt(m).hoistableStyles,z=g.get(n);if(z||(m=m.ownerDocument||m,z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,z),(g=m.querySelector(Xl(n)))&&!g._p&&(z.instance=g,z.state.loading=5),Ya.has(n)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ya.set(n,l),g||OS(m,n,l,z.state))),i&&d===null)throw Error(a(528,""));return z}if(i&&d!==null)throw Error(a(529,""));return null;case"script":return i=l.async,l=l.src,typeof l=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Co(l),l=Lt(m).hoistableScripts,d=l.get(i),d||(d={type:"script",instance:null,count:0,state:null},l.set(i,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,n))}}function No(n){return'href="'+Ua(n)+'"'}function Xl(n){return'link[rel="stylesheet"]['+n+"]"}function J4(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function OS(n,i,l,d){n.querySelector('link[rel="preload"][as="style"]['+i+"]")?d.loading=1:(i=n.createElement("link"),d.preload=i,i.addEventListener("load",function(){return d.loading|=1}),i.addEventListener("error",function(){return d.loading|=2}),Zr(i,"link",l),Vt(i),n.head.appendChild(i))}function Co(n){return'[src="'+Ua(n)+'"]'}function Kl(n){return"script[async]"+n}function W4(n,i,l){if(i.count++,i.instance===null)switch(i.type){case"style":var d=n.querySelector('style[data-href~="'+Ua(l.href)+'"]');if(d)return i.instance=d,Vt(d),d;var m=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return d=(n.ownerDocument||n).createElement("style"),Vt(d),Zr(d,"style",m),Z0(d,l.precedence,n),i.instance=d;case"stylesheet":m=No(l.href);var g=n.querySelector(Xl(m));if(g)return i.state.loading|=4,i.instance=g,Vt(g),g;d=J4(l),(m=Ya.get(m))&&Dh(d,m),g=(n.ownerDocument||n).createElement("link"),Vt(g);var z=g;return z._p=new Promise(function(N,P){z.onload=N,z.onerror=P}),Zr(g,"link",d),i.state.loading|=4,Z0(g,l.precedence,n),i.instance=g;case"script":return g=Co(l.src),(m=n.querySelector(Kl(g)))?(i.instance=m,Vt(m),m):(d=l,(m=Ya.get(g))&&(d=v({},l),jh(d,m)),n=n.ownerDocument||n,m=n.createElement("script"),Vt(m),Zr(m,"link",d),n.head.appendChild(m),i.instance=m);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(d=i.instance,i.state.loading|=4,Z0(d,l.precedence,n));return i.instance}function Z0(n,i,l){for(var d=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=d.length?d[d.length-1]:null,g=m,z=0;z<d.length;z++){var N=d[z];if(N.dataset.precedence===i)g=N;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(i=l.nodeType===9?l.head:l,i.insertBefore(n,i.firstChild))}function Dh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.title==null&&(n.title=i.title)}function jh(n,i){n.crossOrigin==null&&(n.crossOrigin=i.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=i.referrerPolicy),n.integrity==null&&(n.integrity=i.integrity)}var G0=null;function Q4(n,i,l){if(G0===null){var d=new Map,m=G0=new Map;m.set(l,d)}else m=G0,d=m.get(l),d||(d=new Map,m.set(l,d));if(d.has(n))return d;for(d.set(n,null),l=l.getElementsByTagName(n),m=0;m<l.length;m++){var g=l[m];if(!(g[Ze]||g[Wt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var z=g.getAttribute(i)||"";z=n+z;var N=d.get(z);N?N.push(g):d.set(z,[g])}}return d}function ey(n,i,l){n=n.ownerDocument||n,n.head.insertBefore(l,i==="title"?n.querySelector("head > title"):null)}function RS(n,i,l){if(l===1||i.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return n=i.disabled,typeof i.precedence=="string"&&n==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function ty(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function IS(n,i,l,d){if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var m=No(d.href),g=i.querySelector(Xl(m));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(n.count++,n=V0.bind(n),i.then(n,n)),l.state.loading|=4,l.instance=g,Vt(g);return}g=i.ownerDocument||i,d=J4(d),(m=Ya.get(m))&&Dh(d,m),g=g.createElement("link"),Vt(g);var z=g;z._p=new Promise(function(N,P){z.onload=N,z.onerror=P}),Zr(g,"link",d),l.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(n.count++,l=V0.bind(n),i.addEventListener("load",l),i.addEventListener("error",l))}}var $h=0;function DS(n,i){return n.stylesheets&&n.count===0&&Y0(n,n.stylesheets),0<n.count||0<n.imgCount?function(l){var d=setTimeout(function(){if(n.stylesheets&&Y0(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+i);0<n.imgBytes&&$h===0&&($h=62500*pS());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Y0(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>$h?50:800)+i);return n.unsuspend=l,function(){n.unsuspend=null,clearTimeout(d),clearTimeout(m)}}:null}function V0(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Y0(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var F0=null;function Y0(n,i){n.stylesheets=null,n.unsuspend!==null&&(n.count++,F0=new Map,i.forEach(jS,n),F0=null,V0.call(n))}function jS(n,i){if(!(i.state.loading&4)){var l=F0.get(n);if(l)var d=l.get(null);else{l=new Map,F0.set(n,l);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var z=m[g];(z.nodeName==="LINK"||z.getAttribute("media")!=="not all")&&(l.set(z.dataset.precedence,z),d=z)}d&&l.set(null,d)}m=i.instance,z=m.getAttribute("data-precedence"),g=l.get(z)||d,g===d&&l.set(null,m),l.set(z,m),this.count++,d=V0.bind(this),m.addEventListener("load",d),m.addEventListener("error",d),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),i.state.loading|=4}}var Jl={$$typeof:M,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function $S(n,i,l,d,m,g,z,N,P){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=cl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cl(0),this.hiddenUpdates=cl(null),this.identifierPrefix=d,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function ry(n,i,l,d,m,g,z,N,P,le,me,ve){return n=new $S(n,i,l,z,P,le,me,ve,N),i=1,g===!0&&(i|=24),g=xa(3,null,null,i),n.current=g,g.stateNode=n,i=gf(),i.refCount++,n.pooledCache=i,i.refCount++,g.memoizedState={element:d,isDehydrated:l,cache:i},xf(g),n}function ay(n){return n?(n=oo,n):oo}function ny(n,i,l,d,m,g){m=ay(m),d.context===null?d.context=m:d.pendingContext=m,d=_i(i),d.payload={element:l},g=g===void 0?null:g,g!==null&&(d.callback=g),l=zi(n,d,i),l!==null&&(da(l,n,i),Ml(l,n,i))}function iy(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var l=n.retryLane;n.retryLane=l!==0&&l<i?l:i}}function Bh(n,i){iy(n,i),(n=n.alternate)&&iy(n,i)}function sy(n){if(n.tag===13||n.tag===31){var i=ms(n,67108864);i!==null&&da(i,n,67108864),Bh(n,67108864)}}function oy(n){if(n.tag===13||n.tag===31){var i=ka();i=fl(i);var l=ms(n,i);l!==null&&da(l,n,i),Bh(n,i)}}var X0=!0;function BS(n,i,l,d){var m=q.T;q.T=null;var g=F.p;try{F.p=2,Lh(n,i,l,d)}finally{F.p=g,q.T=m}}function LS(n,i,l,d){var m=q.T;q.T=null;var g=F.p;try{F.p=8,Lh(n,i,l,d)}finally{F.p=g,q.T=m}}function Lh(n,i,l,d){if(X0){var m=Uh(d);if(m===null)kh(n,i,d,K0,l),uy(n,d);else if(qS(m,n,i,l,d))d.stopPropagation();else if(uy(n,d),i&4&&-1<US.indexOf(n)){for(;m!==null;){var g=Ba(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var z=ia(g.pendingLanes);if(z!==0){var N=g;for(N.pendingLanes|=2,N.entangledLanes|=2;z;){var P=1<<31-Vr(z);N.entanglements[1]|=P,z&=~P}xn(g),(At&6)===0&&(O0=nr()+500,Gl(0))}}break;case 31:case 13:N=ms(g,2),N!==null&&da(N,g,2),I0(),Bh(g,2)}if(g=Uh(d),g===null&&kh(n,i,d,K0,l),g===m)break;m=g}m!==null&&d.stopPropagation()}else kh(n,i,d,null,l)}}function Uh(n){return n=qd(n),qh(n)}var K0=null;function qh(n){if(K0=null,n=$a(n),n!==null){var i=o(n);if(i===null)n=null;else{var l=i.tag;if(l===13){if(n=u(i),n!==null)return n;n=null}else if(l===31){if(n=c(i),n!==null)return n;n=null}else if(l===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}return K0=n,null}function ly(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Re()){case Ot:return 2;case rn:return 8;case mn:case Ys:return 32;case Kr:return 268435456;default:return 32}default:return 32}}var Ph=!1,Di=null,ji=null,$i=null,Wl=new Map,Ql=new Map,Bi=[],US="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function uy(n,i){switch(n){case"focusin":case"focusout":Di=null;break;case"dragenter":case"dragleave":ji=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Wl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(i.pointerId)}}function eu(n,i,l,d,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:l,eventSystemFlags:d,nativeEvent:g,targetContainers:[m]},i!==null&&(i=Ba(i),i!==null&&sy(i)),n):(n.eventSystemFlags|=d,i=n.targetContainers,m!==null&&i.indexOf(m)===-1&&i.push(m),n)}function qS(n,i,l,d,m){switch(i){case"focusin":return Di=eu(Di,n,i,l,d,m),!0;case"dragenter":return ji=eu(ji,n,i,l,d,m),!0;case"mouseover":return $i=eu($i,n,i,l,d,m),!0;case"pointerover":var g=m.pointerId;return Wl.set(g,eu(Wl.get(g)||null,n,i,l,d,m)),!0;case"gotpointercapture":return g=m.pointerId,Ql.set(g,eu(Ql.get(g)||null,n,i,l,d,m)),!0}return!1}function cy(n){var i=$a(n.target);if(i!==null){var l=o(i);if(l!==null){if(i=l.tag,i===13){if(i=u(l),i!==null){n.blockedOn=i,Ks(n.priority,function(){oy(l)});return}}else if(i===31){if(i=c(l),i!==null){n.blockedOn=i,Ks(n.priority,function(){oy(l)});return}}else if(i===3&&l.stateNode.current.memoizedState.isDehydrated){n.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}n.blockedOn=null}function J0(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var l=Uh(n.nativeEvent);if(l===null){l=n.nativeEvent;var d=new l.constructor(l.type,l);Ud=d,l.target.dispatchEvent(d),Ud=null}else return i=Ba(l),i!==null&&sy(i),n.blockedOn=l,!1;i.shift()}return!0}function dy(n,i,l){J0(n)&&l.delete(i)}function PS(){Ph=!1,Di!==null&&J0(Di)&&(Di=null),ji!==null&&J0(ji)&&(ji=null),$i!==null&&J0($i)&&($i=null),Wl.forEach(dy),Ql.forEach(dy)}function W0(n,i){n.blockedOn===i&&(n.blockedOn=null,Ph||(Ph=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,PS)))}var Q0=null;function fy(n){Q0!==n&&(Q0=n,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Q0===n&&(Q0=null);for(var i=0;i<n.length;i+=3){var l=n[i],d=n[i+1],m=n[i+2];if(typeof d!="function"){if(qh(d||l)===null)continue;break}var g=Ba(l);g!==null&&(n.splice(i,3),i-=3,Uf(g,{pending:!0,data:m,method:l.method,action:d},d,m))}}))}function Oo(n){function i(P){return W0(P,n)}Di!==null&&W0(Di,n),ji!==null&&W0(ji,n),$i!==null&&W0($i,n),Wl.forEach(i),Ql.forEach(i);for(var l=0;l<Bi.length;l++){var d=Bi[l];d.blockedOn===n&&(d.blockedOn=null)}for(;0<Bi.length&&(l=Bi[0],l.blockedOn===null);)cy(l),l.blockedOn===null&&Bi.shift();if(l=(n.ownerDocument||n).$$reactFormReplay,l!=null)for(d=0;d<l.length;d+=3){var m=l[d],g=l[d+1],z=m[$r]||null;if(typeof g=="function")z||fy(l);else if(z){var N=null;if(g&&g.hasAttribute("formAction")){if(m=g,z=g[$r]||null)N=z.formAction;else if(qh(m)!==null)continue}else N=z.action;typeof N=="function"?l[d+1]=N:(l.splice(d,3),d-=3),fy(l)}}}function hy(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(z){return m=z})},focusReset:"manual",scroll:"manual"})}function i(){m!==null&&(m(),m=null),d||setTimeout(l,20)}function l(){if(!d&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(l,100),function(){d=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),m!==null&&(m(),m=null)}}}function Hh(n){this._internalRoot=n}ec.prototype.render=Hh.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(a(409));var l=i.current,d=ka();ny(l,d,n,i,null,null)},ec.prototype.unmount=Hh.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;ny(n.current,2,null,n,null,null),I0(),i[Br]=null}};function ec(n){this._internalRoot=n}ec.prototype.unstable_scheduleHydration=function(n){if(n){var i=gi();n={blockedOn:null,target:n,priority:i};for(var l=0;l<Bi.length&&i!==0&&i<Bi[l].priority;l++);Bi.splice(l,0,n),l===0&&cy(n)}};var my=t.version;if(my!=="19.2.4")throw Error(a(527,my,"19.2.4"));F.findDOMNode=function(n){var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(a(188)):(n=Object.keys(n).join(","),Error(a(268,n)));return n=h(i),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var HS={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{pr=tc.inject(HS),St=tc}catch{}}return ru.createRoot=function(n,i){if(!s(n))throw Error(a(299));var l=!1,d="",m=wv,g=Sv,z=_v;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(m=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(z=i.onRecoverableError)),i=ry(n,1,!1,null,null,l,d,null,m,g,z,hy),n[Br]=i.current,zh(n),new Hh(i)},ru.hydrateRoot=function(n,i,l){if(!s(n))throw Error(a(299));var d=!1,m="",g=wv,z=Sv,N=_v,P=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(m=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(z=l.onCaughtError),l.onRecoverableError!==void 0&&(N=l.onRecoverableError),l.formState!==void 0&&(P=l.formState)),i=ry(n,1,!0,i,l??null,d,m,P,g,z,N,hy),i.context=ay(null),l=i.current,d=ka(),d=fl(d),m=_i(d),m.callback=null,zi(l,m,d),l=d,i.current.lanes=l,pi(i,l),xn(i),n[Br]=i.current,zh(n),new ec(i)},ru.version="19.2.4",ru}var zy;function WS(){if(zy)return Vh.exports;zy=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Vh.exports=JS(),Vh.exports}var i6=WS();class Ea{constructor(t,r,a){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=t,this.start=r,this.end=a}static range(t,r){return r?!t||!t.loc||!r.loc||t.loc.lexer!==r.loc.lexer?null:new Ea(t.loc.lexer,t.loc.start,r.loc.end):t&&t.loc}}class Ja{constructor(t,r){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=t,this.loc=r}range(t,r){return new Ja(r,Ea.range(this,t))}}let ke=class s6{constructor(t,r){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var a="KaTeX parse error: "+t,s,o,u=r&&r.loc;if(u&&u.start<=u.end){var c=u.lexer.input;s=u.start,o=u.end,s===c.length?a+=" at end of input: ":a+=" at position "+(s+1)+": ";var f=c.slice(s,o).replace(/[^]/g,"$&"),h;s>15?h=""+c.slice(s-15,s):h=c.slice(0,s);var p;o+15<c.length?p=c.slice(o,o+15)+"":p=c.slice(o),a+=h+f+p}var v=new Error(a);return v.name="ParseError",v.__proto__=s6.prototype,v.position=s,s!=null&&o!=null&&(v.length=o-s),v.rawMessage=t,v}};ke.prototype.__proto__=Error.prototype;var QS=function(t,r){return t.indexOf(r)!==-1},e_=function(t,r){return t===void 0?r:t},t_=/([A-Z])/g,r_=function(t){return t.replace(t_,"-$1").toLowerCase()},a_={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},n_=/[&><"']/g;function i_(e){return String(e).replace(n_,t=>a_[t])}var o6=function e(t){return t.type==="ordgroup"||t.type==="color"?t.body.length===1?e(t.body[0]):t:t.type==="font"?e(t.body):t},s_=function(t){var r=o6(t);return r.type==="mathord"||r.type==="textord"||r.type==="atom"},o_=function(t){if(!t)throw new Error("Expected non-null, but got "+String(t));return t},l_=function(t){var r=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(t);return r?r[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(r[1])?null:r[1].toLowerCase():"_relative"},Fe={contains:QS,deflt:e_,escape:i_,hyphenate:r_,getBaseElem:o6,isCharacterBox:s_,protocolFromUrl:l_},pu={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:e=>"#"+e},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(e,t)=>(t.push(e),t)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:e=>Math.max(0,e),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:e=>Math.max(0,e),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:e=>Math.max(0,e),cli:"-e, --max-expand <n>",cliProcessor:e=>e==="Infinity"?1/0:parseInt(e)},globalGroup:{type:"boolean",cli:!1}};function u_(e){if(e.default)return e.default;var t=e.type,r=Array.isArray(t)?t[0]:t;if(typeof r!="string")return r.enum[0];switch(r){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}let Cp=class{constructor(t){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,t=t||{};for(var r in pu)if(pu.hasOwnProperty(r)){var a=pu[r];this[r]=t[r]!==void 0?a.processor?a.processor(t[r]):t[r]:u_(a)}}reportNonstrict(t,r,a){var s=this.strict;if(typeof s=="function"&&(s=s(t,r,a)),!(!s||s==="ignore")){if(s===!0||s==="error")throw new ke("LaTeX-incompatible input and strict mode is set to 'error': "+(r+" ["+t+"]"),a);s==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]"))}}useStrictBehavior(t,r,a){var s=this.strict;if(typeof s=="function")try{s=s(t,r,a)}catch{s="error"}return!s||s==="ignore"?!1:s===!0||s==="error"?!0:s==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(r+" ["+t+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+s+"': "+r+" ["+t+"]")),!1)}isTrusted(t){if(t.url&&!t.protocol){var r=Fe.protocolFromUrl(t.url);if(r==null)return!1;t.protocol=r}var a=typeof this.trust=="function"?this.trust(t):this.trust;return!!a}};class Ui{constructor(t,r,a){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=t,this.size=r,this.cramped=a}sup(){return zn[c_[this.id]]}sub(){return zn[d_[this.id]]}fracNum(){return zn[f_[this.id]]}fracDen(){return zn[h_[this.id]]}cramp(){return zn[m_[this.id]]}text(){return zn[p_[this.id]]}isTight(){return this.size>=2}}var Op=0,Ic=1,Go=2,ni=3,yu=4,Ka=5,Xo=6,aa=7,zn=[new Ui(Op,0,!1),new Ui(Ic,0,!0),new Ui(Go,1,!1),new Ui(ni,1,!0),new Ui(yu,2,!1),new Ui(Ka,2,!0),new Ui(Xo,3,!1),new Ui(aa,3,!0)],c_=[yu,Ka,yu,Ka,Xo,aa,Xo,aa],d_=[Ka,Ka,Ka,Ka,aa,aa,aa,aa],f_=[Go,ni,yu,Ka,Xo,aa,Xo,aa],h_=[ni,ni,Ka,Ka,aa,aa,aa,aa],m_=[Ic,Ic,ni,ni,Ka,Ka,aa,aa],p_=[Op,Ic,Go,ni,Go,ni,Go,ni],Je={DISPLAY:zn[Op],TEXT:zn[Go],SCRIPT:zn[yu],SCRIPTSCRIPT:zn[Xo]},Pm=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function g_(e){for(var t=0;t<Pm.length;t++)for(var r=Pm[t],a=0;a<r.blocks.length;a++){var s=r.blocks[a];if(e>=s[0]&&e<=s[1])return r.name}return null}var Tc=[];Pm.forEach(e=>e.blocks.forEach(t=>Tc.push(...t)));function l6(e){for(var t=0;t<Tc.length;t+=2)if(e>=Tc[t]&&e<=Tc[t+1])return!0;return!1}var Ro=80,v_=function(t,r){return"M95,"+(622+t+r)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+t/2.075+" -"+t+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+t)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},y_=function(t,r){return"M263,"+(601+t+r)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+t/2.084+" -"+t+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+t)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},b_=function(t,r){return"M983 "+(10+t+r)+`
l`+t/3.13+" -"+t+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+t)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+t)+" "+r+"h400000v"+(40+t)+"h-400000z"},x_=function(t,r){return"M424,"+(2398+t+r)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+t/4.223+" -"+t+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+t)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+t)+" "+r+`
h400000v`+(40+t)+"h-400000z"},w_=function(t,r){return"M473,"+(2713+t+r)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+t/5.298+" -"+t+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+t)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+t)+" "+r+"h400000v"+(40+t)+"H1017.7z"},S_=function(t){var r=t/2;return"M400000 "+t+" H0 L"+r+" 0 l65 45 L145 "+(t-80)+" H400000z"},__=function(t,r,a){var s=a-54-r-t;return"M702 "+(t+r)+"H400000"+(40+t)+`
H742v`+s+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+r+"H400000v"+(40+t)+"H742z"},z_=function(t,r,a){r=1e3*r;var s="";switch(t){case"sqrtMain":s=v_(r,Ro);break;case"sqrtSize1":s=y_(r,Ro);break;case"sqrtSize2":s=b_(r,Ro);break;case"sqrtSize3":s=x_(r,Ro);break;case"sqrtSize4":s=w_(r,Ro);break;case"sqrtTall":s=__(r,Ro,a)}return s},k_=function(t,r){switch(t){case"":return"M291 0 H417 V"+r+" H291z M291 0 H417 V"+r+" H291z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z";case"":return"M145 0 H188 V"+r+" H145z M145 0 H188 V"+r+" H145z"+("M367 0 H410 V"+r+" H367z M367 0 H410 V"+r+" H367z");case"":return"M457 0 H583 V"+r+" H457z M457 0 H583 V"+r+" H457z";case"":return"M319 0 H403 V"+r+" H319z M319 0 H403 V"+r+" H319z";case"":return"M263 0 H347 V"+r+" H263z M263 0 H347 V"+r+" H263z";case"":return"M384 0 H504 V"+r+" H384z M384 0 H504 V"+r+" H384z";case"":return"M312 0 H355 V"+r+" H312z M312 0 H355 V"+r+" H312z";case"":return"M257 0 H300 V"+r+" H257z M257 0 H300 V"+r+" H257z"+("M478 0 H521 V"+r+" H478z M478 0 H521 V"+r+" H478z");default:return""}},ky={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},T_=function(t,r){switch(t){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+r+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+r+" v1759 h84z";case"vert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+" v585 h43z";case"doublevert":return"M145 15 v585 v"+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+r+` v585 h43z
M367 15 v585 v`+r+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-r+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+r+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+r+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+r+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+r+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+r+` v602 h84z
M403 1759 V0 H319 V1759 v`+r+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+r+` v602 h84z
M347 1759 V0 h-84 V1759 v`+r+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(r+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(r+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(r+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(r+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class Ru{constructor(t){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=t,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(t){return Fe.contains(this.classes,t)}toNode(){for(var t=document.createDocumentFragment(),r=0;r<this.children.length;r++)t.appendChild(this.children[r].toNode());return t}toMarkup(){for(var t="",r=0;r<this.children.length;r++)t+=this.children[r].toMarkup();return t}toText(){var t=r=>r.toText();return this.children.map(t).join("")}}var Tn={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},ac={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},Ty={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function u6(e,t){Tn[e]=t}function Rp(e,t,r){if(!Tn[t])throw new Error("Font metrics not found for font: "+t+".");var a=e.charCodeAt(0),s=Tn[t][a];if(!s&&e[0]in Ty&&(a=Ty[e[0]].charCodeAt(0),s=Tn[t][a]),!s&&r==="text"&&l6(a)&&(s=Tn[t][77]),s)return{depth:s[0],height:s[1],italic:s[2],skew:s[3],width:s[4]}}var Kh={};function A_(e){var t;if(e>=5?t=0:e>=3?t=1:t=2,!Kh[t]){var r=Kh[t]={cssEmPerMu:ac.quad[t]/18};for(var a in ac)ac.hasOwnProperty(a)&&(r[a]=ac[a][t])}return Kh[t]}var E_=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],Ay=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Ey=function(t,r){return r.size<2?t:E_[t-1][r.size-1]};class ri{constructor(t){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=t.style,this.color=t.color,this.size=t.size||ri.BASESIZE,this.textSize=t.textSize||this.size,this.phantom=!!t.phantom,this.font=t.font||"",this.fontFamily=t.fontFamily||"",this.fontWeight=t.fontWeight||"",this.fontShape=t.fontShape||"",this.sizeMultiplier=Ay[this.size-1],this.maxSize=t.maxSize,this.minRuleThickness=t.minRuleThickness,this._fontMetrics=void 0}extend(t){var r={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var a in t)t.hasOwnProperty(a)&&(r[a]=t[a]);return new ri(r)}havingStyle(t){return this.style===t?this:this.extend({style:t,size:Ey(this.textSize,t)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(t){return this.size===t&&this.textSize===t?this:this.extend({style:this.style.text(),size:t,textSize:t,sizeMultiplier:Ay[t-1]})}havingBaseStyle(t){t=t||this.style.text();var r=Ey(ri.BASESIZE,t);return this.size===r&&this.textSize===ri.BASESIZE&&this.style===t?this:this.extend({style:t,size:r})}havingBaseSizing(){var t;switch(this.style.id){case 4:case 5:t=3;break;case 6:case 7:t=1;break;default:t=6}return this.extend({style:this.style.text(),size:t})}withColor(t){return this.extend({color:t})}withPhantom(){return this.extend({phantom:!0})}withFont(t){return this.extend({font:t})}withTextFontFamily(t){return this.extend({fontFamily:t,font:""})}withTextFontWeight(t){return this.extend({fontWeight:t,font:""})}withTextFontShape(t){return this.extend({fontShape:t,font:""})}sizingClasses(t){return t.size!==this.size?["sizing","reset-size"+t.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==ri.BASESIZE?["sizing","reset-size"+this.size,"size"+ri.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=A_(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}ri.BASESIZE=6;var Hm={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},M_={ex:!0,em:!0,mu:!0},c6=function(t){return typeof t!="string"&&(t=t.unit),t in Hm||t in M_||t==="ex"},sr=function(t,r){var a;if(t.unit in Hm)a=Hm[t.unit]/r.fontMetrics().ptPerEm/r.sizeMultiplier;else if(t.unit==="mu")a=r.fontMetrics().cssEmPerMu;else{var s;if(r.style.isTight()?s=r.havingStyle(r.style.text()):s=r,t.unit==="ex")a=s.fontMetrics().xHeight;else if(t.unit==="em")a=s.fontMetrics().quad;else throw new ke("Invalid unit: '"+t.unit+"'");s!==r&&(a*=s.sizeMultiplier/r.sizeMultiplier)}return Math.min(t.number*a,r.maxSize)},Ne=function(t){return+t.toFixed(4)+"em"},Ki=function(t){return t.filter(r=>r).join(" ")},d6=function(t,r,a){if(this.classes=t||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=a||{},r){r.style.isTight()&&this.classes.push("mtight");var s=r.getColor();s&&(this.style.color=s)}},f6=function(t){var r=document.createElement(t);r.className=Ki(this.classes);for(var a in this.style)this.style.hasOwnProperty(a)&&(r.style[a]=this.style[a]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&r.setAttribute(s,this.attributes[s]);for(var o=0;o<this.children.length;o++)r.appendChild(this.children[o].toNode());return r},N_=/[\s"'>/=\x00-\x1f]/,h6=function(t){var r="<"+t;this.classes.length&&(r+=' class="'+Fe.escape(Ki(this.classes))+'"');var a="";for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=Fe.hyphenate(s)+":"+this.style[s]+";");a&&(r+=' style="'+Fe.escape(a)+'"');for(var o in this.attributes)if(this.attributes.hasOwnProperty(o)){if(N_.test(o))throw new ke("Invalid attribute name '"+o+"'");r+=" "+o+'="'+Fe.escape(this.attributes[o])+'"'}r+=">";for(var u=0;u<this.children.length;u++)r+=this.children[u].toMarkup();return r+="</"+t+">",r};class Iu{constructor(t,r,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,d6.call(this,t,a,s),this.children=r||[]}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return Fe.contains(this.classes,t)}toNode(){return f6.call(this,"span")}toMarkup(){return h6.call(this,"span")}}class Ip{constructor(t,r,a,s){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,d6.call(this,r,s),this.children=a||[],this.setAttribute("href",t)}setAttribute(t,r){this.attributes[t]=r}hasClass(t){return Fe.contains(this.classes,t)}toNode(){return f6.call(this,"a")}toMarkup(){return h6.call(this,"a")}}class C_{constructor(t,r,a){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=r,this.src=t,this.classes=["mord"],this.style=a}hasClass(t){return Fe.contains(this.classes,t)}toNode(){var t=document.createElement("img");t.src=this.src,t.alt=this.alt,t.className="mord";for(var r in this.style)this.style.hasOwnProperty(r)&&(t.style[r]=this.style[r]);return t}toMarkup(){var t='<img src="'+Fe.escape(this.src)+'"'+(' alt="'+Fe.escape(this.alt)+'"'),r="";for(var a in this.style)this.style.hasOwnProperty(a)&&(r+=Fe.hyphenate(a)+":"+this.style[a]+";");return r&&(t+=' style="'+Fe.escape(r)+'"'),t+="'/>",t}}var O_={:"",:"",:"",:""};class Wa{constructor(t,r,a,s,o,u,c,f){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=t,this.height=r||0,this.depth=a||0,this.italic=s||0,this.skew=o||0,this.width=u||0,this.classes=c||[],this.style=f||{},this.maxFontSize=0;var h=g_(this.text.charCodeAt(0));h&&this.classes.push(h+"_fallback"),/[]/.test(this.text)&&(this.text=O_[this.text])}hasClass(t){return Fe.contains(this.classes,t)}toNode(){var t=document.createTextNode(this.text),r=null;this.italic>0&&(r=document.createElement("span"),r.style.marginRight=Ne(this.italic)),this.classes.length>0&&(r=r||document.createElement("span"),r.className=Ki(this.classes));for(var a in this.style)this.style.hasOwnProperty(a)&&(r=r||document.createElement("span"),r.style[a]=this.style[a]);return r?(r.appendChild(t),r):t}toMarkup(){var t=!1,r="<span";this.classes.length&&(t=!0,r+=' class="',r+=Fe.escape(Ki(this.classes)),r+='"');var a="";this.italic>0&&(a+="margin-right:"+this.italic+"em;");for(var s in this.style)this.style.hasOwnProperty(s)&&(a+=Fe.hyphenate(s)+":"+this.style[s]+";");a&&(t=!0,r+=' style="'+Fe.escape(a)+'"');var o=Fe.escape(this.text);return t?(r+=">",r+=o,r+="</span>",r):o}}class oi{constructor(t,r){this.children=void 0,this.attributes=void 0,this.children=t||[],this.attributes=r||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"svg");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&r.setAttribute(a,this.attributes[a]);for(var s=0;s<this.children.length;s++)r.appendChild(this.children[s].toNode());return r}toMarkup(){var t='<svg xmlns="http://www.w3.org/2000/svg"';for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Fe.escape(this.attributes[r])+'"');t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</svg>",t}}class Ji{constructor(t,r){this.pathName=void 0,this.alternate=void 0,this.pathName=t,this.alternate=r}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"path");return this.alternate?r.setAttribute("d",this.alternate):r.setAttribute("d",ky[this.pathName]),r}toMarkup(){return this.alternate?'<path d="'+Fe.escape(this.alternate)+'"/>':'<path d="'+Fe.escape(ky[this.pathName])+'"/>'}}class Zm{constructor(t){this.attributes=void 0,this.attributes=t||{}}toNode(){var t="http://www.w3.org/2000/svg",r=document.createElementNS(t,"line");for(var a in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,a)&&r.setAttribute(a,this.attributes[a]);return r}toMarkup(){var t="<line";for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="'+Fe.escape(this.attributes[r])+'"');return t+="/>",t}}function My(e){if(e instanceof Wa)return e;throw new Error("Expected symbolNode but got "+String(e)+".")}function R_(e){if(e instanceof Iu)return e;throw new Error("Expected span<HtmlDomNode> but got "+String(e)+".")}var I_={bin:1,close:1,inner:1,open:1,punct:1,rel:1},D_={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},Ut={math:{},text:{}};function x(e,t,r,a,s,o){Ut[e][s]={font:t,group:r,replace:a},o&&a&&(Ut[e][a]=Ut[e][s])}var S="math",Se="text",A="main",B="ams",tr="accent-token",Ie="bin",na="close",Qo="inner",Ke="mathord",Tr="op-token",Ia="open",hd="punct",U="rel",hi="spacing",Y="textord";x(S,A,U,"","\\equiv",!0);x(S,A,U,"","\\prec",!0);x(S,A,U,"","\\succ",!0);x(S,A,U,"","\\sim",!0);x(S,A,U,"","\\perp");x(S,A,U,"","\\preceq",!0);x(S,A,U,"","\\succeq",!0);x(S,A,U,"","\\simeq",!0);x(S,A,U,"","\\mid",!0);x(S,A,U,"","\\ll",!0);x(S,A,U,"","\\gg",!0);x(S,A,U,"","\\asymp",!0);x(S,A,U,"","\\parallel");x(S,A,U,"","\\bowtie",!0);x(S,A,U,"","\\smile",!0);x(S,A,U,"","\\sqsubseteq",!0);x(S,A,U,"","\\sqsupseteq",!0);x(S,A,U,"","\\doteq",!0);x(S,A,U,"","\\frown",!0);x(S,A,U,"","\\ni",!0);x(S,A,U,"","\\propto",!0);x(S,A,U,"","\\vdash",!0);x(S,A,U,"","\\dashv",!0);x(S,A,U,"","\\owns");x(S,A,hd,".","\\ldotp");x(S,A,hd,"","\\cdotp");x(S,A,Y,"#","\\#");x(Se,A,Y,"#","\\#");x(S,A,Y,"&","\\&");x(Se,A,Y,"&","\\&");x(S,A,Y,"","\\aleph",!0);x(S,A,Y,"","\\forall",!0);x(S,A,Y,"","\\hbar",!0);x(S,A,Y,"","\\exists",!0);x(S,A,Y,"","\\nabla",!0);x(S,A,Y,"","\\flat",!0);x(S,A,Y,"","\\ell",!0);x(S,A,Y,"","\\natural",!0);x(S,A,Y,"","\\clubsuit",!0);x(S,A,Y,"","\\wp",!0);x(S,A,Y,"","\\sharp",!0);x(S,A,Y,"","\\diamondsuit",!0);x(S,A,Y,"","\\Re",!0);x(S,A,Y,"","\\heartsuit",!0);x(S,A,Y,"","\\Im",!0);x(S,A,Y,"","\\spadesuit",!0);x(S,A,Y,"","\\S",!0);x(Se,A,Y,"","\\S");x(S,A,Y,"","\\P",!0);x(Se,A,Y,"","\\P");x(S,A,Y,"","\\dag");x(Se,A,Y,"","\\dag");x(Se,A,Y,"","\\textdagger");x(S,A,Y,"","\\ddag");x(Se,A,Y,"","\\ddag");x(Se,A,Y,"","\\textdaggerdbl");x(S,A,na,"","\\rmoustache",!0);x(S,A,Ia,"","\\lmoustache",!0);x(S,A,na,"","\\rgroup",!0);x(S,A,Ia,"","\\lgroup",!0);x(S,A,Ie,"","\\mp",!0);x(S,A,Ie,"","\\ominus",!0);x(S,A,Ie,"","\\uplus",!0);x(S,A,Ie,"","\\sqcap",!0);x(S,A,Ie,"","\\ast");x(S,A,Ie,"","\\sqcup",!0);x(S,A,Ie,"","\\bigcirc",!0);x(S,A,Ie,"","\\bullet",!0);x(S,A,Ie,"","\\ddagger");x(S,A,Ie,"","\\wr",!0);x(S,A,Ie,"","\\amalg");x(S,A,Ie,"&","\\And");x(S,A,U,"","\\longleftarrow",!0);x(S,A,U,"","\\Leftarrow",!0);x(S,A,U,"","\\Longleftarrow",!0);x(S,A,U,"","\\longrightarrow",!0);x(S,A,U,"","\\Rightarrow",!0);x(S,A,U,"","\\Longrightarrow",!0);x(S,A,U,"","\\leftrightarrow",!0);x(S,A,U,"","\\longleftrightarrow",!0);x(S,A,U,"","\\Leftrightarrow",!0);x(S,A,U,"","\\Longleftrightarrow",!0);x(S,A,U,"","\\mapsto",!0);x(S,A,U,"","\\longmapsto",!0);x(S,A,U,"","\\nearrow",!0);x(S,A,U,"","\\hookleftarrow",!0);x(S,A,U,"","\\hookrightarrow",!0);x(S,A,U,"","\\searrow",!0);x(S,A,U,"","\\leftharpoonup",!0);x(S,A,U,"","\\rightharpoonup",!0);x(S,A,U,"","\\swarrow",!0);x(S,A,U,"","\\leftharpoondown",!0);x(S,A,U,"","\\rightharpoondown",!0);x(S,A,U,"","\\nwarrow",!0);x(S,A,U,"","\\rightleftharpoons",!0);x(S,B,U,"","\\nless",!0);x(S,B,U,"","\\@nleqslant");x(S,B,U,"","\\@nleqq");x(S,B,U,"","\\lneq",!0);x(S,B,U,"","\\lneqq",!0);x(S,B,U,"","\\@lvertneqq");x(S,B,U,"","\\lnsim",!0);x(S,B,U,"","\\lnapprox",!0);x(S,B,U,"","\\nprec",!0);x(S,B,U,"","\\npreceq",!0);x(S,B,U,"","\\precnsim",!0);x(S,B,U,"","\\precnapprox",!0);x(S,B,U,"","\\nsim",!0);x(S,B,U,"","\\@nshortmid");x(S,B,U,"","\\nmid",!0);x(S,B,U,"","\\nvdash",!0);x(S,B,U,"","\\nvDash",!0);x(S,B,U,"","\\ntriangleleft");x(S,B,U,"","\\ntrianglelefteq",!0);x(S,B,U,"","\\subsetneq",!0);x(S,B,U,"","\\@varsubsetneq");x(S,B,U,"","\\subsetneqq",!0);x(S,B,U,"","\\@varsubsetneqq");x(S,B,U,"","\\ngtr",!0);x(S,B,U,"","\\@ngeqslant");x(S,B,U,"","\\@ngeqq");x(S,B,U,"","\\gneq",!0);x(S,B,U,"","\\gneqq",!0);x(S,B,U,"","\\@gvertneqq");x(S,B,U,"","\\gnsim",!0);x(S,B,U,"","\\gnapprox",!0);x(S,B,U,"","\\nsucc",!0);x(S,B,U,"","\\nsucceq",!0);x(S,B,U,"","\\succnsim",!0);x(S,B,U,"","\\succnapprox",!0);x(S,B,U,"","\\ncong",!0);x(S,B,U,"","\\@nshortparallel");x(S,B,U,"","\\nparallel",!0);x(S,B,U,"","\\nVDash",!0);x(S,B,U,"","\\ntriangleright");x(S,B,U,"","\\ntrianglerighteq",!0);x(S,B,U,"","\\@nsupseteqq");x(S,B,U,"","\\supsetneq",!0);x(S,B,U,"","\\@varsupsetneq");x(S,B,U,"","\\supsetneqq",!0);x(S,B,U,"","\\@varsupsetneqq");x(S,B,U,"","\\nVdash",!0);x(S,B,U,"","\\precneqq",!0);x(S,B,U,"","\\succneqq",!0);x(S,B,U,"","\\@nsubseteqq");x(S,B,Ie,"","\\unlhd");x(S,B,Ie,"","\\unrhd");x(S,B,U,"","\\nleftarrow",!0);x(S,B,U,"","\\nrightarrow",!0);x(S,B,U,"","\\nLeftarrow",!0);x(S,B,U,"","\\nRightarrow",!0);x(S,B,U,"","\\nleftrightarrow",!0);x(S,B,U,"","\\nLeftrightarrow",!0);x(S,B,U,"","\\vartriangle");x(S,B,Y,"","\\hslash");x(S,B,Y,"","\\triangledown");x(S,B,Y,"","\\lozenge");x(S,B,Y,"","\\circledS");x(S,B,Y,"","\\circledR");x(Se,B,Y,"","\\circledR");x(S,B,Y,"","\\measuredangle",!0);x(S,B,Y,"","\\nexists");x(S,B,Y,"","\\mho");x(S,B,Y,"","\\Finv",!0);x(S,B,Y,"","\\Game",!0);x(S,B,Y,"","\\backprime");x(S,B,Y,"","\\blacktriangle");x(S,B,Y,"","\\blacktriangledown");x(S,B,Y,"","\\blacksquare");x(S,B,Y,"","\\blacklozenge");x(S,B,Y,"","\\bigstar");x(S,B,Y,"","\\sphericalangle",!0);x(S,B,Y,"","\\complement",!0);x(S,B,Y,"","\\eth",!0);x(Se,A,Y,"","");x(S,B,Y,"","\\diagup");x(S,B,Y,"","\\diagdown");x(S,B,Y,"","\\square");x(S,B,Y,"","\\Box");x(S,B,Y,"","\\Diamond");x(S,B,Y,"","\\yen",!0);x(Se,B,Y,"","\\yen",!0);x(S,B,Y,"","\\checkmark",!0);x(Se,B,Y,"","\\checkmark");x(S,B,Y,"","\\beth",!0);x(S,B,Y,"","\\daleth",!0);x(S,B,Y,"","\\gimel",!0);x(S,B,Y,"","\\digamma",!0);x(S,B,Y,"","\\varkappa");x(S,B,Ia,"","\\@ulcorner",!0);x(S,B,na,"","\\@urcorner",!0);x(S,B,Ia,"","\\@llcorner",!0);x(S,B,na,"","\\@lrcorner",!0);x(S,B,U,"","\\leqq",!0);x(S,B,U,"","\\leqslant",!0);x(S,B,U,"","\\eqslantless",!0);x(S,B,U,"","\\lesssim",!0);x(S,B,U,"","\\lessapprox",!0);x(S,B,U,"","\\approxeq",!0);x(S,B,Ie,"","\\lessdot");x(S,B,U,"","\\lll",!0);x(S,B,U,"","\\lessgtr",!0);x(S,B,U,"","\\lesseqgtr",!0);x(S,B,U,"","\\lesseqqgtr",!0);x(S,B,U,"","\\doteqdot");x(S,B,U,"","\\risingdotseq",!0);x(S,B,U,"","\\fallingdotseq",!0);x(S,B,U,"","\\backsim",!0);x(S,B,U,"","\\backsimeq",!0);x(S,B,U,"","\\subseteqq",!0);x(S,B,U,"","\\Subset",!0);x(S,B,U,"","\\sqsubset",!0);x(S,B,U,"","\\preccurlyeq",!0);x(S,B,U,"","\\curlyeqprec",!0);x(S,B,U,"","\\precsim",!0);x(S,B,U,"","\\precapprox",!0);x(S,B,U,"","\\vartriangleleft");x(S,B,U,"","\\trianglelefteq");x(S,B,U,"","\\vDash",!0);x(S,B,U,"","\\Vvdash",!0);x(S,B,U,"","\\smallsmile");x(S,B,U,"","\\smallfrown");x(S,B,U,"","\\bumpeq",!0);x(S,B,U,"","\\Bumpeq",!0);x(S,B,U,"","\\geqq",!0);x(S,B,U,"","\\geqslant",!0);x(S,B,U,"","\\eqslantgtr",!0);x(S,B,U,"","\\gtrsim",!0);x(S,B,U,"","\\gtrapprox",!0);x(S,B,Ie,"","\\gtrdot");x(S,B,U,"","\\ggg",!0);x(S,B,U,"","\\gtrless",!0);x(S,B,U,"","\\gtreqless",!0);x(S,B,U,"","\\gtreqqless",!0);x(S,B,U,"","\\eqcirc",!0);x(S,B,U,"","\\circeq",!0);x(S,B,U,"","\\triangleq",!0);x(S,B,U,"","\\thicksim");x(S,B,U,"","\\thickapprox");x(S,B,U,"","\\supseteqq",!0);x(S,B,U,"","\\Supset",!0);x(S,B,U,"","\\sqsupset",!0);x(S,B,U,"","\\succcurlyeq",!0);x(S,B,U,"","\\curlyeqsucc",!0);x(S,B,U,"","\\succsim",!0);x(S,B,U,"","\\succapprox",!0);x(S,B,U,"","\\vartriangleright");x(S,B,U,"","\\trianglerighteq");x(S,B,U,"","\\Vdash",!0);x(S,B,U,"","\\shortmid");x(S,B,U,"","\\shortparallel");x(S,B,U,"","\\between",!0);x(S,B,U,"","\\pitchfork",!0);x(S,B,U,"","\\varpropto");x(S,B,U,"","\\blacktriangleleft");x(S,B,U,"","\\therefore",!0);x(S,B,U,"","\\backepsilon");x(S,B,U,"","\\blacktriangleright");x(S,B,U,"","\\because",!0);x(S,B,U,"","\\llless");x(S,B,U,"","\\gggtr");x(S,B,Ie,"","\\lhd");x(S,B,Ie,"","\\rhd");x(S,B,U,"","\\eqsim",!0);x(S,A,U,"","\\Join");x(S,B,U,"","\\Doteq",!0);x(S,B,Ie,"","\\dotplus",!0);x(S,B,Ie,"","\\smallsetminus");x(S,B,Ie,"","\\Cap",!0);x(S,B,Ie,"","\\Cup",!0);x(S,B,Ie,"","\\doublebarwedge",!0);x(S,B,Ie,"","\\boxminus",!0);x(S,B,Ie,"","\\boxplus",!0);x(S,B,Ie,"","\\divideontimes",!0);x(S,B,Ie,"","\\ltimes",!0);x(S,B,Ie,"","\\rtimes",!0);x(S,B,Ie,"","\\leftthreetimes",!0);x(S,B,Ie,"","\\rightthreetimes",!0);x(S,B,Ie,"","\\curlywedge",!0);x(S,B,Ie,"","\\curlyvee",!0);x(S,B,Ie,"","\\circleddash",!0);x(S,B,Ie,"","\\circledast",!0);x(S,B,Ie,"","\\centerdot");x(S,B,Ie,"","\\intercal",!0);x(S,B,Ie,"","\\doublecap");x(S,B,Ie,"","\\doublecup");x(S,B,Ie,"","\\boxtimes",!0);x(S,B,U,"","\\dashrightarrow",!0);x(S,B,U,"","\\dashleftarrow",!0);x(S,B,U,"","\\leftleftarrows",!0);x(S,B,U,"","\\leftrightarrows",!0);x(S,B,U,"","\\Lleftarrow",!0);x(S,B,U,"","\\twoheadleftarrow",!0);x(S,B,U,"","\\leftarrowtail",!0);x(S,B,U,"","\\looparrowleft",!0);x(S,B,U,"","\\leftrightharpoons",!0);x(S,B,U,"","\\curvearrowleft",!0);x(S,B,U,"","\\circlearrowleft",!0);x(S,B,U,"","\\Lsh",!0);x(S,B,U,"","\\upuparrows",!0);x(S,B,U,"","\\upharpoonleft",!0);x(S,B,U,"","\\downharpoonleft",!0);x(S,A,U,"","\\origof",!0);x(S,A,U,"","\\imageof",!0);x(S,B,U,"","\\multimap",!0);x(S,B,U,"","\\leftrightsquigarrow",!0);x(S,B,U,"","\\rightrightarrows",!0);x(S,B,U,"","\\rightleftarrows",!0);x(S,B,U,"","\\twoheadrightarrow",!0);x(S,B,U,"","\\rightarrowtail",!0);x(S,B,U,"","\\looparrowright",!0);x(S,B,U,"","\\curvearrowright",!0);x(S,B,U,"","\\circlearrowright",!0);x(S,B,U,"","\\Rsh",!0);x(S,B,U,"","\\downdownarrows",!0);x(S,B,U,"","\\upharpoonright",!0);x(S,B,U,"","\\downharpoonright",!0);x(S,B,U,"","\\rightsquigarrow",!0);x(S,B,U,"","\\leadsto");x(S,B,U,"","\\Rrightarrow",!0);x(S,B,U,"","\\restriction");x(S,A,Y,"","`");x(S,A,Y,"$","\\$");x(Se,A,Y,"$","\\$");x(Se,A,Y,"$","\\textdollar");x(S,A,Y,"%","\\%");x(Se,A,Y,"%","\\%");x(S,A,Y,"_","\\_");x(Se,A,Y,"_","\\_");x(Se,A,Y,"_","\\textunderscore");x(S,A,Y,"","\\angle",!0);x(S,A,Y,"","\\infty",!0);x(S,A,Y,"","\\prime");x(S,A,Y,"","\\triangle");x(S,A,Y,"","\\Gamma",!0);x(S,A,Y,"","\\Delta",!0);x(S,A,Y,"","\\Theta",!0);x(S,A,Y,"","\\Lambda",!0);x(S,A,Y,"","\\Xi",!0);x(S,A,Y,"","\\Pi",!0);x(S,A,Y,"","\\Sigma",!0);x(S,A,Y,"","\\Upsilon",!0);x(S,A,Y,"","\\Phi",!0);x(S,A,Y,"","\\Psi",!0);x(S,A,Y,"","\\Omega",!0);x(S,A,Y,"A","");x(S,A,Y,"B","");x(S,A,Y,"E","");x(S,A,Y,"Z","");x(S,A,Y,"H","");x(S,A,Y,"I","");x(S,A,Y,"K","");x(S,A,Y,"M","");x(S,A,Y,"N","");x(S,A,Y,"O","");x(S,A,Y,"P","");x(S,A,Y,"T","");x(S,A,Y,"X","");x(S,A,Y,"","\\neg",!0);x(S,A,Y,"","\\lnot");x(S,A,Y,"","\\top");x(S,A,Y,"","\\bot");x(S,A,Y,"","\\emptyset");x(S,B,Y,"","\\varnothing");x(S,A,Ke,"","\\alpha",!0);x(S,A,Ke,"","\\beta",!0);x(S,A,Ke,"","\\gamma",!0);x(S,A,Ke,"","\\delta",!0);x(S,A,Ke,"","\\epsilon",!0);x(S,A,Ke,"","\\zeta",!0);x(S,A,Ke,"","\\eta",!0);x(S,A,Ke,"","\\theta",!0);x(S,A,Ke,"","\\iota",!0);x(S,A,Ke,"","\\kappa",!0);x(S,A,Ke,"","\\lambda",!0);x(S,A,Ke,"","\\mu",!0);x(S,A,Ke,"","\\nu",!0);x(S,A,Ke,"","\\xi",!0);x(S,A,Ke,"","\\omicron",!0);x(S,A,Ke,"","\\pi",!0);x(S,A,Ke,"","\\rho",!0);x(S,A,Ke,"","\\sigma",!0);x(S,A,Ke,"","\\tau",!0);x(S,A,Ke,"","\\upsilon",!0);x(S,A,Ke,"","\\phi",!0);x(S,A,Ke,"","\\chi",!0);x(S,A,Ke,"","\\psi",!0);x(S,A,Ke,"","\\omega",!0);x(S,A,Ke,"","\\varepsilon",!0);x(S,A,Ke,"","\\vartheta",!0);x(S,A,Ke,"","\\varpi",!0);x(S,A,Ke,"","\\varrho",!0);x(S,A,Ke,"","\\varsigma",!0);x(S,A,Ke,"","\\varphi",!0);x(S,A,Ie,"","*",!0);x(S,A,Ie,"+","+");x(S,A,Ie,"","-",!0);x(S,A,Ie,"","\\cdot",!0);x(S,A,Ie,"","\\circ",!0);x(S,A,Ie,"","\\div",!0);x(S,A,Ie,"","\\pm",!0);x(S,A,Ie,"","\\times",!0);x(S,A,Ie,"","\\cap",!0);x(S,A,Ie,"","\\cup",!0);x(S,A,Ie,"","\\setminus",!0);x(S,A,Ie,"","\\land");x(S,A,Ie,"","\\lor");x(S,A,Ie,"","\\wedge",!0);x(S,A,Ie,"","\\vee",!0);x(S,A,Y,"","\\surd");x(S,A,Ia,"","\\langle",!0);x(S,A,Ia,"","\\lvert");x(S,A,Ia,"","\\lVert");x(S,A,na,"?","?");x(S,A,na,"!","!");x(S,A,na,"","\\rangle",!0);x(S,A,na,"","\\rvert");x(S,A,na,"","\\rVert");x(S,A,U,"=","=");x(S,A,U,":",":");x(S,A,U,"","\\approx",!0);x(S,A,U,"","\\cong",!0);x(S,A,U,"","\\ge");x(S,A,U,"","\\geq",!0);x(S,A,U,"","\\gets");x(S,A,U,">","\\gt",!0);x(S,A,U,"","\\in",!0);x(S,A,U,"","\\@not");x(S,A,U,"","\\subset",!0);x(S,A,U,"","\\supset",!0);x(S,A,U,"","\\subseteq",!0);x(S,A,U,"","\\supseteq",!0);x(S,B,U,"","\\nsubseteq",!0);x(S,B,U,"","\\nsupseteq",!0);x(S,A,U,"","\\models");x(S,A,U,"","\\leftarrow",!0);x(S,A,U,"","\\le");x(S,A,U,"","\\leq",!0);x(S,A,U,"<","\\lt",!0);x(S,A,U,"","\\rightarrow",!0);x(S,A,U,"","\\to");x(S,B,U,"","\\ngeq",!0);x(S,B,U,"","\\nleq",!0);x(S,A,hi,"","\\ ");x(S,A,hi,"","\\space");x(S,A,hi,"","\\nobreakspace");x(Se,A,hi,"","\\ ");x(Se,A,hi,""," ");x(Se,A,hi,"","\\space");x(Se,A,hi,"","\\nobreakspace");x(S,A,hi,null,"\\nobreak");x(S,A,hi,null,"\\allowbreak");x(S,A,hd,",",",");x(S,A,hd,";",";");x(S,B,Ie,"","\\barwedge",!0);x(S,B,Ie,"","\\veebar",!0);x(S,A,Ie,"","\\odot",!0);x(S,A,Ie,"","\\oplus",!0);x(S,A,Ie,"","\\otimes",!0);x(S,A,Y,"","\\partial",!0);x(S,A,Ie,"","\\oslash",!0);x(S,B,Ie,"","\\circledcirc",!0);x(S,B,Ie,"","\\boxdot",!0);x(S,A,Ie,"","\\bigtriangleup");x(S,A,Ie,"","\\bigtriangledown");x(S,A,Ie,"","\\dagger");x(S,A,Ie,"","\\diamond");x(S,A,Ie,"","\\star");x(S,A,Ie,"","\\triangleleft");x(S,A,Ie,"","\\triangleright");x(S,A,Ia,"{","\\{");x(Se,A,Y,"{","\\{");x(Se,A,Y,"{","\\textbraceleft");x(S,A,na,"}","\\}");x(Se,A,Y,"}","\\}");x(Se,A,Y,"}","\\textbraceright");x(S,A,Ia,"{","\\lbrace");x(S,A,na,"}","\\rbrace");x(S,A,Ia,"[","\\lbrack",!0);x(Se,A,Y,"[","\\lbrack",!0);x(S,A,na,"]","\\rbrack",!0);x(Se,A,Y,"]","\\rbrack",!0);x(S,A,Ia,"(","\\lparen",!0);x(S,A,na,")","\\rparen",!0);x(Se,A,Y,"<","\\textless",!0);x(Se,A,Y,">","\\textgreater",!0);x(S,A,Ia,"","\\lfloor",!0);x(S,A,na,"","\\rfloor",!0);x(S,A,Ia,"","\\lceil",!0);x(S,A,na,"","\\rceil",!0);x(S,A,Y,"\\","\\backslash");x(S,A,Y,"","|");x(S,A,Y,"","\\vert");x(Se,A,Y,"|","\\textbar",!0);x(S,A,Y,"","\\|");x(S,A,Y,"","\\Vert");x(Se,A,Y,"","\\textbardbl");x(Se,A,Y,"~","\\textasciitilde");x(Se,A,Y,"\\","\\textbackslash");x(Se,A,Y,"^","\\textasciicircum");x(S,A,U,"","\\uparrow",!0);x(S,A,U,"","\\Uparrow",!0);x(S,A,U,"","\\downarrow",!0);x(S,A,U,"","\\Downarrow",!0);x(S,A,U,"","\\updownarrow",!0);x(S,A,U,"","\\Updownarrow",!0);x(S,A,Tr,"","\\coprod");x(S,A,Tr,"","\\bigvee");x(S,A,Tr,"","\\bigwedge");x(S,A,Tr,"","\\biguplus");x(S,A,Tr,"","\\bigcap");x(S,A,Tr,"","\\bigcup");x(S,A,Tr,"","\\int");x(S,A,Tr,"","\\intop");x(S,A,Tr,"","\\iint");x(S,A,Tr,"","\\iiint");x(S,A,Tr,"","\\prod");x(S,A,Tr,"","\\sum");x(S,A,Tr,"","\\bigotimes");x(S,A,Tr,"","\\bigoplus");x(S,A,Tr,"","\\bigodot");x(S,A,Tr,"","\\oint");x(S,A,Tr,"","\\oiint");x(S,A,Tr,"","\\oiiint");x(S,A,Tr,"","\\bigsqcup");x(S,A,Tr,"","\\smallint");x(Se,A,Qo,"","\\textellipsis");x(S,A,Qo,"","\\mathellipsis");x(Se,A,Qo,"","\\ldots",!0);x(S,A,Qo,"","\\ldots",!0);x(S,A,Qo,"","\\@cdots",!0);x(S,A,Qo,"","\\ddots",!0);x(S,A,Y,"","\\varvdots");x(Se,A,Y,"","\\varvdots");x(S,A,tr,"","\\acute");x(S,A,tr,"","\\grave");x(S,A,tr,"","\\ddot");x(S,A,tr,"~","\\tilde");x(S,A,tr,"","\\bar");x(S,A,tr,"","\\breve");x(S,A,tr,"","\\check");x(S,A,tr,"^","\\hat");x(S,A,tr,"","\\vec");x(S,A,tr,"","\\dot");x(S,A,tr,"","\\mathring");x(S,A,Ke,"","\\@imath");x(S,A,Ke,"","\\@jmath");x(S,A,Y,"","");x(S,A,Y,"","");x(Se,A,Y,"","\\i",!0);x(Se,A,Y,"","\\j",!0);x(Se,A,Y,"","\\ss",!0);x(Se,A,Y,"","\\ae",!0);x(Se,A,Y,"","\\oe",!0);x(Se,A,Y,"","\\o",!0);x(Se,A,Y,"","\\AE",!0);x(Se,A,Y,"","\\OE",!0);x(Se,A,Y,"","\\O",!0);x(Se,A,tr,"","\\'");x(Se,A,tr,"","\\`");x(Se,A,tr,"","\\^");x(Se,A,tr,"","\\~");x(Se,A,tr,"","\\=");x(Se,A,tr,"","\\u");x(Se,A,tr,"","\\.");x(Se,A,tr,"","\\c");x(Se,A,tr,"","\\r");x(Se,A,tr,"","\\v");x(Se,A,tr,"",'\\"');x(Se,A,tr,"","\\H");x(Se,A,tr,"","\\textcircled");var m6={"--":!0,"---":!0,"``":!0,"''":!0};x(Se,A,Y,"","--",!0);x(Se,A,Y,"","\\textendash");x(Se,A,Y,"","---",!0);x(Se,A,Y,"","\\textemdash");x(Se,A,Y,"","`",!0);x(Se,A,Y,"","\\textquoteleft");x(Se,A,Y,"","'",!0);x(Se,A,Y,"","\\textquoteright");x(Se,A,Y,"","``",!0);x(Se,A,Y,"","\\textquotedblleft");x(Se,A,Y,"","''",!0);x(Se,A,Y,"","\\textquotedblright");x(S,A,Y,"","\\degree",!0);x(Se,A,Y,"","\\degree");x(Se,A,Y,"","\\textdegree",!0);x(S,A,Y,"","\\pounds");x(S,A,Y,"","\\mathsterling",!0);x(Se,A,Y,"","\\pounds");x(Se,A,Y,"","\\textsterling",!0);x(S,B,Y,"","\\maltese");x(Se,B,Y,"","\\maltese");var Ny='0123456789/@."';for(var Jh=0;Jh<Ny.length;Jh++){var Cy=Ny.charAt(Jh);x(S,A,Y,Cy,Cy)}var Oy='0123456789!@*()-=+";:?/.,';for(var Wh=0;Wh<Oy.length;Wh++){var Ry=Oy.charAt(Wh);x(Se,A,Y,Ry,Ry)}var Dc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var Qh=0;Qh<Dc.length;Qh++){var nc=Dc.charAt(Qh);x(S,A,Ke,nc,nc),x(Se,A,Y,nc,nc)}x(S,B,Y,"C","");x(Se,B,Y,"C","");x(S,B,Y,"H","");x(Se,B,Y,"H","");x(S,B,Y,"N","");x(Se,B,Y,"N","");x(S,B,Y,"P","");x(Se,B,Y,"P","");x(S,B,Y,"Q","");x(Se,B,Y,"Q","");x(S,B,Y,"R","");x(Se,B,Y,"R","");x(S,B,Y,"Z","");x(Se,B,Y,"Z","");x(S,A,Ke,"h","");x(Se,A,Ke,"h","");var et="";for(var Wr=0;Wr<Dc.length;Wr++){var fr=Dc.charAt(Wr);et=String.fromCharCode(55349,56320+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56372+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56424+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56580+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56684+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56736+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56788+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56840+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56944+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),Wr<26&&(et=String.fromCharCode(55349,56632+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et),et=String.fromCharCode(55349,56476+Wr),x(S,A,Ke,fr,et),x(Se,A,Y,fr,et))}et="";x(S,A,Ke,"k",et);x(Se,A,Y,"k",et);for(var As=0;As<10;As++){var qi=As.toString();et=String.fromCharCode(55349,57294+As),x(S,A,Ke,qi,et),x(Se,A,Y,qi,et),et=String.fromCharCode(55349,57314+As),x(S,A,Ke,qi,et),x(Se,A,Y,qi,et),et=String.fromCharCode(55349,57324+As),x(S,A,Ke,qi,et),x(Se,A,Y,qi,et),et=String.fromCharCode(55349,57334+As),x(S,A,Ke,qi,et),x(Se,A,Y,qi,et)}var Gm="";for(var em=0;em<Gm.length;em++){var ic=Gm.charAt(em);x(S,A,Ke,ic,ic),x(Se,A,Y,ic,ic)}var sc=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],Iy=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],j_=function(t,r){var a=t.charCodeAt(0),s=t.charCodeAt(1),o=(a-55296)*1024+(s-56320)+65536,u=r==="math"?0:1;if(119808<=o&&o<120484){var c=Math.floor((o-119808)/26);return[sc[c][2],sc[c][u]]}else if(120782<=o&&o<=120831){var f=Math.floor((o-120782)/10);return[Iy[f][2],Iy[f][u]]}else{if(o===120485||o===120486)return[sc[0][2],sc[0][u]];if(120486<o&&o<120782)return["",""];throw new ke("Unsupported character: "+t)}},md=function(t,r,a){return Ut[a][t]&&Ut[a][t].replace&&(t=Ut[a][t].replace),{value:t,metrics:Rp(t,r,a)}},dn=function(t,r,a,s,o){var u=md(t,r,a),c=u.metrics;t=u.value;var f;if(c){var h=c.italic;(a==="text"||s&&s.font==="mathit")&&(h=0),f=new Wa(t,c.height,c.depth,h,c.skew,c.width,o)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+t+"' in style '"+r+"' and mode '"+a+"'")),f=new Wa(t,0,0,0,0,0,o);if(s){f.maxFontSize=s.sizeMultiplier,s.style.isTight()&&f.classes.push("mtight");var p=s.getColor();p&&(f.style.color=p)}return f},$_=function(t,r,a,s){return s===void 0&&(s=[]),a.font==="boldsymbol"&&md(t,"Main-Bold",r).metrics?dn(t,"Main-Bold",r,a,s.concat(["mathbf"])):t==="\\"||Ut[r][t].font==="main"?dn(t,"Main-Regular",r,a,s):dn(t,"AMS-Regular",r,a,s.concat(["amsrm"]))},B_=function(t,r,a,s,o){return o!=="textord"&&md(t,"Math-BoldItalic",r).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},L_=function(t,r,a){var s=t.mode,o=t.text,u=["mord"],c=s==="math"||s==="text"&&r.font,f=c?r.font:r.fontFamily,h="",p="";if(o.charCodeAt(0)===55349&&([h,p]=j_(o,s)),h.length>0)return dn(o,h,s,r,u.concat(p));if(f){var v,b;if(f==="boldsymbol"){var y=B_(o,s,r,u,a);v=y.fontName,b=[y.fontClass]}else c?(v=v6[f].fontName,b=[f]):(v=oc(f,r.fontWeight,r.fontShape),b=[f,r.fontWeight,r.fontShape]);if(md(o,v,s).metrics)return dn(o,v,s,r,u.concat(b));if(m6.hasOwnProperty(o)&&v.slice(0,10)==="Typewriter"){for(var k=[],_=0;_<o.length;_++)k.push(dn(o[_],v,s,r,u.concat(b)));return g6(k)}}if(a==="mathord")return dn(o,"Math-Italic",s,r,u.concat(["mathnormal"]));if(a==="textord"){var T=Ut[s][o]&&Ut[s][o].font;if(T==="ams"){var R=oc("amsrm",r.fontWeight,r.fontShape);return dn(o,R,s,r,u.concat("amsrm",r.fontWeight,r.fontShape))}else if(T==="main"||!T){var O=oc("textrm",r.fontWeight,r.fontShape);return dn(o,O,s,r,u.concat(r.fontWeight,r.fontShape))}else{var M=oc(T,r.fontWeight,r.fontShape);return dn(o,M,s,r,u.concat(M,r.fontWeight,r.fontShape))}}else throw new Error("unexpected type: "+a+" in makeOrd")},U_=(e,t)=>{if(Ki(e.classes)!==Ki(t.classes)||e.skew!==t.skew||e.maxFontSize!==t.maxFontSize)return!1;if(e.classes.length===1){var r=e.classes[0];if(r==="mbin"||r==="mord")return!1}for(var a in e.style)if(e.style.hasOwnProperty(a)&&e.style[a]!==t.style[a])return!1;for(var s in t.style)if(t.style.hasOwnProperty(s)&&e.style[s]!==t.style[s])return!1;return!0},q_=e=>{for(var t=0;t<e.length-1;t++){var r=e[t],a=e[t+1];r instanceof Wa&&a instanceof Wa&&U_(r,a)&&(r.text+=a.text,r.height=Math.max(r.height,a.height),r.depth=Math.max(r.depth,a.depth),r.italic=a.italic,e.splice(t+1,1),t--)}return e},Dp=function(t){for(var r=0,a=0,s=0,o=0;o<t.children.length;o++){var u=t.children[o];u.height>r&&(r=u.height),u.depth>a&&(a=u.depth),u.maxFontSize>s&&(s=u.maxFontSize)}t.height=r,t.depth=a,t.maxFontSize=s},fa=function(t,r,a,s){var o=new Iu(t,r,a,s);return Dp(o),o},p6=(e,t,r,a)=>new Iu(e,t,r,a),P_=function(t,r,a){var s=fa([t],[],r);return s.height=Math.max(a||r.fontMetrics().defaultRuleThickness,r.minRuleThickness),s.style.borderBottomWidth=Ne(s.height),s.maxFontSize=1,s},H_=function(t,r,a,s){var o=new Ip(t,r,a,s);return Dp(o),o},g6=function(t){var r=new Ru(t);return Dp(r),r},Z_=function(t,r){return t instanceof Ru?fa([],[t],r):t},G_=function(t){if(t.positionType==="individualShift"){for(var r=t.children,a=[r[0]],s=-r[0].shift-r[0].elem.depth,o=s,u=1;u<r.length;u++){var c=-r[u].shift-o-r[u].elem.depth,f=c-(r[u-1].elem.height+r[u-1].elem.depth);o=o+c,a.push({type:"kern",size:f}),a.push(r[u])}return{children:a,depth:s}}var h;if(t.positionType==="top"){for(var p=t.positionData,v=0;v<t.children.length;v++){var b=t.children[v];p-=b.type==="kern"?b.size:b.elem.height+b.elem.depth}h=p}else if(t.positionType==="bottom")h=-t.positionData;else{var y=t.children[0];if(y.type!=="elem")throw new Error('First child must have type "elem".');if(t.positionType==="shift")h=-y.elem.depth-t.positionData;else if(t.positionType==="firstBaseline")h=-y.elem.depth;else throw new Error("Invalid positionType "+t.positionType+".")}return{children:t.children,depth:h}},V_=function(t,r){for(var{children:a,depth:s}=G_(t),o=0,u=0;u<a.length;u++){var c=a[u];if(c.type==="elem"){var f=c.elem;o=Math.max(o,f.maxFontSize,f.height)}}o+=2;var h=fa(["pstrut"],[]);h.style.height=Ne(o);for(var p=[],v=s,b=s,y=s,k=0;k<a.length;k++){var _=a[k];if(_.type==="kern")y+=_.size;else{var T=_.elem,R=_.wrapperClasses||[],O=_.wrapperStyle||{},M=fa(R,[h,T],void 0,O);M.style.top=Ne(-o-y-T.depth),_.marginLeft&&(M.style.marginLeft=_.marginLeft),_.marginRight&&(M.style.marginRight=_.marginRight),p.push(M),y+=T.height+T.depth}v=Math.min(v,y),b=Math.max(b,y)}var j=fa(["vlist"],p);j.style.height=Ne(b);var I;if(v<0){var $=fa([],[]),E=fa(["vlist"],[$]);E.style.height=Ne(-v);var D=fa(["vlist-s"],[new Wa("")]);I=[fa(["vlist-r"],[j,D]),fa(["vlist-r"],[E])]}else I=[fa(["vlist-r"],[j])];var V=fa(["vlist-t"],I);return I.length===2&&V.classes.push("vlist-t2"),V.height=b,V.depth=-v,V},F_=(e,t)=>{var r=fa(["mspace"],[],t),a=sr(e,t);return r.style.marginRight=Ne(a),r},oc=function(t,r,a){var s="";switch(t){case"amsrm":s="AMS";break;case"textrm":s="Main";break;case"textsf":s="SansSerif";break;case"texttt":s="Typewriter";break;default:s=t}var o;return r==="textbf"&&a==="textit"?o="BoldItalic":r==="textbf"?o="Bold":r==="textit"?o="Italic":o="Regular",s+"-"+o},v6={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathsfit:{variant:"sans-serif-italic",fontName:"SansSerif-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},y6={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},Y_=function(t,r){var[a,s,o]=y6[t],u=new Ji(a),c=new oi([u],{width:Ne(s),height:Ne(o),style:"width:"+Ne(s),viewBox:"0 0 "+1e3*s+" "+1e3*o,preserveAspectRatio:"xMinYMin"}),f=p6(["overlay"],[c],r);return f.height=o,f.style.height=Ne(o),f.style.width=Ne(s),f},se={fontMap:v6,makeSymbol:dn,mathsym:$_,makeSpan:fa,makeSvgSpan:p6,makeLineSpan:P_,makeAnchor:H_,makeFragment:g6,wrapFragment:Z_,makeVList:V_,makeOrd:L_,makeGlue:F_,staticSvg:Y_,svgData:y6,tryCombineChars:q_},ir={number:3,unit:"mu"},Es={number:4,unit:"mu"},Qn={number:5,unit:"mu"},X_={mord:{mop:ir,mbin:Es,mrel:Qn,minner:ir},mop:{mord:ir,mop:ir,mrel:Qn,minner:ir},mbin:{mord:Es,mop:Es,mopen:Es,minner:Es},mrel:{mord:Qn,mop:Qn,mopen:Qn,minner:Qn},mopen:{},mclose:{mop:ir,mbin:Es,mrel:Qn,minner:ir},mpunct:{mord:ir,mop:ir,mrel:Qn,mopen:ir,mclose:ir,mpunct:ir,minner:ir},minner:{mord:ir,mop:ir,mbin:Es,mrel:Qn,mopen:ir,mpunct:ir,minner:ir}},K_={mord:{mop:ir},mop:{mord:ir,mop:ir},mbin:{},mrel:{},mopen:{},mclose:{mop:ir},mpunct:{},minner:{mop:ir}},b6={},jc={},$c={};function Oe(e){for(var{type:t,names:r,props:a,handler:s,htmlBuilder:o,mathmlBuilder:u}=e,c={type:t,numArgs:a.numArgs,argTypes:a.argTypes,allowedInArgument:!!a.allowedInArgument,allowedInText:!!a.allowedInText,allowedInMath:a.allowedInMath===void 0?!0:a.allowedInMath,numOptionalArgs:a.numOptionalArgs||0,infix:!!a.infix,primitive:!!a.primitive,handler:s},f=0;f<r.length;++f)b6[r[f]]=c;t&&(o&&(jc[t]=o),u&&($c[t]=u))}function Zs(e){var{type:t,htmlBuilder:r,mathmlBuilder:a}=e;Oe({type:t,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:r,mathmlBuilder:a})}var Bc=function(t){return t.type==="ordgroup"&&t.body.length===1?t.body[0]:t},xr=function(t){return t.type==="ordgroup"?t.body:[t]},li=se.makeSpan,J_=["leftmost","mbin","mopen","mrel","mop","mpunct"],W_=["rightmost","mrel","mclose","mpunct"],Q_={display:Je.DISPLAY,text:Je.TEXT,script:Je.SCRIPT,scriptscript:Je.SCRIPTSCRIPT},ez={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},Dr=function(t,r,a,s){s===void 0&&(s=[null,null]);for(var o=[],u=0;u<t.length;u++){var c=zt(t[u],r);if(c instanceof Ru){var f=c.children;o.push(...f)}else o.push(c)}if(se.tryCombineChars(o),!a)return o;var h=r;if(t.length===1){var p=t[0];p.type==="sizing"?h=r.havingSize(p.size):p.type==="styling"&&(h=r.havingStyle(Q_[p.style]))}var v=li([s[0]||"leftmost"],[],r),b=li([s[1]||"rightmost"],[],r),y=a==="root";return Dy(o,(k,_)=>{var T=_.classes[0],R=k.classes[0];T==="mbin"&&Fe.contains(W_,R)?_.classes[0]="mord":R==="mbin"&&Fe.contains(J_,T)&&(k.classes[0]="mord")},{node:v},b,y),Dy(o,(k,_)=>{var T=Vm(_),R=Vm(k),O=T&&R?k.hasClass("mtight")?K_[T][R]:X_[T][R]:null;if(O)return se.makeGlue(O,h)},{node:v},b,y),o},Dy=function e(t,r,a,s,o){s&&t.push(s);for(var u=0;u<t.length;u++){var c=t[u],f=x6(c);if(f){e(f.children,r,a,null,o);continue}var h=!c.hasClass("mspace");if(h){var p=r(c,a.node);p&&(a.insertAfter?a.insertAfter(p):(t.unshift(p),u++))}h?a.node=c:o&&c.hasClass("newline")&&(a.node=li(["leftmost"])),a.insertAfter=(v=>b=>{t.splice(v+1,0,b),u++})(u)}s&&t.pop()},x6=function(t){return t instanceof Ru||t instanceof Ip||t instanceof Iu&&t.hasClass("enclosing")?t:null},tz=function e(t,r){var a=x6(t);if(a){var s=a.children;if(s.length){if(r==="right")return e(s[s.length-1],"right");if(r==="left")return e(s[0],"left")}}return t},Vm=function(t,r){return t?(r&&(t=tz(t,r)),ez[t.classes[0]]||null):null},bu=function(t,r){var a=["nulldelimiter"].concat(t.baseSizingClasses());return li(r.concat(a))},zt=function(t,r,a){if(!t)return li();if(jc[t.type]){var s=jc[t.type](t,r);if(a&&r.size!==a.size){s=li(r.sizingClasses(a),[s],r);var o=r.sizeMultiplier/a.sizeMultiplier;s.height*=o,s.depth*=o}return s}else throw new ke("Got group of unknown type: '"+t.type+"'")};function lc(e,t){var r=li(["base"],e,t),a=li(["strut"]);return a.style.height=Ne(r.height+r.depth),r.depth&&(a.style.verticalAlign=Ne(-r.depth)),r.children.unshift(a),r}function Fm(e,t){var r=null;e.length===1&&e[0].type==="tag"&&(r=e[0].tag,e=e[0].body);var a=Dr(e,t,"root"),s;a.length===2&&a[1].hasClass("tag")&&(s=a.pop());for(var o=[],u=[],c=0;c<a.length;c++)if(u.push(a[c]),a[c].hasClass("mbin")||a[c].hasClass("mrel")||a[c].hasClass("allowbreak")){for(var f=!1;c<a.length-1&&a[c+1].hasClass("mspace")&&!a[c+1].hasClass("newline");)c++,u.push(a[c]),a[c].hasClass("nobreak")&&(f=!0);f||(o.push(lc(u,t)),u=[])}else a[c].hasClass("newline")&&(u.pop(),u.length>0&&(o.push(lc(u,t)),u=[]),o.push(a[c]));u.length>0&&o.push(lc(u,t));var h;r?(h=lc(Dr(r,t,!0)),h.classes=["tag"],o.push(h)):s&&o.push(s);var p=li(["katex-html"],o);if(p.setAttribute("aria-hidden","true"),h){var v=h.children[0];v.style.height=Ne(p.height+p.depth),p.depth&&(v.style.verticalAlign=Ne(-p.depth))}return p}function w6(e){return new Ru(e)}class Ca{constructor(t,r,a){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=t,this.attributes={},this.children=r||[],this.classes=a||[]}setAttribute(t,r){this.attributes[t]=r}getAttribute(t){return this.attributes[t]}toNode(){var t=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&t.setAttribute(r,this.attributes[r]);this.classes.length>0&&(t.className=Ki(this.classes));for(var a=0;a<this.children.length;a++)if(this.children[a]instanceof An&&this.children[a+1]instanceof An){for(var s=this.children[a].toText()+this.children[++a].toText();this.children[a+1]instanceof An;)s+=this.children[++a].toText();t.appendChild(new An(s).toNode())}else t.appendChild(this.children[a].toNode());return t}toMarkup(){var t="<"+this.type;for(var r in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,r)&&(t+=" "+r+'="',t+=Fe.escape(this.attributes[r]),t+='"');this.classes.length>0&&(t+=' class ="'+Fe.escape(Ki(this.classes))+'"'),t+=">";for(var a=0;a<this.children.length;a++)t+=this.children[a].toMarkup();return t+="</"+this.type+">",t}toText(){return this.children.map(t=>t.toText()).join("")}}class An{constructor(t){this.text=void 0,this.text=t}toNode(){return document.createTextNode(this.text)}toMarkup(){return Fe.escape(this.toText())}toText(){return this.text}}class rz{constructor(t){this.width=void 0,this.character=void 0,this.width=t,t>=.05555&&t<=.05556?this.character="":t>=.1666&&t<=.1667?this.character="":t>=.2222&&t<=.2223?this.character="":t>=.2777&&t<=.2778?this.character="":t>=-.05556&&t<=-.05555?this.character="":t>=-.1667&&t<=-.1666?this.character="":t>=-.2223&&t<=-.2222?this.character="":t>=-.2778&&t<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var t=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return t.setAttribute("width",Ne(this.width)),t}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+Ne(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var ze={MathNode:Ca,TextNode:An,SpaceNode:rz,newDocumentFragment:w6},Qa=function(t,r,a){return Ut[r][t]&&Ut[r][t].replace&&t.charCodeAt(0)!==55349&&!(m6.hasOwnProperty(t)&&a&&(a.fontFamily&&a.fontFamily.slice(4,6)==="tt"||a.font&&a.font.slice(4,6)==="tt"))&&(t=Ut[r][t].replace),new ze.TextNode(t)},jp=function(t){return t.length===1?t[0]:new ze.MathNode("mrow",t)},$p=function(t,r){if(r.fontFamily==="texttt")return"monospace";if(r.fontFamily==="textsf")return r.fontShape==="textit"&&r.fontWeight==="textbf"?"sans-serif-bold-italic":r.fontShape==="textit"?"sans-serif-italic":r.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(r.fontShape==="textit"&&r.fontWeight==="textbf")return"bold-italic";if(r.fontShape==="textit")return"italic";if(r.fontWeight==="textbf")return"bold";var a=r.font;if(!a||a==="mathnormal")return null;var s=t.mode;if(a==="mathit")return"italic";if(a==="boldsymbol")return t.type==="textord"?"bold":"bold-italic";if(a==="mathbf")return"bold";if(a==="mathbb")return"double-struck";if(a==="mathsfit")return"sans-serif-italic";if(a==="mathfrak")return"fraktur";if(a==="mathscr"||a==="mathcal")return"script";if(a==="mathsf")return"sans-serif";if(a==="mathtt")return"monospace";var o=t.text;if(Fe.contains(["\\imath","\\jmath"],o))return null;Ut[s][o]&&Ut[s][o].replace&&(o=Ut[s][o].replace);var u=se.fontMap[a].fontName;return Rp(o,u,s)?se.fontMap[a].variant:null};function tm(e){if(!e)return!1;if(e.type==="mi"&&e.children.length===1){var t=e.children[0];return t instanceof An&&t.text==="."}else if(e.type==="mo"&&e.children.length===1&&e.getAttribute("separator")==="true"&&e.getAttribute("lspace")==="0em"&&e.getAttribute("rspace")==="0em"){var r=e.children[0];return r instanceof An&&r.text===","}else return!1}var pa=function(t,r,a){if(t.length===1){var s=Bt(t[0],r);return a&&s instanceof Ca&&s.type==="mo"&&(s.setAttribute("lspace","0em"),s.setAttribute("rspace","0em")),[s]}for(var o=[],u,c=0;c<t.length;c++){var f=Bt(t[c],r);if(f instanceof Ca&&u instanceof Ca){if(f.type==="mtext"&&u.type==="mtext"&&f.getAttribute("mathvariant")===u.getAttribute("mathvariant")){u.children.push(...f.children);continue}else if(f.type==="mn"&&u.type==="mn"){u.children.push(...f.children);continue}else if(tm(f)&&u.type==="mn"){u.children.push(...f.children);continue}else if(f.type==="mn"&&tm(u))f.children=[...u.children,...f.children],o.pop();else if((f.type==="msup"||f.type==="msub")&&f.children.length>=1&&(u.type==="mn"||tm(u))){var h=f.children[0];h instanceof Ca&&h.type==="mn"&&(h.children=[...u.children,...h.children],o.pop())}else if(u.type==="mi"&&u.children.length===1){var p=u.children[0];if(p instanceof An&&p.text===""&&(f.type==="mo"||f.type==="mi"||f.type==="mn")){var v=f.children[0];v instanceof An&&v.text.length>0&&(v.text=v.text.slice(0,1)+""+v.text.slice(1),o.pop())}}}o.push(f),u=f}return o},Wi=function(t,r,a){return jp(pa(t,r,a))},Bt=function(t,r){if(!t)return new ze.MathNode("mrow");if($c[t.type]){var a=$c[t.type](t,r);return a}else throw new ke("Got group of unknown type: '"+t.type+"'")};function jy(e,t,r,a,s){var o=pa(e,r),u;o.length===1&&o[0]instanceof Ca&&Fe.contains(["mrow","mtable"],o[0].type)?u=o[0]:u=new ze.MathNode("mrow",o);var c=new ze.MathNode("annotation",[new ze.TextNode(t)]);c.setAttribute("encoding","application/x-tex");var f=new ze.MathNode("semantics",[u,c]),h=new ze.MathNode("math",[f]);h.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),a&&h.setAttribute("display","block");var p=s?"katex":"katex-mathml";return se.makeSpan([p],[h])}var S6=function(t){return new ri({style:t.displayMode?Je.DISPLAY:Je.TEXT,maxSize:t.maxSize,minRuleThickness:t.minRuleThickness})},_6=function(t,r){if(r.displayMode){var a=["katex-display"];r.leqno&&a.push("leqno"),r.fleqn&&a.push("fleqn"),t=se.makeSpan(a,[t])}return t},az=function(t,r,a){var s=S6(a),o;if(a.output==="mathml")return jy(t,r,s,a.displayMode,!0);if(a.output==="html"){var u=Fm(t,s);o=se.makeSpan(["katex"],[u])}else{var c=jy(t,r,s,a.displayMode,!1),f=Fm(t,s);o=se.makeSpan(["katex"],[c,f])}return _6(o,a)},nz=function(t,r,a){var s=S6(a),o=Fm(t,s),u=se.makeSpan(["katex"],[o]);return _6(u,a)},iz={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},sz=function(t){var r=new ze.MathNode("mo",[new ze.TextNode(iz[t.replace(/^\\/,"")])]);return r.setAttribute("stretchy","true"),r},oz={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},lz=function(t){return t.type==="ordgroup"?t.body.length:1},uz=function(t,r){function a(){var c=4e5,f=t.label.slice(1);if(Fe.contains(["widehat","widecheck","widetilde","utilde"],f)){var h=t,p=lz(h.base),v,b,y;if(p>5)f==="widehat"||f==="widecheck"?(v=420,c=2364,y=.42,b=f+"4"):(v=312,c=2340,y=.34,b="tilde4");else{var k=[1,1,2,2,3,3][p];f==="widehat"||f==="widecheck"?(c=[0,1062,2364,2364,2364][k],v=[0,239,300,360,420][k],y=[0,.24,.3,.3,.36,.42][k],b=f+k):(c=[0,600,1033,2339,2340][k],v=[0,260,286,306,312][k],y=[0,.26,.286,.3,.306,.34][k],b="tilde"+k)}var _=new Ji(b),T=new oi([_],{width:"100%",height:Ne(y),viewBox:"0 0 "+c+" "+v,preserveAspectRatio:"none"});return{span:se.makeSvgSpan([],[T],r),minWidth:0,height:y}}else{var R=[],O=oz[f],[M,j,I]=O,$=I/1e3,E=M.length,D,V;if(E===1){var de=O[3];D=["hide-tail"],V=[de]}else if(E===2)D=["halfarrow-left","halfarrow-right"],V=["xMinYMin","xMaxYMin"];else if(E===3)D=["brace-left","brace-center","brace-right"],V=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+E+" children.");for(var Q=0;Q<E;Q++){var G=new Ji(M[Q]),X=new oi([G],{width:"400em",height:Ne($),viewBox:"0 0 "+c+" "+I,preserveAspectRatio:V[Q]+" slice"}),K=se.makeSvgSpan([D[Q]],[X],r);if(E===1)return{span:K,minWidth:j,height:$};K.style.height=Ne($),R.push(K)}return{span:se.makeSpan(["stretchy"],R,r),minWidth:j,height:$}}}var{span:s,minWidth:o,height:u}=a();return s.height=u,s.style.height=Ne(u),o>0&&(s.style.minWidth=Ne(o)),s},cz=function(t,r,a,s,o){var u,c=t.height+t.depth+a+s;if(/fbox|color|angl/.test(r)){if(u=se.makeSpan(["stretchy",r],[],o),r==="fbox"){var f=o.color&&o.getColor();f&&(u.style.borderColor=f)}}else{var h=[];/^[bx]cancel$/.test(r)&&h.push(new Zm({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(r)&&h.push(new Zm({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var p=new oi(h,{width:"100%",height:Ne(c)});u=se.makeSvgSpan([],[p],o)}return u.height=c,u.style.height=Ne(c),u},ui={encloseSpan:cz,mathMLnode:sz,svgSpan:uz};function ut(e,t){if(!e||e.type!==t)throw new Error("Expected node of type "+t+", but got "+(e?"node of type "+e.type:String(e)));return e}function Bp(e){var t=pd(e);if(!t)throw new Error("Expected node of symbol group type, but got "+(e?"node of type "+e.type:String(e)));return t}function pd(e){return e&&(e.type==="atom"||D_.hasOwnProperty(e.type))?e:null}var Lp=(e,t)=>{var r,a,s;e&&e.type==="supsub"?(a=ut(e.base,"accent"),r=a.base,e.base=r,s=R_(zt(e,t)),e.base=a):(a=ut(e,"accent"),r=a.base);var o=zt(r,t.havingCrampedStyle()),u=a.isShifty&&Fe.isCharacterBox(r),c=0;if(u){var f=Fe.getBaseElem(r),h=zt(f,t.havingCrampedStyle());c=My(h).skew}var p=a.label==="\\c",v=p?o.height+o.depth:Math.min(o.height,t.fontMetrics().xHeight),b;if(a.isStretchy)b=ui.svgSpan(a,t),b=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"elem",elem:b,wrapperClasses:["svg-align"],wrapperStyle:c>0?{width:"calc(100% - "+Ne(2*c)+")",marginLeft:Ne(2*c)}:void 0}]},t);else{var y,k;a.label==="\\vec"?(y=se.staticSvg("vec",t),k=se.svgData.vec[1]):(y=se.makeOrd({mode:a.mode,text:a.label},t,"textord"),y=My(y),y.italic=0,k=y.width,p&&(v+=y.depth)),b=se.makeSpan(["accent-body"],[y]);var _=a.label==="\\textcircled";_&&(b.classes.push("accent-full"),v=o.height);var T=c;_||(T-=k/2),b.style.left=Ne(T),a.label==="\\textcircled"&&(b.style.top=".2em"),b=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:-v},{type:"elem",elem:b}]},t)}var R=se.makeSpan(["mord","accent"],[b],t);return s?(s.children[0]=R,s.height=Math.max(R.height,s.height),s.classes[0]="mord",s):R},z6=(e,t)=>{var r=e.isStretchy?ui.mathMLnode(e.label):new ze.MathNode("mo",[Qa(e.label,e.mode)]),a=new ze.MathNode("mover",[Bt(e.base,t),r]);return a.setAttribute("accent","true"),a},dz=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(e=>"\\"+e).join("|"));Oe({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(e,t)=>{var r=Bc(t[0]),a=!dz.test(e.funcName),s=!a||e.funcName==="\\widehat"||e.funcName==="\\widetilde"||e.funcName==="\\widecheck";return{type:"accent",mode:e.parser.mode,label:e.funcName,isStretchy:a,isShifty:s,base:r}},htmlBuilder:Lp,mathmlBuilder:z6});Oe({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(e,t)=>{var r=t[0],a=e.parser.mode;return a==="math"&&(e.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+e.funcName+" works only in text mode"),a="text"),{type:"accent",mode:a,label:e.funcName,isStretchy:!1,isShifty:!0,base:r}},htmlBuilder:Lp,mathmlBuilder:z6});Oe({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=t[0];return{type:"accentUnder",mode:r.mode,label:a,base:s}},htmlBuilder:(e,t)=>{var r=zt(e.base,t),a=ui.svgSpan(e,t),s=e.label==="\\utilde"?.12:0,o=se.makeVList({positionType:"top",positionData:r.height,children:[{type:"elem",elem:a,wrapperClasses:["svg-align"]},{type:"kern",size:s},{type:"elem",elem:r}]},t);return se.makeSpan(["mord","accentunder"],[o],t)},mathmlBuilder:(e,t)=>{var r=ui.mathMLnode(e.label),a=new ze.MathNode("munder",[Bt(e.base,t),r]);return a.setAttribute("accentunder","true"),a}});var uc=e=>{var t=new ze.MathNode("mpadded",e?[e]:[]);return t.setAttribute("width","+0.6em"),t.setAttribute("lspace","0.3em"),t};Oe({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:a,funcName:s}=e;return{type:"xArrow",mode:a.mode,label:s,body:t[0],below:r[0]}},htmlBuilder(e,t){var r=t.style,a=t.havingStyle(r.sup()),s=se.wrapFragment(zt(e.body,a,t),t),o=e.label.slice(0,2)==="\\x"?"x":"cd";s.classes.push(o+"-arrow-pad");var u;e.below&&(a=t.havingStyle(r.sub()),u=se.wrapFragment(zt(e.below,a,t),t),u.classes.push(o+"-arrow-pad"));var c=ui.svgSpan(e,t),f=-t.fontMetrics().axisHeight+.5*c.height,h=-t.fontMetrics().axisHeight-.5*c.height-.111;(s.depth>.25||e.label==="\\xleftequilibrium")&&(h-=s.depth);var p;if(u){var v=-t.fontMetrics().axisHeight+u.height+.5*c.height+.111;p=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:h},{type:"elem",elem:c,shift:f},{type:"elem",elem:u,shift:v}]},t)}else p=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:s,shift:h},{type:"elem",elem:c,shift:f}]},t);return p.children[0].children[0].children[1].classes.push("svg-align"),se.makeSpan(["mrel","x-arrow"],[p],t)},mathmlBuilder(e,t){var r=ui.mathMLnode(e.label);r.setAttribute("minsize",e.label.charAt(0)==="x"?"1.75em":"3.0em");var a;if(e.body){var s=uc(Bt(e.body,t));if(e.below){var o=uc(Bt(e.below,t));a=new ze.MathNode("munderover",[r,o,s])}else a=new ze.MathNode("mover",[r,s])}else if(e.below){var u=uc(Bt(e.below,t));a=new ze.MathNode("munder",[r,u])}else a=uc(),a=new ze.MathNode("mover",[r,a]);return a}});var fz=se.makeSpan;function k6(e,t){var r=Dr(e.body,t,!0);return fz([e.mclass],r,t)}function T6(e,t){var r,a=pa(e.body,t);return e.mclass==="minner"?r=new ze.MathNode("mpadded",a):e.mclass==="mord"?e.isCharacterBox?(r=a[0],r.type="mi"):r=new ze.MathNode("mi",a):(e.isCharacterBox?(r=a[0],r.type="mo"):r=new ze.MathNode("mo",a),e.mclass==="mbin"?(r.attributes.lspace="0.22em",r.attributes.rspace="0.22em"):e.mclass==="mpunct"?(r.attributes.lspace="0em",r.attributes.rspace="0.17em"):e.mclass==="mopen"||e.mclass==="mclose"?(r.attributes.lspace="0em",r.attributes.rspace="0em"):e.mclass==="minner"&&(r.attributes.lspace="0.0556em",r.attributes.width="+0.1111em")),r}Oe({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(e,t){var{parser:r,funcName:a}=e,s=t[0];return{type:"mclass",mode:r.mode,mclass:"m"+a.slice(5),body:xr(s),isCharacterBox:Fe.isCharacterBox(s)}},htmlBuilder:k6,mathmlBuilder:T6});var gd=e=>{var t=e.type==="ordgroup"&&e.body.length?e.body[0]:e;return t.type==="atom"&&(t.family==="bin"||t.family==="rel")?"m"+t.family:"mord"};Oe({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(e,t){var{parser:r}=e;return{type:"mclass",mode:r.mode,mclass:gd(t[0]),body:xr(t[1]),isCharacterBox:Fe.isCharacterBox(t[1])}}});Oe({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(e,t){var{parser:r,funcName:a}=e,s=t[1],o=t[0],u;a!=="\\stackrel"?u=gd(s):u="mrel";var c={type:"op",mode:s.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:a!=="\\stackrel",body:xr(s)},f={type:"supsub",mode:o.mode,base:c,sup:a==="\\underset"?null:o,sub:a==="\\underset"?o:null};return{type:"mclass",mode:r.mode,mclass:u,body:[f],isCharacterBox:Fe.isCharacterBox(f)}},htmlBuilder:k6,mathmlBuilder:T6});Oe({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"pmb",mode:r.mode,mclass:gd(t[0]),body:xr(t[0])}},htmlBuilder(e,t){var r=Dr(e.body,t,!0),a=se.makeSpan([e.mclass],r,t);return a.style.textShadow="0.02em 0.01em 0.04px",a},mathmlBuilder(e,t){var r=pa(e.body,t),a=new ze.MathNode("mstyle",r);return a.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),a}});var hz={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},$y=()=>({type:"styling",body:[],mode:"math",style:"display"}),By=e=>e.type==="textord"&&e.text==="@",mz=(e,t)=>(e.type==="mathord"||e.type==="atom")&&e.text===t;function pz(e,t,r){var a=hz[e];switch(a){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return r.callFunction(a,[t[0]],[t[1]]);case"\\uparrow":case"\\downarrow":{var s=r.callFunction("\\\\cdleft",[t[0]],[]),o={type:"atom",text:a,mode:"math",family:"rel"},u=r.callFunction("\\Big",[o],[]),c=r.callFunction("\\\\cdright",[t[1]],[]),f={type:"ordgroup",mode:"math",body:[s,u,c]};return r.callFunction("\\\\cdparent",[f],[])}case"\\\\cdlongequal":return r.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var h={type:"textord",text:"\\Vert",mode:"math"};return r.callFunction("\\Big",[h],[])}default:return{type:"textord",text:" ",mode:"math"}}}function gz(e){var t=[];for(e.gullet.beginGroup(),e.gullet.macros.set("\\cr","\\\\\\relax"),e.gullet.beginGroup();;){t.push(e.parseExpression(!1,"\\\\")),e.gullet.endGroup(),e.gullet.beginGroup();var r=e.fetch().text;if(r==="&"||r==="\\\\")e.consume();else if(r==="\\end"){t[t.length-1].length===0&&t.pop();break}else throw new ke("Expected \\\\ or \\cr or \\end",e.nextToken)}for(var a=[],s=[a],o=0;o<t.length;o++){for(var u=t[o],c=$y(),f=0;f<u.length;f++)if(!By(u[f]))c.body.push(u[f]);else{a.push(c),f+=1;var h=Bp(u[f]).text,p=new Array(2);if(p[0]={type:"ordgroup",mode:"math",body:[]},p[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(h)>-1))if("<>AV".indexOf(h)>-1)for(var v=0;v<2;v++){for(var b=!0,y=f+1;y<u.length;y++){if(mz(u[y],h)){b=!1,f=y;break}if(By(u[y]))throw new ke("Missing a "+h+" character to complete a CD arrow.",u[y]);p[v].body.push(u[y])}if(b)throw new ke("Missing a "+h+" character to complete a CD arrow.",u[f])}else throw new ke('Expected one of "<>AV=|." after @',u[f]);var k=pz(h,p,e),_={type:"styling",body:[k],mode:"math",style:"display"};a.push(_),c=$y()}o%2===0?a.push(c):a.shift(),a=[],s.push(a)}e.gullet.endGroup(),e.gullet.endGroup();var T=new Array(s[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:s,arraystretch:1,addJot:!0,rowGaps:[null],cols:T,colSeparationType:"CD",hLinesBeforeRow:new Array(s.length+1).fill([])}}Oe({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:a}=e;return{type:"cdlabel",mode:r.mode,side:a.slice(4),label:t[0]}},htmlBuilder(e,t){var r=t.havingStyle(t.style.sup()),a=se.wrapFragment(zt(e.label,r,t),t);return a.classes.push("cd-label-"+e.side),a.style.bottom=Ne(.8-a.depth),a.height=0,a.depth=0,a},mathmlBuilder(e,t){var r=new ze.MathNode("mrow",[Bt(e.label,t)]);return r=new ze.MathNode("mpadded",[r]),r.setAttribute("width","0"),e.side==="left"&&r.setAttribute("lspace","-1width"),r.setAttribute("voffset","0.7em"),r=new ze.MathNode("mstyle",[r]),r.setAttribute("displaystyle","false"),r.setAttribute("scriptlevel","1"),r}});Oe({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(e,t){var{parser:r}=e;return{type:"cdlabelparent",mode:r.mode,fragment:t[0]}},htmlBuilder(e,t){var r=se.wrapFragment(zt(e.fragment,t),t);return r.classes.push("cd-vert-arrow"),r},mathmlBuilder(e,t){return new ze.MathNode("mrow",[Bt(e.fragment,t)])}});Oe({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(e,t){for(var{parser:r}=e,a=ut(t[0],"ordgroup"),s=a.body,o="",u=0;u<s.length;u++){var c=ut(s[u],"textord");o+=c.text}var f=parseInt(o),h;if(isNaN(f))throw new ke("\\@char has non-numeric argument "+o);if(f<0||f>=1114111)throw new ke("\\@char with invalid code point "+o);return f<=65535?h=String.fromCharCode(f):(f-=65536,h=String.fromCharCode((f>>10)+55296,(f&1023)+56320)),{type:"textord",mode:r.mode,text:h}}});var A6=(e,t)=>{var r=Dr(e.body,t.withColor(e.color),!1);return se.makeFragment(r)},E6=(e,t)=>{var r=pa(e.body,t.withColor(e.color)),a=new ze.MathNode("mstyle",r);return a.setAttribute("mathcolor",e.color),a};Oe({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(e,t){var{parser:r}=e,a=ut(t[0],"color-token").color,s=t[1];return{type:"color",mode:r.mode,color:a,body:xr(s)}},htmlBuilder:A6,mathmlBuilder:E6});Oe({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(e,t){var{parser:r,breakOnTokenText:a}=e,s=ut(t[0],"color-token").color;r.gullet.macros.set("\\current@color",s);var o=r.parseExpression(!0,a);return{type:"color",mode:r.mode,color:s,body:o}},htmlBuilder:A6,mathmlBuilder:E6});Oe({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(e,t,r){var{parser:a}=e,s=a.gullet.future().text==="["?a.parseSizeGroup(!0):null,o=!a.settings.displayMode||!a.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:a.mode,newLine:o,size:s&&ut(s,"size").value}},htmlBuilder(e,t){var r=se.makeSpan(["mspace"],[],t);return e.newLine&&(r.classes.push("newline"),e.size&&(r.style.marginTop=Ne(sr(e.size,t)))),r},mathmlBuilder(e,t){var r=new ze.MathNode("mspace");return e.newLine&&(r.setAttribute("linebreak","newline"),e.size&&r.setAttribute("height",Ne(sr(e.size,t)))),r}});var Ym={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},M6=e=>{var t=e.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(t))throw new ke("Expected a control sequence",e);return t},vz=e=>{var t=e.gullet.popToken();return t.text==="="&&(t=e.gullet.popToken(),t.text===" "&&(t=e.gullet.popToken())),t},N6=(e,t,r,a)=>{var s=e.gullet.macros.get(r.text);s==null&&(r.noexpand=!0,s={tokens:[r],numArgs:0,unexpandable:!e.gullet.isExpandable(r.text)}),e.gullet.macros.set(t,s,a)};Oe({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(e){var{parser:t,funcName:r}=e;t.consumeSpaces();var a=t.fetch();if(Ym[a.text])return(r==="\\global"||r==="\\\\globallong")&&(a.text=Ym[a.text]),ut(t.parseFunction(),"internal");throw new ke("Invalid token after macro prefix",a)}});Oe({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,a=t.gullet.popToken(),s=a.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(s))throw new ke("Expected a control sequence",a);for(var o=0,u,c=[[]];t.gullet.future().text!=="{";)if(a=t.gullet.popToken(),a.text==="#"){if(t.gullet.future().text==="{"){u=t.gullet.future(),c[o].push("{");break}if(a=t.gullet.popToken(),!/^[1-9]$/.test(a.text))throw new ke('Invalid argument number "'+a.text+'"');if(parseInt(a.text)!==o+1)throw new ke('Argument number "'+a.text+'" out of order');o++,c.push([])}else{if(a.text==="EOF")throw new ke("Expected a macro definition");c[o].push(a.text)}var{tokens:f}=t.gullet.consumeArg();return u&&f.unshift(u),(r==="\\edef"||r==="\\xdef")&&(f=t.gullet.expandTokens(f),f.reverse()),t.gullet.macros.set(s,{tokens:f,numArgs:o,delimiters:c},r===Ym[r]),{type:"internal",mode:t.mode}}});Oe({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,a=M6(t.gullet.popToken());t.gullet.consumeSpaces();var s=vz(t);return N6(t,a,s,r==="\\\\globallet"),{type:"internal",mode:t.mode}}});Oe({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e){var{parser:t,funcName:r}=e,a=M6(t.gullet.popToken()),s=t.gullet.popToken(),o=t.gullet.popToken();return N6(t,a,o,r==="\\\\globalfuture"),t.gullet.pushToken(o),t.gullet.pushToken(s),{type:"internal",mode:t.mode}}});var uu=function(t,r,a){var s=Ut.math[t]&&Ut.math[t].replace,o=Rp(s||t,r,a);if(!o)throw new Error("Unsupported symbol "+t+" and font size "+r+".");return o},Up=function(t,r,a,s){var o=a.havingBaseStyle(r),u=se.makeSpan(s.concat(o.sizingClasses(a)),[t],a),c=o.sizeMultiplier/a.sizeMultiplier;return u.height*=c,u.depth*=c,u.maxFontSize=o.sizeMultiplier,u},C6=function(t,r,a){var s=r.havingBaseStyle(a),o=(1-r.sizeMultiplier/s.sizeMultiplier)*r.fontMetrics().axisHeight;t.classes.push("delimcenter"),t.style.top=Ne(o),t.height-=o,t.depth+=o},yz=function(t,r,a,s,o,u){var c=se.makeSymbol(t,"Main-Regular",o,s),f=Up(c,r,s,u);return a&&C6(f,s,r),f},bz=function(t,r,a,s){return se.makeSymbol(t,"Size"+r+"-Regular",a,s)},O6=function(t,r,a,s,o,u){var c=bz(t,r,o,s),f=Up(se.makeSpan(["delimsizing","size"+r],[c],s),Je.TEXT,s,u);return a&&C6(f,s,Je.TEXT),f},rm=function(t,r,a){var s;r==="Size1-Regular"?s="delim-size1":s="delim-size4";var o=se.makeSpan(["delimsizinginner",s],[se.makeSpan([],[se.makeSymbol(t,r,a)])]);return{type:"elem",elem:o}},am=function(t,r,a){var s=Tn["Size4-Regular"][t.charCodeAt(0)]?Tn["Size4-Regular"][t.charCodeAt(0)][4]:Tn["Size1-Regular"][t.charCodeAt(0)][4],o=new Ji("inner",k_(t,Math.round(1e3*r))),u=new oi([o],{width:Ne(s),height:Ne(r),style:"width:"+Ne(s),viewBox:"0 0 "+1e3*s+" "+Math.round(1e3*r),preserveAspectRatio:"xMinYMin"}),c=se.makeSvgSpan([],[u],a);return c.height=r,c.style.height=Ne(r),c.style.width=Ne(s),{type:"elem",elem:c}},Xm=.008,cc={type:"kern",size:-1*Xm},xz=["|","\\lvert","\\rvert","\\vert"],wz=["\\|","\\lVert","\\rVert","\\Vert"],R6=function(t,r,a,s,o,u){var c,f,h,p,v="",b=0;c=h=p=t,f=null;var y="Size1-Regular";t==="\\uparrow"?h=p="":t==="\\Uparrow"?h=p="":t==="\\downarrow"?c=h="":t==="\\Downarrow"?c=h="":t==="\\updownarrow"?(c="\\uparrow",h="",p="\\downarrow"):t==="\\Updownarrow"?(c="\\Uparrow",h="",p="\\Downarrow"):Fe.contains(xz,t)?(h="",v="vert",b=333):Fe.contains(wz,t)?(h="",v="doublevert",b=556):t==="["||t==="\\lbrack"?(c="",h="",p="",y="Size4-Regular",v="lbrack",b=667):t==="]"||t==="\\rbrack"?(c="",h="",p="",y="Size4-Regular",v="rbrack",b=667):t==="\\lfloor"||t===""?(h=c="",p="",y="Size4-Regular",v="lfloor",b=667):t==="\\lceil"||t===""?(c="",h=p="",y="Size4-Regular",v="lceil",b=667):t==="\\rfloor"||t===""?(h=c="",p="",y="Size4-Regular",v="rfloor",b=667):t==="\\rceil"||t===""?(c="",h=p="",y="Size4-Regular",v="rceil",b=667):t==="("||t==="\\lparen"?(c="",h="",p="",y="Size4-Regular",v="lparen",b=875):t===")"||t==="\\rparen"?(c="",h="",p="",y="Size4-Regular",v="rparen",b=875):t==="\\{"||t==="\\lbrace"?(c="",f="",p="",h="",y="Size4-Regular"):t==="\\}"||t==="\\rbrace"?(c="",f="",p="",h="",y="Size4-Regular"):t==="\\lgroup"||t===""?(c="",p="",h="",y="Size4-Regular"):t==="\\rgroup"||t===""?(c="",p="",h="",y="Size4-Regular"):t==="\\lmoustache"||t===""?(c="",p="",h="",y="Size4-Regular"):(t==="\\rmoustache"||t==="")&&(c="",p="",h="",y="Size4-Regular");var k=uu(c,y,o),_=k.height+k.depth,T=uu(h,y,o),R=T.height+T.depth,O=uu(p,y,o),M=O.height+O.depth,j=0,I=1;if(f!==null){var $=uu(f,y,o);j=$.height+$.depth,I=2}var E=_+M+j,D=Math.max(0,Math.ceil((r-E)/(I*R))),V=E+D*I*R,de=s.fontMetrics().axisHeight;a&&(de*=s.sizeMultiplier);var Q=V/2-de,G=[];if(v.length>0){var X=V-_-M,K=Math.round(V*1e3),ae=T_(v,Math.round(X*1e3)),q=new Ji(v,ae),F=(b/1e3).toFixed(3)+"em",J=(K/1e3).toFixed(3)+"em",Ae=new oi([q],{width:F,height:J,viewBox:"0 0 "+b+" "+K}),De=se.makeSvgSpan([],[Ae],s);De.height=K/1e3,De.style.width=F,De.style.height=J,G.push({type:"elem",elem:De})}else{if(G.push(rm(p,y,o)),G.push(cc),f===null){var L=V-_-M+2*Xm;G.push(am(h,L,s))}else{var ne=(V-_-M-j)/2+2*Xm;G.push(am(h,ne,s)),G.push(cc),G.push(rm(f,y,o)),G.push(cc),G.push(am(h,ne,s))}G.push(cc),G.push(rm(c,y,o))}var ee=s.havingBaseStyle(Je.TEXT),re=se.makeVList({positionType:"bottom",positionData:Q,children:G},ee);return Up(se.makeSpan(["delimsizing","mult"],[re],ee),Je.TEXT,s,u)},nm=80,im=.08,sm=function(t,r,a,s,o){var u=z_(t,s,a),c=new Ji(t,u),f=new oi([c],{width:"400em",height:Ne(r),viewBox:"0 0 400000 "+a,preserveAspectRatio:"xMinYMin slice"});return se.makeSvgSpan(["hide-tail"],[f],o)},Sz=function(t,r){var a=r.havingBaseSizing(),s=$6("\\surd",t*a.sizeMultiplier,j6,a),o=a.sizeMultiplier,u=Math.max(0,r.minRuleThickness-r.fontMetrics().sqrtRuleThickness),c,f=0,h=0,p=0,v;return s.type==="small"?(p=1e3+1e3*u+nm,t<1?o=1:t<1.4&&(o=.7),f=(1+u+im)/o,h=(1+u)/o,c=sm("sqrtMain",f,p,u,r),c.style.minWidth="0.853em",v=.833/o):s.type==="large"?(p=(1e3+nm)*gu[s.size],h=(gu[s.size]+u)/o,f=(gu[s.size]+u+im)/o,c=sm("sqrtSize"+s.size,f,p,u,r),c.style.minWidth="1.02em",v=1/o):(f=t+u+im,h=t+u,p=Math.floor(1e3*t+u)+nm,c=sm("sqrtTall",f,p,u,r),c.style.minWidth="0.742em",v=1.056),c.height=h,c.style.height=Ne(f),{span:c,advanceWidth:v,ruleWidth:(r.fontMetrics().sqrtRuleThickness+u)*o}},I6=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],_z=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],D6=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],gu=[0,1.2,1.8,2.4,3],zz=function(t,r,a,s,o){if(t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle"),Fe.contains(I6,t)||Fe.contains(D6,t))return O6(t,r,!1,a,s,o);if(Fe.contains(_z,t))return R6(t,gu[r],!1,a,s,o);throw new ke("Illegal delimiter: '"+t+"'")},kz=[{type:"small",style:Je.SCRIPTSCRIPT},{type:"small",style:Je.SCRIPT},{type:"small",style:Je.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],Tz=[{type:"small",style:Je.SCRIPTSCRIPT},{type:"small",style:Je.SCRIPT},{type:"small",style:Je.TEXT},{type:"stack"}],j6=[{type:"small",style:Je.SCRIPTSCRIPT},{type:"small",style:Je.SCRIPT},{type:"small",style:Je.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],Az=function(t){if(t.type==="small")return"Main-Regular";if(t.type==="large")return"Size"+t.size+"-Regular";if(t.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+t.type+"' here.")},$6=function(t,r,a,s){for(var o=Math.min(2,3-s.style.size),u=o;u<a.length&&a[u].type!=="stack";u++){var c=uu(t,Az(a[u]),"math"),f=c.height+c.depth;if(a[u].type==="small"){var h=s.havingBaseStyle(a[u].style);f*=h.sizeMultiplier}if(f>r)return a[u]}return a[a.length-1]},B6=function(t,r,a,s,o,u){t==="<"||t==="\\lt"||t===""?t="\\langle":(t===">"||t==="\\gt"||t==="")&&(t="\\rangle");var c;Fe.contains(D6,t)?c=kz:Fe.contains(I6,t)?c=j6:c=Tz;var f=$6(t,r,c,s);return f.type==="small"?yz(t,f.style,a,s,o,u):f.type==="large"?O6(t,f.size,a,s,o,u):R6(t,r,a,s,o,u)},Ez=function(t,r,a,s,o,u){var c=s.fontMetrics().axisHeight*s.sizeMultiplier,f=901,h=5/s.fontMetrics().ptPerEm,p=Math.max(r-c,a+c),v=Math.max(p/500*f,2*p-h);return B6(t,v,!0,s,o,u)},ii={sqrtImage:Sz,sizedDelim:zz,sizeToMaxHeight:gu,customSizedDelim:B6,leftRightDelim:Ez},Ly={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},Mz=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function vd(e,t){var r=pd(e);if(r&&Fe.contains(Mz,r.text))return r;throw r?new ke("Invalid delimiter '"+r.text+"' after '"+t.funcName+"'",e):new ke("Invalid delimiter type '"+e.type+"'",e)}Oe({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(e,t)=>{var r=vd(t[0],e);return{type:"delimsizing",mode:e.parser.mode,size:Ly[e.funcName].size,mclass:Ly[e.funcName].mclass,delim:r.text}},htmlBuilder:(e,t)=>e.delim==="."?se.makeSpan([e.mclass]):ii.sizedDelim(e.delim,e.size,t,e.mode,[e.mclass]),mathmlBuilder:e=>{var t=[];e.delim!=="."&&t.push(Qa(e.delim,e.mode));var r=new ze.MathNode("mo",t);e.mclass==="mopen"||e.mclass==="mclose"?r.setAttribute("fence","true"):r.setAttribute("fence","false"),r.setAttribute("stretchy","true");var a=Ne(ii.sizeToMaxHeight[e.size]);return r.setAttribute("minsize",a),r.setAttribute("maxsize",a),r}});function Uy(e){if(!e.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}Oe({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=e.parser.gullet.macros.get("\\current@color");if(r&&typeof r!="string")throw new ke("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:e.parser.mode,delim:vd(t[0],e).text,color:r}}});Oe({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=vd(t[0],e),a=e.parser;++a.leftrightDepth;var s=a.parseExpression(!1);--a.leftrightDepth,a.expect("\\right",!1);var o=ut(a.parseFunction(),"leftright-right");return{type:"leftright",mode:a.mode,body:s,left:r.text,right:o.delim,rightColor:o.color}},htmlBuilder:(e,t)=>{Uy(e);for(var r=Dr(e.body,t,!0,["mopen","mclose"]),a=0,s=0,o=!1,u=0;u<r.length;u++)r[u].isMiddle?o=!0:(a=Math.max(r[u].height,a),s=Math.max(r[u].depth,s));a*=t.sizeMultiplier,s*=t.sizeMultiplier;var c;if(e.left==="."?c=bu(t,["mopen"]):c=ii.leftRightDelim(e.left,a,s,t,e.mode,["mopen"]),r.unshift(c),o)for(var f=1;f<r.length;f++){var h=r[f],p=h.isMiddle;p&&(r[f]=ii.leftRightDelim(p.delim,a,s,p.options,e.mode,[]))}var v;if(e.right===".")v=bu(t,["mclose"]);else{var b=e.rightColor?t.withColor(e.rightColor):t;v=ii.leftRightDelim(e.right,a,s,b,e.mode,["mclose"])}return r.push(v),se.makeSpan(["minner"],r,t)},mathmlBuilder:(e,t)=>{Uy(e);var r=pa(e.body,t);if(e.left!=="."){var a=new ze.MathNode("mo",[Qa(e.left,e.mode)]);a.setAttribute("fence","true"),r.unshift(a)}if(e.right!=="."){var s=new ze.MathNode("mo",[Qa(e.right,e.mode)]);s.setAttribute("fence","true"),e.rightColor&&s.setAttribute("mathcolor",e.rightColor),r.push(s)}return jp(r)}});Oe({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var r=vd(t[0],e);if(!e.parser.leftrightDepth)throw new ke("\\middle without preceding \\left",r);return{type:"middle",mode:e.parser.mode,delim:r.text}},htmlBuilder:(e,t)=>{var r;if(e.delim===".")r=bu(t,[]);else{r=ii.sizedDelim(e.delim,1,t,e.mode,[]);var a={delim:e.delim,options:t};r.isMiddle=a}return r},mathmlBuilder:(e,t)=>{var r=e.delim==="\\vert"||e.delim==="|"?Qa("|","text"):Qa(e.delim,e.mode),a=new ze.MathNode("mo",[r]);return a.setAttribute("fence","true"),a.setAttribute("lspace","0.05em"),a.setAttribute("rspace","0.05em"),a}});var qp=(e,t)=>{var r=se.wrapFragment(zt(e.body,t),t),a=e.label.slice(1),s=t.sizeMultiplier,o,u=0,c=Fe.isCharacterBox(e.body);if(a==="sout")o=se.makeSpan(["stretchy","sout"]),o.height=t.fontMetrics().defaultRuleThickness/s,u=-.5*t.fontMetrics().xHeight;else if(a==="phase"){var f=sr({number:.6,unit:"pt"},t),h=sr({number:.35,unit:"ex"},t),p=t.havingBaseSizing();s=s/p.sizeMultiplier;var v=r.height+r.depth+f+h;r.style.paddingLeft=Ne(v/2+f);var b=Math.floor(1e3*v*s),y=S_(b),k=new oi([new Ji("phase",y)],{width:"400em",height:Ne(b/1e3),viewBox:"0 0 400000 "+b,preserveAspectRatio:"xMinYMin slice"});o=se.makeSvgSpan(["hide-tail"],[k],t),o.style.height=Ne(v),u=r.depth+f+h}else{/cancel/.test(a)?c||r.classes.push("cancel-pad"):a==="angl"?r.classes.push("anglpad"):r.classes.push("boxpad");var _=0,T=0,R=0;/box/.test(a)?(R=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness),_=t.fontMetrics().fboxsep+(a==="colorbox"?0:R),T=_):a==="angl"?(R=Math.max(t.fontMetrics().defaultRuleThickness,t.minRuleThickness),_=4*R,T=Math.max(0,.25-r.depth)):(_=c?.2:0,T=_),o=ui.encloseSpan(r,a,_,T,t),/fbox|boxed|fcolorbox/.test(a)?(o.style.borderStyle="solid",o.style.borderWidth=Ne(R)):a==="angl"&&R!==.049&&(o.style.borderTopWidth=Ne(R),o.style.borderRightWidth=Ne(R)),u=r.depth+T,e.backgroundColor&&(o.style.backgroundColor=e.backgroundColor,e.borderColor&&(o.style.borderColor=e.borderColor))}var O;if(e.backgroundColor)O=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:o,shift:u},{type:"elem",elem:r,shift:0}]},t);else{var M=/cancel|phase/.test(a)?["svg-align"]:[];O=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:r,shift:0},{type:"elem",elem:o,shift:u,wrapperClasses:M}]},t)}return/cancel/.test(a)&&(O.height=r.height,O.depth=r.depth),/cancel/.test(a)&&!c?se.makeSpan(["mord","cancel-lap"],[O],t):se.makeSpan(["mord"],[O],t)},Pp=(e,t)=>{var r=0,a=new ze.MathNode(e.label.indexOf("colorbox")>-1?"mpadded":"menclose",[Bt(e.body,t)]);switch(e.label){case"\\cancel":a.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":a.setAttribute("notation","downdiagonalstrike");break;case"\\phase":a.setAttribute("notation","phasorangle");break;case"\\sout":a.setAttribute("notation","horizontalstrike");break;case"\\fbox":a.setAttribute("notation","box");break;case"\\angl":a.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(r=t.fontMetrics().fboxsep*t.fontMetrics().ptPerEm,a.setAttribute("width","+"+2*r+"pt"),a.setAttribute("height","+"+2*r+"pt"),a.setAttribute("lspace",r+"pt"),a.setAttribute("voffset",r+"pt"),e.label==="\\fcolorbox"){var s=Math.max(t.fontMetrics().fboxrule,t.minRuleThickness);a.setAttribute("style","border: "+s+"em solid "+String(e.borderColor))}break;case"\\xcancel":a.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return e.backgroundColor&&a.setAttribute("mathbackground",e.backgroundColor),a};Oe({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(e,t,r){var{parser:a,funcName:s}=e,o=ut(t[0],"color-token").color,u=t[1];return{type:"enclose",mode:a.mode,label:s,backgroundColor:o,body:u}},htmlBuilder:qp,mathmlBuilder:Pp});Oe({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(e,t,r){var{parser:a,funcName:s}=e,o=ut(t[0],"color-token").color,u=ut(t[1],"color-token").color,c=t[2];return{type:"enclose",mode:a.mode,label:s,backgroundColor:u,borderColor:o,body:c}},htmlBuilder:qp,mathmlBuilder:Pp});Oe({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\fbox",body:t[0]}}});Oe({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:a}=e,s=t[0];return{type:"enclose",mode:r.mode,label:a,body:s}},htmlBuilder:qp,mathmlBuilder:Pp});Oe({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"enclose",mode:r.mode,label:"\\angl",body:t[0]}}});var L6={};function Mn(e){for(var{type:t,names:r,props:a,handler:s,htmlBuilder:o,mathmlBuilder:u}=e,c={type:t,numArgs:a.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:s},f=0;f<r.length;++f)L6[r[f]]=c;o&&(jc[t]=o),u&&($c[t]=u)}var U6={};function C(e,t){U6[e]=t}function qy(e){var t=[];e.consumeSpaces();var r=e.fetch().text;for(r==="\\relax"&&(e.consume(),e.consumeSpaces(),r=e.fetch().text);r==="\\hline"||r==="\\hdashline";)e.consume(),t.push(r==="\\hdashline"),e.consumeSpaces(),r=e.fetch().text;return t}var yd=e=>{var t=e.parser.settings;if(!t.displayMode)throw new ke("{"+e.envName+"} can be used only in display mode.")};function Hp(e){if(e.indexOf("ed")===-1)return e.indexOf("*")===-1}function as(e,t,r){var{hskipBeforeAndAfter:a,addJot:s,cols:o,arraystretch:u,colSeparationType:c,autoTag:f,singleRow:h,emptySingleRow:p,maxNumCols:v,leqno:b}=t;if(e.gullet.beginGroup(),h||e.gullet.macros.set("\\cr","\\\\\\relax"),!u){var y=e.gullet.expandMacroAsText("\\arraystretch");if(y==null)u=1;else if(u=parseFloat(y),!u||u<0)throw new ke("Invalid \\arraystretch: "+y)}e.gullet.beginGroup();var k=[],_=[k],T=[],R=[],O=f!=null?[]:void 0;function M(){f&&e.gullet.macros.set("\\@eqnsw","1",!0)}function j(){O&&(e.gullet.macros.get("\\df@tag")?(O.push(e.subparse([new Ja("\\df@tag")])),e.gullet.macros.set("\\df@tag",void 0,!0)):O.push(!!f&&e.gullet.macros.get("\\@eqnsw")==="1"))}for(M(),R.push(qy(e));;){var I=e.parseExpression(!1,h?"\\end":"\\\\");e.gullet.endGroup(),e.gullet.beginGroup(),I={type:"ordgroup",mode:e.mode,body:I},r&&(I={type:"styling",mode:e.mode,style:r,body:[I]}),k.push(I);var $=e.fetch().text;if($==="&"){if(v&&k.length===v){if(h||c)throw new ke("Too many tab characters: &",e.nextToken);e.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}e.consume()}else if($==="\\end"){j(),k.length===1&&I.type==="styling"&&I.body[0].body.length===0&&(_.length>1||!p)&&_.pop(),R.length<_.length+1&&R.push([]);break}else if($==="\\\\"){e.consume();var E=void 0;e.gullet.future().text!==" "&&(E=e.parseSizeGroup(!0)),T.push(E?E.value:null),j(),R.push(qy(e)),k=[],_.push(k),M()}else throw new ke("Expected & or \\\\ or \\cr or \\end",e.nextToken)}return e.gullet.endGroup(),e.gullet.endGroup(),{type:"array",mode:e.mode,addJot:s,arraystretch:u,body:_,cols:o,rowGaps:T,hskipBeforeAndAfter:a,hLinesBeforeRow:R,colSeparationType:c,tags:O,leqno:b}}function Zp(e){return e.slice(0,1)==="d"?"display":"text"}var Nn=function(t,r){var a,s,o=t.body.length,u=t.hLinesBeforeRow,c=0,f=new Array(o),h=[],p=Math.max(r.fontMetrics().arrayRuleWidth,r.minRuleThickness),v=1/r.fontMetrics().ptPerEm,b=5*v;if(t.colSeparationType&&t.colSeparationType==="small"){var y=r.havingStyle(Je.SCRIPT).sizeMultiplier;b=.2778*(y/r.sizeMultiplier)}var k=t.colSeparationType==="CD"?sr({number:3,unit:"ex"},r):12*v,_=3*v,T=t.arraystretch*k,R=.7*T,O=.3*T,M=0;function j(nt){for(var dt=0;dt<nt.length;++dt)dt>0&&(M+=.25),h.push({pos:M,isDashed:nt[dt]})}for(j(u[0]),a=0;a<t.body.length;++a){var I=t.body[a],$=R,E=O;c<I.length&&(c=I.length);var D=new Array(I.length);for(s=0;s<I.length;++s){var V=zt(I[s],r);E<V.depth&&(E=V.depth),$<V.height&&($=V.height),D[s]=V}var de=t.rowGaps[a],Q=0;de&&(Q=sr(de,r),Q>0&&(Q+=O,E<Q&&(E=Q),Q=0)),t.addJot&&(E+=_),D.height=$,D.depth=E,M+=$,D.pos=M,M+=E+Q,f[a]=D,j(u[a+1])}var G=M/2+r.fontMetrics().axisHeight,X=t.cols||[],K=[],ae,q,F=[];if(t.tags&&t.tags.some(nt=>nt))for(a=0;a<o;++a){var J=f[a],Ae=J.pos-G,De=t.tags[a],L=void 0;De===!0?L=se.makeSpan(["eqn-num"],[],r):De===!1?L=se.makeSpan([],[],r):L=se.makeSpan([],Dr(De,r,!0),r),L.depth=J.depth,L.height=J.height,F.push({type:"elem",elem:L,shift:Ae})}for(s=0,q=0;s<c||q<X.length;++s,++q){for(var ne=X[q]||{},ee=!0;ne.type==="separator";){if(ee||(ae=se.makeSpan(["arraycolsep"],[]),ae.style.width=Ne(r.fontMetrics().doubleRuleSep),K.push(ae)),ne.separator==="|"||ne.separator===":"){var re=ne.separator==="|"?"solid":"dashed",we=se.makeSpan(["vertical-separator"],[],r);we.style.height=Ne(M),we.style.borderRightWidth=Ne(p),we.style.borderRightStyle=re,we.style.margin="0 "+Ne(-p/2);var Ee=M-G;Ee&&(we.style.verticalAlign=Ne(-Ee)),K.push(we)}else throw new ke("Invalid separator type: "+ne.separator);q++,ne=X[q]||{},ee=!1}if(!(s>=c)){var ue=void 0;(s>0||t.hskipBeforeAndAfter)&&(ue=Fe.deflt(ne.pregap,b),ue!==0&&(ae=se.makeSpan(["arraycolsep"],[]),ae.style.width=Ne(ue),K.push(ae)));var Ce=[];for(a=0;a<o;++a){var H=f[a],oe=H[s];if(oe){var ge=H.pos-G;oe.depth=H.depth,oe.height=H.height,Ce.push({type:"elem",elem:oe,shift:ge})}}Ce=se.makeVList({positionType:"individualShift",children:Ce},r),Ce=se.makeSpan(["col-align-"+(ne.align||"c")],[Ce]),K.push(Ce),(s<c-1||t.hskipBeforeAndAfter)&&(ue=Fe.deflt(ne.postgap,b),ue!==0&&(ae=se.makeSpan(["arraycolsep"],[]),ae.style.width=Ne(ue),K.push(ae)))}}if(f=se.makeSpan(["mtable"],K),h.length>0){for(var Me=se.makeLineSpan("hline",r,p),_e=se.makeLineSpan("hdashline",r,p),je=[{type:"elem",elem:f,shift:0}];h.length>0;){var Ye=h.pop(),qe=Ye.pos-G;Ye.isDashed?je.push({type:"elem",elem:_e,shift:qe}):je.push({type:"elem",elem:Me,shift:qe})}f=se.makeVList({positionType:"individualShift",children:je},r)}if(F.length===0)return se.makeSpan(["mord"],[f],r);var ct=se.makeVList({positionType:"individualShift",children:F},r);return ct=se.makeSpan(["tag"],[ct],r),se.makeFragment([f,ct])},Nz={c:"center ",l:"left ",r:"right "},Cn=function(t,r){for(var a=[],s=new ze.MathNode("mtd",[],["mtr-glue"]),o=new ze.MathNode("mtd",[],["mml-eqn-num"]),u=0;u<t.body.length;u++){for(var c=t.body[u],f=[],h=0;h<c.length;h++)f.push(new ze.MathNode("mtd",[Bt(c[h],r)]));t.tags&&t.tags[u]&&(f.unshift(s),f.push(s),t.leqno?f.unshift(o):f.push(o)),a.push(new ze.MathNode("mtr",f))}var p=new ze.MathNode("mtable",a),v=t.arraystretch===.5?.1:.16+t.arraystretch-1+(t.addJot?.09:0);p.setAttribute("rowspacing",Ne(v));var b="",y="";if(t.cols&&t.cols.length>0){var k=t.cols,_="",T=!1,R=0,O=k.length;k[0].type==="separator"&&(b+="top ",R=1),k[k.length-1].type==="separator"&&(b+="bottom ",O-=1);for(var M=R;M<O;M++)k[M].type==="align"?(y+=Nz[k[M].align],T&&(_+="none "),T=!0):k[M].type==="separator"&&T&&(_+=k[M].separator==="|"?"solid ":"dashed ",T=!1);p.setAttribute("columnalign",y.trim()),/[sd]/.test(_)&&p.setAttribute("columnlines",_.trim())}if(t.colSeparationType==="align"){for(var j=t.cols||[],I="",$=1;$<j.length;$++)I+=$%2?"0em ":"1em ";p.setAttribute("columnspacing",I.trim())}else t.colSeparationType==="alignat"||t.colSeparationType==="gather"?p.setAttribute("columnspacing","0em"):t.colSeparationType==="small"?p.setAttribute("columnspacing","0.2778em"):t.colSeparationType==="CD"?p.setAttribute("columnspacing","0.5em"):p.setAttribute("columnspacing","1em");var E="",D=t.hLinesBeforeRow;b+=D[0].length>0?"left ":"",b+=D[D.length-1].length>0?"right ":"";for(var V=1;V<D.length-1;V++)E+=D[V].length===0?"none ":D[V][0]?"dashed ":"solid ";return/[sd]/.test(E)&&p.setAttribute("rowlines",E.trim()),b!==""&&(p=new ze.MathNode("menclose",[p]),p.setAttribute("notation",b.trim())),t.arraystretch&&t.arraystretch<1&&(p=new ze.MathNode("mstyle",[p]),p.setAttribute("scriptlevel","1")),p},q6=function(t,r){t.envName.indexOf("ed")===-1&&yd(t);var a=[],s=t.envName.indexOf("at")>-1?"alignat":"align",o=t.envName==="split",u=as(t.parser,{cols:a,addJot:!0,autoTag:o?void 0:Hp(t.envName),emptySingleRow:!0,colSeparationType:s,maxNumCols:o?2:void 0,leqno:t.parser.settings.leqno},"display"),c,f=0,h={type:"ordgroup",mode:t.mode,body:[]};if(r[0]&&r[0].type==="ordgroup"){for(var p="",v=0;v<r[0].body.length;v++){var b=ut(r[0].body[v],"textord");p+=b.text}c=Number(p),f=c*2}var y=!f;u.body.forEach(function(R){for(var O=1;O<R.length;O+=2){var M=ut(R[O],"styling"),j=ut(M.body[0],"ordgroup");j.body.unshift(h)}if(y)f<R.length&&(f=R.length);else{var I=R.length/2;if(c<I)throw new ke("Too many math in a row: "+("expected "+c+", but got "+I),R[0])}});for(var k=0;k<f;++k){var _="r",T=0;k%2===1?_="l":k>0&&y&&(T=1),a[k]={type:"align",align:_,pregap:T,postgap:0}}return u.colSeparationType=y?"align":"alignat",u};Mn({type:"array",names:["array","darray"],props:{numArgs:1},handler(e,t){var r=pd(t[0]),a=r?[t[0]]:ut(t[0],"ordgroup").body,s=a.map(function(u){var c=Bp(u),f=c.text;if("lcr".indexOf(f)!==-1)return{type:"align",align:f};if(f==="|")return{type:"separator",separator:"|"};if(f===":")return{type:"separator",separator:":"};throw new ke("Unknown column alignment: "+f,u)}),o={cols:s,hskipBeforeAndAfter:!0,maxNumCols:s.length};return as(e.parser,o,Zp(e.envName))},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(e){var t={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[e.envName.replace("*","")],r="c",a={hskipBeforeAndAfter:!1,cols:[{type:"align",align:r}]};if(e.envName.charAt(e.envName.length-1)==="*"){var s=e.parser;if(s.consumeSpaces(),s.fetch().text==="["){if(s.consume(),s.consumeSpaces(),r=s.fetch().text,"lcr".indexOf(r)===-1)throw new ke("Expected l or c or r",s.nextToken);s.consume(),s.consumeSpaces(),s.expect("]"),s.consume(),a.cols=[{type:"align",align:r}]}}var o=as(e.parser,a,Zp(e.envName)),u=Math.max(0,...o.body.map(c=>c.length));return o.cols=new Array(u).fill({type:"align",align:r}),t?{type:"leftright",mode:e.mode,body:[o],left:t[0],right:t[1],rightColor:void 0}:o},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(e){var t={arraystretch:.5},r=as(e.parser,t,"script");return r.colSeparationType="small",r},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["subarray"],props:{numArgs:1},handler(e,t){var r=pd(t[0]),a=r?[t[0]]:ut(t[0],"ordgroup").body,s=a.map(function(u){var c=Bp(u),f=c.text;if("lc".indexOf(f)!==-1)return{type:"align",align:f};throw new ke("Unknown column alignment: "+f,u)});if(s.length>1)throw new ke("{subarray} can contain only one column");var o={cols:s,hskipBeforeAndAfter:!1,arraystretch:.5};if(o=as(e.parser,o,"script"),o.body.length>0&&o.body[0].length>1)throw new ke("{subarray} can contain only one column");return o},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(e){var t={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},r=as(e.parser,t,Zp(e.envName));return{type:"leftright",mode:e.mode,body:[r],left:e.envName.indexOf("r")>-1?".":"\\{",right:e.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:q6,htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(e){Fe.contains(["gather","gather*"],e.envName)&&yd(e);var t={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:Hp(e.envName),emptySingleRow:!0,leqno:e.parser.settings.leqno};return as(e.parser,t,"display")},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:q6,htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(e){yd(e);var t={autoTag:Hp(e.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:e.parser.settings.leqno};return as(e.parser,t,"display")},htmlBuilder:Nn,mathmlBuilder:Cn});Mn({type:"array",names:["CD"],props:{numArgs:0},handler(e){return yd(e),gz(e.parser)},htmlBuilder:Nn,mathmlBuilder:Cn});C("\\nonumber","\\gdef\\@eqnsw{0}");C("\\notag","\\nonumber");Oe({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(e,t){throw new ke(e.funcName+" valid only within array environment")}});var Py=L6;Oe({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(e,t){var{parser:r,funcName:a}=e,s=t[0];if(s.type!=="ordgroup")throw new ke("Invalid environment name",s);for(var o="",u=0;u<s.body.length;++u)o+=ut(s.body[u],"textord").text;if(a==="\\begin"){if(!Py.hasOwnProperty(o))throw new ke("No such environment: "+o,s);var c=Py[o],{args:f,optArgs:h}=r.parseArguments("\\begin{"+o+"}",c),p={mode:r.mode,envName:o,parser:r},v=c.handler(p,f,h);r.expect("\\end",!1);var b=r.nextToken,y=ut(r.parseFunction(),"environment");if(y.name!==o)throw new ke("Mismatch: \\begin{"+o+"} matched by \\end{"+y.name+"}",b);return v}return{type:"environment",mode:r.mode,name:o,nameGroup:s}}});var P6=(e,t)=>{var r=e.font,a=t.withFont(r);return zt(e.body,a)},H6=(e,t)=>{var r=e.font,a=t.withFont(r);return Bt(e.body,a)},Hy={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};Oe({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathsfit","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=Bc(t[0]),o=a;return o in Hy&&(o=Hy[o]),{type:"font",mode:r.mode,font:o.slice(1),body:s}},htmlBuilder:P6,mathmlBuilder:H6});Oe({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(e,t)=>{var{parser:r}=e,a=t[0],s=Fe.isCharacterBox(a);return{type:"mclass",mode:r.mode,mclass:gd(a),body:[{type:"font",mode:r.mode,font:"boldsymbol",body:a}],isCharacterBox:s}}});Oe({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:a,breakOnTokenText:s}=e,{mode:o}=r,u=r.parseExpression(!0,s),c="math"+a.slice(1);return{type:"font",mode:o,font:c,body:{type:"ordgroup",mode:r.mode,body:u}}},htmlBuilder:P6,mathmlBuilder:H6});var Z6=(e,t)=>{var r=t;return e==="display"?r=r.id>=Je.SCRIPT.id?r.text():Je.DISPLAY:e==="text"&&r.size===Je.DISPLAY.size?r=Je.TEXT:e==="script"?r=Je.SCRIPT:e==="scriptscript"&&(r=Je.SCRIPTSCRIPT),r},Gp=(e,t)=>{var r=Z6(e.size,t.style),a=r.fracNum(),s=r.fracDen(),o;o=t.havingStyle(a);var u=zt(e.numer,o,t);if(e.continued){var c=8.5/t.fontMetrics().ptPerEm,f=3.5/t.fontMetrics().ptPerEm;u.height=u.height<c?c:u.height,u.depth=u.depth<f?f:u.depth}o=t.havingStyle(s);var h=zt(e.denom,o,t),p,v,b;e.hasBarLine?(e.barSize?(v=sr(e.barSize,t),p=se.makeLineSpan("frac-line",t,v)):p=se.makeLineSpan("frac-line",t),v=p.height,b=p.height):(p=null,v=0,b=t.fontMetrics().defaultRuleThickness);var y,k,_;r.size===Je.DISPLAY.size||e.size==="display"?(y=t.fontMetrics().num1,v>0?k=3*b:k=7*b,_=t.fontMetrics().denom1):(v>0?(y=t.fontMetrics().num2,k=b):(y=t.fontMetrics().num3,k=3*b),_=t.fontMetrics().denom2);var T;if(p){var O=t.fontMetrics().axisHeight;y-u.depth-(O+.5*v)<k&&(y+=k-(y-u.depth-(O+.5*v))),O-.5*v-(h.height-_)<k&&(_+=k-(O-.5*v-(h.height-_)));var M=-(O-.5*v);T=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:_},{type:"elem",elem:p,shift:M},{type:"elem",elem:u,shift:-y}]},t)}else{var R=y-u.depth-(h.height-_);R<k&&(y+=.5*(k-R),_+=.5*(k-R)),T=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:h,shift:_},{type:"elem",elem:u,shift:-y}]},t)}o=t.havingStyle(r),T.height*=o.sizeMultiplier/t.sizeMultiplier,T.depth*=o.sizeMultiplier/t.sizeMultiplier;var j;r.size===Je.DISPLAY.size?j=t.fontMetrics().delim1:r.size===Je.SCRIPTSCRIPT.size?j=t.havingStyle(Je.SCRIPT).fontMetrics().delim2:j=t.fontMetrics().delim2;var I,$;return e.leftDelim==null?I=bu(t,["mopen"]):I=ii.customSizedDelim(e.leftDelim,j,!0,t.havingStyle(r),e.mode,["mopen"]),e.continued?$=se.makeSpan([]):e.rightDelim==null?$=bu(t,["mclose"]):$=ii.customSizedDelim(e.rightDelim,j,!0,t.havingStyle(r),e.mode,["mclose"]),se.makeSpan(["mord"].concat(o.sizingClasses(t)),[I,se.makeSpan(["mfrac"],[T]),$],t)},Vp=(e,t)=>{var r=new ze.MathNode("mfrac",[Bt(e.numer,t),Bt(e.denom,t)]);if(!e.hasBarLine)r.setAttribute("linethickness","0px");else if(e.barSize){var a=sr(e.barSize,t);r.setAttribute("linethickness",Ne(a))}var s=Z6(e.size,t.style);if(s.size!==t.style.size){r=new ze.MathNode("mstyle",[r]);var o=s.size===Je.DISPLAY.size?"true":"false";r.setAttribute("displaystyle",o),r.setAttribute("scriptlevel","0")}if(e.leftDelim!=null||e.rightDelim!=null){var u=[];if(e.leftDelim!=null){var c=new ze.MathNode("mo",[new ze.TextNode(e.leftDelim.replace("\\",""))]);c.setAttribute("fence","true"),u.push(c)}if(u.push(r),e.rightDelim!=null){var f=new ze.MathNode("mo",[new ze.TextNode(e.rightDelim.replace("\\",""))]);f.setAttribute("fence","true"),u.push(f)}return jp(u)}return r};Oe({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=t[0],o=t[1],u,c=null,f=null,h="auto";switch(a){case"\\dfrac":case"\\frac":case"\\tfrac":u=!0;break;case"\\\\atopfrac":u=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":u=!1,c="(",f=")";break;case"\\\\bracefrac":u=!1,c="\\{",f="\\}";break;case"\\\\brackfrac":u=!1,c="[",f="]";break;default:throw new Error("Unrecognized genfrac command")}switch(a){case"\\dfrac":case"\\dbinom":h="display";break;case"\\tfrac":case"\\tbinom":h="text";break}return{type:"genfrac",mode:r.mode,continued:!1,numer:s,denom:o,hasBarLine:u,leftDelim:c,rightDelim:f,size:h,barSize:null}},htmlBuilder:Gp,mathmlBuilder:Vp});Oe({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=t[0],o=t[1];return{type:"genfrac",mode:r.mode,continued:!0,numer:s,denom:o,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});Oe({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(e){var{parser:t,funcName:r,token:a}=e,s;switch(r){case"\\over":s="\\frac";break;case"\\choose":s="\\binom";break;case"\\atop":s="\\\\atopfrac";break;case"\\brace":s="\\\\bracefrac";break;case"\\brack":s="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:t.mode,replaceWith:s,token:a}}});var Zy=["display","text","script","scriptscript"],Gy=function(t){var r=null;return t.length>0&&(r=t,r=r==="."?null:r),r};Oe({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(e,t){var{parser:r}=e,a=t[4],s=t[5],o=Bc(t[0]),u=o.type==="atom"&&o.family==="open"?Gy(o.text):null,c=Bc(t[1]),f=c.type==="atom"&&c.family==="close"?Gy(c.text):null,h=ut(t[2],"size"),p,v=null;h.isBlank?p=!0:(v=h.value,p=v.number>0);var b="auto",y=t[3];if(y.type==="ordgroup"){if(y.body.length>0){var k=ut(y.body[0],"textord");b=Zy[Number(k.text)]}}else y=ut(y,"textord"),b=Zy[Number(y.text)];return{type:"genfrac",mode:r.mode,numer:a,denom:s,continued:!1,hasBarLine:p,barSize:v,leftDelim:u,rightDelim:f,size:b}},htmlBuilder:Gp,mathmlBuilder:Vp});Oe({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(e,t){var{parser:r,funcName:a,token:s}=e;return{type:"infix",mode:r.mode,replaceWith:"\\\\abovefrac",size:ut(t[0],"size").value,token:s}}});Oe({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=t[0],o=o_(ut(t[1],"infix").size),u=t[2],c=o.number>0;return{type:"genfrac",mode:r.mode,numer:s,denom:u,continued:!1,hasBarLine:c,barSize:o,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:Gp,mathmlBuilder:Vp});var G6=(e,t)=>{var r=t.style,a,s;e.type==="supsub"?(a=e.sup?zt(e.sup,t.havingStyle(r.sup()),t):zt(e.sub,t.havingStyle(r.sub()),t),s=ut(e.base,"horizBrace")):s=ut(e,"horizBrace");var o=zt(s.base,t.havingBaseStyle(Je.DISPLAY)),u=ui.svgSpan(s,t),c;if(s.isOver?(c=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:o},{type:"kern",size:.1},{type:"elem",elem:u}]},t),c.children[0].children[0].children[1].classes.push("svg-align")):(c=se.makeVList({positionType:"bottom",positionData:o.depth+.1+u.height,children:[{type:"elem",elem:u},{type:"kern",size:.1},{type:"elem",elem:o}]},t),c.children[0].children[0].children[0].classes.push("svg-align")),a){var f=se.makeSpan(["mord",s.isOver?"mover":"munder"],[c],t);s.isOver?c=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:f},{type:"kern",size:.2},{type:"elem",elem:a}]},t):c=se.makeVList({positionType:"bottom",positionData:f.depth+.2+a.height+a.depth,children:[{type:"elem",elem:a},{type:"kern",size:.2},{type:"elem",elem:f}]},t)}return se.makeSpan(["mord",s.isOver?"mover":"munder"],[c],t)},Cz=(e,t)=>{var r=ui.mathMLnode(e.label);return new ze.MathNode(e.isOver?"mover":"munder",[Bt(e.base,t),r])};Oe({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(e,t){var{parser:r,funcName:a}=e;return{type:"horizBrace",mode:r.mode,label:a,isOver:/^\\over/.test(a),base:t[0]}},htmlBuilder:G6,mathmlBuilder:Cz});Oe({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,a=t[1],s=ut(t[0],"url").url;return r.settings.isTrusted({command:"\\href",url:s})?{type:"href",mode:r.mode,href:s,body:xr(a)}:r.formatUnsupportedCmd("\\href")},htmlBuilder:(e,t)=>{var r=Dr(e.body,t,!1);return se.makeAnchor(e.href,[],r,t)},mathmlBuilder:(e,t)=>{var r=Wi(e.body,t);return r instanceof Ca||(r=new Ca("mrow",[r])),r.setAttribute("href",e.href),r}});Oe({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,a=ut(t[0],"url").url;if(!r.settings.isTrusted({command:"\\url",url:a}))return r.formatUnsupportedCmd("\\url");for(var s=[],o=0;o<a.length;o++){var u=a[o];u==="~"&&(u="\\textasciitilde"),s.push({type:"textord",mode:"text",text:u})}var c={type:"text",mode:r.mode,font:"\\texttt",body:s};return{type:"href",mode:r.mode,href:a,body:xr(c)}}});Oe({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(e,t){var{parser:r}=e;return{type:"hbox",mode:r.mode,body:xr(t[0])}},htmlBuilder(e,t){var r=Dr(e.body,t,!1);return se.makeFragment(r)},mathmlBuilder(e,t){return new ze.MathNode("mrow",pa(e.body,t))}});Oe({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:a,token:s}=e,o=ut(t[0],"raw").string,u=t[1];r.settings.strict&&r.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var c,f={};switch(a){case"\\htmlClass":f.class=o,c={command:"\\htmlClass",class:o};break;case"\\htmlId":f.id=o,c={command:"\\htmlId",id:o};break;case"\\htmlStyle":f.style=o,c={command:"\\htmlStyle",style:o};break;case"\\htmlData":{for(var h=o.split(","),p=0;p<h.length;p++){var v=h[p].split("=");if(v.length!==2)throw new ke("Error parsing key-value for \\htmlData");f["data-"+v[0].trim()]=v[1].trim()}c={command:"\\htmlData",attributes:f};break}default:throw new Error("Unrecognized html command")}return r.settings.isTrusted(c)?{type:"html",mode:r.mode,attributes:f,body:xr(u)}:r.formatUnsupportedCmd(a)},htmlBuilder:(e,t)=>{var r=Dr(e.body,t,!1),a=["enclosing"];e.attributes.class&&a.push(...e.attributes.class.trim().split(/\s+/));var s=se.makeSpan(a,r,t);for(var o in e.attributes)o!=="class"&&e.attributes.hasOwnProperty(o)&&s.setAttribute(o,e.attributes[o]);return s},mathmlBuilder:(e,t)=>Wi(e.body,t)});Oe({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"htmlmathml",mode:r.mode,html:xr(t[0]),mathml:xr(t[1])}},htmlBuilder:(e,t)=>{var r=Dr(e.html,t,!1);return se.makeFragment(r)},mathmlBuilder:(e,t)=>Wi(e.mathml,t)});var om=function(t){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(t))return{number:+t,unit:"bp"};var r=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(t);if(!r)throw new ke("Invalid size: '"+t+"' in \\includegraphics");var a={number:+(r[1]+r[2]),unit:r[3]};if(!c6(a))throw new ke("Invalid unit: '"+a.unit+"' in \\includegraphics.");return a};Oe({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(e,t,r)=>{var{parser:a}=e,s={number:0,unit:"em"},o={number:.9,unit:"em"},u={number:0,unit:"em"},c="";if(r[0])for(var f=ut(r[0],"raw").string,h=f.split(","),p=0;p<h.length;p++){var v=h[p].split("=");if(v.length===2){var b=v[1].trim();switch(v[0].trim()){case"alt":c=b;break;case"width":s=om(b);break;case"height":o=om(b);break;case"totalheight":u=om(b);break;default:throw new ke("Invalid key: '"+v[0]+"' in \\includegraphics.")}}}var y=ut(t[0],"url").url;return c===""&&(c=y,c=c.replace(/^.*[\\/]/,""),c=c.substring(0,c.lastIndexOf("."))),a.settings.isTrusted({command:"\\includegraphics",url:y})?{type:"includegraphics",mode:a.mode,alt:c,width:s,height:o,totalheight:u,src:y}:a.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(e,t)=>{var r=sr(e.height,t),a=0;e.totalheight.number>0&&(a=sr(e.totalheight,t)-r);var s=0;e.width.number>0&&(s=sr(e.width,t));var o={height:Ne(r+a)};s>0&&(o.width=Ne(s)),a>0&&(o.verticalAlign=Ne(-a));var u=new C_(e.src,e.alt,o);return u.height=r,u.depth=a,u},mathmlBuilder:(e,t)=>{var r=new ze.MathNode("mglyph",[]);r.setAttribute("alt",e.alt);var a=sr(e.height,t),s=0;if(e.totalheight.number>0&&(s=sr(e.totalheight,t)-a,r.setAttribute("valign",Ne(-s))),r.setAttribute("height",Ne(a+s)),e.width.number>0){var o=sr(e.width,t);r.setAttribute("width",Ne(o))}return r.setAttribute("src",e.src),r}});Oe({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:a}=e,s=ut(t[0],"size");if(r.settings.strict){var o=a[1]==="m",u=s.value.unit==="mu";o?(u||r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" supports only mu units, "+("not "+s.value.unit+" units")),r.mode!=="math"&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" works only in math mode")):u&&r.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+a+" doesn't support mu units")}return{type:"kern",mode:r.mode,dimension:s.value}},htmlBuilder(e,t){return se.makeGlue(e.dimension,t)},mathmlBuilder(e,t){var r=sr(e.dimension,t);return new ze.SpaceNode(r)}});Oe({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=t[0];return{type:"lap",mode:r.mode,alignment:a.slice(5),body:s}},htmlBuilder:(e,t)=>{var r;e.alignment==="clap"?(r=se.makeSpan([],[zt(e.body,t)]),r=se.makeSpan(["inner"],[r],t)):r=se.makeSpan(["inner"],[zt(e.body,t)]);var a=se.makeSpan(["fix"],[]),s=se.makeSpan([e.alignment],[r,a],t),o=se.makeSpan(["strut"]);return o.style.height=Ne(s.height+s.depth),s.depth&&(o.style.verticalAlign=Ne(-s.depth)),s.children.unshift(o),s=se.makeSpan(["thinbox"],[s],t),se.makeSpan(["mord","vbox"],[s],t)},mathmlBuilder:(e,t)=>{var r=new ze.MathNode("mpadded",[Bt(e.body,t)]);if(e.alignment!=="rlap"){var a=e.alignment==="llap"?"-1":"-0.5";r.setAttribute("lspace",a+"width")}return r.setAttribute("width","0px"),r}});Oe({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){var{funcName:r,parser:a}=e,s=a.mode;a.switchMode("math");var o=r==="\\("?"\\)":"$",u=a.parseExpression(!1,o);return a.expect(o),a.switchMode(s),{type:"styling",mode:a.mode,style:"text",body:u}}});Oe({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(e,t){throw new ke("Mismatched "+e.funcName)}});var Vy=(e,t)=>{switch(t.style.size){case Je.DISPLAY.size:return e.display;case Je.TEXT.size:return e.text;case Je.SCRIPT.size:return e.script;case Je.SCRIPTSCRIPT.size:return e.scriptscript;default:return e.text}};Oe({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(e,t)=>{var{parser:r}=e;return{type:"mathchoice",mode:r.mode,display:xr(t[0]),text:xr(t[1]),script:xr(t[2]),scriptscript:xr(t[3])}},htmlBuilder:(e,t)=>{var r=Vy(e,t),a=Dr(r,t,!1);return se.makeFragment(a)},mathmlBuilder:(e,t)=>{var r=Vy(e,t);return Wi(r,t)}});var V6=(e,t,r,a,s,o,u)=>{e=se.makeSpan([],[e]);var c=r&&Fe.isCharacterBox(r),f,h;if(t){var p=zt(t,a.havingStyle(s.sup()),a);h={elem:p,kern:Math.max(a.fontMetrics().bigOpSpacing1,a.fontMetrics().bigOpSpacing3-p.depth)}}if(r){var v=zt(r,a.havingStyle(s.sub()),a);f={elem:v,kern:Math.max(a.fontMetrics().bigOpSpacing2,a.fontMetrics().bigOpSpacing4-v.height)}}var b;if(h&&f){var y=a.fontMetrics().bigOpSpacing5+f.elem.height+f.elem.depth+f.kern+e.depth+u;b=se.makeVList({positionType:"bottom",positionData:y,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:f.elem,marginLeft:Ne(-o)},{type:"kern",size:f.kern},{type:"elem",elem:e},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:Ne(o)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else if(f){var k=e.height-u;b=se.makeVList({positionType:"top",positionData:k,children:[{type:"kern",size:a.fontMetrics().bigOpSpacing5},{type:"elem",elem:f.elem,marginLeft:Ne(-o)},{type:"kern",size:f.kern},{type:"elem",elem:e}]},a)}else if(h){var _=e.depth+u;b=se.makeVList({positionType:"bottom",positionData:_,children:[{type:"elem",elem:e},{type:"kern",size:h.kern},{type:"elem",elem:h.elem,marginLeft:Ne(o)},{type:"kern",size:a.fontMetrics().bigOpSpacing5}]},a)}else return e;var T=[b];if(f&&o!==0&&!c){var R=se.makeSpan(["mspace"],[],a);R.style.marginRight=Ne(o),T.unshift(R)}return se.makeSpan(["mop","op-limits"],T,a)},F6=["\\smallint"],el=(e,t)=>{var r,a,s=!1,o;e.type==="supsub"?(r=e.sup,a=e.sub,o=ut(e.base,"op"),s=!0):o=ut(e,"op");var u=t.style,c=!1;u.size===Je.DISPLAY.size&&o.symbol&&!Fe.contains(F6,o.name)&&(c=!0);var f;if(o.symbol){var h=c?"Size2-Regular":"Size1-Regular",p="";if((o.name==="\\oiint"||o.name==="\\oiiint")&&(p=o.name.slice(1),o.name=p==="oiint"?"\\iint":"\\iiint"),f=se.makeSymbol(o.name,h,"math",t,["mop","op-symbol",c?"large-op":"small-op"]),p.length>0){var v=f.italic,b=se.staticSvg(p+"Size"+(c?"2":"1"),t);f=se.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:0},{type:"elem",elem:b,shift:c?.08:0}]},t),o.name="\\"+p,f.classes.unshift("mop"),f.italic=v}}else if(o.body){var y=Dr(o.body,t,!0);y.length===1&&y[0]instanceof Wa?(f=y[0],f.classes[0]="mop"):f=se.makeSpan(["mop"],y,t)}else{for(var k=[],_=1;_<o.name.length;_++)k.push(se.mathsym(o.name[_],o.mode,t));f=se.makeSpan(["mop"],k,t)}var T=0,R=0;return(f instanceof Wa||o.name==="\\oiint"||o.name==="\\oiiint")&&!o.suppressBaseShift&&(T=(f.height-f.depth)/2-t.fontMetrics().axisHeight,R=f.italic),s?V6(f,r,a,t,u,R,T):(T&&(f.style.position="relative",f.style.top=Ne(T)),f)},Du=(e,t)=>{var r;if(e.symbol)r=new Ca("mo",[Qa(e.name,e.mode)]),Fe.contains(F6,e.name)&&r.setAttribute("largeop","false");else if(e.body)r=new Ca("mo",pa(e.body,t));else{r=new Ca("mi",[new An(e.name.slice(1))]);var a=new Ca("mo",[Qa("","text")]);e.parentIsSupSub?r=new Ca("mrow",[r,a]):r=w6([r,a])}return r},Oz={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};Oe({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=a;return s.length===1&&(s=Oz[s]),{type:"op",mode:r.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:s}},htmlBuilder:el,mathmlBuilder:Du});Oe({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(e,t)=>{var{parser:r}=e,a=t[0];return{type:"op",mode:r.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:xr(a)}},htmlBuilder:el,mathmlBuilder:Du});var Rz={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};Oe({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:el,mathmlBuilder:Du});Oe({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e;return{type:"op",mode:t.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:r}},htmlBuilder:el,mathmlBuilder:Du});Oe({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(e){var{parser:t,funcName:r}=e,a=r;return a.length===1&&(a=Rz[a]),{type:"op",mode:t.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:a}},htmlBuilder:el,mathmlBuilder:Du});var Y6=(e,t)=>{var r,a,s=!1,o;e.type==="supsub"?(r=e.sup,a=e.sub,o=ut(e.base,"operatorname"),s=!0):o=ut(e,"operatorname");var u;if(o.body.length>0){for(var c=o.body.map(v=>{var b=v.text;return typeof b=="string"?{type:"textord",mode:v.mode,text:b}:v}),f=Dr(c,t.withFont("mathrm"),!0),h=0;h<f.length;h++){var p=f[h];p instanceof Wa&&(p.text=p.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}u=se.makeSpan(["mop"],f,t)}else u=se.makeSpan(["mop"],[],t);return s?V6(u,r,a,t,t.style,0,0):u},Iz=(e,t)=>{for(var r=pa(e.body,t.withFont("mathrm")),a=!0,s=0;s<r.length;s++){var o=r[s];if(!(o instanceof ze.SpaceNode))if(o instanceof ze.MathNode)switch(o.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var u=o.children[0];o.children.length===1&&u instanceof ze.TextNode?u.text=u.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):a=!1;break}default:a=!1}else a=!1}if(a){var c=r.map(p=>p.toText()).join("");r=[new ze.TextNode(c)]}var f=new ze.MathNode("mi",r);f.setAttribute("mathvariant","normal");var h=new ze.MathNode("mo",[Qa("","text")]);return e.parentIsSupSub?new ze.MathNode("mrow",[f,h]):ze.newDocumentFragment([f,h])};Oe({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(e,t)=>{var{parser:r,funcName:a}=e,s=t[0];return{type:"operatorname",mode:r.mode,body:xr(s),alwaysHandleSupSub:a==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:Y6,mathmlBuilder:Iz});C("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");Zs({type:"ordgroup",htmlBuilder(e,t){return e.semisimple?se.makeFragment(Dr(e.body,t,!1)):se.makeSpan(["mord"],Dr(e.body,t,!0),t)},mathmlBuilder(e,t){return Wi(e.body,t,!0)}});Oe({type:"overline",names:["\\overline"],props:{numArgs:1},handler(e,t){var{parser:r}=e,a=t[0];return{type:"overline",mode:r.mode,body:a}},htmlBuilder(e,t){var r=zt(e.body,t.havingCrampedStyle()),a=se.makeLineSpan("overline-line",t),s=t.fontMetrics().defaultRuleThickness,o=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r},{type:"kern",size:3*s},{type:"elem",elem:a},{type:"kern",size:s}]},t);return se.makeSpan(["mord","overline"],[o],t)},mathmlBuilder(e,t){var r=new ze.MathNode("mo",[new ze.TextNode("")]);r.setAttribute("stretchy","true");var a=new ze.MathNode("mover",[Bt(e.body,t),r]);return a.setAttribute("accent","true"),a}});Oe({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,a=t[0];return{type:"phantom",mode:r.mode,body:xr(a)}},htmlBuilder:(e,t)=>{var r=Dr(e.body,t.withPhantom(),!1);return se.makeFragment(r)},mathmlBuilder:(e,t)=>{var r=pa(e.body,t);return new ze.MathNode("mphantom",r)}});Oe({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,a=t[0];return{type:"hphantom",mode:r.mode,body:a}},htmlBuilder:(e,t)=>{var r=se.makeSpan([],[zt(e.body,t.withPhantom())]);if(r.height=0,r.depth=0,r.children)for(var a=0;a<r.children.length;a++)r.children[a].height=0,r.children[a].depth=0;return r=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t),se.makeSpan(["mord"],[r],t)},mathmlBuilder:(e,t)=>{var r=pa(xr(e.body),t),a=new ze.MathNode("mphantom",r),s=new ze.MathNode("mpadded",[a]);return s.setAttribute("height","0px"),s.setAttribute("depth","0px"),s}});Oe({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(e,t)=>{var{parser:r}=e,a=t[0];return{type:"vphantom",mode:r.mode,body:a}},htmlBuilder:(e,t)=>{var r=se.makeSpan(["inner"],[zt(e.body,t.withPhantom())]),a=se.makeSpan(["fix"],[]);return se.makeSpan(["mord","rlap"],[r,a],t)},mathmlBuilder:(e,t)=>{var r=pa(xr(e.body),t),a=new ze.MathNode("mphantom",r),s=new ze.MathNode("mpadded",[a]);return s.setAttribute("width","0px"),s}});Oe({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(e,t){var{parser:r}=e,a=ut(t[0],"size").value,s=t[1];return{type:"raisebox",mode:r.mode,dy:a,body:s}},htmlBuilder(e,t){var r=zt(e.body,t),a=sr(e.dy,t);return se.makeVList({positionType:"shift",positionData:-a,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){var r=new ze.MathNode("mpadded",[Bt(e.body,t)]),a=e.dy.number+e.dy.unit;return r.setAttribute("voffset",a),r}});Oe({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0,allowedInArgument:!0},handler(e){var{parser:t}=e;return{type:"internal",mode:t.mode}}});Oe({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["size","size","size"]},handler(e,t,r){var{parser:a}=e,s=r[0],o=ut(t[0],"size"),u=ut(t[1],"size");return{type:"rule",mode:a.mode,shift:s&&ut(s,"size").value,width:o.value,height:u.value}},htmlBuilder(e,t){var r=se.makeSpan(["mord","rule"],[],t),a=sr(e.width,t),s=sr(e.height,t),o=e.shift?sr(e.shift,t):0;return r.style.borderRightWidth=Ne(a),r.style.borderTopWidth=Ne(s),r.style.bottom=Ne(o),r.width=a,r.height=s+o,r.depth=-o,r.maxFontSize=s*1.125*t.sizeMultiplier,r},mathmlBuilder(e,t){var r=sr(e.width,t),a=sr(e.height,t),s=e.shift?sr(e.shift,t):0,o=t.color&&t.getColor()||"black",u=new ze.MathNode("mspace");u.setAttribute("mathbackground",o),u.setAttribute("width",Ne(r)),u.setAttribute("height",Ne(a));var c=new ze.MathNode("mpadded",[u]);return s>=0?c.setAttribute("height",Ne(s)):(c.setAttribute("height",Ne(s)),c.setAttribute("depth",Ne(-s))),c.setAttribute("voffset",Ne(s)),c}});function X6(e,t,r){for(var a=Dr(e,t,!1),s=t.sizeMultiplier/r.sizeMultiplier,o=0;o<a.length;o++){var u=a[o].classes.indexOf("sizing");u<0?Array.prototype.push.apply(a[o].classes,t.sizingClasses(r)):a[o].classes[u+1]==="reset-size"+t.size&&(a[o].classes[u+1]="reset-size"+r.size),a[o].height*=s,a[o].depth*=s}return se.makeFragment(a)}var Fy=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Dz=(e,t)=>{var r=t.havingSize(e.size);return X6(e.body,r,t)};Oe({type:"sizing",names:Fy,props:{numArgs:0,allowedInText:!0},handler:(e,t)=>{var{breakOnTokenText:r,funcName:a,parser:s}=e,o=s.parseExpression(!1,r);return{type:"sizing",mode:s.mode,size:Fy.indexOf(a)+1,body:o}},htmlBuilder:Dz,mathmlBuilder:(e,t)=>{var r=t.havingSize(e.size),a=pa(e.body,r),s=new ze.MathNode("mstyle",a);return s.setAttribute("mathsize",Ne(r.sizeMultiplier)),s}});Oe({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(e,t,r)=>{var{parser:a}=e,s=!1,o=!1,u=r[0]&&ut(r[0],"ordgroup");if(u)for(var c="",f=0;f<u.body.length;++f){var h=u.body[f];if(c=h.text,c==="t")s=!0;else if(c==="b")o=!0;else{s=!1,o=!1;break}}else s=!0,o=!0;var p=t[0];return{type:"smash",mode:a.mode,body:p,smashHeight:s,smashDepth:o}},htmlBuilder:(e,t)=>{var r=se.makeSpan([],[zt(e.body,t)]);if(!e.smashHeight&&!e.smashDepth)return r;if(e.smashHeight&&(r.height=0,r.children))for(var a=0;a<r.children.length;a++)r.children[a].height=0;if(e.smashDepth&&(r.depth=0,r.children))for(var s=0;s<r.children.length;s++)r.children[s].depth=0;var o=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r}]},t);return se.makeSpan(["mord"],[o],t)},mathmlBuilder:(e,t)=>{var r=new ze.MathNode("mpadded",[Bt(e.body,t)]);return e.smashHeight&&r.setAttribute("height","0px"),e.smashDepth&&r.setAttribute("depth","0px"),r}});Oe({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(e,t,r){var{parser:a}=e,s=r[0],o=t[0];return{type:"sqrt",mode:a.mode,body:o,index:s}},htmlBuilder(e,t){var r=zt(e.body,t.havingCrampedStyle());r.height===0&&(r.height=t.fontMetrics().xHeight),r=se.wrapFragment(r,t);var a=t.fontMetrics(),s=a.defaultRuleThickness,o=s;t.style.id<Je.TEXT.id&&(o=t.fontMetrics().xHeight);var u=s+o/4,c=r.height+r.depth+u+s,{span:f,ruleWidth:h,advanceWidth:p}=ii.sqrtImage(c,t),v=f.height-h;v>r.height+r.depth+u&&(u=(u+v-r.height-r.depth)/2);var b=f.height-r.height-u-h;r.style.paddingLeft=Ne(p);var y=se.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:r,wrapperClasses:["svg-align"]},{type:"kern",size:-(r.height+b)},{type:"elem",elem:f},{type:"kern",size:h}]},t);if(e.index){var k=t.havingStyle(Je.SCRIPTSCRIPT),_=zt(e.index,k,t),T=.6*(y.height-y.depth),R=se.makeVList({positionType:"shift",positionData:-T,children:[{type:"elem",elem:_}]},t),O=se.makeSpan(["root"],[R]);return se.makeSpan(["mord","sqrt"],[O,y],t)}else return se.makeSpan(["mord","sqrt"],[y],t)},mathmlBuilder(e,t){var{body:r,index:a}=e;return a?new ze.MathNode("mroot",[Bt(r,t),Bt(a,t)]):new ze.MathNode("msqrt",[Bt(r,t)])}});var Yy={display:Je.DISPLAY,text:Je.TEXT,script:Je.SCRIPT,scriptscript:Je.SCRIPTSCRIPT};Oe({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(e,t){var{breakOnTokenText:r,funcName:a,parser:s}=e,o=s.parseExpression(!0,r),u=a.slice(1,a.length-5);return{type:"styling",mode:s.mode,style:u,body:o}},htmlBuilder(e,t){var r=Yy[e.style],a=t.havingStyle(r).withFont("");return X6(e.body,a,t)},mathmlBuilder(e,t){var r=Yy[e.style],a=t.havingStyle(r),s=pa(e.body,a),o=new ze.MathNode("mstyle",s),u={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},c=u[e.style];return o.setAttribute("scriptlevel",c[0]),o.setAttribute("displaystyle",c[1]),o}});var jz=function(t,r){var a=t.base;if(a)if(a.type==="op"){var s=a.limits&&(r.style.size===Je.DISPLAY.size||a.alwaysHandleSupSub);return s?el:null}else if(a.type==="operatorname"){var o=a.alwaysHandleSupSub&&(r.style.size===Je.DISPLAY.size||a.limits);return o?Y6:null}else{if(a.type==="accent")return Fe.isCharacterBox(a.base)?Lp:null;if(a.type==="horizBrace"){var u=!t.sub;return u===a.isOver?G6:null}else return null}else return null};Zs({type:"supsub",htmlBuilder(e,t){var r=jz(e,t);if(r)return r(e,t);var{base:a,sup:s,sub:o}=e,u=zt(a,t),c,f,h=t.fontMetrics(),p=0,v=0,b=a&&Fe.isCharacterBox(a);if(s){var y=t.havingStyle(t.style.sup());c=zt(s,y,t),b||(p=u.height-y.fontMetrics().supDrop*y.sizeMultiplier/t.sizeMultiplier)}if(o){var k=t.havingStyle(t.style.sub());f=zt(o,k,t),b||(v=u.depth+k.fontMetrics().subDrop*k.sizeMultiplier/t.sizeMultiplier)}var _;t.style===Je.DISPLAY?_=h.sup1:t.style.cramped?_=h.sup3:_=h.sup2;var T=t.sizeMultiplier,R=Ne(.5/h.ptPerEm/T),O=null;if(f){var M=e.base&&e.base.type==="op"&&e.base.name&&(e.base.name==="\\oiint"||e.base.name==="\\oiiint");(u instanceof Wa||M)&&(O=Ne(-u.italic))}var j;if(c&&f){p=Math.max(p,_,c.depth+.25*h.xHeight),v=Math.max(v,h.sub2);var I=h.defaultRuleThickness,$=4*I;if(p-c.depth-(f.height-v)<$){v=$-(p-c.depth)+f.height;var E=.8*h.xHeight-(p-c.depth);E>0&&(p+=E,v-=E)}var D=[{type:"elem",elem:f,shift:v,marginRight:R,marginLeft:O},{type:"elem",elem:c,shift:-p,marginRight:R}];j=se.makeVList({positionType:"individualShift",children:D},t)}else if(f){v=Math.max(v,h.sub1,f.height-.8*h.xHeight);var V=[{type:"elem",elem:f,marginLeft:O,marginRight:R}];j=se.makeVList({positionType:"shift",positionData:v,children:V},t)}else if(c)p=Math.max(p,_,c.depth+.25*h.xHeight),j=se.makeVList({positionType:"shift",positionData:-p,children:[{type:"elem",elem:c,marginRight:R}]},t);else throw new Error("supsub must have either sup or sub.");var de=Vm(u,"right")||"mord";return se.makeSpan([de],[u,se.makeSpan(["msupsub"],[j])],t)},mathmlBuilder(e,t){var r=!1,a,s;e.base&&e.base.type==="horizBrace"&&(s=!!e.sup,s===e.base.isOver&&(r=!0,a=e.base.isOver)),e.base&&(e.base.type==="op"||e.base.type==="operatorname")&&(e.base.parentIsSupSub=!0);var o=[Bt(e.base,t)];e.sub&&o.push(Bt(e.sub,t)),e.sup&&o.push(Bt(e.sup,t));var u;if(r)u=a?"mover":"munder";else if(e.sub)if(e.sup){var h=e.base;h&&h.type==="op"&&h.limits&&t.style===Je.DISPLAY||h&&h.type==="operatorname"&&h.alwaysHandleSupSub&&(t.style===Je.DISPLAY||h.limits)?u="munderover":u="msubsup"}else{var f=e.base;f&&f.type==="op"&&f.limits&&(t.style===Je.DISPLAY||f.alwaysHandleSupSub)||f&&f.type==="operatorname"&&f.alwaysHandleSupSub&&(f.limits||t.style===Je.DISPLAY)?u="munder":u="msub"}else{var c=e.base;c&&c.type==="op"&&c.limits&&(t.style===Je.DISPLAY||c.alwaysHandleSupSub)||c&&c.type==="operatorname"&&c.alwaysHandleSupSub&&(c.limits||t.style===Je.DISPLAY)?u="mover":u="msup"}return new ze.MathNode(u,o)}});Zs({type:"atom",htmlBuilder(e,t){return se.mathsym(e.text,e.mode,t,["m"+e.family])},mathmlBuilder(e,t){var r=new ze.MathNode("mo",[Qa(e.text,e.mode)]);if(e.family==="bin"){var a=$p(e,t);a==="bold-italic"&&r.setAttribute("mathvariant",a)}else e.family==="punct"?r.setAttribute("separator","true"):(e.family==="open"||e.family==="close")&&r.setAttribute("stretchy","false");return r}});var K6={mi:"italic",mn:"normal",mtext:"normal"};Zs({type:"mathord",htmlBuilder(e,t){return se.makeOrd(e,t,"mathord")},mathmlBuilder(e,t){var r=new ze.MathNode("mi",[Qa(e.text,e.mode,t)]),a=$p(e,t)||"italic";return a!==K6[r.type]&&r.setAttribute("mathvariant",a),r}});Zs({type:"textord",htmlBuilder(e,t){return se.makeOrd(e,t,"textord")},mathmlBuilder(e,t){var r=Qa(e.text,e.mode,t),a=$p(e,t)||"normal",s;return e.mode==="text"?s=new ze.MathNode("mtext",[r]):/[0-9]/.test(e.text)?s=new ze.MathNode("mn",[r]):e.text==="\\prime"?s=new ze.MathNode("mo",[r]):s=new ze.MathNode("mi",[r]),a!==K6[s.type]&&s.setAttribute("mathvariant",a),s}});var lm={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},um={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};Zs({type:"spacing",htmlBuilder(e,t){if(um.hasOwnProperty(e.text)){var r=um[e.text].className||"";if(e.mode==="text"){var a=se.makeOrd(e,t,"textord");return a.classes.push(r),a}else return se.makeSpan(["mspace",r],[se.mathsym(e.text,e.mode,t)],t)}else{if(lm.hasOwnProperty(e.text))return se.makeSpan(["mspace",lm[e.text]],[],t);throw new ke('Unknown type of space "'+e.text+'"')}},mathmlBuilder(e,t){var r;if(um.hasOwnProperty(e.text))r=new ze.MathNode("mtext",[new ze.TextNode("")]);else{if(lm.hasOwnProperty(e.text))return new ze.MathNode("mspace");throw new ke('Unknown type of space "'+e.text+'"')}return r}});var Xy=()=>{var e=new ze.MathNode("mtd",[]);return e.setAttribute("width","50%"),e};Zs({type:"tag",mathmlBuilder(e,t){var r=new ze.MathNode("mtable",[new ze.MathNode("mtr",[Xy(),new ze.MathNode("mtd",[Wi(e.body,t)]),Xy(),new ze.MathNode("mtd",[Wi(e.tag,t)])])]);return r.setAttribute("width","100%"),r}});var Ky={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},Jy={"\\textbf":"textbf","\\textmd":"textmd"},$z={"\\textit":"textit","\\textup":"textup"},Wy=(e,t)=>{var r=e.font;if(r){if(Ky[r])return t.withTextFontFamily(Ky[r]);if(Jy[r])return t.withTextFontWeight(Jy[r]);if(r==="\\emph")return t.fontShape==="textit"?t.withTextFontShape("textup"):t.withTextFontShape("textit")}else return t;return t.withTextFontShape($z[r])};Oe({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(e,t){var{parser:r,funcName:a}=e,s=t[0];return{type:"text",mode:r.mode,body:xr(s),font:a}},htmlBuilder(e,t){var r=Wy(e,t),a=Dr(e.body,r,!0);return se.makeSpan(["mord","text"],a,r)},mathmlBuilder(e,t){var r=Wy(e,t);return Wi(e.body,r)}});Oe({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(e,t){var{parser:r}=e;return{type:"underline",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=zt(e.body,t),a=se.makeLineSpan("underline-line",t),s=t.fontMetrics().defaultRuleThickness,o=se.makeVList({positionType:"top",positionData:r.height,children:[{type:"kern",size:s},{type:"elem",elem:a},{type:"kern",size:3*s},{type:"elem",elem:r}]},t);return se.makeSpan(["mord","underline"],[o],t)},mathmlBuilder(e,t){var r=new ze.MathNode("mo",[new ze.TextNode("")]);r.setAttribute("stretchy","true");var a=new ze.MathNode("munder",[Bt(e.body,t),r]);return a.setAttribute("accentunder","true"),a}});Oe({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(e,t){var{parser:r}=e;return{type:"vcenter",mode:r.mode,body:t[0]}},htmlBuilder(e,t){var r=zt(e.body,t),a=t.fontMetrics().axisHeight,s=.5*(r.height-a-(r.depth+a));return se.makeVList({positionType:"shift",positionData:s,children:[{type:"elem",elem:r}]},t)},mathmlBuilder(e,t){return new ze.MathNode("mpadded",[Bt(e.body,t)],["vcenter"])}});Oe({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(e,t,r){throw new ke("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(e,t){for(var r=Qy(e),a=[],s=t.havingStyle(t.style.text()),o=0;o<r.length;o++){var u=r[o];u==="~"&&(u="\\textasciitilde"),a.push(se.makeSymbol(u,"Typewriter-Regular",e.mode,s,["mord","texttt"]))}return se.makeSpan(["mord","text"].concat(s.sizingClasses(t)),se.tryCombineChars(a),s)},mathmlBuilder(e,t){var r=new ze.TextNode(Qy(e)),a=new ze.MathNode("mtext",[r]);return a.setAttribute("mathvariant","monospace"),a}});var Qy=e=>e.body.replace(/ /g,e.star?"":""),Vi=b6,J6=`[ \r
	]`,Bz="\\\\[a-zA-Z@]+",Lz="\\\\[^\uD800-\uDFFF]",Uz="("+Bz+")"+J6+"*",qz=`\\\\(
|[ \r	]+
?)[ \r	]*`,Km="[-]",Pz=new RegExp(Km+"+$"),Hz="("+J6+"+)|"+(qz+"|")+"([!-\\[\\]---]"+(Km+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(Km+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+Uz)+("|"+Lz+")");class e2{constructor(t,r){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=t,this.settings=r,this.tokenRegex=new RegExp(Hz,"g"),this.catcodes={"%":14,"~":13}}setCatcode(t,r){this.catcodes[t]=r}lex(){var t=this.input,r=this.tokenRegex.lastIndex;if(r===t.length)return new Ja("EOF",new Ea(this,r,r));var a=this.tokenRegex.exec(t);if(a===null||a.index!==r)throw new ke("Unexpected character: '"+t[r]+"'",new Ja(t[r],new Ea(this,r,r+1)));var s=a[6]||a[3]||(a[2]?"\\ ":" ");if(this.catcodes[s]===14){var o=t.indexOf(`
`,this.tokenRegex.lastIndex);return o===-1?(this.tokenRegex.lastIndex=t.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=o+1,this.lex()}return new Ja(s,new Ea(this,r,this.tokenRegex.lastIndex))}}class Zz{constructor(t,r){t===void 0&&(t={}),r===void 0&&(r={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=r,this.builtins=t,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ke("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var t=this.undefStack.pop();for(var r in t)t.hasOwnProperty(r)&&(t[r]==null?delete this.current[r]:this.current[r]=t[r])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(t){return this.current.hasOwnProperty(t)||this.builtins.hasOwnProperty(t)}get(t){return this.current.hasOwnProperty(t)?this.current[t]:this.builtins[t]}set(t,r,a){if(a===void 0&&(a=!1),a){for(var s=0;s<this.undefStack.length;s++)delete this.undefStack[s][t];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][t]=r)}else{var o=this.undefStack[this.undefStack.length-1];o&&!o.hasOwnProperty(t)&&(o[t]=this.current[t])}r==null?delete this.current[t]:this.current[t]=r}}var Gz=U6;C("\\noexpand",function(e){var t=e.popToken();return e.isExpandable(t.text)&&(t.noexpand=!0,t.treatAsRelax=!0),{tokens:[t],numArgs:0}});C("\\expandafter",function(e){var t=e.popToken();return e.expandOnce(!0),{tokens:[t],numArgs:0}});C("\\@firstoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[0],numArgs:0}});C("\\@secondoftwo",function(e){var t=e.consumeArgs(2);return{tokens:t[1],numArgs:0}});C("\\@ifnextchar",function(e){var t=e.consumeArgs(3);e.consumeSpaces();var r=e.future();return t[0].length===1&&t[0][0].text===r.text?{tokens:t[1],numArgs:0}:{tokens:t[2],numArgs:0}});C("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");C("\\TextOrMath",function(e){var t=e.consumeArgs(2);return e.mode==="text"?{tokens:t[0],numArgs:0}:{tokens:t[1],numArgs:0}});var t2={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};C("\\char",function(e){var t=e.popToken(),r,a="";if(t.text==="'")r=8,t=e.popToken();else if(t.text==='"')r=16,t=e.popToken();else if(t.text==="`")if(t=e.popToken(),t.text[0]==="\\")a=t.text.charCodeAt(1);else{if(t.text==="EOF")throw new ke("\\char` missing argument");a=t.text.charCodeAt(0)}else r=10;if(r){if(a=t2[t.text],a==null||a>=r)throw new ke("Invalid base-"+r+" digit "+t.text);for(var s;(s=t2[e.future().text])!=null&&s<r;)a*=r,a+=s,e.popToken()}return"\\@char{"+a+"}"});var Fp=(e,t,r,a)=>{var s=e.consumeArg().tokens;if(s.length!==1)throw new ke("\\newcommand's first argument must be a macro name");var o=s[0].text,u=e.isDefined(o);if(u&&!t)throw new ke("\\newcommand{"+o+"} attempting to redefine "+(o+"; use \\renewcommand"));if(!u&&!r)throw new ke("\\renewcommand{"+o+"} when command "+o+" does not yet exist; use \\newcommand");var c=0;if(s=e.consumeArg().tokens,s.length===1&&s[0].text==="["){for(var f="",h=e.expandNextToken();h.text!=="]"&&h.text!=="EOF";)f+=h.text,h=e.expandNextToken();if(!f.match(/^\s*[0-9]+\s*$/))throw new ke("Invalid number of arguments: "+f);c=parseInt(f),s=e.consumeArg().tokens}return u&&a||e.macros.set(o,{tokens:s,numArgs:c}),""};C("\\newcommand",e=>Fp(e,!1,!0,!1));C("\\renewcommand",e=>Fp(e,!0,!1,!1));C("\\providecommand",e=>Fp(e,!0,!0,!0));C("\\message",e=>{var t=e.consumeArgs(1)[0];return console.log(t.reverse().map(r=>r.text).join("")),""});C("\\errmessage",e=>{var t=e.consumeArgs(1)[0];return console.error(t.reverse().map(r=>r.text).join("")),""});C("\\show",e=>{var t=e.popToken(),r=t.text;return console.log(t,e.macros.get(r),Vi[r],Ut.math[r],Ut.text[r]),""});C("\\bgroup","{");C("\\egroup","}");C("~","\\nobreakspace");C("\\lq","`");C("\\rq","'");C("\\aa","\\r a");C("\\AA","\\r A");C("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");C("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");C("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");C("","\\mathscr{B}");C("","\\mathscr{E}");C("","\\mathscr{F}");C("","\\mathscr{H}");C("","\\mathscr{I}");C("","\\mathscr{L}");C("","\\mathscr{M}");C("","\\mathscr{R}");C("","\\mathfrak{C}");C("","\\mathfrak{H}");C("","\\mathfrak{Z}");C("\\Bbbk","\\Bbb{k}");C("","\\cdotp");C("\\llap","\\mathllap{\\textrm{#1}}");C("\\rlap","\\mathrlap{\\textrm{#1}}");C("\\clap","\\mathclap{\\textrm{#1}}");C("\\mathstrut","\\vphantom{(}");C("\\underbar","\\underline{\\text{#1}}");C("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');C("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");C("\\ne","\\neq");C("","\\neq");C("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");C("","\\notin");C("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");C("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");C("","\\perp");C("","\\mathclose{!\\mkern-0.8mu!}");C("","\\notni");C("","\\ulcorner");C("","\\urcorner");C("","\\llcorner");C("","\\lrcorner");C("","\\copyright");C("","\\textregistered");C("","\\textregistered");C("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');C("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');C("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');C("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');C("\\vdots","{\\varvdots\\rule{0pt}{15pt}}");C("","\\vdots");C("\\varGamma","\\mathit{\\Gamma}");C("\\varDelta","\\mathit{\\Delta}");C("\\varTheta","\\mathit{\\Theta}");C("\\varLambda","\\mathit{\\Lambda}");C("\\varXi","\\mathit{\\Xi}");C("\\varPi","\\mathit{\\Pi}");C("\\varSigma","\\mathit{\\Sigma}");C("\\varUpsilon","\\mathit{\\Upsilon}");C("\\varPhi","\\mathit{\\Phi}");C("\\varPsi","\\mathit{\\Psi}");C("\\varOmega","\\mathit{\\Omega}");C("\\substack","\\begin{subarray}{c}#1\\end{subarray}");C("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");C("\\boxed","\\fbox{$\\displaystyle{#1}$}");C("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");C("\\implies","\\DOTSB\\;\\Longrightarrow\\;");C("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");C("\\dddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ...}}{#1}}");C("\\ddddot","{\\overset{\\raisebox{-0.1ex}{\\normalsize ....}}{#1}}");var r2={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};C("\\dots",function(e){var t="\\dotso",r=e.expandAfterFuture().text;return r in r2?t=r2[r]:(r.slice(0,4)==="\\not"||r in Ut.math&&Fe.contains(["bin","rel"],Ut.math[r].group))&&(t="\\dotsb"),t});var Yp={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};C("\\dotso",function(e){var t=e.future().text;return t in Yp?"\\ldots\\,":"\\ldots"});C("\\dotsc",function(e){var t=e.future().text;return t in Yp&&t!==","?"\\ldots\\,":"\\ldots"});C("\\cdots",function(e){var t=e.future().text;return t in Yp?"\\@cdots\\,":"\\@cdots"});C("\\dotsb","\\cdots");C("\\dotsm","\\cdots");C("\\dotsi","\\!\\cdots");C("\\dotsx","\\ldots\\,");C("\\DOTSI","\\relax");C("\\DOTSB","\\relax");C("\\DOTSX","\\relax");C("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");C("\\,","\\tmspace+{3mu}{.1667em}");C("\\thinspace","\\,");C("\\>","\\mskip{4mu}");C("\\:","\\tmspace+{4mu}{.2222em}");C("\\medspace","\\:");C("\\;","\\tmspace+{5mu}{.2777em}");C("\\thickspace","\\;");C("\\!","\\tmspace-{3mu}{.1667em}");C("\\negthinspace","\\!");C("\\negmedspace","\\tmspace-{4mu}{.2222em}");C("\\negthickspace","\\tmspace-{5mu}{.277em}");C("\\enspace","\\kern.5em ");C("\\enskip","\\hskip.5em\\relax");C("\\quad","\\hskip1em\\relax");C("\\qquad","\\hskip2em\\relax");C("\\tag","\\@ifstar\\tag@literal\\tag@paren");C("\\tag@paren","\\tag@literal{({#1})}");C("\\tag@literal",e=>{if(e.macros.get("\\df@tag"))throw new ke("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});C("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");C("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");C("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");C("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");C("\\newline","\\\\\\relax");C("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var W6=Ne(Tn["Main-Regular"][84][1]-.7*Tn["Main-Regular"][65][1]);C("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+W6+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");C("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+W6+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");C("\\hspace","\\@ifstar\\@hspacer\\@hspace");C("\\@hspace","\\hskip #1\\relax");C("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");C("\\ordinarycolon",":");C("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");C("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');C("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');C("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');C("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');C("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');C("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');C("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');C("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');C("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');C("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');C("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');C("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');C("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');C("","\\dblcolon");C("","\\eqcolon");C("","\\coloneqq");C("","\\eqqcolon");C("","\\Coloneqq");C("\\ratio","\\vcentcolon");C("\\coloncolon","\\dblcolon");C("\\colonequals","\\coloneqq");C("\\coloncolonequals","\\Coloneqq");C("\\equalscolon","\\eqqcolon");C("\\equalscoloncolon","\\Eqqcolon");C("\\colonminus","\\coloneq");C("\\coloncolonminus","\\Coloneq");C("\\minuscolon","\\eqcolon");C("\\minuscoloncolon","\\Eqcolon");C("\\coloncolonapprox","\\Colonapprox");C("\\coloncolonsim","\\Colonsim");C("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");C("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");C("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");C("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");C("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");C("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");C("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");C("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");C("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");C("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");C("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");C("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");C("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");C("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");C("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");C("\\ngeqq","\\html@mathml{\\@ngeqq}{}");C("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");C("\\nleqq","\\html@mathml{\\@nleqq}{}");C("\\nleqslant","\\html@mathml{\\@nleqslant}{}");C("\\nshortmid","\\html@mathml{\\@nshortmid}{}");C("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");C("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");C("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");C("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");C("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");C("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");C("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");C("\\imath","\\html@mathml{\\@imath}{}");C("\\jmath","\\html@mathml{\\@jmath}{}");C("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");C("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");C("","\\llbracket");C("","\\rrbracket");C("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");C("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");C("","\\lBrace");C("","\\rBrace");C("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");C("","\\minuso");C("\\darr","\\downarrow");C("\\dArr","\\Downarrow");C("\\Darr","\\Downarrow");C("\\lang","\\langle");C("\\rang","\\rangle");C("\\uarr","\\uparrow");C("\\uArr","\\Uparrow");C("\\Uarr","\\Uparrow");C("\\N","\\mathbb{N}");C("\\R","\\mathbb{R}");C("\\Z","\\mathbb{Z}");C("\\alef","\\aleph");C("\\alefsym","\\aleph");C("\\Alpha","\\mathrm{A}");C("\\Beta","\\mathrm{B}");C("\\bull","\\bullet");C("\\Chi","\\mathrm{X}");C("\\clubs","\\clubsuit");C("\\cnums","\\mathbb{C}");C("\\Complex","\\mathbb{C}");C("\\Dagger","\\ddagger");C("\\diamonds","\\diamondsuit");C("\\empty","\\emptyset");C("\\Epsilon","\\mathrm{E}");C("\\Eta","\\mathrm{H}");C("\\exist","\\exists");C("\\harr","\\leftrightarrow");C("\\hArr","\\Leftrightarrow");C("\\Harr","\\Leftrightarrow");C("\\hearts","\\heartsuit");C("\\image","\\Im");C("\\infin","\\infty");C("\\Iota","\\mathrm{I}");C("\\isin","\\in");C("\\Kappa","\\mathrm{K}");C("\\larr","\\leftarrow");C("\\lArr","\\Leftarrow");C("\\Larr","\\Leftarrow");C("\\lrarr","\\leftrightarrow");C("\\lrArr","\\Leftrightarrow");C("\\Lrarr","\\Leftrightarrow");C("\\Mu","\\mathrm{M}");C("\\natnums","\\mathbb{N}");C("\\Nu","\\mathrm{N}");C("\\Omicron","\\mathrm{O}");C("\\plusmn","\\pm");C("\\rarr","\\rightarrow");C("\\rArr","\\Rightarrow");C("\\Rarr","\\Rightarrow");C("\\real","\\Re");C("\\reals","\\mathbb{R}");C("\\Reals","\\mathbb{R}");C("\\Rho","\\mathrm{P}");C("\\sdot","\\cdot");C("\\sect","\\S");C("\\spades","\\spadesuit");C("\\sub","\\subset");C("\\sube","\\subseteq");C("\\supe","\\supseteq");C("\\Tau","\\mathrm{T}");C("\\thetasym","\\vartheta");C("\\weierp","\\wp");C("\\Zeta","\\mathrm{Z}");C("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");C("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");C("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");C("\\bra","\\mathinner{\\langle{#1}|}");C("\\ket","\\mathinner{|{#1}\\rangle}");C("\\braket","\\mathinner{\\langle{#1}\\rangle}");C("\\Bra","\\left\\langle#1\\right|");C("\\Ket","\\left|#1\\right\\rangle");var Q6=e=>t=>{var r=t.consumeArg().tokens,a=t.consumeArg().tokens,s=t.consumeArg().tokens,o=t.consumeArg().tokens,u=t.macros.get("|"),c=t.macros.get("\\|");t.macros.beginGroup();var f=v=>b=>{e&&(b.macros.set("|",u),s.length&&b.macros.set("\\|",c));var y=v;if(!v&&s.length){var k=b.future();k.text==="|"&&(b.popToken(),y=!0)}return{tokens:y?s:a,numArgs:0}};t.macros.set("|",f(!1)),s.length&&t.macros.set("\\|",f(!0));var h=t.consumeArg().tokens,p=t.expandTokens([...o,...h,...r]);return t.macros.endGroup(),{tokens:p.reverse(),numArgs:0}};C("\\bra@ket",Q6(!1));C("\\bra@set",Q6(!0));C("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");C("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");C("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");C("\\angln","{\\angl n}");C("\\blue","\\textcolor{##6495ed}{#1}");C("\\orange","\\textcolor{##ffa500}{#1}");C("\\pink","\\textcolor{##ff00af}{#1}");C("\\red","\\textcolor{##df0030}{#1}");C("\\green","\\textcolor{##28ae7b}{#1}");C("\\gray","\\textcolor{gray}{#1}");C("\\purple","\\textcolor{##9d38bd}{#1}");C("\\blueA","\\textcolor{##ccfaff}{#1}");C("\\blueB","\\textcolor{##80f6ff}{#1}");C("\\blueC","\\textcolor{##63d9ea}{#1}");C("\\blueD","\\textcolor{##11accd}{#1}");C("\\blueE","\\textcolor{##0c7f99}{#1}");C("\\tealA","\\textcolor{##94fff5}{#1}");C("\\tealB","\\textcolor{##26edd5}{#1}");C("\\tealC","\\textcolor{##01d1c1}{#1}");C("\\tealD","\\textcolor{##01a995}{#1}");C("\\tealE","\\textcolor{##208170}{#1}");C("\\greenA","\\textcolor{##b6ffb0}{#1}");C("\\greenB","\\textcolor{##8af281}{#1}");C("\\greenC","\\textcolor{##74cf70}{#1}");C("\\greenD","\\textcolor{##1fab54}{#1}");C("\\greenE","\\textcolor{##0d923f}{#1}");C("\\goldA","\\textcolor{##ffd0a9}{#1}");C("\\goldB","\\textcolor{##ffbb71}{#1}");C("\\goldC","\\textcolor{##ff9c39}{#1}");C("\\goldD","\\textcolor{##e07d10}{#1}");C("\\goldE","\\textcolor{##a75a05}{#1}");C("\\redA","\\textcolor{##fca9a9}{#1}");C("\\redB","\\textcolor{##ff8482}{#1}");C("\\redC","\\textcolor{##f9685d}{#1}");C("\\redD","\\textcolor{##e84d39}{#1}");C("\\redE","\\textcolor{##bc2612}{#1}");C("\\maroonA","\\textcolor{##ffbde0}{#1}");C("\\maroonB","\\textcolor{##ff92c6}{#1}");C("\\maroonC","\\textcolor{##ed5fa6}{#1}");C("\\maroonD","\\textcolor{##ca337c}{#1}");C("\\maroonE","\\textcolor{##9e034e}{#1}");C("\\purpleA","\\textcolor{##ddd7ff}{#1}");C("\\purpleB","\\textcolor{##c6b9fc}{#1}");C("\\purpleC","\\textcolor{##aa87ff}{#1}");C("\\purpleD","\\textcolor{##7854ab}{#1}");C("\\purpleE","\\textcolor{##543b78}{#1}");C("\\mintA","\\textcolor{##f5f9e8}{#1}");C("\\mintB","\\textcolor{##edf2df}{#1}");C("\\mintC","\\textcolor{##e0e5cc}{#1}");C("\\grayA","\\textcolor{##f6f7f7}{#1}");C("\\grayB","\\textcolor{##f0f1f2}{#1}");C("\\grayC","\\textcolor{##e3e5e6}{#1}");C("\\grayD","\\textcolor{##d6d8da}{#1}");C("\\grayE","\\textcolor{##babec2}{#1}");C("\\grayF","\\textcolor{##888d93}{#1}");C("\\grayG","\\textcolor{##626569}{#1}");C("\\grayH","\\textcolor{##3b3e40}{#1}");C("\\grayI","\\textcolor{##21242c}{#1}");C("\\kaBlue","\\textcolor{##314453}{#1}");C("\\kaGreen","\\textcolor{##71B307}{#1}");var eb={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class Vz{constructor(t,r,a){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=r,this.expansionCount=0,this.feed(t),this.macros=new Zz(Gz,r.macros),this.mode=a,this.stack=[]}feed(t){this.lexer=new e2(t,this.settings)}switchMode(t){this.mode=t}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(t){this.stack.push(t)}pushTokens(t){this.stack.push(...t)}scanArgument(t){var r,a,s;if(t){if(this.consumeSpaces(),this.future().text!=="[")return null;r=this.popToken(),{tokens:s,end:a}=this.consumeArg(["]"])}else({tokens:s,start:r,end:a}=this.consumeArg());return this.pushToken(new Ja("EOF",a.loc)),this.pushTokens(s),r.range(a,"")}consumeSpaces(){for(;;){var t=this.future();if(t.text===" ")this.stack.pop();else break}}consumeArg(t){var r=[],a=t&&t.length>0;a||this.consumeSpaces();var s=this.future(),o,u=0,c=0;do{if(o=this.popToken(),r.push(o),o.text==="{")++u;else if(o.text==="}"){if(--u,u===-1)throw new ke("Extra }",o)}else if(o.text==="EOF")throw new ke("Unexpected end of input in a macro argument, expected '"+(t&&a?t[c]:"}")+"'",o);if(t&&a)if((u===0||u===1&&t[c]==="{")&&o.text===t[c]){if(++c,c===t.length){r.splice(-c,c);break}}else c=0}while(u!==0||a);return s.text==="{"&&r[r.length-1].text==="}"&&(r.pop(),r.shift()),r.reverse(),{tokens:r,start:s,end:o}}consumeArgs(t,r){if(r){if(r.length!==t+1)throw new ke("The length of delimiters doesn't match the number of args!");for(var a=r[0],s=0;s<a.length;s++){var o=this.popToken();if(a[s]!==o.text)throw new ke("Use of the macro doesn't match its definition",o)}}for(var u=[],c=0;c<t;c++)u.push(this.consumeArg(r&&r[c+1]).tokens);return u}countExpansion(t){if(this.expansionCount+=t,this.expansionCount>this.settings.maxExpand)throw new ke("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(t){var r=this.popToken(),a=r.text,s=r.noexpand?null:this._getExpansion(a);if(s==null||t&&s.unexpandable){if(t&&s==null&&a[0]==="\\"&&!this.isDefined(a))throw new ke("Undefined control sequence: "+a);return this.pushToken(r),!1}this.countExpansion(1);var o=s.tokens,u=this.consumeArgs(s.numArgs,s.delimiters);if(s.numArgs){o=o.slice();for(var c=o.length-1;c>=0;--c){var f=o[c];if(f.text==="#"){if(c===0)throw new ke("Incomplete placeholder at end of macro body",f);if(f=o[--c],f.text==="#")o.splice(c+1,1);else if(/^[1-9]$/.test(f.text))o.splice(c,2,...u[+f.text-1]);else throw new ke("Not a valid argument number",f)}}}return this.pushTokens(o),o.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var t=this.stack.pop();return t.treatAsRelax&&(t.text="\\relax"),t}throw new Error}expandMacro(t){return this.macros.has(t)?this.expandTokens([new Ja(t)]):void 0}expandTokens(t){var r=[],a=this.stack.length;for(this.pushTokens(t);this.stack.length>a;)if(this.expandOnce(!0)===!1){var s=this.stack.pop();s.treatAsRelax&&(s.noexpand=!1,s.treatAsRelax=!1),r.push(s)}return this.countExpansion(r.length),r}expandMacroAsText(t){var r=this.expandMacro(t);return r&&r.map(a=>a.text).join("")}_getExpansion(t){var r=this.macros.get(t);if(r==null)return r;if(t.length===1){var a=this.lexer.catcodes[t];if(a!=null&&a!==13)return}var s=typeof r=="function"?r(this):r;if(typeof s=="string"){var o=0;if(s.indexOf("#")!==-1)for(var u=s.replace(/##/g,"");u.indexOf("#"+(o+1))!==-1;)++o;for(var c=new e2(s,this.settings),f=[],h=c.lex();h.text!=="EOF";)f.push(h),h=c.lex();f.reverse();var p={tokens:f,numArgs:o};return p}return s}isDefined(t){return this.macros.has(t)||Vi.hasOwnProperty(t)||Ut.math.hasOwnProperty(t)||Ut.text.hasOwnProperty(t)||eb.hasOwnProperty(t)}isExpandable(t){var r=this.macros.get(t);return r!=null?typeof r=="string"||typeof r=="function"||!r.unexpandable:Vi.hasOwnProperty(t)&&!Vi[t].primitive}}var a2=/^[]/,dc=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),cm={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},n2={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class bd{constructor(t,r){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new Vz(t,r,this.mode),this.settings=r,this.leftrightDepth=0}expect(t,r){if(r===void 0&&(r=!0),this.fetch().text!==t)throw new ke("Expected '"+t+"', got '"+this.fetch().text+"'",this.fetch());r&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(t){this.mode=t,this.gullet.switchMode(t)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var t=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),t}finally{this.gullet.endGroups()}}subparse(t){var r=this.nextToken;this.consume(),this.gullet.pushToken(new Ja("}")),this.gullet.pushTokens(t);var a=this.parseExpression(!1);return this.expect("}"),this.nextToken=r,a}parseExpression(t,r){for(var a=[];;){this.mode==="math"&&this.consumeSpaces();var s=this.fetch();if(bd.endOfExpression.indexOf(s.text)!==-1||r&&s.text===r||t&&Vi[s.text]&&Vi[s.text].infix)break;var o=this.parseAtom(r);if(o){if(o.type==="internal")continue}else break;a.push(o)}return this.mode==="text"&&this.formLigatures(a),this.handleInfixNodes(a)}handleInfixNodes(t){for(var r=-1,a,s=0;s<t.length;s++)if(t[s].type==="infix"){if(r!==-1)throw new ke("only one infix operator per group",t[s].token);r=s,a=t[s].replaceWith}if(r!==-1&&a){var o,u,c=t.slice(0,r),f=t.slice(r+1);c.length===1&&c[0].type==="ordgroup"?o=c[0]:o={type:"ordgroup",mode:this.mode,body:c},f.length===1&&f[0].type==="ordgroup"?u=f[0]:u={type:"ordgroup",mode:this.mode,body:f};var h;return a==="\\\\abovefrac"?h=this.callFunction(a,[o,t[r],u],[]):h=this.callFunction(a,[o,u],[]),[h]}else return t}handleSupSubscript(t){var r=this.fetch(),a=r.text;this.consume(),this.consumeSpaces();var s;do{var o;s=this.parseGroup(t)}while(((o=s)==null?void 0:o.type)==="internal");if(!s)throw new ke("Expected group after '"+a+"'",r);return s}formatUnsupportedCmd(t){for(var r=[],a=0;a<t.length;a++)r.push({type:"textord",mode:"text",text:t[a]});var s={type:"text",mode:this.mode,body:r},o={type:"color",mode:this.mode,color:this.settings.errorColor,body:[s]};return o}parseAtom(t){var r=this.parseGroup("atom",t);if((r==null?void 0:r.type)==="internal"||this.mode==="text")return r;for(var a,s;;){this.consumeSpaces();var o=this.fetch();if(o.text==="\\limits"||o.text==="\\nolimits"){if(r&&r.type==="op"){var u=o.text==="\\limits";r.limits=u,r.alwaysHandleSupSub=!0}else if(r&&r.type==="operatorname")r.alwaysHandleSupSub&&(r.limits=o.text==="\\limits");else throw new ke("Limit controls must follow a math operator",o);this.consume()}else if(o.text==="^"){if(a)throw new ke("Double superscript",o);a=this.handleSupSubscript("superscript")}else if(o.text==="_"){if(s)throw new ke("Double subscript",o);s=this.handleSupSubscript("subscript")}else if(o.text==="'"){if(a)throw new ke("Double superscript",o);var c={type:"textord",mode:this.mode,text:"\\prime"},f=[c];for(this.consume();this.fetch().text==="'";)f.push(c),this.consume();this.fetch().text==="^"&&f.push(this.handleSupSubscript("superscript")),a={type:"ordgroup",mode:this.mode,body:f}}else if(dc[o.text]){var h=a2.test(o.text),p=[];for(p.push(new Ja(dc[o.text])),this.consume();;){var v=this.fetch().text;if(!dc[v]||a2.test(v)!==h)break;p.unshift(new Ja(dc[v])),this.consume()}var b=this.subparse(p);h?s={type:"ordgroup",mode:"math",body:b}:a={type:"ordgroup",mode:"math",body:b}}else break}return a||s?{type:"supsub",mode:this.mode,base:r,sup:a,sub:s}:r}parseFunction(t,r){var a=this.fetch(),s=a.text,o=Vi[s];if(!o)return null;if(this.consume(),r&&r!=="atom"&&!o.allowedInArgument)throw new ke("Got function '"+s+"' with no arguments"+(r?" as "+r:""),a);if(this.mode==="text"&&!o.allowedInText)throw new ke("Can't use function '"+s+"' in text mode",a);if(this.mode==="math"&&o.allowedInMath===!1)throw new ke("Can't use function '"+s+"' in math mode",a);var{args:u,optArgs:c}=this.parseArguments(s,o);return this.callFunction(s,u,c,a,t)}callFunction(t,r,a,s,o){var u={funcName:t,parser:this,token:s,breakOnTokenText:o},c=Vi[t];if(c&&c.handler)return c.handler(u,r,a);throw new ke("No function handler for "+t)}parseArguments(t,r){var a=r.numArgs+r.numOptionalArgs;if(a===0)return{args:[],optArgs:[]};for(var s=[],o=[],u=0;u<a;u++){var c=r.argTypes&&r.argTypes[u],f=u<r.numOptionalArgs;(r.primitive&&c==null||r.type==="sqrt"&&u===1&&o[0]==null)&&(c="primitive");var h=this.parseGroupOfType("argument to '"+t+"'",c,f);if(f)o.push(h);else if(h!=null)s.push(h);else throw new ke("Null argument, please report this as a bug")}return{args:s,optArgs:o}}parseGroupOfType(t,r,a){switch(r){case"color":return this.parseColorGroup(a);case"size":return this.parseSizeGroup(a);case"url":return this.parseUrlGroup(a);case"math":case"text":return this.parseArgumentGroup(a,r);case"hbox":{var s=this.parseArgumentGroup(a,"text");return s!=null?{type:"styling",mode:s.mode,body:[s],style:"text"}:null}case"raw":{var o=this.parseStringGroup("raw",a);return o!=null?{type:"raw",mode:"text",string:o.text}:null}case"primitive":{if(a)throw new ke("A primitive argument cannot be optional");var u=this.parseGroup(t);if(u==null)throw new ke("Expected group as "+t,this.fetch());return u}case"original":case null:case void 0:return this.parseArgumentGroup(a);default:throw new ke("Unknown group type as "+t,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(t,r){var a=this.gullet.scanArgument(r);if(a==null)return null;for(var s="",o;(o=this.fetch()).text!=="EOF";)s+=o.text,this.consume();return this.consume(),a.text=s,a}parseRegexGroup(t,r){for(var a=this.fetch(),s=a,o="",u;(u=this.fetch()).text!=="EOF"&&t.test(o+u.text);)s=u,o+=s.text,this.consume();if(o==="")throw new ke("Invalid "+r+": '"+a.text+"'",a);return a.range(s,o)}parseColorGroup(t){var r=this.parseStringGroup("color",t);if(r==null)return null;var a=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(r.text);if(!a)throw new ke("Invalid color: '"+r.text+"'",r);var s=a[0];return/^[0-9a-f]{6}$/i.test(s)&&(s="#"+s),{type:"color-token",mode:this.mode,color:s}}parseSizeGroup(t){var r,a=!1;if(this.gullet.consumeSpaces(),!t&&this.gullet.future().text!=="{"?r=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):r=this.parseStringGroup("size",t),!r)return null;!t&&r.text.length===0&&(r.text="0pt",a=!0);var s=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(r.text);if(!s)throw new ke("Invalid size: '"+r.text+"'",r);var o={number:+(s[1]+s[2]),unit:s[3]};if(!c6(o))throw new ke("Invalid unit: '"+o.unit+"'",r);return{type:"size",mode:this.mode,value:o,isBlank:a}}parseUrlGroup(t){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var r=this.parseStringGroup("url",t);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),r==null)return null;var a=r.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:a}}parseArgumentGroup(t,r){var a=this.gullet.scanArgument(t);if(a==null)return null;var s=this.mode;r&&this.switchMode(r),this.gullet.beginGroup();var o=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var u={type:"ordgroup",mode:this.mode,loc:a.loc,body:o};return r&&this.switchMode(s),u}parseGroup(t,r){var a=this.fetch(),s=a.text,o;if(s==="{"||s==="\\begingroup"){this.consume();var u=s==="{"?"}":"\\endgroup";this.gullet.beginGroup();var c=this.parseExpression(!1,u),f=this.fetch();this.expect(u),this.gullet.endGroup(),o={type:"ordgroup",mode:this.mode,loc:Ea.range(a,f),body:c,semisimple:s==="\\begingroup"||void 0}}else if(o=this.parseFunction(r,t)||this.parseSymbol(),o==null&&s[0]==="\\"&&!eb.hasOwnProperty(s)){if(this.settings.throwOnError)throw new ke("Undefined control sequence: "+s,a);o=this.formatUnsupportedCmd(s),this.consume()}return o}formLigatures(t){for(var r=t.length-1,a=0;a<r;++a){var s=t[a],o=s.text;o==="-"&&t[a+1].text==="-"&&(a+1<r&&t[a+2].text==="-"?(t.splice(a,3,{type:"textord",mode:"text",loc:Ea.range(s,t[a+2]),text:"---"}),r-=2):(t.splice(a,2,{type:"textord",mode:"text",loc:Ea.range(s,t[a+1]),text:"--"}),r-=1)),(o==="'"||o==="`")&&t[a+1].text===o&&(t.splice(a,2,{type:"textord",mode:"text",loc:Ea.range(s,t[a+1]),text:o+o}),r-=1)}}parseSymbol(){var t=this.fetch(),r=t.text;if(/^\\verb[^a-zA-Z]/.test(r)){this.consume();var a=r.slice(5),s=a.charAt(0)==="*";if(s&&(a=a.slice(1)),a.length<2||a.charAt(0)!==a.slice(-1))throw new ke(`\\verb assertion failed --
                    please report what input caused this bug`);return a=a.slice(1,-1),{type:"verb",mode:"text",body:a,star:s}}n2.hasOwnProperty(r[0])&&!Ut[this.mode][r[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+r[0]+'" used in math mode',t),r=n2[r[0]]+r.slice(1));var o=Pz.exec(r);o&&(r=r.substring(0,o.index),r==="i"?r="":r==="j"&&(r=""));var u;if(Ut[this.mode][r]){this.settings.strict&&this.mode==="math"&&Gm.indexOf(r)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+r[0]+'" used in math mode',t);var c=Ut[this.mode][r].group,f=Ea.range(t),h;if(I_.hasOwnProperty(c)){var p=c;h={type:"atom",mode:this.mode,family:p,loc:f,text:r}}else h={type:c,mode:this.mode,loc:f,text:r};u=h}else if(r.charCodeAt(0)>=128)this.settings.strict&&(l6(r.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+r[0]+'" used in math mode',t):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+r[0]+'"'+(" ("+r.charCodeAt(0)+")"),t)),u={type:"textord",mode:"text",loc:Ea.range(t),text:r};else return null;if(this.consume(),o)for(var v=0;v<o[0].length;v++){var b=o[0][v];if(!cm[b])throw new ke("Unknown accent ' "+b+"'",t);var y=cm[b][this.mode]||cm[b].text;if(!y)throw new ke("Accent "+b+" unsupported in "+this.mode+" mode",t);u={type:"accent",mode:this.mode,loc:Ea.range(t),label:y,isStretchy:!1,isShifty:!0,base:u}}return u}}bd.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var Xp=function(t,r){if(!(typeof t=="string"||t instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var a=new bd(t,r);delete a.gullet.macros.current["\\df@tag"];var s=a.parse();if(delete a.gullet.macros.current["\\current@color"],delete a.gullet.macros.current["\\color"],a.gullet.macros.get("\\df@tag")){if(!r.displayMode)throw new ke("\\tag works only in display equations");s=[{type:"tag",mode:"text",body:s,tag:a.subparse([new Ja("\\df@tag")])}]}return s},Kp=function(t,r,a){r.textContent="";var s=xd(t,a).toNode();r.appendChild(s)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),Kp=function(){throw new ke("KaTeX doesn't work in quirks mode.")});var tb=function(t,r){var a=xd(t,r).toMarkup();return a},rb=function(t,r){var a=new Cp(r);return Xp(t,a)},ab=function(t,r,a){if(a.throwOnError||!(t instanceof ke))throw t;var s=se.makeSpan(["katex-error"],[new Wa(r)]);return s.setAttribute("title",t.toString()),s.setAttribute("style","color:"+a.errorColor),s},xd=function(t,r){var a=new Cp(r);try{var s=Xp(t,a);return az(s,t,a)}catch(o){return ab(o,t,a)}},nb=function(t,r){var a=new Cp(r);try{var s=Xp(t,a);return nz(s,t,a)}catch(o){return ab(o,t,a)}},ib="0.16.22",sb={Span:Iu,Anchor:Ip,SymbolNode:Wa,SvgNode:oi,PathNode:Ji,LineNode:Zm},ob={version:ib,render:Kp,renderToString:tb,ParseError:ke,SETTINGS_SCHEMA:pu,__parse:rb,__renderToDomTree:xd,__renderToHTMLTree:nb,__setFontMetrics:u6,__defineSymbol:x,__defineFunction:Oe,__defineMacro:C,__domTree:sb};const lb=Object.freeze(Object.defineProperty({__proto__:null,ParseError:ke,SETTINGS_SCHEMA:pu,__defineFunction:Oe,__defineMacro:C,__defineSymbol:x,__domTree:sb,__parse:rb,__renderToDomTree:xd,__renderToHTMLTree:nb,__setFontMetrics:u6,default:ob,get render(){return Kp},renderToString:tb,version:ib},Symbol.toStringTag,{value:"Module"}));var Fz=Object.defineProperty,Yz=(e,t,r)=>t in e?Fz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tt=(e,t,r)=>Yz(e,typeof t!="symbol"?t+"":t,r);function be(e,t,r){function a(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:u,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),t(c,f);const h=u.prototype,p=Object.keys(h);for(let v=0;v<p.length;v++){const b=p[v];b in c||(c[b]=h[b].bind(c))}}const s=(r==null?void 0:r.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function u(c){var f;const h=r!=null&&r.Parent?new o:this;a(h,c),(f=h._zod).deferred??(f.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(u,"init",{value:a}),Object.defineProperty(u,Symbol.hasInstance,{value:c=>{var f,h;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(h=(f=c==null?void 0:c._zod)==null?void 0:f.traits)==null?void 0:h.has(e)}}),Object.defineProperty(u,"name",{value:e}),u}class Vo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class ub extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const cb={};function $s(e){return cb}function db(e){const t=Object.values(e).filter(r=>typeof r=="number");return Object.entries(e).filter(([r,a])=>t.indexOf(+r)===-1).map(([r,a])=>a)}function Jm(e,t){return typeof t=="bigint"?t.toString():t}function Jp(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function Wp(e){return e==null}function Qp(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function Xz(e,t){const r=(e.toString().split(".")[1]||"").length,a=t.toString();let s=(a.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(a)){const f=a.match(/\d?e-(\d?)/);f!=null&&f[1]&&(s=Number.parseInt(f[1]))}const o=r>s?r:s,u=Number.parseInt(e.toFixed(o).replace(".","")),c=Number.parseInt(t.toFixed(o).replace(".",""));return u%c/10**o}const i2=Symbol("evaluating");function Nt(e,t,r){let a;Object.defineProperty(e,t,{get(){if(a!==i2)return a===void 0&&(a=i2,a=r()),a},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Gs(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ns(...e){const t={};for(const r of e){const a=Object.getOwnPropertyDescriptors(r);Object.assign(t,a)}return Object.defineProperties({},t)}function s2(e){return JSON.stringify(e)}function Kz(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const fb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Lc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const Jz=Jp(()=>{var e;if(typeof navigator<"u"&&(e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare"))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function xu(e){if(Lc(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(Lc(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function hb(e){return xu(e)?{...e}:Array.isArray(e)?[...e]:e}const Wz=new Set(["string","number","symbol"]);function wd(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function is(e,t,r){const a=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(a._zod.parent=e),a}function Xe(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function Qz(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const ek={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function tk(e,t){const r=e._zod.def,a=r.checks;if(a&&a.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const s=ns(e._zod.def,{get shape(){const o={};for(const u in t){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&(o[u]=r.shape[u])}return Gs(this,"shape",o),o},checks:[]});return is(e,s)}function rk(e,t){const r=e._zod.def,a=r.checks;if(a&&a.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const s=ns(e._zod.def,{get shape(){const o={...e._zod.def.shape};for(const u in t){if(!(u in r.shape))throw new Error(`Unrecognized key: "${u}"`);t[u]&&delete o[u]}return Gs(this,"shape",o),o},checks:[]});return is(e,s)}function ak(e,t){if(!xu(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const s=e._zod.def.shape;for(const o in t)if(Object.getOwnPropertyDescriptor(s,o)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const a=ns(e._zod.def,{get shape(){const s={...e._zod.def.shape,...t};return Gs(this,"shape",s),s}});return is(e,a)}function nk(e,t){if(!xu(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=ns(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t};return Gs(this,"shape",a),a}});return is(e,r)}function ik(e,t){const r=ns(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t._zod.def.shape};return Gs(this,"shape",a),a},get catchall(){return t._zod.def.catchall},checks:[]});return is(e,r)}function sk(e,t,r){const a=t._zod.def.checks;if(a&&a.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const s=ns(t._zod.def,{get shape(){const o=t._zod.def.shape,u={...o};if(r)for(const c in r){if(!(c in o))throw new Error(`Unrecognized key: "${c}"`);r[c]&&(u[c]=e?new e({type:"optional",innerType:o[c]}):o[c])}else for(const c in o)u[c]=e?new e({type:"optional",innerType:o[c]}):o[c];return Gs(this,"shape",u),u},checks:[]});return is(t,s)}function ok(e,t,r){const a=ns(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const u in r){if(!(u in o))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(o[u]=new e({type:"nonoptional",innerType:s[u]}))}else for(const u in s)o[u]=new e({type:"nonoptional",innerType:s[u]});return Gs(this,"shape",o),o}});return is(t,a)}function qo(e,t=0){var r;if(e.aborted===!0)return!0;for(let a=t;a<e.issues.length;a++)if(((r=e.issues[a])==null?void 0:r.continue)!==!0)return!0;return!1}function mb(e,t){return t.map(r=>{var a;return(a=r).path??(a.path=[]),r.path.unshift(e),r})}function fc(e){return typeof e=="string"?e:e==null?void 0:e.message}function Bs(e,t,r){var a,s,o,u,c,f;const h={...e,path:e.path??[]};if(!e.message){const p=fc((o=(s=(a=e.inst)==null?void 0:a._zod.def)==null?void 0:s.error)==null?void 0:o.call(s,e))??fc((u=t==null?void 0:t.error)==null?void 0:u.call(t,e))??fc((c=r.customError)==null?void 0:c.call(r,e))??fc((f=r.localeError)==null?void 0:f.call(r,e))??"Invalid input";h.message=p}return delete h.inst,delete h.continue,t!=null&&t.reportInput||delete h.input,h}function e1(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function wu(...e){const[t,r,a]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:a}:{...t}}const pb=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,Jm,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},gb=be("$ZodError",pb),vb=be("$ZodError",pb,{Parent:Error});function lk(e,t=r=>r.message){const r={},a=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):a.push(t(s));return{formErrors:a,fieldErrors:r}}function uk(e,t=r=>r.message){const r={_errors:[]},a=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(u=>a({issues:u}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let u=r,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(t(o))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return a(e),r}const t1=e=>(t,r,a,s)=>{const o=a?Object.assign(a,{async:!1}):{async:!1},u=t._zod.run({value:r,issues:[]},o);if(u instanceof Promise)throw new Vo;if(u.issues.length){const c=new((s==null?void 0:s.Err)??e)(u.issues.map(f=>Bs(f,o,$s())));throw fb(c,s==null?void 0:s.callee),c}return u.value},r1=e=>async(t,r,a,s)=>{const o=a?Object.assign(a,{async:!0}):{async:!0};let u=t._zod.run({value:r,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const c=new((s==null?void 0:s.Err)??e)(u.issues.map(f=>Bs(f,o,$s())));throw fb(c,s==null?void 0:s.callee),c}return u.value},Sd=e=>(t,r,a)=>{const s=a?{...a,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new Vo;return o.issues.length?{success:!1,error:new(e??gb)(o.issues.map(u=>Bs(u,s,$s())))}:{success:!0,data:o.value}},ck=Sd(vb),_d=e=>async(t,r,a)=>{const s=a?Object.assign(a,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(u=>Bs(u,s,$s())))}:{success:!0,data:o.value}},dk=_d(vb),fk=e=>(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return t1(e)(t,r,s)},hk=e=>(t,r,a)=>t1(e)(t,r,a),mk=e=>async(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return r1(e)(t,r,s)},pk=e=>async(t,r,a)=>r1(e)(t,r,a),gk=e=>(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return Sd(e)(t,r,s)},vk=e=>(t,r,a)=>Sd(e)(t,r,a),yk=e=>async(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return _d(e)(t,r,s)},bk=e=>async(t,r,a)=>_d(e)(t,r,a),xk=/^[cC][^\s-]{8,}$/,wk=/^[0-9a-z]+$/,Sk=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,_k=/^[0-9a-vA-V]{20}$/,zk=/^[A-Za-z0-9]{27}$/,kk=/^[a-zA-Z0-9_-]{21}$/,Tk=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,Ak=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,o2=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,Ek=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,Mk="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Nk(){return new RegExp(Mk,"u")}const Ck=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ok=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Rk=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,Ik=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Dk=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,yb=/^[A-Za-z0-9_-]*$/,jk=/^\+[1-9]\d{6,14}$/,bb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",$k=new RegExp(`^${bb}$`);function xb(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Bk(e){return new RegExp(`^${xb(e)}$`)}function Lk(e){const t=xb({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const a=`${t}(?:${r.join("|")})`;return new RegExp(`^${bb}T(?:${a})$`)}const Uk=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},qk=/^-?\d+$/,Pk=/^-?\d+(?:\.\d+)?$/,Hk=/^[^A-Z]*$/,Zk=/^[^a-z]*$/,ga=be("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),wb={number:"number",bigint:"bigint",object:"date"},Sb=be("$ZodCheckLessThan",(e,t)=>{ga.init(e,t);const r=wb[typeof t.value];e._zod.onattach.push(a=>{const s=a._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value<=t.value:a.value<t.value)||a.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),_b=be("$ZodCheckGreaterThan",(e,t)=>{ga.init(e,t);const r=wb[typeof t.value];e._zod.onattach.push(a=>{const s=a._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value>=t.value:a.value>t.value)||a.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),Gk=be("$ZodCheckMultipleOf",(e,t)=>{ga.init(e,t),e._zod.onattach.push(r=>{var a;(a=r._zod.bag).multipleOf??(a.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):Xz(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),Vk=be("$ZodCheckNumberFormat",(e,t)=>{var r;ga.init(e,t),t.format=t.format||"float64";const a=(r=t.format)==null?void 0:r.includes("int"),s=a?"int":"number",[o,u]=ek[t.format];e._zod.onattach.push(c=>{const f=c._zod.bag;f.format=t.format,f.minimum=o,f.maximum=u,a&&(f.pattern=qk)}),e._zod.check=c=>{const f=c.value;if(a){if(!Number.isInteger(f)){c.issues.push({expected:s,format:t.format,code:"invalid_type",continue:!1,input:f,inst:e});return}if(!Number.isSafeInteger(f)){f>0?c.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,inclusive:!0,continue:!t.abort}):c.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,inclusive:!0,continue:!t.abort});return}}f<o&&c.issues.push({origin:"number",input:f,code:"too_small",minimum:o,inclusive:!0,inst:e,continue:!t.abort}),f>u&&c.issues.push({origin:"number",input:f,code:"too_big",maximum:u,inclusive:!0,inst:e,continue:!t.abort})}}),Fk=be("$ZodCheckMaxLength",(e,t)=>{var r;ga.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!Wp(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(a._zod.bag.maximum=t.maximum)}),e._zod.check=a=>{const s=a.value;if(s.length<=t.maximum)return;const o=e1(s);a.issues.push({origin:o,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Yk=be("$ZodCheckMinLength",(e,t)=>{var r;ga.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!Wp(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(a._zod.bag.minimum=t.minimum)}),e._zod.check=a=>{const s=a.value;if(s.length>=t.minimum)return;const o=e1(s);a.issues.push({origin:o,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),Xk=be("$ZodCheckLengthEquals",(e,t)=>{var r;ga.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!Wp(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=a=>{const s=a.value,o=s.length;if(o===t.length)return;const u=e1(s),c=o>t.length;a.issues.push({origin:u,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:a.value,inst:e,continue:!t.abort})}}),zd=be("$ZodCheckStringFormat",(e,t)=>{var r,a;ga.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(a=e._zod).check??(a.check=()=>{})}),Kk=be("$ZodCheckRegex",(e,t)=>{zd.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),Jk=be("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=Hk),zd.init(e,t)}),Wk=be("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=Zk),zd.init(e,t)}),Qk=be("$ZodCheckIncludes",(e,t)=>{ga.init(e,t);const r=wd(t.includes),a=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=a,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(a)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),eT=be("$ZodCheckStartsWith",(e,t)=>{ga.init(e,t);const r=new RegExp(`^${wd(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.startsWith(t.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:a.value,inst:e,continue:!t.abort})}}),tT=be("$ZodCheckEndsWith",(e,t)=>{ga.init(e,t);const r=new RegExp(`.*${wd(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.endsWith(t.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:a.value,inst:e,continue:!t.abort})}}),rT=be("$ZodCheckOverwrite",(e,t)=>{ga.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class aT{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const r=t.split(`
`).filter(o=>o),a=Math.min(...r.map(o=>o.length-o.trimStart().length)),s=r.map(o=>o.slice(a)).map(o=>" ".repeat(this.indent*2)+o);for(const o of s)this.content.push(o)}compile(){const t=Function,r=this==null?void 0:this.args,a=[...((this==null?void 0:this.content)??[""]).map(s=>`  ${s}`)];return new t(...r,a.join(`
`))}}const nT={major:4,minor:3,patch:5},Ar=be("$ZodType",(e,t)=>{var r,a;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=nT;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const o of s)for(const u of o._zod.onattach)u(e);if(s.length===0)(a=e._zod).deferred??(a.deferred=[]),(r=e._zod.deferred)==null||r.push(()=>{e._zod.run=e._zod.parse});else{const o=(c,f,h)=>{let p=qo(c),v;for(const b of f){if(b._zod.def.when){if(!b._zod.def.when(c))continue}else if(p)continue;const y=c.issues.length,k=b._zod.check(c);if(k instanceof Promise&&(h==null?void 0:h.async)===!1)throw new Vo;if(v||k instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await k,c.issues.length!==y&&(p||(p=qo(c,y)))});else{if(c.issues.length===y)continue;p||(p=qo(c,y))}}return v?v.then(()=>c):c},u=(c,f,h)=>{if(qo(c))return c.aborted=!0,c;const p=o(f,s,h);if(p instanceof Promise){if(h.async===!1)throw new Vo;return p.then(v=>e._zod.parse(v,h))}return e._zod.parse(p,h)};e._zod.run=(c,f)=>{if(f.skipChecks)return e._zod.parse(c,f);if(f.direction==="backward"){const p=e._zod.parse({value:c.value,issues:[]},{...f,skipChecks:!0});return p instanceof Promise?p.then(v=>u(v,c,f)):u(p,c,f)}const h=e._zod.parse(c,f);if(h instanceof Promise){if(f.async===!1)throw new Vo;return h.then(p=>o(p,s,f))}return o(h,s,f)}}Nt(e,"~standard",()=>({validate:o=>{var u;try{const c=ck(e,o);return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}}catch{return dk(e,o).then(c=>{var f;return c.success?{value:c.data}:{issues:(f=c.error)==null?void 0:f.issues}})}},vendor:"zod",version:1}))}),a1=be("$ZodString",(e,t)=>{var r;Ar.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??Uk(e._zod.bag),e._zod.parse=(a,s)=>{if(t.coerce)try{a.value=String(a.value)}catch{}return typeof a.value=="string"||a.issues.push({expected:"string",code:"invalid_type",input:a.value,inst:e}),a}}),rr=be("$ZodStringFormat",(e,t)=>{zd.init(e,t),a1.init(e,t)}),iT=be("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=Ak),rr.init(e,t)}),sT=be("$ZodUUID",(e,t)=>{if(t.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(r===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=o2(r))}else t.pattern??(t.pattern=o2());rr.init(e,t)}),oT=be("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=Ek),rr.init(e,t)}),lT=be("$ZodURL",(e,t)=>{rr.init(e,t),e._zod.check=r=>{try{const a=r.value.trim(),s=new URL(a);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=a;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),uT=be("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=Nk()),rr.init(e,t)}),cT=be("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=kk),rr.init(e,t)}),dT=be("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=xk),rr.init(e,t)}),fT=be("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=wk),rr.init(e,t)}),hT=be("$ZodULID",(e,t)=>{t.pattern??(t.pattern=Sk),rr.init(e,t)}),mT=be("$ZodXID",(e,t)=>{t.pattern??(t.pattern=_k),rr.init(e,t)}),pT=be("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=zk),rr.init(e,t)}),gT=be("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=Lk(t)),rr.init(e,t)}),vT=be("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=$k),rr.init(e,t)}),yT=be("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=Bk(t)),rr.init(e,t)}),bT=be("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=Tk),rr.init(e,t)}),xT=be("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=Ck),rr.init(e,t),e._zod.bag.format="ipv4"}),wT=be("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=Ok),rr.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),ST=be("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=Rk),rr.init(e,t)}),_T=be("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=Ik),rr.init(e,t),e._zod.check=r=>{const a=r.value.split("/");try{if(a.length!==2)throw new Error;const[s,o]=a;if(!o)throw new Error;const u=Number(o);if(`${u}`!==o)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function zb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const zT=be("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=Dk),rr.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{zb(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function kT(e){if(!yb.test(e))return!1;const t=e.replace(/[-_]/g,a=>a==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return zb(r)}const TT=be("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=yb),rr.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{kT(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),AT=be("$ZodE164",(e,t)=>{t.pattern??(t.pattern=jk),rr.init(e,t)});function ET(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[a]=r;if(!a)return!1;const s=JSON.parse(atob(a));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const MT=be("$ZodJWT",(e,t)=>{rr.init(e,t),e._zod.check=r=>{ET(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),kb=be("$ZodNumber",(e,t)=>{Ar.init(e,t),e._zod.pattern=e._zod.bag.pattern??Pk,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),r}}),NT=be("$ZodNumberFormat",(e,t)=>{Vk.init(e,t),kb.init(e,t)}),CT=be("$ZodUnknown",(e,t)=>{Ar.init(e,t),e._zod.parse=r=>r}),OT=be("$ZodNever",(e,t)=>{Ar.init(e,t),e._zod.parse=(r,a)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function l2(e,t,r){e.issues.length&&t.issues.push(...mb(r,e.issues)),t.value[r]=e.value}const RT=be("$ZodArray",(e,t)=>{Ar.init(e,t),e._zod.parse=(r,a)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let u=0;u<s.length;u++){const c=s[u],f=t.element._zod.run({value:c,issues:[]},a);f instanceof Promise?o.push(f.then(h=>l2(h,r,u))):l2(f,r,u)}return o.length?Promise.all(o).then(()=>r):r}});function Uc(e,t,r,a,s){if(e.issues.length){if(s&&!(r in a))return;t.issues.push(...mb(r,e.issues))}e.value===void 0?r in a&&(t.value[r]=void 0):t.value[r]=e.value}function Tb(e){var t,r,a,s;const o=Object.keys(e.shape);for(const c of o)if(!((s=(a=(r=(t=e.shape)==null?void 0:t[c])==null?void 0:r._zod)==null?void 0:a.traits)!=null&&s.has("$ZodType")))throw new Error(`Invalid element at key "${c}": expected a Zod schema`);const u=Qz(e.shape);return{...e,keys:o,keySet:new Set(o),numKeys:o.length,optionalKeys:new Set(u)}}function Ab(e,t,r,a,s,o){const u=[],c=s.keySet,f=s.catchall._zod,h=f.def.type,p=f.optout==="optional";for(const v in t){if(c.has(v))continue;if(h==="never"){u.push(v);continue}const b=f.run({value:t[v],issues:[]},a);b instanceof Promise?e.push(b.then(y=>Uc(y,r,v,t,p))):Uc(b,r,v,t,p)}return u.length&&r.issues.push({code:"unrecognized_keys",keys:u,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const IT=be("$ZodObject",(e,t)=>{Ar.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const f={...c};return Object.defineProperty(t,"shape",{value:f}),f}})}const a=Jp(()=>Tb(t));Nt(e._zod,"propValues",()=>{const c=t.shape,f={};for(const h in c){const p=c[h]._zod;if(p.values){f[h]??(f[h]=new Set);for(const v of p.values)f[h].add(v)}}return f});const s=Lc,o=t.catchall;let u;e._zod.parse=(c,f)=>{u??(u=a.value);const h=c.value;if(!s(h))return c.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),c;c.value={};const p=[],v=u.shape;for(const b of u.keys){const y=v[b],k=y._zod.optout==="optional",_=y._zod.run({value:h[b],issues:[]},f);_ instanceof Promise?p.push(_.then(T=>Uc(T,c,b,h,k))):Uc(_,c,b,h,k)}return o?Ab(p,h,c,f,a.value,e):p.length?Promise.all(p).then(()=>c):c}}),DT=be("$ZodObjectJIT",(e,t)=>{IT.init(e,t);const r=e._zod.parse,a=Jp(()=>Tb(t)),s=v=>{var b;const y=new aT(["shape","payload","ctx"]),k=a.value,_=M=>{const j=s2(M);return`shape[${j}]._zod.run({ value: input[${j}], issues: [] }, ctx)`};y.write("const input = payload.value;");const T=Object.create(null);let R=0;for(const M of k.keys)T[M]=`key_${R++}`;y.write("const newResult = {};");for(const M of k.keys){const j=T[M],I=s2(M),$=v[M],E=((b=$==null?void 0:$._zod)==null?void 0:b.optout)==="optional";y.write(`const ${j} = ${_(M)};`),E?y.write(`
        if (${j}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${j}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${j}.value;
        }
        
      `):y.write(`
        if (${j}.issues.length) {
          payload.issues = payload.issues.concat(${j}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${j}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${j}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const O=y.compile();return(M,j)=>O(v,M,j)};let o;const u=Lc,c=!cb.jitless,f=c&&Jz.value,h=t.catchall;let p;e._zod.parse=(v,b)=>{p??(p=a.value);const y=v.value;return u(y)?c&&f&&(b==null?void 0:b.async)===!1&&b.jitless!==!0?(o||(o=s(t.shape)),v=o(v,b),h?Ab([],y,v,b,p,e):v):r(v,b):(v.issues.push({expected:"object",code:"invalid_type",input:y,inst:e}),v)}});function u2(e,t,r,a){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!qo(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(u=>Bs(u,a,$s())))}),t)}const jT=be("$ZodUnion",(e,t)=>{Ar.init(e,t),Nt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),Nt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),Nt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),Nt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>Qp(o.source)).join("|")})$`)}});const r=t.options.length===1,a=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return a(s,o);let u=!1;const c=[];for(const f of t.options){const h=f._zod.run({value:s.value,issues:[]},o);if(h instanceof Promise)c.push(h),u=!0;else{if(h.issues.length===0)return h;c.push(h)}}return u?Promise.all(c).then(f=>u2(f,s,e,o)):u2(c,s,e,o)}}),$T=be("$ZodIntersection",(e,t)=>{Ar.init(e,t),e._zod.parse=(r,a)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},a),u=t.right._zod.run({value:s,issues:[]},a);return o instanceof Promise||u instanceof Promise?Promise.all([o,u]).then(([c,f])=>c2(r,c,f)):c2(r,o,u)}});function Wm(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(xu(e)&&xu(t)){const r=Object.keys(t),a=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of a){const u=Wm(e[o],t[o]);if(!u.valid)return{valid:!1,mergeErrorPath:[o,...u.mergeErrorPath]};s[o]=u.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let a=0;a<e.length;a++){const s=e[a],o=t[a],u=Wm(s,o);if(!u.valid)return{valid:!1,mergeErrorPath:[a,...u.mergeErrorPath]};r.push(u.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function c2(e,t,r){const a=new Map;let s;for(const c of t.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const f of c.keys)a.has(f)||a.set(f,{}),a.get(f).l=!0}else e.issues.push(c);for(const c of r.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)a.has(f)||a.set(f,{}),a.get(f).r=!0;else e.issues.push(c);const o=[...a].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(o.length&&s&&e.issues.push({...s,keys:o}),qo(e))return e;const u=Wm(t.value,r.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const BT=be("$ZodEnum",(e,t)=>{Ar.init(e,t);const r=db(t.entries),a=new Set(r);e._zod.values=a,e._zod.pattern=new RegExp(`^(${r.filter(s=>Wz.has(typeof s)).map(s=>typeof s=="string"?wd(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const u=s.value;return a.has(u)||s.issues.push({code:"invalid_value",values:r,input:u,inst:e}),s}}),LT=be("$ZodTransform",(e,t)=>{Ar.init(e,t),e._zod.parse=(r,a)=>{if(a.direction==="backward")throw new ub(e.constructor.name);const s=t.transform(r.value,r);if(a.async)return(s instanceof Promise?s:Promise.resolve(s)).then(o=>(r.value=o,r));if(s instanceof Promise)throw new Vo;return r.value=s,r}});function d2(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const Eb=be("$ZodOptional",(e,t)=>{Ar.init(e,t),e._zod.optin="optional",e._zod.optout="optional",Nt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),Nt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Qp(r.source)})?$`):void 0}),e._zod.parse=(r,a)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>d2(o,r.value)):d2(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,a)}}),UT=be("$ZodExactOptional",(e,t)=>{Eb.init(e,t),Nt(e._zod,"values",()=>t.innerType._zod.values),Nt(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,a)=>t.innerType._zod.run(r,a)}),qT=be("$ZodNullable",(e,t)=>{Ar.init(e,t),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),Nt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${Qp(r.source)}|null)$`):void 0}),Nt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,a)=>r.value===null?r:t.innerType._zod.run(r,a)}),PT=be("$ZodDefault",(e,t)=>{Ar.init(e,t),e._zod.optin="optional",Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>f2(o,t)):f2(s,t)}});function f2(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const HT=be("$ZodPrefault",(e,t)=>{Ar.init(e,t),e._zod.optin="optional",Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>(a.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,a))}),ZT=be("$ZodNonOptional",(e,t)=>{Ar.init(e,t),Nt(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(a=>a!==void 0)):void 0}),e._zod.parse=(r,a)=>{const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>h2(o,e)):h2(s,e)}});function h2(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const GT=be("$ZodCatch",(e,t)=>{Ar.init(e,t),Nt(e._zod,"optin",()=>t.innerType._zod.optin),Nt(e._zod,"optout",()=>t.innerType._zod.optout),Nt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(u=>Bs(u,a,$s()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>Bs(o,a,$s()))},input:r.value}),r.issues=[]),r)}}),VT=be("$ZodPipe",(e,t)=>{Ar.init(e,t),Nt(e._zod,"values",()=>t.in._zod.values),Nt(e._zod,"optin",()=>t.in._zod.optin),Nt(e._zod,"optout",()=>t.out._zod.optout),Nt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,a)=>{if(a.direction==="backward"){const o=t.out._zod.run(r,a);return o instanceof Promise?o.then(u=>hc(u,t.in,a)):hc(o,t.in,a)}const s=t.in._zod.run(r,a);return s instanceof Promise?s.then(o=>hc(o,t.out,a)):hc(s,t.out,a)}});function hc(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const FT=be("$ZodReadonly",(e,t)=>{Ar.init(e,t),Nt(e._zod,"propValues",()=>t.innerType._zod.propValues),Nt(e._zod,"values",()=>t.innerType._zod.values),Nt(e._zod,"optin",()=>{var r,a;return(a=(r=t.innerType)==null?void 0:r._zod)==null?void 0:a.optin}),Nt(e._zod,"optout",()=>{var r,a;return(a=(r=t.innerType)==null?void 0:r._zod)==null?void 0:a.optout}),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(m2):m2(s)}});function m2(e){return e.value=Object.freeze(e.value),e}const YT=be("$ZodCustom",(e,t)=>{ga.init(e,t),Ar.init(e,t),e._zod.parse=(r,a)=>r,e._zod.check=r=>{const a=r.value,s=t.fn(a);if(s instanceof Promise)return s.then(o=>p2(o,r,a,e));p2(s,r,a,e)}});function p2(e,t,r,a){if(!e){const s={code:"custom",input:r,inst:a,path:[...a._zod.def.path??[]],continue:!a._zod.def.abort};a._zod.def.params&&(s.params=a._zod.def.params),t.issues.push(wu(s))}}var g2;class XT{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const a=r[0];return this._map.set(t,a),a&&typeof a=="object"&&"id"in a&&this._idmap.set(a.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const a={...this.get(r)??{}};delete a.id;const s={...a,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function KT(){return new XT}(g2=globalThis).__zod_globalRegistry??(g2.__zod_globalRegistry=KT());const cu=globalThis.__zod_globalRegistry;function JT(e,t){return new e({type:"string",...Xe(t)})}function WT(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Xe(t)})}function v2(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Xe(t)})}function QT(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Xe(t)})}function eA(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Xe(t)})}function tA(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Xe(t)})}function rA(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Xe(t)})}function aA(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Xe(t)})}function nA(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Xe(t)})}function iA(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Xe(t)})}function sA(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Xe(t)})}function oA(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Xe(t)})}function lA(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Xe(t)})}function uA(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Xe(t)})}function cA(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Xe(t)})}function dA(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Xe(t)})}function fA(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Xe(t)})}function hA(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Xe(t)})}function mA(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Xe(t)})}function pA(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Xe(t)})}function gA(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Xe(t)})}function vA(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Xe(t)})}function yA(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Xe(t)})}function bA(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Xe(t)})}function xA(e,t){return new e({type:"string",format:"date",check:"string_format",...Xe(t)})}function wA(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...Xe(t)})}function SA(e,t){return new e({type:"string",format:"duration",check:"string_format",...Xe(t)})}function _A(e,t){return new e({type:"number",checks:[],...Xe(t)})}function zA(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Xe(t)})}function kA(e){return new e({type:"unknown"})}function TA(e,t){return new e({type:"never",...Xe(t)})}function y2(e,t){return new Sb({check:"less_than",...Xe(t),value:e,inclusive:!1})}function dm(e,t){return new Sb({check:"less_than",...Xe(t),value:e,inclusive:!0})}function b2(e,t){return new _b({check:"greater_than",...Xe(t),value:e,inclusive:!1})}function fm(e,t){return new _b({check:"greater_than",...Xe(t),value:e,inclusive:!0})}function x2(e,t){return new Gk({check:"multiple_of",...Xe(t),value:e})}function Mb(e,t){return new Fk({check:"max_length",...Xe(t),maximum:e})}function qc(e,t){return new Yk({check:"min_length",...Xe(t),minimum:e})}function Nb(e,t){return new Xk({check:"length_equals",...Xe(t),length:e})}function AA(e,t){return new Kk({check:"string_format",format:"regex",...Xe(t),pattern:e})}function EA(e){return new Jk({check:"string_format",format:"lowercase",...Xe(e)})}function MA(e){return new Wk({check:"string_format",format:"uppercase",...Xe(e)})}function NA(e,t){return new Qk({check:"string_format",format:"includes",...Xe(t),includes:e})}function CA(e,t){return new eT({check:"string_format",format:"starts_with",...Xe(t),prefix:e})}function OA(e,t){return new tT({check:"string_format",format:"ends_with",...Xe(t),suffix:e})}function tl(e){return new rT({check:"overwrite",tx:e})}function RA(e){return tl(t=>t.normalize(e))}function IA(){return tl(e=>e.trim())}function DA(){return tl(e=>e.toLowerCase())}function jA(){return tl(e=>e.toUpperCase())}function $A(){return tl(e=>Kz(e))}function BA(e,t,r){return new e({type:"array",element:t,...Xe(r)})}function LA(e,t,r){return new e({type:"custom",check:"custom",fn:t,...Xe(r)})}function UA(e){const t=qA(r=>(r.addIssue=a=>{if(typeof a=="string")r.issues.push(wu(a,r.value,t._zod.def));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(wu(s))}},e(r.value,r)));return t}function qA(e,t){const r=new ga({check:"custom",...Xe(t)});return r._zod.check=e,r}function Cb(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??cu,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function Gr(e,t,r={path:[],schemaPath:[]}){var a,s,o;const u=e._zod.def,c=t.seen.get(e);if(c)return c.count++,r.schemaPath.includes(e)&&(c.cycle=r.path),c.schema;const f={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,f);const h=(s=(a=e._zod).toJSONSchema)==null?void 0:s.call(a);if(h)f.schema=h;else{const v={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,f.schema,v);else{const y=f.schema,k=t.processors[u.type];if(!k)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${u.type}`);k(e,t,y,v)}const b=e._zod.parent;b&&(f.ref||(f.ref=b),Gr(b,t,v),t.seen.get(b).isParent=!0)}const p=t.metadataRegistry.get(e);return p&&Object.assign(f.schema,p),t.io==="input"&&ea(e)&&(delete f.schema.examples,delete f.schema.default),t.io==="input"&&f.schema._prefault&&((o=f.schema).default??(o.default=f.schema._prefault)),delete f.schema._prefault,t.seen.get(e).schema}function Ob(e,t){var r,a,s,o;const u=e.seen.get(t);if(!u)throw new Error("Unprocessed schema. This is a bug in Zod.");const c=new Map;for(const p of e.seen.entries()){const v=(r=e.metadataRegistry.get(p[0]))==null?void 0:r.id;if(v){const b=c.get(v);if(b&&b!==p[0])throw new Error(`Duplicate schema id "${v}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);c.set(v,p[0])}}const f=p=>{var v;const b=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const _=(v=e.external.registry.get(p[0]))==null?void 0:v.id,T=e.external.uri??(O=>O);if(_)return{ref:T(_)};const R=p[1].defId??p[1].schema.id??`schema${e.counter++}`;return p[1].defId=R,{defId:R,ref:`${T("__shared")}#/${b}/${R}`}}if(p[1]===u)return{ref:"#"};const y=`#/${b}/`,k=p[1].schema.id??`__schema${e.counter++}`;return{defId:k,ref:y+k}},h=p=>{if(p[1].schema.$ref)return;const v=p[1],{ref:b,defId:y}=f(p);v.def={...v.schema},y&&(v.defId=y);const k=v.schema;for(const _ in k)delete k[_];k.$ref=b};if(e.cycles==="throw")for(const p of e.seen.entries()){const v=p[1];if(v.cycle)throw new Error(`Cycle detected: #/${(a=v.cycle)==null?void 0:a.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const p of e.seen.entries()){const v=p[1];if(t===p[0]){h(p);continue}if(e.external){const b=(s=e.external.registry.get(p[0]))==null?void 0:s.id;if(t!==p[0]&&b){h(p);continue}}if((o=e.metadataRegistry.get(p[0]))!=null&&o.id){h(p);continue}if(v.cycle){h(p);continue}if(v.count>1&&e.reused==="ref"){h(p);continue}}}function Rb(e,t){var r,a,s;const o=e.seen.get(t);if(!o)throw new Error("Unprocessed schema. This is a bug in Zod.");const u=h=>{const p=e.seen.get(h);if(p.ref===null)return;const v=p.def??p.schema,b={...v},y=p.ref;if(p.ref=null,y){u(y);const _=e.seen.get(y),T=_.schema;if(T.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(T)):Object.assign(v,T),Object.assign(v,b),h._zod.parent===y)for(const R in v)R==="$ref"||R==="allOf"||R in b||delete v[R];if(T.$ref)for(const R in v)R==="$ref"||R==="allOf"||R in _.def&&JSON.stringify(v[R])===JSON.stringify(_.def[R])&&delete v[R]}const k=h._zod.parent;if(k&&k!==y){u(k);const _=e.seen.get(k);if(_!=null&&_.schema.$ref&&(v.$ref=_.schema.$ref,_.def))for(const T in v)T==="$ref"||T==="allOf"||T in _.def&&JSON.stringify(v[T])===JSON.stringify(_.def[T])&&delete v[T]}e.override({zodSchema:h,jsonSchema:v,path:p.path??[]})};for(const h of[...e.seen.entries()].reverse())u(h[0]);const c={};if(e.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?c.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?c.$schema="http://json-schema.org/draft-04/schema#":e.target,(r=e.external)!=null&&r.uri){const h=(a=e.external.registry.get(t))==null?void 0:a.id;if(!h)throw new Error("Schema is missing an `id` property");c.$id=e.external.uri(h)}Object.assign(c,o.def??o.schema);const f=((s=e.external)==null?void 0:s.defs)??{};for(const h of e.seen.entries()){const p=h[1];p.def&&p.defId&&(f[p.defId]=p.def)}e.external||Object.keys(f).length>0&&(e.target==="draft-2020-12"?c.$defs=f:c.definitions=f);try{const h=JSON.parse(JSON.stringify(c));return Object.defineProperty(h,"~standard",{value:{...t["~standard"],jsonSchema:{input:Pc(t,"input",e.processors),output:Pc(t,"output",e.processors)}},enumerable:!1,writable:!1}),h}catch{throw new Error("Error converting schema to JSON.")}}function ea(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const a=e._zod.def;if(a.type==="transform")return!0;if(a.type==="array")return ea(a.element,r);if(a.type==="set")return ea(a.valueType,r);if(a.type==="lazy")return ea(a.getter(),r);if(a.type==="promise"||a.type==="optional"||a.type==="nonoptional"||a.type==="nullable"||a.type==="readonly"||a.type==="default"||a.type==="prefault")return ea(a.innerType,r);if(a.type==="intersection")return ea(a.left,r)||ea(a.right,r);if(a.type==="record"||a.type==="map")return ea(a.keyType,r)||ea(a.valueType,r);if(a.type==="pipe")return ea(a.in,r)||ea(a.out,r);if(a.type==="object"){for(const s in a.shape)if(ea(a.shape[s],r))return!0;return!1}if(a.type==="union"){for(const s of a.options)if(ea(s,r))return!0;return!1}if(a.type==="tuple"){for(const s of a.items)if(ea(s,r))return!0;return!!(a.rest&&ea(a.rest,r))}return!1}const PA=(e,t={})=>r=>{const a=Cb({...r,processors:t});return Gr(e,a),Ob(a,e),Rb(a,e)},Pc=(e,t,r={})=>a=>{const{libraryOptions:s,target:o}=a??{},u=Cb({...s??{},target:o,io:t,processors:r});return Gr(e,u),Ob(u,e),Rb(u,e)},HA={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},ZA=(e,t,r,a)=>{const s=r;s.type="string";const{minimum:o,maximum:u,format:c,patterns:f,contentEncoding:h}=e._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof u=="number"&&(s.maxLength=u),c&&(s.format=HA[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const p=[...f];p.length===1?s.pattern=p[0].source:p.length>1&&(s.allOf=[...p.map(v=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},GA=(e,t,r,a)=>{const s=r,{minimum:o,maximum:u,format:c,multipleOf:f,exclusiveMaximum:h,exclusiveMinimum:p}=e._zod.bag;typeof c=="string"&&c.includes("int")?s.type="integer":s.type="number",typeof p=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.minimum=p,s.exclusiveMinimum=!0):s.exclusiveMinimum=p),typeof o=="number"&&(s.minimum=o,typeof p=="number"&&t.target!=="draft-04"&&(p>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof u=="number"&&(s.maximum=u,typeof h=="number"&&t.target!=="draft-04"&&(h<=u?delete s.maximum:delete s.exclusiveMaximum)),typeof f=="number"&&(s.multipleOf=f)},VA=(e,t,r,a)=>{r.not={}},FA=(e,t,r,a)=>{},YA=(e,t,r,a)=>{const s=e._zod.def,o=db(s.entries);o.every(u=>typeof u=="number")&&(r.type="number"),o.every(u=>typeof u=="string")&&(r.type="string"),r.enum=o},XA=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},KA=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},JA=(e,t,r,a)=>{const s=r,o=e._zod.def,{minimum:u,maximum:c}=e._zod.bag;typeof u=="number"&&(s.minItems=u),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=Gr(o.element,t,{...a,path:[...a.path,"items"]})},WA=(e,t,r,a)=>{var s;const o=r,u=e._zod.def;o.type="object",o.properties={};const c=u.shape;for(const p in c)o.properties[p]=Gr(c[p],t,{...a,path:[...a.path,"properties",p]});const f=new Set(Object.keys(c)),h=new Set([...f].filter(p=>{const v=u.shape[p]._zod;return t.io==="input"?v.optin===void 0:v.optout===void 0}));h.size>0&&(o.required=Array.from(h)),((s=u.catchall)==null?void 0:s._zod.def.type)==="never"?o.additionalProperties=!1:u.catchall?u.catchall&&(o.additionalProperties=Gr(u.catchall,t,{...a,path:[...a.path,"additionalProperties"]})):t.io==="output"&&(o.additionalProperties=!1)},QA=(e,t,r,a)=>{const s=e._zod.def,o=s.inclusive===!1,u=s.options.map((c,f)=>Gr(c,t,{...a,path:[...a.path,o?"oneOf":"anyOf",f]}));o?r.oneOf=u:r.anyOf=u},eE=(e,t,r,a)=>{const s=e._zod.def,o=Gr(s.left,t,{...a,path:[...a.path,"allOf",0]}),u=Gr(s.right,t,{...a,path:[...a.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,f=[...c(o)?o.allOf:[o],...c(u)?u.allOf:[u]];r.allOf=f},tE=(e,t,r,a)=>{const s=e._zod.def,o=Gr(s.innerType,t,a),u=t.seen.get(e);t.target==="openapi-3.0"?(u.ref=s.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},rE=(e,t,r,a)=>{const s=e._zod.def;Gr(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType},aE=(e,t,r,a)=>{const s=e._zod.def;Gr(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType,r.default=JSON.parse(JSON.stringify(s.defaultValue))},nE=(e,t,r,a)=>{const s=e._zod.def;Gr(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},iE=(e,t,r,a)=>{const s=e._zod.def;Gr(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType;let u;try{u=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=u},sE=(e,t,r,a)=>{const s=e._zod.def,o=t.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;Gr(o,t,a);const u=t.seen.get(e);u.ref=o},oE=(e,t,r,a)=>{const s=e._zod.def;Gr(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType,r.readOnly=!0},Ib=(e,t,r,a)=>{const s=e._zod.def;Gr(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType},lE=be("ZodISODateTime",(e,t)=>{gT.init(e,t),or.init(e,t)});function uE(e){return bA(lE,e)}const cE=be("ZodISODate",(e,t)=>{vT.init(e,t),or.init(e,t)});function dE(e){return xA(cE,e)}const fE=be("ZodISOTime",(e,t)=>{yT.init(e,t),or.init(e,t)});function hE(e){return wA(fE,e)}const mE=be("ZodISODuration",(e,t)=>{bT.init(e,t),or.init(e,t)});function pE(e){return SA(mE,e)}const gE=(e,t)=>{gb.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>uk(e,r)},flatten:{value:r=>lk(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,Jm,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,Jm,2)}},isEmpty:{get(){return e.issues.length===0}}})},en=be("ZodError",gE,{Parent:Error}),vE=t1(en),yE=r1(en),bE=Sd(en),xE=_d(en),wE=fk(en),SE=hk(en),_E=mk(en),zE=pk(en),kE=gk(en),TE=vk(en),AE=yk(en),EE=bk(en),Er=be("ZodType",(e,t)=>(Ar.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:Pc(e,"input"),output:Pc(e,"output")}}),e.toJSONSchema=PA(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(ns(t,{checks:[...t.checks??[],...r.map(a=>typeof a=="function"?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),{parent:!0}),e.with=e.check,e.clone=(r,a)=>is(e,r,a),e.brand=()=>e,e.register=(r,a)=>(r.add(e,a),e),e.parse=(r,a)=>vE(e,r,a,{callee:e.parse}),e.safeParse=(r,a)=>bE(e,r,a),e.parseAsync=async(r,a)=>yE(e,r,a,{callee:e.parseAsync}),e.safeParseAsync=async(r,a)=>xE(e,r,a),e.spa=e.safeParseAsync,e.encode=(r,a)=>wE(e,r,a),e.decode=(r,a)=>SE(e,r,a),e.encodeAsync=async(r,a)=>_E(e,r,a),e.decodeAsync=async(r,a)=>zE(e,r,a),e.safeEncode=(r,a)=>kE(e,r,a),e.safeDecode=(r,a)=>TE(e,r,a),e.safeEncodeAsync=async(r,a)=>AE(e,r,a),e.safeDecodeAsync=async(r,a)=>EE(e,r,a),e.refine=(r,a)=>e.check(bM(r,a)),e.superRefine=r=>e.check(xM(r)),e.overwrite=r=>e.check(tl(r)),e.optional=()=>z2(e),e.exactOptional=()=>sM(e),e.nullable=()=>k2(e),e.nullish=()=>z2(k2(e)),e.nonoptional=r=>fM(e,r),e.array=()=>Qm(e),e.or=r=>eM([e,r]),e.and=r=>rM(e,r),e.transform=r=>T2(e,nM(r)),e.default=r=>uM(e,r),e.prefault=r=>dM(e,r),e.catch=r=>mM(e,r),e.pipe=r=>T2(e,r),e.readonly=()=>vM(e),e.describe=r=>{const a=e.clone();return cu.add(a,{description:r}),a},Object.defineProperty(e,"description",{get(){var r;return(r=cu.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return cu.get(e);const a=e.clone();return cu.add(a,r[0]),a},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),Db=be("_ZodString",(e,t)=>{a1.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(a,s,o)=>ZA(e,a,s);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...a)=>e.check(AA(...a)),e.includes=(...a)=>e.check(NA(...a)),e.startsWith=(...a)=>e.check(CA(...a)),e.endsWith=(...a)=>e.check(OA(...a)),e.min=(...a)=>e.check(qc(...a)),e.max=(...a)=>e.check(Mb(...a)),e.length=(...a)=>e.check(Nb(...a)),e.nonempty=(...a)=>e.check(qc(1,...a)),e.lowercase=a=>e.check(EA(a)),e.uppercase=a=>e.check(MA(a)),e.trim=()=>e.check(IA()),e.normalize=(...a)=>e.check(RA(...a)),e.toLowerCase=()=>e.check(DA()),e.toUpperCase=()=>e.check(jA()),e.slugify=()=>e.check($A())}),ME=be("ZodString",(e,t)=>{a1.init(e,t),Db.init(e,t),e.email=r=>e.check(WT(NE,r)),e.url=r=>e.check(aA(CE,r)),e.jwt=r=>e.check(yA(VE,r)),e.emoji=r=>e.check(nA(OE,r)),e.guid=r=>e.check(v2(w2,r)),e.uuid=r=>e.check(QT(mc,r)),e.uuidv4=r=>e.check(eA(mc,r)),e.uuidv6=r=>e.check(tA(mc,r)),e.uuidv7=r=>e.check(rA(mc,r)),e.nanoid=r=>e.check(iA(RE,r)),e.guid=r=>e.check(v2(w2,r)),e.cuid=r=>e.check(sA(IE,r)),e.cuid2=r=>e.check(oA(DE,r)),e.ulid=r=>e.check(lA(jE,r)),e.base64=r=>e.check(pA(HE,r)),e.base64url=r=>e.check(gA(ZE,r)),e.xid=r=>e.check(uA($E,r)),e.ksuid=r=>e.check(cA(BE,r)),e.ipv4=r=>e.check(dA(LE,r)),e.ipv6=r=>e.check(fA(UE,r)),e.cidrv4=r=>e.check(hA(qE,r)),e.cidrv6=r=>e.check(mA(PE,r)),e.e164=r=>e.check(vA(GE,r)),e.datetime=r=>e.check(uE(r)),e.date=r=>e.check(dE(r)),e.time=r=>e.check(hE(r)),e.duration=r=>e.check(pE(r))});function ai(e){return JT(ME,e)}const or=be("ZodStringFormat",(e,t)=>{rr.init(e,t),Db.init(e,t)}),NE=be("ZodEmail",(e,t)=>{oT.init(e,t),or.init(e,t)}),w2=be("ZodGUID",(e,t)=>{iT.init(e,t),or.init(e,t)}),mc=be("ZodUUID",(e,t)=>{sT.init(e,t),or.init(e,t)}),CE=be("ZodURL",(e,t)=>{lT.init(e,t),or.init(e,t)}),OE=be("ZodEmoji",(e,t)=>{uT.init(e,t),or.init(e,t)}),RE=be("ZodNanoID",(e,t)=>{cT.init(e,t),or.init(e,t)}),IE=be("ZodCUID",(e,t)=>{dT.init(e,t),or.init(e,t)}),DE=be("ZodCUID2",(e,t)=>{fT.init(e,t),or.init(e,t)}),jE=be("ZodULID",(e,t)=>{hT.init(e,t),or.init(e,t)}),$E=be("ZodXID",(e,t)=>{mT.init(e,t),or.init(e,t)}),BE=be("ZodKSUID",(e,t)=>{pT.init(e,t),or.init(e,t)}),LE=be("ZodIPv4",(e,t)=>{xT.init(e,t),or.init(e,t)}),UE=be("ZodIPv6",(e,t)=>{wT.init(e,t),or.init(e,t)}),qE=be("ZodCIDRv4",(e,t)=>{ST.init(e,t),or.init(e,t)}),PE=be("ZodCIDRv6",(e,t)=>{_T.init(e,t),or.init(e,t)}),HE=be("ZodBase64",(e,t)=>{zT.init(e,t),or.init(e,t)}),ZE=be("ZodBase64URL",(e,t)=>{TT.init(e,t),or.init(e,t)}),GE=be("ZodE164",(e,t)=>{AT.init(e,t),or.init(e,t)}),VE=be("ZodJWT",(e,t)=>{MT.init(e,t),or.init(e,t)}),jb=be("ZodNumber",(e,t)=>{kb.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(a,s,o)=>GA(e,a,s),e.gt=(a,s)=>e.check(b2(a,s)),e.gte=(a,s)=>e.check(fm(a,s)),e.min=(a,s)=>e.check(fm(a,s)),e.lt=(a,s)=>e.check(y2(a,s)),e.lte=(a,s)=>e.check(dm(a,s)),e.max=(a,s)=>e.check(dm(a,s)),e.int=a=>e.check(S2(a)),e.safe=a=>e.check(S2(a)),e.positive=a=>e.check(b2(0,a)),e.nonnegative=a=>e.check(fm(0,a)),e.negative=a=>e.check(y2(0,a)),e.nonpositive=a=>e.check(dm(0,a)),e.multipleOf=(a,s)=>e.check(x2(a,s)),e.step=(a,s)=>e.check(x2(a,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function kn(e){return _A(jb,e)}const FE=be("ZodNumberFormat",(e,t)=>{NT.init(e,t),jb.init(e,t)});function S2(e){return zA(FE,e)}const YE=be("ZodUnknown",(e,t)=>{CT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>FA()});function _2(){return kA(YE)}const XE=be("ZodNever",(e,t)=>{OT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>VA(e,r,a)});function KE(e){return TA(XE,e)}const JE=be("ZodArray",(e,t)=>{RT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>JA(e,r,a,s),e.element=t.element,e.min=(r,a)=>e.check(qc(r,a)),e.nonempty=r=>e.check(qc(1,r)),e.max=(r,a)=>e.check(Mb(r,a)),e.length=(r,a)=>e.check(Nb(r,a)),e.unwrap=()=>e.element});function Qm(e,t){return BA(JE,e,t)}const WE=be("ZodObject",(e,t)=>{DT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>WA(e,r,a,s),Nt(e,"shape",()=>t.shape),e.keyof=()=>Gi(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:_2()}),e.loose=()=>e.clone({...e._zod.def,catchall:_2()}),e.strict=()=>e.clone({...e._zod.def,catchall:KE()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>ak(e,r),e.safeExtend=r=>nk(e,r),e.merge=r=>ik(e,r),e.pick=r=>tk(e,r),e.omit=r=>rk(e,r),e.partial=(...r)=>sk($b,e,r[0]),e.required=(...r)=>ok(Bb,e,r[0])});function Fi(e,t){const r={type:"object",shape:e??{},...Xe(t)};return new WE(r)}const QE=be("ZodUnion",(e,t)=>{jT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>QA(e,r,a,s),e.options=t.options});function eM(e,t){return new QE({type:"union",options:e,...Xe(t)})}const tM=be("ZodIntersection",(e,t)=>{$T.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>eE(e,r,a,s)});function rM(e,t){return new tM({type:"intersection",left:e,right:t})}const ep=be("ZodEnum",(e,t)=>{BT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(a,s,o)=>YA(e,a,s),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(a,s)=>{const o={};for(const u of a)if(r.has(u))o[u]=t.entries[u];else throw new Error(`Key ${u} not found in enum`);return new ep({...t,checks:[],...Xe(s),entries:o})},e.exclude=(a,s)=>{const o={...t.entries};for(const u of a)if(r.has(u))delete o[u];else throw new Error(`Key ${u} not found in enum`);return new ep({...t,checks:[],...Xe(s),entries:o})}});function Gi(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(a=>[a,a])):e;return new ep({type:"enum",entries:r,...Xe(t)})}const aM=be("ZodTransform",(e,t)=>{LT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>KA(e,r),e._zod.parse=(r,a)=>{if(a.direction==="backward")throw new ub(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(wu(o,r.value,t));else{const u=o;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=r.value),u.inst??(u.inst=e),r.issues.push(wu(u))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function nM(e){return new aM({type:"transform",transform:e})}const $b=be("ZodOptional",(e,t)=>{Eb.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>Ib(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function z2(e){return new $b({type:"optional",innerType:e})}const iM=be("ZodExactOptional",(e,t)=>{UT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>Ib(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function sM(e){return new iM({type:"optional",innerType:e})}const oM=be("ZodNullable",(e,t)=>{qT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>tE(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function k2(e){return new oM({type:"nullable",innerType:e})}const lM=be("ZodDefault",(e,t)=>{PT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>aE(e,r,a,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function uM(e,t){return new lM({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():hb(t)}})}const cM=be("ZodPrefault",(e,t)=>{HT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>nE(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function dM(e,t){return new cM({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():hb(t)}})}const Bb=be("ZodNonOptional",(e,t)=>{ZT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>rE(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function fM(e,t){return new Bb({type:"nonoptional",innerType:e,...Xe(t)})}const hM=be("ZodCatch",(e,t)=>{GT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>iE(e,r,a,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function mM(e,t){return new hM({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const pM=be("ZodPipe",(e,t)=>{VT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>sE(e,r,a,s),e.in=t.in,e.out=t.out});function T2(e,t){return new pM({type:"pipe",in:e,out:t})}const gM=be("ZodReadonly",(e,t)=>{FT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>oE(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function vM(e){return new gM({type:"readonly",innerType:e})}const yM=be("ZodCustom",(e,t)=>{YT.init(e,t),Er.init(e,t),e._zod.processJSONSchema=(r,a,s)=>XA(e,r)});function bM(e,t={}){return LA(yM,e,t)}function xM(e){return UA(e)}const wM=Fi({name:ai(),label:ai().optional(),color:ai().optional(),left:kn(),top:kn()}),SM=Fi({mode:Gi(["arrow","adjunction","corner","corner_inverse"]).optional(),head:Fi({name:Gi(["normal","none","epi","hook","maps_to","harpoon"]).optional(),side:Gi(["top","bottom"]).optional()}).optional(),tail:Fi({name:Gi(["normal","none","mono","hook","maps_to"]).optional(),side:Gi(["top","bottom"]).optional()}).optional(),body:Fi({name:Gi(["solid","dashed","dotted","squiggly","wavy","barred","double_barred","bullet_solid","bullet_hollow","none"]).optional()}).optional(),level:kn().int().optional()}),_M=Fi({from:ai(),to:ai(),name:ai().optional(),label:ai().optional(),color:ai().optional(),label_color:ai().optional(),curve:kn().optional(),shift:kn().optional(),radius:kn().optional(),angle:kn().optional(),label_alignment:Gi(["over","left","right"]).optional(),shorten:Fi({source:kn().optional(),target:kn().optional()}).optional(),style:SM.optional()}),zM=Fi({version:kn().int().optional(),nodes:Qm(wM),arrows:Qm(_M).optional()});class pc{constructor(t,...r){for(const a of r)this[a]=Symbol(`${t}::${a}`)}}class Be{constructor(t,r){tt(this,"x"),tt(this,"y"),this.x=t,this.y=r}static zero(){return new Be(0,0)}static lendir(t,r){return new Be(Math.cos(r)*t,Math.sin(r)*t)}static diag(t){return new Be(t,t)}toString(){return`${this.x} ${this.y}`}toArray(){return[this.x,this.y]}px(t=!0){return`${this.x}px${t?",":""} ${this.y}px`}eq(t){return this.x===t.x&&this.y===t.y}add(t){return new Be(this.x+t.x,this.y+t.y)}sub(t){return new Be(this.x-t.x,this.y-t.y)}neg(){return new Be(-this.x,-this.y)}scale(t,r){return new Be(this.x*t,this.y*r)}inv_scale(t,r){return new Be(this.x/t,this.y/r)}mul(t){return this.scale(t,t)}div(t){return this.inv_scale(t,t)}max(t){return new Be(Math.max(this.x,t.x),Math.max(this.y,t.y))}min(t){return new Be(Math.min(this.x,t.x),Math.min(this.y,t.y))}rotate(t){return new Be(this.x*Math.cos(t)-this.y*Math.sin(t),this.y*Math.cos(t)+this.x*Math.sin(t))}length(){return Math.hypot(this.y,this.x)}angle(){return Math.atan2(this.y,this.x)}lerp(t,r){return this.add(t.sub(this).mul(r))}is_zero(){return this.x===0&&this.y===0}map(t){return new Be(t(this.x),t(this.y))}}class kM extends Be{}class Ac extends kM{get width(){return this.x}get height(){return this.y}}function TM(e){return e*180/Math.PI}class gc{constructor(){tt(this,"commands"),this.commands=[]}toString(){return this.commands.join(`
`)}move_to(t){return this.commands.push(`M ${t.x} ${t.y}`),this}move_by(t){return this.commands.push(`m ${t.x} ${t.y}`),this}line_to(t){return t.x===0?this.commands.push(`V ${t.y}`):t.y===0?this.commands.push(`H ${t.x}`):this.commands.push(`L ${t.x} ${t.y}`),this}line_by(t){return t.x===0?this.commands.push(`v ${t.y}`):t.y===0?this.commands.push(`h ${t.x}`):this.commands.push(`l ${t.x} ${t.y}`),this}curve_by(t,r){return this.commands.push(`q ${t.x} ${t.y} ${r.x} ${r.y}`),this}arc_by(t,r,a,s,o){return this.commands.push(`a ${Math.abs(t.x)} ${Math.abs(t.y)}
      ${TM(r)} ${a?1:0} ${s?1:0}
      ${o.x} ${o.y}`),this}}function Ec(e,t){return(e%t+t)%t}const Ma=10**-6,A2=1/Ma;function Hc(e){return Math.round(e*A2)/A2}class Aa{static point_inside_polygon(t,r){const a=(s,o)=>{const u=s[0],c=s[1].sub(u),f=o.sub(u);return c.x*f.y-c.y*f.x};return r.map((s,o)=>{if(r[o].y<=t.y!=r[(o+1)%4].y<=t.y){const u=a([r[o],r[(o+1)%4]],t);if(u>0)return 1;if(u<0)return-1}return 0}).reduce((s,o)=>s+o,0)!==0}static add_intersection(t,r){for(const a of t)if(Math.abs(a.x-r.x)<Ma&&Math.abs(a.y-r.y)<Ma)return;t.add(new Be(Hc(r.x),Hc(r.y)))}static check_for_containment(t,r,a){const s=new Zc(r.centre,r.size,0);if(Aa.point_inside_polygon(t,s.points())){if(a)return[new kd(r.centre,0,0)];throw new Error("Curve was entirely contained by rounded rectangle.")}return[]}}class tp extends Aa{constructor(t,r,a,s){super(),tt(this,"origin"),tt(this,"w"),tt(this,"h"),tt(this,"angle"),tt(this,"end"),tt(this,"control"),this.origin=t,this.w=r,this.h=a,this.angle=s,this.end=this.origin.add(new Be(this.w,0).rotate(this.angle)),this.control=this.origin.add(new Be(this.w/2,this.h).rotate(this.angle))}point(t){return this.origin.lerp(this.control,t).lerp(this.control.lerp(this.end,t),t)}tangent(t){return this.control.lerp(this.end,t).sub(this.origin.lerp(this.control,t)).angle()}delineate(t){const r=[[0,this.point(0)],[t,this.point(t)]];let a,s=0;do{a=s,s=0;for(let o=0;o<r.length-1;++o)s+=r[o+1][1].sub(r[o][1]).length()}while(s-a>.25&&(()=>{for(let o=0;o<r.length-1;++o){const u=(r[o][0]+r[o+1][0])/2;r.splice(++o,0,[u,this.point(u)])}return!0})());return{points:r,length:s}}arc_length(t){const{length:r}=this.delineate(t);return r}t_after_length(t=!1){const{points:r}=this.delineate(1);return a=>{if(a===0)return 0;if(a<0){if(t)return 0;throw new Error("Length was less than 0.")}let s=0;for(let o=0;o<r.length-1;++o){const u=r[o+1][1].sub(r[o][1]).length();if(s+u>=a)return r[o][0]+(r[o+1][0]-r[o][0])*(a-s)/u;s+=u}if(t)return 1;throw new Error("Length was greater than the arc length.")}}get height(){return this.h/2}get width(){return this.w}intersections_with_rounded_rectangle(t,r){const a=this.h||1,s=t.points().map(c=>(c=c.sub(this.origin),c=c.rotate(-this.angle),c=c.inv_scale(this.w,a),c)),o=new Set,u=c=>{const f=(c[1].y-c[0].y)/(c[1].x-c[0].x);return{m:f,c:c[0].y-f*c[0].x}};if(this.h===0)for(let c=0;c<s.length;++c){const f=[s[c],s[(c+1)%s.length]];if(Math.abs(f[0].x-f[1].x)<=Ma)f[0].x>=0&&f[0].x<=1&&Math.min(f[0].y,f[1].y)<=0&&Math.max(f[0].y,f[1].y)>=0&&Aa.add_intersection(o,new Be(f[0].x,0));else{const{m:h,c:p}=u(f);if(Math.abs(h)>Ma){const v=-p/h;v>=0&&v<=1&&v>=Math.min(f[0].x,f[1].x)-Ma&&v<=Math.max(f[0].x,f[1].x)+Ma&&Aa.add_intersection(o,new Be(v,0))}else if(Math.abs(f[0].y)<=Ma){const v=Math.min(f[0].x,f[1].x),b=Math.max(f[0].x,f[1].x);v<=1&&b>=0&&(Aa.add_intersection(o,new Be(Math.max(v,0),0)),Aa.add_intersection(o,new Be(Math.min(b,1),0)))}}}else for(let c=0;c<s.length;++c){const f=[s[c],s[(c+1)%s.length]];if(Math.abs(f[0].x-f[1].x)<=Ma){const h=E2.y_intersection_with_vertical_line(f[0].x);h>=0&&h>=Math.min(f[0].y,f[1].y)&&h<=Math.max(f[0].y,f[1].y)&&Aa.add_intersection(o,new Be(f[0].x,h))}else{const{m:h,c:p}=u(f);E2.x_intersections_with_nonvertical_line(h,p).filter(v=>v>=0&&v<=1&&v>=Math.min(f[0].x,f[1].x)&&v<=Math.max(f[0].x,f[1].x)).map(v=>new Be(v,h*v+p)).forEach(v=>Aa.add_intersection(o,v))}}return o.size===0?Aa.check_for_containment(this.origin,t,r):Array.from(o).map(c=>new kd(c.scale(this.w,a),c.x,Math.atan2((2-4*c.x)*a,this.w)))}render(t){return t.curve_by(new Be(this.w/2,this.h).rotate(this.angle),new Be(this.w,0).rotate(this.angle))}}class kd extends Be{constructor(t,r,a){super(t.x,t.y),tt(this,"t"),tt(this,"tangentAngle"),this.t=r,this.tangentAngle=a}}class E2{static x_intersections_with_nonvertical_line(t,r){const a=t**2-4*t+4-8*r;return a>0?[(2-t+a**.5)/4,(2-t-a**.5)/4]:a===0?[(2-t+a**.5)/4]:[]}static y_intersection_with_vertical_line(t){return 2*t*(1-t)}}class Zc{constructor(t,r,a){tt(this,"centre"),tt(this,"size"),tt(this,"r"),this.centre=t,this.size=r,this.r=a}points(t=5){const r=[],a=this.r!==0?Math.PI/Math.atan(t/(2*this.r)):0,s=Math.ceil(a),o=this.r/Math.cos(Math.PI/s),u=(f,h,p)=>{r.push(this.centre.add(this.size.div(2).sub(Be.diag(this.r)).scale(f,h)).add(Be.lendir(this.r,p)));for(let v=0;v<s/4;++v){const b=(v+.5)/s*2*Math.PI+p;r.push(this.centre.add(this.size.div(2).sub(Be.diag(this.r)).scale(f,h)).add(Be.lendir(o,b)))}return p+=Math.PI/2,r.push(this.centre.add(this.size.div(2).sub(Be.diag(this.r)).scale(f,h)).add(Be.lendir(this.r,p))),p};let c=0;c=u(1,1,c),c=u(-1,1,c),c=u(-1,-1,c),c=u(1,-1,c);for(let f=r.length-2;f>=0;--f)Math.abs(r[f].x-r[f+1].x)<=Ma&&Math.abs(r[f].y-r[f+1].y)<=Ma&&r.splice(f+1,1);return r}}class M2 extends Aa{constructor(t,r,a,s,o){super(),tt(this,"origin"),tt(this,"chord"),tt(this,"major"),tt(this,"radius"),tt(this,"angle"),tt(this,"sagitta"),tt(this,"centre_normalised"),tt(this,"sweep_angle"),tt(this,"centre"),tt(this,"start_angle"),this.origin=t,this.chord=r,this.major=a,this.radius=s,this.angle=o,this.sagitta=this.radius-Math.sign(this.radius)*(this.radius**2-this.chord**2/4)**.5,this.centre_normalised=new Be(this.chord/2,(this.radius-this.sagitta)*(this.major?-1:1));const u=Ec(this.centre_normalised.neg().angle(),2*Math.PI);this.sweep_angle=Math.PI+(2*Math.PI-2*u)*this.clockwise,this.centre=this.origin.add(this.centre_normalised.rotate(this.angle)),this.start_angle=Ec(u+this.angle,2*Math.PI)}get clockwise(){return this.radius>=0?1:-1}point(t){return this.centre.add(new Be(Math.abs(this.radius),0).rotate(this.start_angle+t*this.sweep_angle*this.clockwise))}tangent(t){return this.start_angle+(t*this.sweep_angle+Math.PI/2)*this.clockwise}arc_length(t){return t*this.sweep_angle*Math.abs(this.radius)}t_after_length(t=!1){return r=>{if(r<0){if(t)return 0;throw new Error("Length was less than 0.")}if(r>this.arc_length(1)){if(t)return 1;throw new Error("Length was greater than the arc length.")}return r/(this.sweep_angle*Math.abs(this.radius))}}get height(){return Math.abs(this.major?this.radius*2-this.sagitta:this.sagitta)}get width(){return this.major?Math.abs(this.radius)*2:this.chord}angle_in_arc(t){const r=o=>{for(;o<-Math.PI;)o+=2*Math.PI;for(;o>Math.PI;)o-=2*Math.PI;return o},a=r(this.start_angle-t),s=r(this.start_angle+this.sweep_angle*this.clockwise-t);return(a*s<0&&Math.abs(a-s)<Math.PI)!==this.major}intersections_with_rounded_rectangle(t,r){if(!this.major&&Math.abs(this.sagitta)<=1)return new tp(this.origin,this.chord,0,this.angle).intersections_with_rounded_rectangle(t,r);const a=t.points().map(o=>(o=o.sub(this.centre).map(Hc),o));this.radius<0&&a.reverse();const s=new Set;for(let o=0;o<a.length;++o){const u=[a[o],a[(o+1)%a.length]],c=u[1].sub(u[0]),f=u[0].x*u[1].y-u[1].x*u[0].y,h=c.length()**2,p=this.radius**2*h-f**2;if(!(Math.sign(p)<0))for(const v of Math.abs(p)<=Ma?[0]:[1,-1]){const[b,y]=[(f*c.y+v*c.x*p**.5*(c.y<0?-1:1))/h,(-f*c.x+v*p**.5*Math.abs(c.y))/h].map(Hc);b>=Math.min(u[0].x,u[1].x)&&b<=Math.max(u[0].x,u[1].x)&&y>=Math.min(u[0].y,u[1].y)&&y<=Math.max(u[0].y,u[1].y)&&this.angle_in_arc(Math.atan2(y,b))&&Aa.add_intersection(s,new Be(b,y))}}return s.size===0?Aa.check_for_containment(this.origin,t,r):Array.from(s).map(o=>{const u=Ec((Math.atan2(o.y,o.x)-this.start_angle)*this.clockwise,2*Math.PI)/this.sweep_angle;return new kd(o.add(this.centre).sub(this.origin).rotate(-this.angle),u,this.tangent(u))})}render(t){return!this.major&&Math.abs(this.sagitta)<=1?t.line_by(new Be(this.chord,0).rotate(this.angle)):t.arc_by(Be.diag(Math.abs(this.radius)),0,this.major,this.radius>=0,new Be(this.chord,0).rotate(this.angle))}}const Te={LINE_SPACING:4.5,STROKE_WIDTH:1.5,BACKGROUND_PADDING:16,BACKGROUND_OPACITY:.2,MASK_PADDING:4,HEAD_SPACING:2,SQUIGGLY_PADDING:4,SQUIGGLY_TRIANGLE_HEIGHT:2,ADJUNCTION_LINE_LENGTH:16,CORNER_LINE_LENGTH:12,HANDLE_RADIUS:14,ARC:{OUTER_DIS:96,INNER_DIS:64},ARROW_SHAPE:new pc("ARROW_SHAPE","BEZIER","ARC"),ARROW_BODY_STYLE:new pc("ARROW_BODY_STYLE","NONE","LINE","SQUIGGLY","ADJUNCTION","PROARROW","DOUBLE_PROARROW","BULLET_SOLID","BULLET_HOLLOW"),ARROW_DASH_STYLE:new pc("ARROW_DASH_STYLE","SOLID","DASHED","DOTTED"),ARROW_HEAD_STYLE:{NONE:[],NORMAL:["epi"],EPI:["epi","epi"],MONO:["mono"],MAPS_TO:["maps to"],HARPOON_TOP:["harpoon-top"],HARPOON_BOTTOM:["harpoon-bottom"],HOOK_TOP:["hook-top"],HOOK_BOTTOM:["hook-bottom"],CORNER:["corner"],CORNER_INVERSE:["corner-inverse"]},LABEL_ALIGNMENT:new pc("LABEL_ALIGNMENT","CENTRE","OVER","LEFT","RIGHT")};class Lb{constructor(){tt(this,"level",1),tt(this,"label_position",.5),tt(this,"curve",0),tt(this,"angle",0),tt(this,"shift",0),tt(this,"shorten",{tail:0,head:0}),tt(this,"shape",Te.ARROW_SHAPE.BEZIER),tt(this,"body_style",Te.ARROW_BODY_STYLE.LINE),tt(this,"dash_style",Te.ARROW_DASH_STYLE.SOLID),tt(this,"heads",Te.ARROW_HEAD_STYLE.NORMAL),tt(this,"tails",Te.ARROW_HEAD_STYLE.NONE),tt(this,"colour","black")}}class AM{constructor(t){tt(this,"origin"),tt(this,"size"),tt(this,"radius"),this.origin=t,this.size=new Ac(0,0),this.radius=0}}class N2{constructor(t,r,a){tt(this,"origin"),tt(this,"size"),tt(this,"radius"),this.origin=t,this.size=r,this.radius=a}}class EM{constructor(t,r,a=new Lb,s=null,o="arrow"){tt(this,"source"),tt(this,"target"),tt(this,"style"),tt(this,"label"),tt(this,"id"),this.source=t,this.target=r,this.style=a,this.label=s,this.id=o}origin(){const t=this.target.origin.sub(this.source.origin);if(this.style.shape===Te.ARROW_SHAPE.BEZIER||t.length()>0)return{source:this.source.origin,target:this.target.origin};{const r=t.angle()+this.style.angle+Math.PI/2,a=Be.lendir(.01/2,r);return{source:this.source.origin.sub(a),target:this.target.origin.add(a)}}}vector(){const t=this.origin();return t.target.sub(t.source)}angle(){return this.vector().angle()}length(){return this.vector().length()}curve(t=this.origin().source,r=this.angle()){const a=this.length();switch(this.style.shape){case Te.ARROW_SHAPE.BEZIER:return new tp(t,a,-this.style.curve,r);case Te.ARROW_SHAPE.ARC:return a<.1?new M2(t,a,!0,-this.style.curve,r):this.arc_for_chord(t,a,-this.style.curve,r);default:return new tp(t,a,-this.style.curve,r)}}arc_for_chord(t,r,a,s){const o=Te.ARC.OUTER_DIS,u=Te.ARC.INNER_DIS,c=u/2,f=o-u,h=r>=o?Ma:c*((o-r)/f),p=h/2+r**2/(8*h),v=r<=u?c+(u-r)/u*(a-c):p;return new M2(t,r,r<=u,v,s)}find_endpoints(){const t=this.origin(),r=(o,u,c)=>{const f=this.curve();if(o instanceof AM||o.size.is_zero()){const p=c?0:1;return new kd(u.sub(t.source).rotate(-f.angle),p,f.tangent(p))}const h=f.intersections_with_rounded_rectangle(new Zc(u,o.size,o.radius),!1);if(h.length===0)throw new Error("No intersections found.");return h.sort((p,v)=>p.t-v.t),this.style.shape,Te.ARROW_SHAPE.BEZIER,h[c?0:h.length-1]},a=r(this.source,t.source,!0),s=r(this.target,t.target,!1);return[a,s]}compute(){var t,r,a,s,o,u,c,f,h;const p=this.style.level*Te.STROKE_WIDTH+(this.style.level-1)*Te.LINE_SPACING,v=this.style.body_style===Te.ARROW_BODY_STYLE.SQUIGGLY?this.style.level*Te.SQUIGGLY_TRIANGLE_HEIGHT*2+Te.STROKE_WIDTH+(this.style.level-1)*Te.LINE_SPACING:p,b=Te.LINE_SPACING+Te.STROKE_WIDTH+(this.style.level-1)*2,y=v+(Te.LINE_SPACING+Te.STROKE_WIDTH)*2,k=this.length(),_=this.curve(Be.zero(),0),T=_.t_after_length(!0),R=2*Math.abs(_.height),O=this.angle(),M=new Be(0,this.style.shift).rotate(O),j=this.curve(this.origin().source.add(M),O),I=j.arc_length(1),$=new gc;$.move_to(j.origin),j.render($);const E=$.toString();let D,V;try{[D,V]=this.find_endpoints()}catch{return null}const de={start:this.style.tails.length>0&&this.style.tails[0].startsWith("hook")?b:0,end:this.style.heads.length>0&&this.style.heads[0].startsWith("hook")?b:0},Q=(ge,Me,_e)=>{if(ge.length>0&&ge[0]==="mono"){const je=j.tangent(T(j.arc_length(Me.t)+b*(_e?1:-1))),Ye=j.tangent(Me.t)-je;return Math.abs(v*Math.sin(Ye)/2)}return 0},G={start:Q(this.style.tails,D,!0),end:Q(this.style.heads,V,!1)},X={curve:j,start:D,end:V,length:k,height:R,stroke_width:p,edge_width:v,head_width:b,head_height:y,shorten:de,t_after_length:T,dash_padding:G,offset:Be.zero(),total_width_of_tails:0,total_width_of_heads:0},K=this.determine_label_position(X);let ae=0;if(((t=this.label)==null?void 0:t.alignment)===Te.LABEL_ALIGNMENT.OVER){const ge=D.t+(V.t-D.t)*this.style.label_position;ae=j.tangent(ge)*180/Math.PI}const q=((a=(r=this.label)==null?void 0:r.size)==null?void 0:a.width)||0,F=((o=(s=this.label)==null?void 0:s.size)==null?void 0:o.height)||0,J={x:K.x-q/2,y:K.y-F/2,width:q,height:F},Ae=[],De=[],L=[];if(this.style.body_style===Te.ARROW_BODY_STYLE.PROARROW||this.style.body_style===Te.ARROW_BODY_STYLE.DOUBLE_PROARROW||this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_SOLID||this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_HOLLOW){const ge=j.arc_length(D.t)+(this.style.shorten.tail+de.start)-G.start,Me=j.arc_length(V.t)-(this.style.shorten.head+de.end)+G.end,_e=Math.max(D.t,T(ge)),je=Math.min(V.t,T(Me)),Ye=(_e+je)/2;if(this.style.body_style===Te.ARROW_BODY_STYLE.PROARROW||this.style.body_style===Te.ARROW_BODY_STYLE.DOUBLE_PROARROW){const qe=this.style.body_style===Te.ARROW_BODY_STYLE.DOUBLE_PROARROW?[-2.5,2.5]:[0],ct=j.arc_length(Ye),nt=j.tangent(Ye)+Math.PI/2,dt=new Be(y,0),Gt=dt.div(2),jt=new gc;for(const ht of qe){let ur=ct+ht;ur<ge&&(ur=ge),ur>Me&&(ur=Me);const nr=T(ur),Re=j.point(nr);jt.move_to(Re.sub(Gt.rotate(nt))),jt.line_by(dt.rotate(nt))}Ae.push({props:{d:jt.toString(),fill:"none",stroke:this.style.colour,strokeWidth:Te.STROKE_WIDTH,strokeLinecap:"round"}})}else if(this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_SOLID||this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_HOLLOW){const qe=j.point(Ye),ct=y/2,nt=`M ${qe.x} ${qe.y} m ${ct}, 0 a ${ct},${ct} 0 1,0 -${ct*2},0 a ${ct},${ct} 0 1,0 ${ct*2},0`;Ae.push({props:{d:nt,fill:this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_SOLID?this.style.colour:"none",stroke:this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_HOLLOW?this.style.colour:"none",strokeWidth:Te.STROKE_WIDTH,strokeLinecap:"round"}})}}const ne=(ge,Me,_e,je)=>{const{pathD:Ye,total_width:qe}=this.redraw_heads(X,ge,Me,_e,je);if(Ye!==null)if(je)L.push({d:Ye,fill:"black",stroke:"none"});else{const ct={props:{d:Ye,fill:"none",stroke:this.style.colour,strokeWidth:Te.STROKE_WIDTH,strokeLinecap:"round"}};_e?De.push(ct):Ae.push(ct)}return qe};X.total_width_of_tails=ne(this.style.tails,D,!0,!1),X.total_width_of_heads=ne(this.style.heads,V,!1,!1);const{path:ee,dash_array:re}=this.edge_path(X),we=[],Ee=[];if(this.style.level>1||(u=this.label)!=null&&u.text&&this.label.text.trim()!==""){const ge=`${this.id}-mask`;if(L.push({d:"M -10000 -10000 h 20000 v 20000 h -20000 z",fill:"white",stroke:"none",strokeWidth:0}),ne(this.style.tails,D,!0,!0),ne(this.style.heads,V,!1,!0),this.style.level>1)for(let Me=this.style.level-1,_e=!0;Me>0;--Me,_e=!_e){const je=(Me-(_e?1:0))*Te.STROKE_WIDTH+(Me-(_e?0:1))*Te.LINE_SPACING;L.push({d:ee.toString(),stroke:_e?"black":"white",strokeWidth:je,fill:"none"})}if((c=this.label)!=null&&c.text&&J.width>0){const Me={x:J.x+J.width/2,y:J.y+J.height/2},_e=`M ${J.x} ${J.y} h ${J.width} v ${J.height} h -${J.width} z`;L.push({d:_e,fill:"black",stroke:"none",transform:ae?`rotate(${ae}, ${Me.x}, ${Me.y})`:void 0})}Ee.push({id:ge,paths:L}),we.push({d:ee.toString(),fill:"none",stroke:this.style.colour,strokeWidth:p,strokeDasharray:re||void 0,mask:`url(#${ge})`})}else we.push({d:ee.toString(),fill:"none",stroke:this.style.colour,strokeWidth:Te.STROKE_WIDTH,strokeDasharray:re||void 0});const ue=X.start.t+(X.end.t-X.start.t)*this.style.label_position,Ce=X.curve.point(ue),H=D.rotate(O).add(j.origin),oe=V.rotate(O).add(j.origin);return{arrow:{key:this.id,spec:{},paths:we,heads:Ae,tail:De,label:{text:(f=this.label)==null?void 0:f.text,color:(h=this.label)==null?void 0:h.color,props:{x:K.x,y:K.y,textAnchor:"middle",dominantBaseline:"middle",fontSize:16},bbox:J,rotation:ae},midpoint:{x:Ce.x,y:Ce.y},sourcePoint:{x:H.x,y:H.y},targetPoint:{x:oe.x,y:oe.y},arcLength:I,interactionPath:E},masks:Ee}}edge_path(t){const{curve:r,start:a,end:s,shorten:o,dash_padding:u,t_after_length:c,total_width_of_tails:f,total_width_of_heads:h}=t;let p=r.arc_length(a.t)+(this.style.shorten.tail+o.start)-u.start,v=r.arc_length(s.t)-(this.style.shorten.head+o.end)+u.end,b=r.arc_length(1);const y=new gc;if(this.style.body_style===Te.ARROW_BODY_STYLE.LINE||this.style.body_style===Te.ARROW_BODY_STYLE.PROARROW||this.style.body_style===Te.ARROW_BODY_STYLE.DOUBLE_PROARROW||this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_SOLID||this.style.body_style===Te.ARROW_BODY_STYLE.BULLET_HOLLOW)y.move_to(r.origin),r.render(y);else if(this.style.body_style===Te.ARROW_BODY_STYLE.ADJUNCTION){const _=r.point(.5),T=r.tangent(.5),R=T+Math.PI/2,O=new Be(Te.ADJUNCTION_LINE_LENGTH,0),M=O.div(2);y.move_to(_.sub(M.rotate(T))),y.line_by(O.rotate(T));const j=_.add(M.rotate(T)).sub(M.rotate(R));y.move_to(j),y.line_by(O.rotate(R))}else if(this.style.body_style===Te.ARROW_BODY_STYLE.SQUIGGLY){const _=Te.SQUIGGLY_TRIANGLE_HEIGHT*2,T=p+f+Te.SQUIGGLY_PADDING,R=v-(h+Te.SQUIGGLY_PADDING),O=r.point(c(T)),M=r.point(c(p)),j=r.point(c(v));y.move_to(M),y.line_to(O);for(let I=T,$=-1,E=1;I+E*_/2<R;$=[$,-$][E],E=1-E){I+=_/2;const D=c(I),V=r.tangent(D)+Math.PI/2*$,de=r.point(D).add(Be.lendir(Te.SQUIGGLY_TRIANGLE_HEIGHT*E,V));y.line_to(de)}y.line_to(j),p=0}let k=null;if(this.style.body_style!==Te.ARROW_BODY_STYLE.ADJUNCTION)if(this.style.dash_style!==Te.ARROW_DASH_STYLE.SOLID){let _=v-p,T=[];this.style.dash_style===Te.ARROW_DASH_STYLE.DASHED?T=[6,6]:this.style.dash_style===Te.ARROW_DASH_STYLE.DOTTED&&(T=[2,4]);const R=T.reduce((I,$)=>I+$,0),O=Math.floor(_/R),M=Array(O).fill(T).flat(),j=_-O*R;j>0&&M.push(j),k=`0 ${p} ${M.join(" ")} ${b-v}`}else k=`0 ${p} ${v-p} ${b-v}`;return{path:y,dash_array:k}}redraw_heads(t,r,a,s,o=!1){const{curve:u,head_width:c,head_height:f,t_after_length:h,shorten:p,dash_padding:v,stroke_width:b}=t;if(r.length===0)return{pathD:null,total_width:0};const y=s?1:-1,k=s?0:1;let _=0;const T=u.arc_length(a.t)+(s?p.start+this.style.shorten.tail:p.end+this.style.shorten.head)*y,R=new gc,O=[];let M=0;for(let j=0,I=0;j<r.length;++j){let $=0,E=c,D=0;if(r[j]==="mono"&&(E=c,D=c),r[j]==="maps to"&&($=c/2,E=c/2),j===0)I+=D;else{const V=r[j]===r[j-1]?2:1;I+=(M+E)/V+Te.HEAD_SPACING}M=$,O.push(I),_=I+$}for(let j=r.length-1;j>=0;--j){if(o&&j!==0)continue;const I=r[j],$=T+O[j]*y,E=h($),D=u.point(E);let V=u.tangent(E);if(I==="mono"&&(V+=Math.PI),I==="epi"||I==="mono"||I==="arrowhead"){const de=[[-1,k],[1,1-k]];for(const[Q,G]of de)if(R.move_to(D),R.arc_by(new Be(y*c,f/2),V,!1,G===1,new Be(y*c,Q*f/2).rotate(V)),o){let X=0;if(I==="epi"||I==="arrowhead")X=-y*(c+Te.MASK_PADDING);else if(I==="mono"){const K=(s?v.start:v.end)*2;X=y*(Te.MASK_PADDING+K)}R.line_by(Be.lendir(X,V)),R.line_by(new Be(0,-Q*f/2).rotate(V))}}else if(I==="maps to"){const de=Be.lendir(f/2,V+Math.PI/2),Q=Be.lendir(f/2,V-Math.PI/2);R.move_to(D.add(de)),R.line_to(D.add(Q))}else if(I.startsWith("harpoon")){const de=I.endsWith("top")?1:-1,Q=D,G=Q.add(Be.lendir(c*y,V)),X=Be.lendir(f/2*de,V+Math.PI/2);R.move_to(Q),R.line_to(G.add(X))}else if(I.startsWith("hook")){const de=I.endsWith("top")?-1:1,Q=.5;for(let G=0;G<this.style.level;++G){const X=D.add(new Be(Q,de*b/2-de*Te.STROKE_WIDTH/2-de*(Te.LINE_SPACING+Te.STROKE_WIDTH)*G).rotate(V));R.move_to(X),R.arc_by(new Be(y*c,c),V,!1,de===1?k===1:k!==1,new Be(0,de*c*2).rotate(V))}}else if(I==="corner"||I==="corner-inverse"){const de=I.endsWith("-inverse"),Q=Te.CORNER_LINE_LENGTH,G=Q/2**.5,X=u.point(h($+(de?0:G*y)));for(const K of[-1,1]){R.move_to(X);const ae=Math.PI/4,q=this.angle(),F=(de?0:Math.PI)+ae*Math.round(4*q/Math.PI)-q;R.line_by(Be.lendir(Q,F+Math.PI*k+K*Math.PI/4))}}}return{pathD:R.toString(),total_width:_}}determine_label_position(t){var r;const{start:a,end:s}=t,o=t.curve,u=a.t+(s.t-a.t)*this.style.label_position;let c=o.point(u);const f=(r=this.label)==null?void 0:r.alignment;if(f===Te.LABEL_ALIGNMENT.LEFT||f===Te.LABEL_ALIGNMENT.RIGHT){const h=o.tangent(u)-Math.PI/2,p=f===Te.LABEL_ALIGNMENT.LEFT?1:-1,v=Be.lendir(15*p,h);c=c.add(v)}return c}}const Ms=25;function Gc(e){const t=Ec(e,360);return t>180?t-360:t}function MM(e,t){var r,a,s,o,u,c,f,h,p,v,b;const y=new Lb;if(y.level=((r=e.style)==null?void 0:r.level)??1,y.curve=e.radius??e.curve??0,y.shift=e.shift??0,y.angle=(e.angle??0)*Math.PI/180,y.label_position=.5,e.color&&(y.colour=e.color),e.shorten&&(y.shorten.tail=e.shorten.source??0,y.shorten.head=e.shorten.target??0),y.shape=t?Te.ARROW_SHAPE.ARC:Te.ARROW_SHAPE.BEZIER,(a=e.style)!=null&&a.mode&&(e.style.mode==="adjunction"?(y.body_style=Te.ARROW_BODY_STYLE.ADJUNCTION,y.heads=Te.ARROW_HEAD_STYLE.NONE):e.style.mode==="corner"?(y.body_style=Te.ARROW_BODY_STYLE.NONE,y.heads=Te.ARROW_HEAD_STYLE.NONE,y.tails=Te.ARROW_HEAD_STYLE.CORNER):e.style.mode==="corner_inverse"&&(y.body_style=Te.ARROW_BODY_STYLE.NONE,y.heads=Te.ARROW_HEAD_STYLE.NONE,y.tails=Te.ARROW_HEAD_STYLE.CORNER_INVERSE)),(o=(s=e.style)==null?void 0:s.body)!=null&&o.name){const k=e.style.body.name.toUpperCase();k==="DASHED"&&(y.dash_style=Te.ARROW_DASH_STYLE.DASHED),k==="DOTTED"&&(y.dash_style=Te.ARROW_DASH_STYLE.DOTTED),k==="NONE"&&(y.body_style=Te.ARROW_BODY_STYLE.NONE),(k==="SQUIGGLY"||k==="WAVY")&&(y.body_style=Te.ARROW_BODY_STYLE.SQUIGGLY),k==="BARRED"&&(y.body_style=Te.ARROW_BODY_STYLE.PROARROW),k==="DOUBLE_BARRED"&&(y.body_style=Te.ARROW_BODY_STYLE.DOUBLE_PROARROW),k==="BULLET_SOLID"&&(y.body_style=Te.ARROW_BODY_STYLE.BULLET_SOLID),k==="BULLET_HOLLOW"&&(y.body_style=Te.ARROW_BODY_STYLE.BULLET_HOLLOW)}if((c=(u=e.style)==null?void 0:u.head)!=null&&c.name){let k=e.style.head.name.toUpperCase();k==="MAPS_TO"&&(k="MAPS_TO"),e.style.head.side&&(k+=`_${e.style.head.side.toUpperCase()}`);let _=k;k==="HOOK"&&(_=`HOOK_${((f=e.style.head.side)==null?void 0:f.toUpperCase())||"TOP"}`),k==="HARPOON"&&(_=`HARPOON_${((h=e.style.head.side)==null?void 0:h.toUpperCase())||"TOP"}`),y.heads=Te.ARROW_HEAD_STYLE[_]||Te.ARROW_HEAD_STYLE.NORMAL}if((v=(p=e.style)==null?void 0:p.tail)!=null&&v.name){let k=e.style.tail.name.toUpperCase(),_=k;k==="HOOK"&&(_=`HOOK_${((b=e.style.tail.side)==null?void 0:b.toUpperCase())||"TOP"}`),y.tails=Te.ARROW_HEAD_STYLE[_]||Te.ARROW_HEAD_STYLE.NONE}return y}function Su(e){try{const t=typeof e=="string"?JSON.parse(e):e,r=zM.parse({...t,version:t.version||1});if(!r.nodes||r.nodes.length===0)return{nodes:[],arrows:[],masks:[],viewBox:"0 0 100 100",error:null};const a=new Map(r.nodes.map(O=>[O.name,{pos:new Be(O.left,O.top),shape:new Zc(new Be(O.left,O.top),new Ac(Ms*2,Ms*2),Ms),isNode:!0,level:0}])),s=(r.arrows||[]).map((O,M)=>({...O,uniqueId:O.name||`_arrow_${M}`})),o=[],u=[],c=new Set(s);let f=!0;const h=s.length+1;let p=0;for(;c.size>0&&f;){if(p++>h)throw new Error("Dependency cycle detected");f=!1;const O=[...c];for(const M of O){const j=a.get(M.from),I=a.get(M.to);if(j&&I){const $=M.uniqueId,E=new N2(j.pos,j.shape.size,j.shape.r),D=new N2(I.pos,I.shape.size,I.shape.r),V=MM(M,M.from===M.to),de=M.label_alignment&&Te.LABEL_ALIGNMENT[M.label_alignment.toUpperCase()]||Te.LABEL_ALIGNMENT.CENTRE,Q=(M.label||"").length,G=Q>0?Math.max(30,Q*10+20):0,X=Q>0?24:0,K=new EM(E,D,V,{text:M.label||"",color:M.label_color,alignment:de,size:new Ac(G,X)},$).compute();if(K){const{arrow:ae,masks:q}=K;ae.spec=M,o.push(ae),u.push(...q),a.set($,{pos:new Be(ae.midpoint.x,ae.midpoint.y),shape:new Zc(new Be(ae.midpoint.x,ae.midpoint.y),new Ac(Math.max(30,G),Math.max(30,X)),2),isNode:!1,level:Math.max(j.level,I.level)+1})}c.delete(M),f=!0}}}let v=1/0,b=1/0,y=-1/0,k=-1/0;const _=(O,M)=>{v=Math.min(v,O),b=Math.min(b,M),y=Math.max(y,O),k=Math.max(k,M)};r.nodes.forEach(O=>{_(O.left-Ms,O.top-Ms),_(O.left+Ms,O.top+Ms)}),o.forEach(O=>{_(O.midpoint.x,O.midpoint.y)});const T=40,R=`${v-T} ${b-T} ${y-v+2*T} ${k-b+2*T}`;return{nodes:r.nodes,arrows:o,masks:u,viewBox:R,error:null}}catch(t){return console.error("Error computing diagram:",t),{nodes:[],arrows:[],masks:[],viewBox:"0 0 100 100",error:t.message}}}function NM(e){return e.from===e.to?{...e,radius:-(e.radius??40),angle:Gc((e.angle??0)+180),label_alignment:e.label_alignment==="left"?"right":e.label_alignment==="right"?"left":e.label_alignment}:{...e,from:e.to,to:e.from}}function CM(e){return e.from===e.to?{...e,angle:Gc((e.angle??0)+180),label_alignment:e.label_alignment==="left"?"right":e.label_alignment==="right"?"left":e.label_alignment}:{...e,curve:e.curve?-e.curve:void 0,shift:e.shift?-e.shift:void 0,angle:e.angle?Gc(-e.angle):void 0,label_alignment:e.label_alignment==="left"?"right":e.label_alignment==="right"?"left":e.label_alignment}}function OM(e=[],t){const r=new Set(t),a=[...t],s=new Set(t);for(;a.length>0;){const o=a.pop();e.forEach(u=>{const c=u.name||u.uniqueId;if(c&&(u.from===o||u.to===o)){s.has(c)||(s.add(c),r.add(c),a.push(c));const f=u.from===o?u.to:u.from;s.has(f)||(s.add(f),r.add(f),a.push(f))}})}return r}function RM(e,t,r){const a=e.filter(p=>t.has(p.name));if(a.length===0)return e;const s=Math.min(...a.map(p=>p.left)),o=Math.max(...a.map(p=>p.left)),u=Math.min(...a.map(p=>p.top)),c=Math.max(...a.map(p=>p.top)),f=new Be((s+o)/2,(u+c)/2),h=r*Math.PI/180;return e.map(p=>{if(!t.has(p.name))return p;const v=new Be(p.left,p.top).sub(f).rotate(h).add(f);return{...p,left:Math.round(v.x),top:Math.round(v.y)}})}function C2(e,t,r){const a=e.filter(h=>t.has(h.name));if(a.length===0)return e;const s=Math.min(...a.map(h=>h.left)),o=Math.max(...a.map(h=>h.left)),u=Math.min(...a.map(h=>h.top)),c=Math.max(...a.map(h=>h.top)),f=new Be((s+o)/2,(u+c)/2);return e.map(h=>{if(!t.has(h.name))return h;let p=h.left,v=h.top;return r==="horizontal"?p=f.x-(h.left-f.x):v=f.y-(h.top-f.y),{...h,left:Math.round(p),top:Math.round(v)}})}var O2={exports:{}},au={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R2;function IM(){if(R2)return au;R2=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(a,s,o){var u=null;if(o!==void 0&&(u=""+o),s.key!==void 0&&(u=""+s.key),"key"in s){o={};for(var c in s)c!=="key"&&(o[c]=s[c])}else o=s;return s=o.ref,{$$typeof:e,type:a,key:u,ref:s!==void 0?s:null,props:o}}return au.Fragment=t,au.jsx=r,au.jsxs=r,au}var I2;function DM(){return I2||(I2=1,O2.exports=IM()),O2.exports}var Yr=DM();const D2=16,j2="#333333";function $2({label:e,color:t,textProps:r,isNodeLabel:a=!1}){if(typeof e!="string"||e.trim()==="")return null;const s=e.includes("$"),o={...r,fontWeight:a?"bold":"normal",fontSize:D2,fill:t||j2};if(!s)return Yr.jsx("text",{...o,children:e});const u=e.replace(/\$/g,""),c=ob.renderToString(u,{throwOnError:!1,displayMode:!1}),f=150,h=50,p=(typeof o.x=="number"?o.x:0)-f/2,v=(typeof o.y=="number"?o.y:0)-h/2;return Yr.jsx("foreignObject",{x:p,y:v,width:f,height:h,style:{overflow:"visible"},children:Yr.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",fontSize:`${D2}px`,fontWeight:a?"bold":"normal",color:t||j2,textAlign:"center"},children:[Yr.jsx("style",{children:".katex{line-height:1.2;}.katex-mathml{display:none;}"}),Yr.jsx("div",{dangerouslySetInnerHTML:{__html:c}})]})})}function Ub({diagram:e}){return e?Yr.jsxs("g",{children:[Yr.jsx("defs",{children:e.masks&&e.masks.map(t=>Yr.jsx("mask",{id:t.id,maskUnits:"userSpaceOnUse",x:"-10000",y:"-10000",width:"20000",height:"20000",children:t.paths.map((r,a)=>Yr.jsx("path",{...r},a))},t.id))}),e.arrows.map(t=>Yr.jsxs("g",{className:"arrow-visual",children:[t.paths.map((r,a)=>Yr.jsx("path",{...r},a)),t.label.text&&Yr.jsx($2,{label:t.label.text,color:t.label.color,textProps:t.label.props}),t.heads.map((r,a)=>Yr.jsx("path",{...r.props},`h-${a}`)),t.tail.map((r,a)=>Yr.jsx("path",{...r.props},`t-${a}`))]},t.key)),e.nodes.map(t=>Yr.jsx("g",{transform:`translate(${t.left}, ${t.top})`,children:Yr.jsx($2,{label:t.label,color:t.color,textProps:{x:0,y:0,textAnchor:"middle",dominantBaseline:"middle"},isNodeLabel:!0})},t.name))]}):null}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$M=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,a)=>a?a.toUpperCase():r.toLowerCase()),B2=e=>{const t=$M(e);return t.charAt(0).toUpperCase()+t.slice(1)},qb=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim(),BM=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var LM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=ye.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:o,iconNode:u,...c},f)=>ye.createElement("svg",{ref:f,...LM,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:qb("lucide",s),...!o&&!BM(c)&&{"aria-hidden":"true"},...c},[...u.map(([h,p])=>ye.createElement(h,p)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=(e,t)=>{const r=ye.forwardRef(({className:a,...s},o)=>ye.createElement(UM,{ref:o,iconNode:t,className:qb(`lucide-${jM(B2(e))}`,`lucide-${e}`,a),...s}));return r.displayName=B2(e),r};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],PM=gt("arrow-right",qM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ZM=gt("book-open",HM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],rp=gt("bot",GM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Vc=gt("check",VM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],YM=gt("chevron-down",FM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],L2=gt("chevron-left",XM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],JM=gt("circle-alert",KM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],QM=gt("circle-check-big",WM);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],n1=gt("copy",eN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Pb=gt("download",tN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],aN=gt("eye-off",rN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],iN=gt("eye",nN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 12.5 8 15l2 2.5",key:"1tg20x"}],["path",{d:"m14 12.5 2 2.5-2 2.5",key:"yinavb"}]],oN=gt("file-code",sN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hm=gt("file-text",lN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],cN=gt("grid-3x3",uN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fN=gt("image",dN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],mN=gt("info",hN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],gN=gt("link",pN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],yN=gt("mouse-pointer-2",vN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],U2=gt("panel-left",bN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Fc=gt("panel-right",xN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],ap=gt("paperclip",wN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],_N=gt("pen",SN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kN=gt("plus",zN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],AN=gt("printer",TN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],MN=gt("redo",EN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],CN=gt("refresh-cw",NN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hb=gt("save",ON);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],IN=gt("send",RN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Zb=gt("settings",DN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],q2=gt("share-2",jN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],BN=gt("sparkles",$N);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],i1=gt("trash-2",LN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],qN=gt("undo",UN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],HN=gt("upload",PN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],GN=gt("user",ZN);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rl=gt("x",VN);function np(e){const t=["name","label","from","to","left","top","curve","shift","label_alignment","level","style","body","head","tail"],r=Object.entries(e).filter(([,s])=>s!==void 0);return r.sort(([s],[o])=>{const u=t.indexOf(s),c=t.indexOf(o);return u===-1&&c===-1?s.localeCompare(o):u===-1?1:c===-1?-1:u-c}),`{ ${r.map(([s,o])=>typeof o=="object"&&o!==null&&!Array.isArray(o)?`"${s}": ${np(o)}`:`"${s}": ${JSON.stringify(o)}`).join(", ")} }`}function Na(e){if(!e)return"{}";const t=e.version||1;if((!e.nodes||e.nodes.length===0)&&(!e.arrows||e.arrows.length===0))return JSON.stringify({...e,version:t},null,2);const r=(e.nodes||[]).map(o=>`    ${np(o)}`).join(`,
`),a=(e.arrows||[]).map(o=>`    ${np(o)}`).join(`,
`),s=[];return s.push(`  "version": ${t}`),e.nodes&&e.nodes.length>0&&s.push(`  "nodes": [
${r}
  ]`),e.arrows&&e.arrows.length>0&&s.push(`  "arrows": [
${a}
  ]`),`{
${s.join(`,
`)}
}`}const P2=e=>{let t;const r=new Set,a=(h,p)=>{const v=typeof h=="function"?h(t):h;if(!Object.is(v,t)){const b=t;t=p??(typeof v!="object"||v===null)?v:Object.assign({},t,v),r.forEach(y=>y(t,b))}},s=()=>t,c={setState:a,getState:s,getInitialState:()=>f,subscribe:h=>(r.add(h),()=>r.delete(h))},f=t=e(a,s,c);return c},Gb=e=>e?P2(e):P2,FN=e=>e;function Vb(e,t=FN){const r=Ir.useSyncExternalStore(e.subscribe,Ir.useCallback(()=>t(e.getState()),[e,t]),Ir.useCallback(()=>t(e.getInitialState()),[e,t]));return Ir.useDebugValue(r),r}const YN=e=>{const t=Gb(e),r=a=>Vb(t,a);return Object.assign(r,t),r},Fb=e=>YN;var H2=(e,t,r)=>(s,o)=>({pastStates:(r==null?void 0:r.pastStates)||[],futureStates:(r==null?void 0:r.futureStates)||[],undo:(u=1)=>{var c,f;if(o().pastStates.length){const h=((c=r==null?void 0:r.partialize)==null?void 0:c.call(r,t()))||t(),p=o().pastStates.splice(-u,u),v=p.shift();e(v),s({pastStates:o().pastStates,futureStates:o().futureStates.concat(((f=r==null?void 0:r.diff)==null?void 0:f.call(r,h,v))||h,p.reverse())})}},redo:(u=1)=>{var c,f;if(o().futureStates.length){const h=((c=r==null?void 0:r.partialize)==null?void 0:c.call(r,t()))||t(),p=o().futureStates.splice(-u,u),v=p.shift();e(v),s({pastStates:o().pastStates.concat(((f=r==null?void 0:r.diff)==null?void 0:f.call(r,h,v))||h,p.reverse()),futureStates:o().futureStates})}},clear:()=>s({pastStates:[],futureStates:[]}),isTracking:!0,pause:()=>s({isTracking:!1}),resume:()=>s({isTracking:!0}),setOnSave:u=>s({_onSave:u}),_onSave:r==null?void 0:r.onSave,_handleSet:(u,c,f,h)=>{var p,v;r!=null&&r.limit&&o().pastStates.length>=(r==null?void 0:r.limit)&&o().pastStates.shift(),(v=(p=o())._onSave)==null||v.call(p,u,f),s({pastStates:o().pastStates.concat(h||u),futureStates:[]})}}),XN=(e,t)=>(a,s,o)=>{var h,p;o.temporal=Gb(((h=t==null?void 0:t.wrapTemporal)==null?void 0:h.call(t,H2(a,s,t)))||H2(a,s,t));const u=((p=t==null?void 0:t.handleSet)==null?void 0:p.call(t,o.temporal.getState()._handleSet))||o.temporal.getState()._handleSet,c=v=>{var k,_,T;if(!o.temporal.getState().isTracking)return;const b=((k=t==null?void 0:t.partialize)==null?void 0:k.call(t,s()))||s(),y=(_=t==null?void 0:t.diff)==null?void 0:_.call(t,v,b);y===null||(T=t==null?void 0:t.equality)!=null&&T.call(t,v,b)||u(v,void 0,b,y)},f=o.setState;return o.setState=(...v)=>{var y;const b=((y=t==null?void 0:t.partialize)==null?void 0:y.call(t,s()))||s();f(...v),c(b)},e((...v)=>{var y;const b=((y=t==null?void 0:t.partialize)==null?void 0:y.call(t,s()))||s();a(...v),c(b)},s,o)};const KN=JSON.stringify({version:1,nodes:[{name:"A",left:150,top:150,label:"A"},{name:"B",left:450,top:150,label:"B"}],arrows:[{name:"f",from:"A",to:"B",label:"f"}]},null,2),_t=Fb()(XN((e,t)=>({spec:KN,filename:"Untitled Diagram",selectedIds:new Set,setSpec:r=>e({spec:r}),setFilename:r=>e({filename:r}),setSelection:r=>e({selectedIds:r}),toggleSelection:r=>{const{selectedIds:a}=t(),s=new Set(a);s.has(r)?s.delete(r):s.add(r),e({selectedIds:s})},deleteSelection:()=>{const{selectedIds:r,spec:a}=t();if(r.size!==0)try{const s=JSON.parse(a),o=(s.nodes||[]).filter(c=>!r.has(c.name)),u=(s.arrows||[]).filter(c=>!(c.name&&r.has(c.name)||r.has(c.from)||r.has(c.to)));e({spec:Na({nodes:o,arrows:u}),selectedIds:new Set})}catch(s){console.error("Failed to delete items:",s)}},reset:()=>e({spec:JSON.stringify({version:1,nodes:[],arrows:[]},null,2),filename:"Untitled Diagram",selectedIds:new Set}),createNew:()=>{e({spec:JSON.stringify({version:1,nodes:[],arrows:[]},null,2),filename:"Untitled Diagram",selectedIds:new Set}),_t.temporal.getState().clear()}}),{limit:100,partialize:e=>({spec:e.spec})})),Or=40,Pi=25,Z2=6;function JN(e,t,r,a,s,o,u){const[c,f]=ye.useState({mode:"idle"}),h=_t(j=>j.selectedIds),p=_t(j=>j.setSelection),v=_t(j=>j.toggleSelection),b=_t(j=>j.deleteSelection);ye.useEffect(()=>{const j=I=>{const $=document.activeElement,E=$==null?void 0:$.tagName.toLowerCase();if(!(E==="input"||E==="textarea"||$!=null&&$.isContentEditable)){if((I.key==="Delete"||I.key==="Backspace")&&b(),(I.ctrlKey||I.metaKey)&&I.key==="z"&&(I.shiftKey?_t.temporal.getState().redo():_t.temporal.getState().undo(),I.preventDefault()),(I.ctrlKey||I.metaKey)&&I.key==="y"&&(_t.temporal.getState().redo(),I.preventDefault()),(I.ctrlKey||I.metaKey)&&I.key==="a"){I.preventDefault();const V=new Set([...a.map(de=>de.name),...s.map(de=>de.key)]);p(V)}(I.ctrlKey||I.metaKey)&&I.key==="s"&&(I.preventDefault(),window.dispatchEvent(new CustomEvent("arrowgram:save")))}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[b,a,s,p]);const y=ye.useCallback(j=>{const I=e.current;if(!I)return{x:0,y:0};const $=I.createSVGPoint();$.x=j.clientX,$.y=j.clientY;const E=I.getScreenCTM();return E?$.matrixTransform(E.inverse()):$},[]),k=j=>Math.round(j/Or)*Or,_=(j,I)=>{let $=1;for(;I.has(`${j}${$}`);)$++;return`${j}${$}`};return{interaction:c,selectedIds:h,handlers:{onPointerDown:j=>{j.preventDefault();const $=j.target.closest("[data-type]"),E=y(j);if(!$){!j.shiftKey&&!j.metaKey&&!j.ctrlKey&&p(new Set),f({mode:"panning",startPoint:{x:j.clientX,y:j.clientY},initialViewBox:[...t]});return}j.stopPropagation();const D=$,V=D.getAttribute("data-type"),de=D.getAttribute("data-id");if(V==="handle"){const Q=D.getAttribute("data-arrow-id"),G=D.getAttribute("data-end-type");Q&&G&&f({mode:"reattaching",source:Q,endType:G,endPoint:E});return}if(de&&(V==="node"||V==="arrow")){if(j.shiftKey||j.metaKey||j.ctrlKey?v(de):h.has(de)||p(new Set([de])),V==="node"){const Q=a.find(G=>G.name===de);Q&&(j.shiftKey?f({mode:"connecting",source:de,endPoint:E}):f({mode:"moving",source:de,startPoint:E,initialPos:{left:Q.left,top:Q.top}}))}else if(V==="arrow"){const Q=u.arrows.find(G=>G.key===de);if(Q&&j.shiftKey){const G=Q.spec.name;G&&f({mode:"connecting",source:G,endPoint:E})}}}},onPointerMove:j=>{if(c.mode==="idle")return;const I=y(j);if(c.mode==="panning"&&c.startPoint&&c.initialViewBox&&e.current){const $=(j.clientX-c.startPoint.x)*(t[2]/e.current.clientWidth),E=(j.clientY-c.startPoint.y)*(t[3]/e.current.clientHeight);r([c.initialViewBox[0]-$,c.initialViewBox[1]-E,c.initialViewBox[2],c.initialViewBox[3]])}else if(c.mode==="moving"&&c.source&&c.initialPos&&c.startPoint){const $=I.x-c.startPoint.x,E=I.y-c.startPoint.y,D=a.find(ae=>ae.name===c.source);if(!D||!c.initialPos)return;const V=k(c.initialPos.left+$),de=k(c.initialPos.top+E),Q=V-D.left,G=de-D.top;if(Q===0&&G===0)return;const X=a.map(ae=>h.has(ae.name)?{...ae,left:ae.left+Q,top:ae.top+G}:ae),K=s.map(ae=>ae.spec);o(Na({nodes:X,arrows:K}))}else if(c.mode==="connecting"||c.mode==="reattaching"){const $=document.elementFromPoint(j.clientX,j.clientY),E=$==null?void 0:$.closest("[data-type]");let D;if(E){const V=E.getAttribute("data-type"),de=E.getAttribute("data-id");(V==="node"||V==="arrow")&&de&&(D={type:V,id:de})}f(V=>({...V,endPoint:I,hoveredTarget:D}))}},onPointerUp:j=>{if(c.mode==="connecting"&&c.source||c.mode==="reattaching"&&c.source){const I=j.target.closest("[data-type]");let $;if(I){const E=I.getAttribute("data-type"),D=I.getAttribute("data-id");if(E==="node")$=D||void 0;else if(E==="arrow"){const V=u.arrows.find(de=>de.key===D);$=V==null?void 0:V.spec.name}}if(c.mode==="connecting"){const E=new Set([...a.map(D=>D.name),...s.map(D=>D.spec.name).filter(Boolean)]);if($){const D=$===c.source,V={name:_("arrow",E),from:c.source,to:$,label:"",radius:D?40:void 0,angle:D?-90:void 0},de=s.map(Q=>Q.spec);o(Na({nodes:a,arrows:[...de,V]}))}else if(!$){const D=_("N",E),V=c.endPoint||{x:0,y:0},de={name:D,label:D,left:k(V.x),top:k(V.y)},Q={name:_("arrow",E),from:c.source,to:D,label:""},G=s.map(X=>X.spec);o(Na({nodes:[...a,de],arrows:[...G,Q]})),p(new Set([D]))}}else if(c.mode==="reattaching"){let E=$;if(E){const D=s.map(V=>(V.spec.name||V.key)===c.source?{...V.spec,[c.endType]:E}:V.spec);o(Na({nodes:a,arrows:D}))}else{const D=new Set([...a.map(X=>X.name),...s.map(X=>X.spec.name).filter(Boolean)]),V=_("N",D),de=c.endPoint||{x:0,y:0},Q={name:V,label:V,left:k(de.x),top:k(de.y)};E=V;const G=s.map(X=>(X.spec.name||X.key)===c.source?{...X.spec,[c.endType]:E}:X.spec);o(Na({nodes:[...a,Q],arrows:G})),p(new Set([V]))}}}f({mode:"idle"})},onDoubleClick:j=>{if(j.target.closest("[data-type]"))return;const $=y(j),E=new Set([...a.map(Q=>Q.name),...s.map(Q=>Q.spec.name).filter(Boolean)]),D=_("N",E),V={name:D,label:D,left:k($.x),top:k($.y)},de=s.map(Q=>Q.spec);o(Na({nodes:[...a,V],arrows:de})),p(new Set([D]))}}}}function Yb(){const e=_t(E=>E.spec),t=_t(E=>E.setSpec),r=_t(E=>E.selectedIds),a=_t(E=>E.setSelection),s=ye.useRef(null),[o,u]=ye.useState([0,0,1e3,600]),[c,f]=ye.useState(!0),h=ye.useCallback(E=>t(E),[t]),{nodes:p,arrows:v,diagram:b}=ye.useMemo(()=>{try{const E=Su(e);return{nodes:E.nodes,arrows:E.arrows,diagram:E}}catch{return{nodes:[],arrows:[],diagram:{arrows:[],nodes:[],viewBox:"0 0 100 100",error:null}}}},[e]),{interaction:y,handlers:k}=JN(s,o,u,p,v,h,b),_=y.mode==="panning"?"grabbing":y.mode==="connecting"||y.mode==="reattaching"?"crosshair":"default",R=(()=>{if(!y.source)return null;if(y.mode==="connecting"){const E=p.find(V=>V.name===y.source);if(E)return{x:E.left,y:E.top};const D=b.arrows.find(V=>V.spec.name===y.source);if(D)return D.midpoint}else if(y.mode==="reattaching"){const E=b.arrows.find(D=>D.key===y.source);if(E)return y.endType==="from"?E.targetPoint:E.sourcePoint}return null})(),O=ye.useCallback((E,D)=>{const[V,de,Q,G]=o,X=Q*E,K=G*E;if(X<10||X>2e4)return;const ae=D||{x:V+Q/2,y:de+G/2},q=ae.x-(ae.x-V)*E,F=ae.y-(ae.y-de)*E;u([q,F,X,K])},[o]),M=ye.useCallback(E=>{if(E.ctrlKey||E.metaKey){E.preventDefault();const D=E.deltaY>0?1.1:.9,V=s.current;if(!V)return;const de=V.createSVGPoint();de.x=E.clientX,de.y=E.clientY;const Q=V.getScreenCTM();if(Q){const G=de.matrixTransform(Q.inverse());O(D,G)}}},[O]),j=ye.useCallback(()=>{if(b.viewBox){const E=b.viewBox.split(" ").map(Number);E.length===4&&u(E)}},[b.viewBox]),I=ye.useCallback(()=>{if(s.current){const{clientWidth:E,clientHeight:D}=s.current,[V,de]=[o[0]+o[2]/2,o[1]+o[3]/2];u([V-E/2,de-D/2,E,D])}},[o]),$=ye.useCallback(E=>{if(r.size===0)return;if(E==="selectConnected"){const Q=OM(v.map(G=>G.spec),r);a(Q);return}let D=p,V=v.map(Q=>Q.spec),de=!1;E==="reverse"?V=V.map(Q=>r.has(Q.name||"")||Q.uniqueId&&r.has(Q.uniqueId)?(de=!0,NM(Q)):Q):E==="flip"?V=V.map(Q=>r.has(Q.name||"")||Q.uniqueId&&r.has(Q.uniqueId)?(de=!0,CM(Q)):Q):["rotate","flipH","flipV"].includes(E)&&(E==="rotate"?D=RM(p,r,90):E==="flipH"?D=C2(p,r,"horizontal"):E==="flipV"&&(D=C2(p,r,"vertical")),de=!0),de&&h(Na({nodes:D,arrows:V}))},[r,p,v,h,a]);return ye.useEffect(()=>{const E=D=>{const V=document.activeElement;(V==null?void 0:V.tagName.toLowerCase())!=="input"&&(D.key==="r"&&$("reverse"),D.key==="e"&&$("flip"),D.key==="g"&&j(),D.key==="0"&&I(),D.key==="h"&&(D.shiftKey?$("flipH"):f(de=>!de)),D.key==="v"&&$("flipV"),D.key==="t"&&$("rotate"),D.shiftKey&&D.key==="A"&&$("selectConnected"))};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[$,j,I]),w.jsx("div",{className:"flex bg-gray-50 h-full w-full relative group select-none",style:{cursor:"auto"},children:w.jsxs("div",{className:"flex-1 relative overflow-hidden h-full",children:[w.jsxs("div",{className:"absolute top-4 left-4 flex gap-2 bg-white/90 backdrop-blur rounded-lg border shadow-sm p-1 z-10",children:[w.jsx("button",{onClick:()=>$("reverse"),className:"p-1.5 hover:bg-gray-100 rounded text-gray-700 text-xs font-medium",title:"Reverse Arrow (R)",children:"Rev"}),w.jsx("button",{onClick:()=>$("flip"),className:"p-1.5 hover:bg-gray-100 rounded text-gray-700 text-xs font-medium",title:"Flip Arrow (E)",children:"Flip"}),w.jsx("div",{className:"w-px bg-gray-200 mx-1"}),w.jsx("button",{onClick:()=>$("flipH"),className:"p-1.5 hover:bg-gray-100 rounded text-gray-700 text-xs font-medium",title:"Flip Horizontally (Shift+H)",children:""}),w.jsx("button",{onClick:()=>$("flipV"),className:"p-1.5 hover:bg-gray-100 rounded text-gray-700 text-xs font-medium",title:"Flip Vertically (V)",children:""}),w.jsx("button",{onClick:()=>$("rotate"),className:"p-1.5 hover:bg-gray-100 rounded text-gray-700 text-xs font-medium",title:"Rotate 90 (T)",children:""}),w.jsx("div",{className:"w-px bg-gray-200 mx-1"}),w.jsx("button",{onClick:()=>$("selectConnected"),className:"p-1.5 hover:bg-gray-100 rounded text-gray-700 text-xs font-medium",title:"Select Connected (Shift+A)",children:"Conn"})]}),w.jsxs("svg",{id:"arrowgram-canvas",ref:s,width:"100%",height:"100%",viewBox:o.join(" "),style:{cursor:_,touchAction:"none"},onWheel:M,...k,children:[w.jsx("defs",{children:w.jsx("pattern",{id:"grid",width:Or,height:Or,patternUnits:"userSpaceOnUse",children:w.jsx("path",{d:`M ${Or} 0 L 0 0 0 ${Or}`,fill:"none",stroke:"rgba(0,0,0,0.05)",strokeWidth:"1"})})}),c&&w.jsx("rect",{x:o[0],y:o[1],width:o[2],height:o[3],fill:"url(#grid)"}),w.jsx(Ub,{diagram:b}),(y.mode==="connecting"||y.mode==="reattaching")&&y.endPoint&&(!y.hoveredTarget||y.hoveredTarget.type==="node")&&(()=>{const E=Math.round(y.endPoint.x/Or)*Or,D=Math.round(y.endPoint.y/Or)*Or,V=p.find(de=>Math.abs(de.left-E)<1&&Math.abs(de.top-D)<1);return w.jsx("g",{style:{pointerEvents:"none"},children:V?w.jsx("rect",{x:V.left-Pi-8,y:V.top-Pi-8,width:(Pi+8)*2,height:(Pi+8)*2,fill:"rgba(0, 0, 0, 0.1)",rx:"12"}):w.jsxs("g",{children:[w.jsx("rect",{x:E-Or/1.5,y:D-Or/1.5,width:Or*1.33,height:Or*1.33,fill:"rgba(0, 0, 0, 0.05)",rx:"8"}),w.jsx("text",{x:E,y:D,textAnchor:"middle",dominantBaseline:"middle",fontSize:"10",fontWeight:"500",fill:"rgba(0,0,0,0.4)",style:{userSelect:"none"},children:"Add Node"})]})})})(),p.map(E=>w.jsx("rect",{x:E.left-Pi-5,y:E.top-Pi-5,width:(Pi+5)*2,height:(Pi+5)*2,fill:"transparent",stroke:r.has(E.name)?"#9333ea":"transparent",strokeWidth:"2","data-type":"node","data-id":E.name,style:{cursor:"move"}},E.name)),b.arrows.map(E=>{var Q;const D=r.has(E.key),V=((Q=y.hoveredTarget)==null?void 0:Q.type)==="arrow"&&y.hoveredTarget.id===E.key,de=y.mode==="connecting"&&y.source===E.spec.name;return w.jsxs("g",{"data-type":"arrow","data-id":E.key,style:{cursor:"pointer"},children:[(D||de||V)&&(E.interactionPath?w.jsx("path",{d:E.interactionPath,fill:"none",stroke:"rgba(0,0,0,0.1)",strokeWidth:"20",strokeLinecap:"round"}):E.paths.map((G,X)=>w.jsx("path",{d:G.d,fill:"none",stroke:"rgba(0,0,0,0.1)",strokeWidth:"20",strokeLinecap:"round"},`halo-${X}`))),E.interactionPath?w.jsx("path",{d:E.interactionPath,fill:"none",stroke:"transparent",strokeWidth:"15"}):E.paths.map((G,X)=>w.jsx("path",{d:G.d,fill:"none",stroke:"transparent",strokeWidth:"15"},X)),D&&(E.interactionPath?w.jsx("path",{d:E.interactionPath,fill:"none",stroke:"#9333ea",strokeWidth:"1",strokeDasharray:"4 2"}):E.paths.map((G,X)=>w.jsx("path",{d:G.d,fill:"none",stroke:"#9333ea",strokeWidth:"1",strokeDasharray:"4 2"},`select-${X}`))),D&&E.sourcePoint&&w.jsx("circle",{cx:E.sourcePoint.x,cy:E.sourcePoint.y,r:Z2,fill:"white",stroke:"#9333ea",strokeWidth:"2","data-type":"handle","data-arrow-id":E.key,"data-end-type":"from",style:{cursor:"crosshair"}}),D&&E.targetPoint&&w.jsx("circle",{cx:E.targetPoint.x,cy:E.targetPoint.y,r:Z2,fill:"white",stroke:"#9333ea",strokeWidth:"2","data-type":"handle","data-arrow-id":E.key,"data-end-type":"to",style:{cursor:"crosshair"}})]},E.key)}),(y.mode==="connecting"||y.mode==="reattaching")&&R&&y.endPoint&&(()=>{var X;let E=!1,D={x:y.endPoint.x,y:y.endPoint.y};if(((X=y.hoveredTarget)==null?void 0:X.type)==="node"){const K=p.find(ae=>ae.name===y.hoveredTarget.id);if(K&&(D={x:K.left,y:K.top}),y.mode==="connecting")E=y.source===y.hoveredTarget.id;else if(y.mode==="reattaching"){const ae=b.arrows.find(q=>q.key===y.source);ae&&(E=(y.endType==="to"?ae.spec.from:ae.spec.to)===y.hoveredTarget.id)}}else y.hoveredTarget||(D={x:Math.round(D.x/Or)*Or,y:Math.round(D.y/Or)*Or},Math.sqrt(Math.pow(D.x-R.x,2)+Math.pow(D.y-R.y,2))<Or&&(E=!0,D=R));const V=[{name:"A",label:"",left:R.x,top:R.y},{name:"B",label:"",left:D.x,top:D.y}],G=Su({nodes:V,arrows:[{from:"A",to:E?"A":"B",label:"",radius:E?40:void 0,angle:E?-90:void 0}]}).arrows[0];return G?w.jsxs("g",{style:{pointerEvents:"none",opacity:.6},children:[G.paths.map((K,ae)=>w.jsx("path",{d:K.d,fill:"none",stroke:"#9333ea",strokeWidth:"2",strokeDasharray:"5 5"},ae)),G.heads.map((K,ae)=>w.jsx("path",{d:K.props.d,fill:"none",stroke:"#9333ea",strokeWidth:"2"},`h-${ae}`))]}):null})()]}),w.jsx("div",{className:"absolute bottom-4 left-4 bg-white/90 backdrop-blur px-3 py-2 rounded-lg border shadow-sm text-xs text-gray-500 pointer-events-none select-none",children:"Double-click: Add Node  Drag: Move  Shift+Drag: Connect  Ctrl+Scroll: Zoom  H: Grid  R: Reverse  E: Flip"}),w.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 bg-white/90 backdrop-blur rounded-lg border shadow-sm p-1",children:[w.jsx("button",{onClick:()=>O(.9),className:"p-1.5 hover:bg-gray-100 rounded text-gray-600 font-bold w-8 h-8 flex items-center justify-center",title:"Zoom In",children:"+"}),w.jsx("button",{onClick:()=>O(1.1),className:"p-1.5 hover:bg-gray-100 rounded text-gray-600 font-bold w-8 h-8 flex items-center justify-center",title:"Zoom Out",children:"-"}),w.jsx("div",{className:"h-px bg-gray-200 mx-1"}),w.jsx("button",{onClick:()=>f(!c),className:`p-1.5 hover:bg-gray-100 rounded text-gray-600 w-8 h-8 flex items-center justify-center ${c?"":"bg-gray-100 text-gray-900"}`,title:"Toggle Grid (H)",children:w.jsx(cN,{size:16})}),w.jsx("button",{onClick:j,className:"p-1.5 hover:bg-gray-100 rounded text-gray-600 text-xs font-medium w-8 h-8 flex items-center justify-center",title:"Fit View (G)",children:"Fit"}),w.jsx("button",{onClick:I,className:"p-1.5 hover:bg-gray-100 rounded text-gray-600 text-xs font-medium w-8 h-8 flex items-center justify-center",title:"Reset Zoom (0)",children:"1:1"})]})]})})}const WN="modulepreload",QN=function(e){return"/arrowgram/"+e},G2={},ha=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let u=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=u(r.map(h=>{if(h=QN(h),h in G2)return;G2[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":WN,p||(b.as="script"),b.crossOrigin="",b.href=h,f&&b.setAttribute("nonce",f),document.head.appendChild(b),p)return new Promise((y,k)=>{b.addEventListener("load",y),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(u){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=u,window.dispatchEvent(c),!c.defaultPrevented)throw u}return s.then(u=>{for(const c of u||[])c.status==="rejected"&&o(c.reason);return t().catch(o)})};function ip({spec:e,className:t,onEdit:r}){const{diagram:a,error:s}=ye.useMemo(()=>{try{return{diagram:Su(e),error:null}}catch(o){return{diagram:null,error:o.message||"Unknown error"}}},[e]);return s?w.jsxs("div",{className:`p-4 border border-red-200 bg-red-50 text-red-600 rounded text-sm font-mono whitespace-pre-wrap ${t}`,children:["Failed to render diagram: ",s]}):a?w.jsxs("div",{className:`relative group inline-block ${t}`,children:[w.jsx("div",{className:"arrowgram-container",children:w.jsx("svg",{viewBox:a.viewBox,className:"w-full h-auto max-w-full",style:{minWidth:"200px",minHeight:"100px"},children:w.jsx(Ub,{diagram:a})})}),r&&w.jsx("div",{className:"absolute inset-0 bg-black/5 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center pointer-events-none",children:w.jsxs("button",{onClick:o=>{o.stopPropagation(),console.log("Edit button clicked"),r()},className:"pointer-events-auto bg-white/90 hover:bg-white text-gray-800 shadow-lg border border-gray-200 px-4 py-2 rounded-full font-medium text-sm flex items-center gap-2 transform translate-y-2 group-hover:translate-y-0 transition-all",children:[w.jsx(_N,{size:16}),"Edit Visual"]})})]}):null}const eC=e=>{const t={"header-left":"@top-left","header-center":"@top-center","header-right":"@top-right","footer-left":"@bottom-left","footer-center":"@bottom-center","footer-right":"@bottom-right"},r=s=>{const o={"[pageNumber]":"counter(page)","[totalPages]":"counter(pages)","[title]":`"${e.title||""}"`,"[authors]":`"${e.authors||""}"`},u=s.split(/(\[pageNumber\]|\[totalPages\]|\[title\]|\[authors\])/g).filter(c=>c);return u.length===0?'""':u.map(c=>o[c]||`"${c.replace(/"/g,'\\"')}"`).join(" ")};let a="";for(const[s,o]of Object.entries(t))if(e[s]){const u=r(e[s]);a+=`${o} { content: ${u}; } `}return a?`@page { ${a} }`:""},tC=({markdown:e,isTwoColumn:t,onEditDiagram:r})=>{const a=ye.useRef(null),s=ye.useRef(null);return ye.useEffect(()=>{let o=!0;const u=Date.now();a.current._latestRenderId=u;const c=[];return(async()=>{var we,Ee;if(!a.current)return;const[h,p,v,b,y,k,_]=await Promise.all([ha(()=>import("./server.browser-C4gUHZZC.js").then(ue=>ue.s),[]),ha(()=>import("./showdown-DiCeiskw.js").then(ue=>ue.s),[]),ha(()=>import("./mermaid.core-nSwYP8W5.js").then(ue=>ue.b7),__vite__mapDeps([0,1])),ha(()=>Promise.resolve().then(()=>lb),void 0),ha(()=>import("./vega.module-DlPeonZJ.js"),__vite__mapDeps([2,3,1,4,5,6,7,8,9,10,11])),ha(()=>import("./index-ByJ9Ii8b.js"),__vite__mapDeps([12,2,3,1,4,5,6,7,8,9,10,11])),ha(()=>import("./index-B3N4dkTF.js"),[])]),T=p.default??p,R=v.default??v,O=b.default??b,M=_.Previewer??((we=_.default)==null?void 0:we.Previewer);let j=e;const I=/<div class="vega-lite"([^>]*)>([\s\S]*?)<\/div>/g,$=Array.from(j.matchAll(I)),E=await Promise.all($.map(async ue=>{if(!o)return{original:"",replacement:""};try{const Ce=JSON.parse(ue[2].trim()),H=k.compile(Ce).spec,ge=await new y.View(y.parse(H),{renderer:"svg"}).toSVG();return{original:ue[0],replacement:`<div class="vega-container"${ue[1]}>${ge}</div>`}}catch(Ce){return{original:ue[0],replacement:`<div class="vega-error">Chart Error: ${Ce.message}</div>`}}}));if(!o||a.current._latestRenderId!==u)return;for(const ue of E)ue.original&&(j=j.replace(ue.original,ue.replacement));R.initialize({startOnLoad:!1,theme:"base"});const D=/<div class="mermaid"([^>]*)>([\s\S]*?)<\/div>/g,V=Array.from(j.matchAll(D)),de=await Promise.all(V.map(async(ue,Ce)=>{if(!o)return{original:"",replacement:""};try{const{svg:H}=await R.render(`mermaid-svg-${Date.now()}-${Ce}`,ue[2].trim());return{original:ue[0],replacement:`<div class="mermaid-container"${ue[1]}>${H}</div>`}}catch{return{original:ue[0],replacement:'<div class="mermaid-error">Diagram Error</div>'}}}));if(!o||a.current._latestRenderId!==u)return;for(const ue of de)ue.original&&(j=j.replace(ue.original,ue.replacement));const Q=/<div class="arrowgram"([^>]*)>([\s\S]*?)<\/div>/g,G=[];let X=0;j=j.replace(Q,(ue,Ce,H)=>{const oe=`arrowgram-hydrate-${Date.now()}-${X++}`,ge=H.trim();G.push({id:oe,spec:ge});try{const Me=h.renderToStaticMarkup(w.jsx(ip,{spec:ge}));return`<div id="${oe}" class="arrowgram-hydrate-target">${Me}</div>`}catch(Me){return console.error("Static Render Error:",Me),`<div id="${oe}" class="arrowgram-hydrate-target" style="min-height: 100px; border: 1px solid red;">Error rendering diagram</div>`}});const K=new Map;let ae=0;const q=ue=>{const Ce=`AGPROTMATH${ae++}AGPROT`;return K.set(Ce,ue),Ce};j=j.replace(/\$\$[\s\S]+?\$\$/g,q),j=j.replace(/\$(?!\$)(?:\\.|[^$\\\n])+\$/g,q);const F=new T.Converter({metadata:!0,noHeaderId:!0,literalMidWordUnderscores:!0});let J=F.makeHtml(j);const Ae=F.getMetadata(),De=eC(Ae);for(const[ue,Ce]of K.entries())J=J.split(ue).join(Ce);const L=new Map;J=J.replace(/<(pre|code)[^>]*>[\s\S]*?<\/\1>/g,ue=>{const Ce=`%%PROTECTED_BLOCK_${L.size}%%`;return L.set(Ce,ue),Ce}),J=J.replace(/\$\$([\s\S]+?)\$\$/g,(ue,Ce)=>{const H=Ce.trim().replace(/\\\\([A-Za-z_])/g,"\\$1").replace(/\\\\([,;:.!])/g,"\\$1");try{return`<span class="katex-display">${O.renderToString(H,{displayMode:!0,throwOnError:!1})}</span>`}catch(oe){return`<span class="katex-error">${oe.message}</span>`}}),J=J.replace(/\$([^$]+?)\$/g,(ue,Ce)=>{const H=Ce.trim().replace(/\\\\([A-Za-z_])/g,"\\$1").replace(/\\\\([,;:.!])/g,"\\$1");try{return O.renderToString(H,{displayMode:!1,throwOnError:!1})}catch(oe){return`<span class="katex-error">${oe.message}</span>`}});for(const[ue,Ce]of L.entries())J=J.replace(ue,Ce);const ne=`<div class="title-block">${Ae.title?`<div class="title">${Ae.title}</div>`:""}${Ae.authors?`<div class="authors">${Ae.authors}</div>`:""}</div>`,re=`<div class="${t?"layout-two-column":"layout-single-column"}">${ne}<div class="paper-body">${J}</div></div>`;if(a.current){if(!o||a.current._latestRenderId!==u)return;a.current.innerHTML="";const ue=[];if(De){const ge=`data:text/css;base64,${btoa(unescape(encodeURIComponent(De)))}`;ue.push(ge)}const Ce=((Ee=document.querySelector('link[href*="katex"]'))==null?void 0:Ee.getAttribute("href"))||"https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css";ue.push(Ce);const H=new M;s.current=H,H.preview(re,ue,a.current).then(()=>{!o||a.current._latestRenderId!==u||G.forEach(({id:oe,spec:ge})=>{var _e;const Me=(_e=a.current)==null?void 0:_e.querySelector(`#${oe}`);if(Me){const je=i6.createRoot(Me);c.push(je),je.render(w.jsx(ip,{spec:ge,onEdit:()=>r(oe,ge)}))}})})}})(),()=>{o=!1,c.forEach(h=>h.unmount())}},[e,t,r]),w.jsx("div",{ref:a,className:"preview-content-area"})},Xb=ye.createContext(void 0);function Vs(){const e=ye.useContext(Xb);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}function rC({children:e}){const[t,r]=ye.useState([]),a=ye.useCallback((o,u="info",c=3e3)=>{const f=Date.now().toString();r(h=>[...h,{id:f,message:o,type:u,duration:c}]),c>0&&setTimeout(()=>{s(f)},c)},[]),s=ye.useCallback(o=>{r(u=>u.filter(c=>c.id!==o))},[]);return w.jsxs(Xb.Provider,{value:{addToast:a,removeToast:s},children:[e,w.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:t.map(o=>w.jsxs("div",{className:`
              pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-lg shadow-lg border text-sm font-medium transition-all animate-in slide-in-from-bottom-5 fade-in
              ${o.type==="success"?"bg-white border-green-200 text-green-800":""}
              ${o.type==="error"?"bg-white border-red-200 text-red-800":""}
              ${o.type==="info"?"bg-gray-900 text-white border-transparent":""}
            `,children:[o.type==="success"&&w.jsx(QM,{size:18,className:"text-green-500"}),o.type==="error"&&w.jsx(JM,{size:18,className:"text-red-500"}),o.type==="info"&&w.jsx(mN,{size:18,className:"text-gray-400"}),w.jsx("span",{children:o.message}),w.jsx("button",{onClick:()=>s(o.id),className:`ml-2 p-1 rounded-md hover:bg-black/5 transition-colors ${o.type==="info"?"hover:bg-white/20":""}`,children:w.jsx(rl,{size:14,className:"opacity-70"})})]},o.id))})]})}var Td=n6();function Kb(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Kb(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Jb(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Kb(e))&&(a&&(a+=" "),a+=t);return a}const V2=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,F2=Jb,Wb=(e,t)=>r=>{var a;if((t==null?void 0:t.variants)==null)return F2(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:o}=t,u=Object.keys(s).map(h=>{const p=r==null?void 0:r[h],v=o==null?void 0:o[h];if(p===null)return null;const b=V2(p)||V2(v);return s[h][b]}),c=r&&Object.entries(r).reduce((h,p)=>{let[v,b]=p;return b===void 0||(h[v]=b),h},{}),f=t==null||(a=t.compoundVariants)===null||a===void 0?void 0:a.reduce((h,p)=>{let{class:v,className:b,...y}=p;return Object.entries(y).every(k=>{let[_,T]=k;return Array.isArray(T)?T.includes({...o,...c}[_]):{...o,...c}[_]===T})?[...h,v,b]:h},[]);return F2(e,u,f,r==null?void 0:r.class,r==null?void 0:r.className)},aC=(e,t)=>{const r=new Array(e.length+t.length);for(let a=0;a<e.length;a++)r[a]=e[a];for(let a=0;a<t.length;a++)r[e.length+a]=t[a];return r},nC=(e,t)=>({classGroupId:e,validator:t}),Qb=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Yc="-",Y2=[],iC="arbitrary..",sC=e=>{const t=lC(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:u=>{if(u.startsWith("[")&&u.endsWith("]"))return oC(u);const c=u.split(Yc),f=c[0]===""&&c.length>1?1:0;return e7(c,f,t)},getConflictingClassGroupIds:(u,c)=>{if(c){const f=a[u],h=r[u];return f?h?aC(h,f):f:h||Y2}return r[u]||Y2}}},e7=(e,t,r)=>{if(e.length-t===0)return r.classGroupId;const s=e[t],o=r.nextPart.get(s);if(o){const h=e7(e,t+1,o);if(h)return h}const u=r.validators;if(u===null)return;const c=t===0?e.join(Yc):e.slice(t).join(Yc),f=u.length;for(let h=0;h<f;h++){const p=u[h];if(p.validator(c))return p.classGroupId}},oC=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),a=t.slice(0,r);return a?iC+a:void 0})(),lC=e=>{const{theme:t,classGroups:r}=e;return uC(r,t)},uC=(e,t)=>{const r=Qb();for(const a in e){const s=e[a];s1(s,r,a,t)}return r},s1=(e,t,r,a)=>{const s=e.length;for(let o=0;o<s;o++){const u=e[o];cC(u,t,r,a)}},cC=(e,t,r,a)=>{if(typeof e=="string"){dC(e,t,r);return}if(typeof e=="function"){fC(e,t,r,a);return}hC(e,t,r,a)},dC=(e,t,r)=>{const a=e===""?t:t7(t,e);a.classGroupId=r},fC=(e,t,r,a)=>{if(mC(e)){s1(e(a),t,r,a);return}t.validators===null&&(t.validators=[]),t.validators.push(nC(r,e))},hC=(e,t,r,a)=>{const s=Object.entries(e),o=s.length;for(let u=0;u<o;u++){const[c,f]=s[u];s1(f,t7(t,c),r,a)}},t7=(e,t)=>{let r=e;const a=t.split(Yc),s=a.length;for(let o=0;o<s;o++){const u=a[o];let c=r.nextPart.get(u);c||(c=Qb(),r.nextPart.set(u,c)),r=c}return r},mC=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,pC=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),a=Object.create(null);const s=(o,u)=>{r[o]=u,t++,t>e&&(t=0,a=r,r=Object.create(null))};return{get(o){let u=r[o];if(u!==void 0)return u;if((u=a[o])!==void 0)return s(o,u),u},set(o,u){o in r?r[o]=u:s(o,u)}}},sp="!",X2=":",gC=[],K2=(e,t,r,a,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:a,isExternal:s}),vC=e=>{const{prefix:t,experimentalParseClassName:r}=e;let a=s=>{const o=[];let u=0,c=0,f=0,h;const p=s.length;for(let _=0;_<p;_++){const T=s[_];if(u===0&&c===0){if(T===X2){o.push(s.slice(f,_)),f=_+1;continue}if(T==="/"){h=_;continue}}T==="["?u++:T==="]"?u--:T==="("?c++:T===")"&&c--}const v=o.length===0?s:s.slice(f);let b=v,y=!1;v.endsWith(sp)?(b=v.slice(0,-1),y=!0):v.startsWith(sp)&&(b=v.slice(1),y=!0);const k=h&&h>f?h-f:void 0;return K2(o,y,b,k)};if(t){const s=t+X2,o=a;a=u=>u.startsWith(s)?o(u.slice(s.length)):K2(gC,!1,u,void 0,!0)}if(r){const s=a;a=o=>r({className:o,parseClassName:s})}return a},yC=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((r,a)=>{t.set(r,1e6+a)}),r=>{const a=[];let s=[];for(let o=0;o<r.length;o++){const u=r[o],c=u[0]==="[",f=t.has(u);c||f?(s.length>0&&(s.sort(),a.push(...s),s=[]),a.push(u)):s.push(u)}return s.length>0&&(s.sort(),a.push(...s)),a}},bC=e=>({cache:pC(e.cacheSize),parseClassName:vC(e),sortModifiers:yC(e),...sC(e)}),xC=/\s+/,wC=(e,t)=>{const{parseClassName:r,getClassGroupId:a,getConflictingClassGroupIds:s,sortModifiers:o}=t,u=[],c=e.trim().split(xC);let f="";for(let h=c.length-1;h>=0;h-=1){const p=c[h],{isExternal:v,modifiers:b,hasImportantModifier:y,baseClassName:k,maybePostfixModifierPosition:_}=r(p);if(v){f=p+(f.length>0?" "+f:f);continue}let T=!!_,R=a(T?k.substring(0,_):k);if(!R){if(!T){f=p+(f.length>0?" "+f:f);continue}if(R=a(k),!R){f=p+(f.length>0?" "+f:f);continue}T=!1}const O=b.length===0?"":b.length===1?b[0]:o(b).join(":"),M=y?O+sp:O,j=M+R;if(u.indexOf(j)>-1)continue;u.push(j);const I=s(R,T);for(let $=0;$<I.length;++$){const E=I[$];u.push(M+E)}f=p+(f.length>0?" "+f:f)}return f},SC=(...e)=>{let t=0,r,a,s="";for(;t<e.length;)(r=e[t++])&&(a=r7(r))&&(s&&(s+=" "),s+=a);return s},r7=e=>{if(typeof e=="string")return e;let t,r="";for(let a=0;a<e.length;a++)e[a]&&(t=r7(e[a]))&&(r&&(r+=" "),r+=t);return r},_C=(e,...t)=>{let r,a,s,o;const u=f=>{const h=t.reduce((p,v)=>v(p),e());return r=bC(h),a=r.cache.get,s=r.cache.set,o=c,c(f)},c=f=>{const h=a(f);if(h)return h;const p=wC(f,r);return s(f,p),p};return o=u,(...f)=>o(SC(...f))},zC=[],Cr=e=>{const t=r=>r[e]||zC;return t.isThemeGetter=!0,t},a7=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,n7=/^\((?:(\w[\w-]*):)?(.+)\)$/i,kC=/^\d+\/\d+$/,TC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,EC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,MC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Io=e=>kC.test(e),ft=e=>!!e&&!Number.isNaN(Number(e)),Hi=e=>!!e&&Number.isInteger(Number(e)),mm=e=>e.endsWith("%")&&ft(e.slice(0,-1)),ei=e=>TC.test(e),CC=()=>!0,OC=e=>AC.test(e)&&!EC.test(e),i7=()=>!1,RC=e=>MC.test(e),IC=e=>NC.test(e),DC=e=>!Le(e)&&!Ue(e),jC=e=>al(e,l7,i7),Le=e=>a7.test(e),Ns=e=>al(e,u7,OC),pm=e=>al(e,qC,ft),J2=e=>al(e,s7,i7),$C=e=>al(e,o7,IC),vc=e=>al(e,c7,RC),Ue=e=>n7.test(e),nu=e=>nl(e,u7),BC=e=>nl(e,PC),W2=e=>nl(e,s7),LC=e=>nl(e,l7),UC=e=>nl(e,o7),yc=e=>nl(e,c7,!0),al=(e,t,r)=>{const a=a7.exec(e);return a?a[1]?t(a[1]):r(a[2]):!1},nl=(e,t,r=!1)=>{const a=n7.exec(e);return a?a[1]?t(a[1]):r:!1},s7=e=>e==="position"||e==="percentage",o7=e=>e==="image"||e==="url",l7=e=>e==="length"||e==="size"||e==="bg-size",u7=e=>e==="length",qC=e=>e==="number",PC=e=>e==="family-name",c7=e=>e==="shadow",HC=()=>{const e=Cr("color"),t=Cr("font"),r=Cr("text"),a=Cr("font-weight"),s=Cr("tracking"),o=Cr("leading"),u=Cr("breakpoint"),c=Cr("container"),f=Cr("spacing"),h=Cr("radius"),p=Cr("shadow"),v=Cr("inset-shadow"),b=Cr("text-shadow"),y=Cr("drop-shadow"),k=Cr("blur"),_=Cr("perspective"),T=Cr("aspect"),R=Cr("ease"),O=Cr("animate"),M=()=>["auto","avoid","all","avoid-page","page","left","right","column"],j=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...j(),Ue,Le],$=()=>["auto","hidden","clip","visible","scroll"],E=()=>["auto","contain","none"],D=()=>[Ue,Le,f],V=()=>[Io,"full","auto",...D()],de=()=>[Hi,"none","subgrid",Ue,Le],Q=()=>["auto",{span:["full",Hi,Ue,Le]},Hi,Ue,Le],G=()=>[Hi,"auto",Ue,Le],X=()=>["auto","min","max","fr",Ue,Le],K=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ae=()=>["start","end","center","stretch","center-safe","end-safe"],q=()=>["auto",...D()],F=()=>[Io,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...D()],J=()=>[e,Ue,Le],Ae=()=>[...j(),W2,J2,{position:[Ue,Le]}],De=()=>["no-repeat",{repeat:["","x","y","space","round"]}],L=()=>["auto","cover","contain",LC,jC,{size:[Ue,Le]}],ne=()=>[mm,nu,Ns],ee=()=>["","none","full",h,Ue,Le],re=()=>["",ft,nu,Ns],we=()=>["solid","dashed","dotted","double"],Ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ue=()=>[ft,mm,W2,J2],Ce=()=>["","none",k,Ue,Le],H=()=>["none",ft,Ue,Le],oe=()=>["none",ft,Ue,Le],ge=()=>[ft,Ue,Le],Me=()=>[Io,"full",...D()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ei],breakpoint:[ei],color:[CC],container:[ei],"drop-shadow":[ei],ease:["in","out","in-out"],font:[DC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ei],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ei],shadow:[ei],spacing:["px",ft],text:[ei],"text-shadow":[ei],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Io,Le,Ue,T]}],container:["container"],columns:[{columns:[ft,Le,Ue,c]}],"break-after":[{"break-after":M()}],"break-before":[{"break-before":M()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:$()}],"overflow-x":[{"overflow-x":$()}],"overflow-y":[{"overflow-y":$()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:V()}],"inset-x":[{"inset-x":V()}],"inset-y":[{"inset-y":V()}],start:[{start:V()}],end:[{end:V()}],top:[{top:V()}],right:[{right:V()}],bottom:[{bottom:V()}],left:[{left:V()}],visibility:["visible","invisible","collapse"],z:[{z:[Hi,"auto",Ue,Le]}],basis:[{basis:[Io,"full","auto",c,...D()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ft,Io,"auto","initial","none",Le]}],grow:[{grow:["",ft,Ue,Le]}],shrink:[{shrink:["",ft,Ue,Le]}],order:[{order:[Hi,"first","last","none",Ue,Le]}],"grid-cols":[{"grid-cols":de()}],"col-start-end":[{col:Q()}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":de()}],"row-start-end":[{row:Q()}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":X()}],"auto-rows":[{"auto-rows":X()}],gap:[{gap:D()}],"gap-x":[{"gap-x":D()}],"gap-y":[{"gap-y":D()}],"justify-content":[{justify:[...K(),"normal"]}],"justify-items":[{"justify-items":[...ae(),"normal"]}],"justify-self":[{"justify-self":["auto",...ae()]}],"align-content":[{content:["normal",...K()]}],"align-items":[{items:[...ae(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ae(),{baseline:["","last"]}]}],"place-content":[{"place-content":K()}],"place-items":[{"place-items":[...ae(),"baseline"]}],"place-self":[{"place-self":["auto",...ae()]}],p:[{p:D()}],px:[{px:D()}],py:[{py:D()}],ps:[{ps:D()}],pe:[{pe:D()}],pt:[{pt:D()}],pr:[{pr:D()}],pb:[{pb:D()}],pl:[{pl:D()}],m:[{m:q()}],mx:[{mx:q()}],my:[{my:q()}],ms:[{ms:q()}],me:[{me:q()}],mt:[{mt:q()}],mr:[{mr:q()}],mb:[{mb:q()}],ml:[{ml:q()}],"space-x":[{"space-x":D()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":D()}],"space-y-reverse":["space-y-reverse"],size:[{size:F()}],w:[{w:[c,"screen",...F()]}],"min-w":[{"min-w":[c,"screen","none",...F()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[u]},...F()]}],h:[{h:["screen","lh",...F()]}],"min-h":[{"min-h":["screen","lh","none",...F()]}],"max-h":[{"max-h":["screen","lh",...F()]}],"font-size":[{text:["base",r,nu,Ns]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,Ue,pm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",mm,Le]}],"font-family":[{font:[BC,Le,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ue,Le]}],"line-clamp":[{"line-clamp":[ft,"none",Ue,pm]}],leading:[{leading:[o,...D()]}],"list-image":[{"list-image":["none",Ue,Le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ue,Le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:J()}],"text-color":[{text:J()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:[ft,"from-font","auto",Ue,Ns]}],"text-decoration-color":[{decoration:J()}],"underline-offset":[{"underline-offset":[ft,"auto",Ue,Le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ue,Le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ue,Le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ae()}],"bg-repeat":[{bg:De()}],"bg-size":[{bg:L()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Hi,Ue,Le],radial:["",Ue,Le],conic:[Hi,Ue,Le]},UC,$C]}],"bg-color":[{bg:J()}],"gradient-from-pos":[{from:ne()}],"gradient-via-pos":[{via:ne()}],"gradient-to-pos":[{to:ne()}],"gradient-from":[{from:J()}],"gradient-via":[{via:J()}],"gradient-to":[{to:J()}],rounded:[{rounded:ee()}],"rounded-s":[{"rounded-s":ee()}],"rounded-e":[{"rounded-e":ee()}],"rounded-t":[{"rounded-t":ee()}],"rounded-r":[{"rounded-r":ee()}],"rounded-b":[{"rounded-b":ee()}],"rounded-l":[{"rounded-l":ee()}],"rounded-ss":[{"rounded-ss":ee()}],"rounded-se":[{"rounded-se":ee()}],"rounded-ee":[{"rounded-ee":ee()}],"rounded-es":[{"rounded-es":ee()}],"rounded-tl":[{"rounded-tl":ee()}],"rounded-tr":[{"rounded-tr":ee()}],"rounded-br":[{"rounded-br":ee()}],"rounded-bl":[{"rounded-bl":ee()}],"border-w":[{border:re()}],"border-w-x":[{"border-x":re()}],"border-w-y":[{"border-y":re()}],"border-w-s":[{"border-s":re()}],"border-w-e":[{"border-e":re()}],"border-w-t":[{"border-t":re()}],"border-w-r":[{"border-r":re()}],"border-w-b":[{"border-b":re()}],"border-w-l":[{"border-l":re()}],"divide-x":[{"divide-x":re()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":re()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...we(),"hidden","none"]}],"divide-style":[{divide:[...we(),"hidden","none"]}],"border-color":[{border:J()}],"border-color-x":[{"border-x":J()}],"border-color-y":[{"border-y":J()}],"border-color-s":[{"border-s":J()}],"border-color-e":[{"border-e":J()}],"border-color-t":[{"border-t":J()}],"border-color-r":[{"border-r":J()}],"border-color-b":[{"border-b":J()}],"border-color-l":[{"border-l":J()}],"divide-color":[{divide:J()}],"outline-style":[{outline:[...we(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ft,Ue,Le]}],"outline-w":[{outline:["",ft,nu,Ns]}],"outline-color":[{outline:J()}],shadow:[{shadow:["","none",p,yc,vc]}],"shadow-color":[{shadow:J()}],"inset-shadow":[{"inset-shadow":["none",v,yc,vc]}],"inset-shadow-color":[{"inset-shadow":J()}],"ring-w":[{ring:re()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:J()}],"ring-offset-w":[{"ring-offset":[ft,Ns]}],"ring-offset-color":[{"ring-offset":J()}],"inset-ring-w":[{"inset-ring":re()}],"inset-ring-color":[{"inset-ring":J()}],"text-shadow":[{"text-shadow":["none",b,yc,vc]}],"text-shadow-color":[{"text-shadow":J()}],opacity:[{opacity:[ft,Ue,Le]}],"mix-blend":[{"mix-blend":[...Ee(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ee()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ft]}],"mask-image-linear-from-pos":[{"mask-linear-from":ue()}],"mask-image-linear-to-pos":[{"mask-linear-to":ue()}],"mask-image-linear-from-color":[{"mask-linear-from":J()}],"mask-image-linear-to-color":[{"mask-linear-to":J()}],"mask-image-t-from-pos":[{"mask-t-from":ue()}],"mask-image-t-to-pos":[{"mask-t-to":ue()}],"mask-image-t-from-color":[{"mask-t-from":J()}],"mask-image-t-to-color":[{"mask-t-to":J()}],"mask-image-r-from-pos":[{"mask-r-from":ue()}],"mask-image-r-to-pos":[{"mask-r-to":ue()}],"mask-image-r-from-color":[{"mask-r-from":J()}],"mask-image-r-to-color":[{"mask-r-to":J()}],"mask-image-b-from-pos":[{"mask-b-from":ue()}],"mask-image-b-to-pos":[{"mask-b-to":ue()}],"mask-image-b-from-color":[{"mask-b-from":J()}],"mask-image-b-to-color":[{"mask-b-to":J()}],"mask-image-l-from-pos":[{"mask-l-from":ue()}],"mask-image-l-to-pos":[{"mask-l-to":ue()}],"mask-image-l-from-color":[{"mask-l-from":J()}],"mask-image-l-to-color":[{"mask-l-to":J()}],"mask-image-x-from-pos":[{"mask-x-from":ue()}],"mask-image-x-to-pos":[{"mask-x-to":ue()}],"mask-image-x-from-color":[{"mask-x-from":J()}],"mask-image-x-to-color":[{"mask-x-to":J()}],"mask-image-y-from-pos":[{"mask-y-from":ue()}],"mask-image-y-to-pos":[{"mask-y-to":ue()}],"mask-image-y-from-color":[{"mask-y-from":J()}],"mask-image-y-to-color":[{"mask-y-to":J()}],"mask-image-radial":[{"mask-radial":[Ue,Le]}],"mask-image-radial-from-pos":[{"mask-radial-from":ue()}],"mask-image-radial-to-pos":[{"mask-radial-to":ue()}],"mask-image-radial-from-color":[{"mask-radial-from":J()}],"mask-image-radial-to-color":[{"mask-radial-to":J()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":j()}],"mask-image-conic-pos":[{"mask-conic":[ft]}],"mask-image-conic-from-pos":[{"mask-conic-from":ue()}],"mask-image-conic-to-pos":[{"mask-conic-to":ue()}],"mask-image-conic-from-color":[{"mask-conic-from":J()}],"mask-image-conic-to-color":[{"mask-conic-to":J()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ae()}],"mask-repeat":[{mask:De()}],"mask-size":[{mask:L()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ue,Le]}],filter:[{filter:["","none",Ue,Le]}],blur:[{blur:Ce()}],brightness:[{brightness:[ft,Ue,Le]}],contrast:[{contrast:[ft,Ue,Le]}],"drop-shadow":[{"drop-shadow":["","none",y,yc,vc]}],"drop-shadow-color":[{"drop-shadow":J()}],grayscale:[{grayscale:["",ft,Ue,Le]}],"hue-rotate":[{"hue-rotate":[ft,Ue,Le]}],invert:[{invert:["",ft,Ue,Le]}],saturate:[{saturate:[ft,Ue,Le]}],sepia:[{sepia:["",ft,Ue,Le]}],"backdrop-filter":[{"backdrop-filter":["","none",Ue,Le]}],"backdrop-blur":[{"backdrop-blur":Ce()}],"backdrop-brightness":[{"backdrop-brightness":[ft,Ue,Le]}],"backdrop-contrast":[{"backdrop-contrast":[ft,Ue,Le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ft,Ue,Le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ft,Ue,Le]}],"backdrop-invert":[{"backdrop-invert":["",ft,Ue,Le]}],"backdrop-opacity":[{"backdrop-opacity":[ft,Ue,Le]}],"backdrop-saturate":[{"backdrop-saturate":[ft,Ue,Le]}],"backdrop-sepia":[{"backdrop-sepia":["",ft,Ue,Le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":D()}],"border-spacing-x":[{"border-spacing-x":D()}],"border-spacing-y":[{"border-spacing-y":D()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ue,Le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ft,"initial",Ue,Le]}],ease:[{ease:["linear","initial",R,Ue,Le]}],delay:[{delay:[ft,Ue,Le]}],animate:[{animate:["none",O,Ue,Le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[_,Ue,Le]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:H()}],"rotate-x":[{"rotate-x":H()}],"rotate-y":[{"rotate-y":H()}],"rotate-z":[{"rotate-z":H()}],scale:[{scale:oe()}],"scale-x":[{"scale-x":oe()}],"scale-y":[{"scale-y":oe()}],"scale-z":[{"scale-z":oe()}],"scale-3d":["scale-3d"],skew:[{skew:ge()}],"skew-x":[{"skew-x":ge()}],"skew-y":[{"skew-y":ge()}],transform:[{transform:[Ue,Le,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Me()}],"translate-x":[{"translate-x":Me()}],"translate-y":[{"translate-y":Me()}],"translate-z":[{"translate-z":Me()}],"translate-none":["translate-none"],accent:[{accent:J()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:J()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ue,Le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ue,Le]}],fill:[{fill:["none",...J()]}],"stroke-w":[{stroke:[ft,nu,Ns,pm]}],stroke:[{stroke:["none",...J()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ZC=_C(HC);function Ad(...e){return ZC(Jb(e))}const GC=Wb("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ma=ye.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...s},o)=>w.jsx("button",{className:Ad(GC({variant:t,size:r,className:e})),ref:o,...s}));ma.displayName="Button";const Ur=ye.forwardRef(({className:e,type:t,...r},a)=>w.jsx("input",{type:t,className:Ad("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...r}));Ur.displayName="Input";const VC=Wb("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),br=ye.forwardRef(({className:e,...t},r)=>w.jsx("label",{ref:r,className:Ad(VC(),e),...t}));br.displayName="Label";function FC(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var o;const u=f=>f===null?null:JSON.parse(f,void 0),c=(o=r.getItem(s))!=null?o:null;return c instanceof Promise?c.then(u):u(c)},setItem:(s,o)=>r.setItem(s,JSON.stringify(o,void 0)),removeItem:s=>r.removeItem(s)}}const op=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(a){return op(a)(r)},catch(a){return this}}}catch(r){return{then(a){return this},catch(a){return op(a)(r)}}}},YC=(e,t)=>(r,a,s)=>{let o={storage:FC(()=>localStorage),partialize:_=>_,version:0,merge:(_,T)=>({...T,..._}),...t},u=!1;const c=new Set,f=new Set;let h=o.storage;if(!h)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(..._)},a,s);const p=()=>{const _=o.partialize({...a()});return h.setItem(o.name,{state:_,version:o.version})},v=s.setState;s.setState=(_,T)=>(v(_,T),p());const b=e((..._)=>(r(..._),p()),a,s);s.getInitialState=()=>b;let y;const k=()=>{var _,T;if(!h)return;u=!1,c.forEach(O=>{var M;return O((M=a())!=null?M:b)});const R=((T=o.onRehydrateStorage)==null?void 0:T.call(o,(_=a())!=null?_:b))||void 0;return op(h.getItem.bind(h))(o.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==o.version){if(o.migrate){const M=o.migrate(O.state,O.version);return M instanceof Promise?M.then(j=>[!0,j]):[!0,M]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var M;const[j,I]=O;if(y=o.merge(I,(M=a())!=null?M:b),r(y,!0),j)return p()}).then(()=>{R==null||R(y,void 0),y=a(),u=!0,f.forEach(O=>O(y))}).catch(O=>{R==null||R(void 0,O)})};return s.persist={setOptions:_=>{o={...o,..._},_.storage&&(h=_.storage)},clearStorage:()=>{h==null||h.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>k(),hasHydrated:()=>u,onHydrate:_=>(c.add(_),()=>{c.delete(_)}),onFinishHydration:_=>(f.add(_),()=>{f.delete(_)})},o.skipHydration||k(),y||b},XC=YC,d7=Fb()(XC(e=>({apiKey:"",setApiKey:t=>e({apiKey:t}),apiProvider:"gemini",setApiProvider:t=>e({apiProvider:t}),customEndpoint:"",setCustomEndpoint:t=>e({customEndpoint:t})}),{name:"arrowgram-settings"}));function f7({isOpen:e,onClose:t}){const{apiKey:r,setApiKey:a,apiProvider:s}=d7(),[o,u]=ye.useState(!1);return e?Td.createPortal(w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-200",children:w.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-2xl w-96 ring-1 ring-black/5 animate-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"flex justify-between items-center mb-6",children:[w.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Settings"}),w.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:w.jsx(rl,{size:24})})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx(br,{className:"mb-2 block",children:"AI Provider"}),w.jsxs("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg",children:[w.jsx("button",{className:`flex-1 py-1.5 text-sm font-medium rounded-md transition-all ${s==="gemini"?"bg-white shadow text-purple-700":"text-gray-500 hover:text-gray-700"}`,children:"Google Gemini"}),w.jsx("button",{className:"flex-1 py-1.5 text-sm font-medium rounded-md text-gray-400 cursor-not-allowed",disabled:!0,children:"Custom (Soon)"})]})]}),w.jsxs("div",{children:[w.jsx(br,{className:"mb-2 block",children:"Gemini API Key"}),w.jsxs("div",{className:"relative",children:[w.jsx(Ur,{type:o?"text":"password",value:r,onChange:c=>a(c.target.value),placeholder:"AIzaSy...",className:"pr-10"}),w.jsx("button",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",onClick:()=>u(!o),children:o?w.jsx(aN,{size:16}):w.jsx(iN,{size:16})})]}),w.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Your API key is stored locally in your browser.",w.jsx("a",{href:"https://aistudio.google.com/app/apikey",target:"_blank",rel:"noreferrer",className:"text-purple-600 hover:underline ml-1",children:"Get an API key"})]})]})]}),w.jsx("div",{className:"mt-8 flex justify-end",children:w.jsx(ma,{onClick:t,children:"Done"})})]})}),document.body):null}const Bo=ye.forwardRef(({className:e,children:t,...r},a)=>w.jsxs("div",{className:"relative",children:[w.jsx("select",{className:Ad("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 appearance-none",e),ref:a,...r,children:t}),w.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500",children:w.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]}));Bo.displayName="Select";function KC({node:e,nodes:t,arrows:r,onSpecChange:a}){const s=o=>{const{name:u,value:c}=o.target,f=t.map(h=>h.name===e.name?{...h,[u]:c}:h);a(Na({nodes:f,arrows:r}))};return w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{children:[w.jsx(br,{children:"Label"}),w.jsx(Ur,{type:"text",name:"label",value:e.label||"",onChange:s})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Color"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(Ur,{type:"color",name:"color",value:e.color||"#000000",onChange:s,className:"w-12 h-10 p-1"}),w.jsx(Ur,{type:"text",name:"color",value:e.color||"",onChange:s,placeholder:"#000000"})]})]})]})}function JC({arrow:e,nodes:t,arrows:r,onSpecChange:a}){var c,f,h,p,v,b,y,k,_,T,R;const s=O=>{const{name:M,value:j,type:I}=O.target;let $=I==="number"?Number(j):j;M==="angle"&&typeof $=="number"&&!isNaN($)&&($=Gc($));const E=r.map((D,V)=>(D.name||`_arrow_${V}`)===e.key?{...D,[M]:$}:D);a(Na({nodes:t,arrows:E}))},o=(O,M)=>{const j=r.map((I,$)=>{if((I.name||`_arrow_${$}`)===e.key){const D=I.shorten||{};return{...I,shorten:{...D,[O]:M}}}return I});a(Na({nodes:t,arrows:j}))},u=(O,M,j)=>{const I=r.map(($,E)=>{if(($.name||`_arrow_${E}`)===e.key){const V={...$.style};if(O==="level")V.level=j;else if(O==="mode")V.mode=j;else if(j!==void 0){const de=V[O]||{};V[O]={...de,[M]:j}}else V[O]=M;return{...$,style:V}}return $});a(Na({nodes:t,arrows:I}))};return w.jsxs("div",{className:"space-y-6",children:[w.jsxs("div",{children:[w.jsx(br,{children:"Content"}),w.jsx(Ur,{type:"text",name:"label",value:e.label||"",onChange:s,placeholder:"Label text"})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Colors"}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsxs("div",{children:[w.jsx(br,{className:"text-xs",children:"Arrow"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(Ur,{type:"color",name:"color",value:e.color||"#000000",onChange:s,className:"w-8 h-8 p-0"}),w.jsx(Ur,{type:"text",name:"color",value:e.color||"",onChange:s,placeholder:"Arrow Color"})]})]}),w.jsxs("div",{children:[w.jsx(br,{className:"text-xs",children:"Label"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(Ur,{type:"color",name:"label_color",value:e.label_color||"#000000",onChange:s,className:"w-8 h-8 p-0"}),w.jsx(Ur,{type:"text",name:"label_color",value:e.label_color||"",onChange:s,placeholder:"Label Color"})]})]})]})]}),w.jsxs("div",{children:[w.jsx("div",{className:"pb-2 border-b border-gray-100 mb-3 font-semibold text-gray-700 text-sm",children:"Label Placement"}),w.jsx("div",{className:"space-y-3",children:w.jsxs("div",{children:[w.jsx(br,{children:"Alignment"}),w.jsxs(Bo,{name:"label_alignment",value:e.label_alignment||"over",onChange:s,children:[w.jsx("option",{value:"over",children:"Over"}),w.jsx("option",{value:"left",children:"Left"}),w.jsx("option",{value:"right",children:"Right"})]})]})})]}),w.jsxs("div",{children:[w.jsx("div",{className:"pb-2 border-b border-gray-100 mb-3 font-semibold text-gray-700 text-sm",children:"Geometry"}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.from===e.to?w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:[w.jsx(br,{children:"Radius"}),w.jsx(Ur,{type:"number",name:"radius",value:e.radius||0,onChange:s})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Angle"}),w.jsx(Ur,{type:"number",name:"angle",value:e.angle||0,min:-180,max:180,onChange:s})]})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:[w.jsx(br,{children:"Curve"}),w.jsx(Ur,{type:"number",name:"curve",value:e.curve||0,onChange:s})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Shift"}),w.jsx(Ur,{type:"number",name:"shift",value:e.shift||0,onChange:s})]})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Shorten Start"}),w.jsx(Ur,{type:"number",value:((c=e.shorten)==null?void 0:c.source)||0,onChange:O=>o("source",O.target.valueAsNumber)})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Shorten End"}),w.jsx(Ur,{type:"number",value:((f=e.shorten)==null?void 0:f.target)||0,onChange:O=>o("target",O.target.valueAsNumber)})]}),w.jsxs("div",{className:"col-span-2",children:[w.jsx(br,{children:"Level (Parallel)"}),w.jsx(Ur,{type:"number",name:"level",value:((h=e.style)==null?void 0:h.level)||1,min:1,onChange:O=>u("level","level",O.target.valueAsNumber)})]})]})]}),w.jsxs("div",{children:[w.jsx("div",{className:"pb-2 border-b border-gray-100 mb-3 font-semibold text-gray-700 text-sm",children:"Styling"}),w.jsxs("div",{className:"space-y-3",children:[w.jsxs("div",{children:[w.jsx(br,{children:"Type"}),w.jsxs(Bo,{value:((p=e.style)==null?void 0:p.mode)||"arrow",onChange:O=>u("mode","arrow",O.target.value),children:[w.jsx("option",{value:"arrow",children:"Arrow"}),w.jsx("option",{value:"adjunction",children:"Adjunction ()"}),w.jsx("option",{value:"corner",children:"Pullback ()"}),w.jsx("option",{value:"corner_inverse",children:"Pushout ()"})]})]}),(!((v=e.style)!=null&&v.mode)||e.style.mode==="arrow")&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{children:[w.jsx(br,{children:"Body Style"}),w.jsxs(Bo,{value:((y=(b=e.style)==null?void 0:b.body)==null?void 0:y.name)||"solid",onChange:O=>u("body","name",O.target.value),children:[w.jsx("option",{value:"solid",children:"Solid"}),w.jsx("option",{value:"dashed",children:"Dashed"}),w.jsx("option",{value:"dotted",children:"Dotted"}),w.jsx("option",{value:"none",children:"None"}),w.jsx("option",{value:"squiggly",children:"Squiggly"}),w.jsx("option",{value:"barred",children:"Barred"}),w.jsx("option",{value:"double_barred",children:"Double Barred"}),w.jsx("option",{value:"bullet_solid",children:"Bullet (Solid)"}),w.jsx("option",{value:"bullet_hollow",children:"Bullet (Hollow)"})]})]}),w.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[w.jsxs("div",{children:[w.jsx(br,{children:"Head"}),w.jsxs(Bo,{value:((_=(k=e.style)==null?void 0:k.head)==null?void 0:_.name)||"normal",onChange:O=>u("head","name",O.target.value),children:[w.jsx("option",{value:"normal",children:"Normal"}),w.jsx("option",{value:"epi",children:"Epi ()"}),w.jsx("option",{value:"none",children:"None"}),w.jsx("option",{value:"maps_to",children:"Bar (|)"}),w.jsx("option",{value:"hook",children:"Hook ()"}),w.jsx("option",{value:"harpoon",children:"Harpoon ()"})]})]}),w.jsxs("div",{children:[w.jsx(br,{children:"Tail"}),w.jsxs(Bo,{value:((R=(T=e.style)==null?void 0:T.tail)==null?void 0:R.name)||"none",onChange:O=>u("tail","name",O.target.value),children:[w.jsx("option",{value:"none",children:"None"}),w.jsx("option",{value:"mono",children:"Mono ()"}),w.jsx("option",{value:"maps_to",children:"Maps to (|)"}),w.jsx("option",{value:"hook",children:"Hook ()"})]})]})]})]})]})]})]})}function h7({selection:e,spec:t,onSpecChange:r}){const a=_t(f=>f.deleteSelection),{nodes:s,arrows:o}=ye.useMemo(()=>{try{const f=JSON.parse(t);return{nodes:f.nodes||[],arrows:f.arrows||[]}}catch{return{nodes:[],arrows:[]}}},[t]),u=ye.useMemo(()=>{if(!(e!=null&&e.key))return null;const{key:f}=e,h=s.find(v=>v.name===f);if(h)return{type:"node",data:h};const p=o.find((v,b)=>(v.name||`_arrow_${b}`)===f);return p?{type:"arrow",data:{...p,key:f}}:null},[e,s,o]);if(!u)return w.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 p-8 text-center",children:[w.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4 text-gray-300",children:w.jsx(yN,{size:32})}),w.jsx("p",{className:"text-sm font-medium",children:"No item selected"}),w.jsx("p",{className:"text-xs mt-1",children:"Select a node or arrow on the canvas to edit its properties."})]});const c=u.type==="node"?u.data.name:u.data.name||u.data.key;return w.jsxs("div",{children:[w.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[w.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[w.jsx("span",{className:"capitalize",children:u.type}),w.jsx("span",{className:"text-sm font-normal text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full max-w-[150px] truncate",children:c})]}),w.jsx(ma,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700 hover:bg-red-50",onClick:a,title:"Delete",children:w.jsx(i1,{size:18})})]}),u.type==="node"&&w.jsx(KC,{node:u.data,nodes:s,arrows:o,onSpecChange:r}),u.type==="arrow"&&w.jsx(JC,{arrow:u.data,nodes:s,arrows:o,onSpecChange:r})]})}function WC({initialMarkdown:e,filename:t,onRename:r,onPersist:a,onChange:s,onPrint:o,showSaveButton:u=!0,showPrintButton:c=!0,sharing:f}){const[h,p]=ye.useState(e),[v,b]=ye.useState(!1),[y,k]=ye.useState("split"),[_,T]=ye.useState(null),[R,O]=ye.useState(!1),[M,j]=ye.useState(!1),[I,$]=ye.useState(t),{addToast:E}=Vs();Ir.useEffect(()=>{p(e)},[e]),Ir.useEffect(()=>{$(t)},[t]);const D=async()=>{if(!r){j(!1),$(t);return}const X=I.trim();if(!X||X===t){j(!1),$(t);return}try{await r(X),E("Renamed.","success")}catch(K){console.error(K),E("Failed to rename.","error"),$(t)}finally{j(!1)}},V=async()=>{if(!a){E("Save is not configured in this host app.","error");return}try{await a(h),E("Paper saved successfully!","success")}catch(X){console.error(X),E("Failed to save paper.","error")}},de=()=>{if(o){o(h,{isTwoColumn:v});return}localStorage.setItem("print_content",h),localStorage.setItem("print_layout",String(v));const X=new URL("/arrowgram/",window.location.origin),K=new URL("print-preview",X).toString();window.open(K,"_blank")},Q=(X,K)=>{T({id:X,spec:K})},G=X=>{if(!_)return;const K=_.spec;if(h.includes(K)){const ae=h.replace(K,X);p(ae),E("Diagram updated in document","success")}else E("Could not find the original diagram code to replace.","error");T(null)};return w.jsxs("div",{className:"paper-editor-root flex flex-col h-full bg-gray-50 overflow-hidden",children:[w.jsxs("div",{className:"h-12 bg-white border-b border-gray-200 flex items-center justify-between px-4 shrink-0 z-20 print:hidden",children:[w.jsx("div",{className:"flex items-center gap-4 min-w-0",children:w.jsxs("div",{className:"flex items-center gap-2 text-gray-700 font-medium min-w-0",children:[w.jsx("div",{className:"w-6 h-6 bg-indigo-600 rounded flex items-center justify-center text-white text-xs font-bold shrink-0",children:"P"}),M?w.jsx("input",{className:"min-w-0 max-w-[380px] w-[28ch] border border-gray-200 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white",value:I,onChange:X=>$(X.target.value),onBlur:()=>void D(),onKeyDown:X=>{X.key==="Enter"&&D(),X.key==="Escape"&&(j(!1),$(t))},autoFocus:!0}):w.jsx("button",{type:"button",className:`min-w-0 truncate text-left ${r?"hover:underline":""}`,title:r?"Click to rename":t,onClick:()=>{r&&j(!0)},children:t})]})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("div",{className:"flex bg-gray-100 p-1 rounded-lg mr-4",children:[w.jsx("button",{onClick:()=>k("code"),className:`p-1.5 rounded ${y==="code"?"bg-white shadow text-gray-800":"text-gray-500 hover:text-gray-700"}`,title:"Editor Only",children:w.jsx(U2,{size:16})}),w.jsx("button",{onClick:()=>k("split"),className:`p-1.5 rounded ${y==="split"?"bg-white shadow text-gray-800":"text-gray-500 hover:text-gray-700"}`,title:"Split View",children:w.jsxs("div",{className:"flex",children:[w.jsx(U2,{size:16,className:"-mr-1"}),w.jsx(Fc,{size:16,className:"-ml-1"})]})}),w.jsx("button",{onClick:()=>k("preview"),className:`p-1.5 rounded ${y==="preview"?"bg-white shadow text-gray-800":"text-gray-500 hover:text-gray-700"}`,title:"Preview Only",children:w.jsx(Fc,{size:16})})]}),w.jsx("button",{onClick:()=>b(!v),className:`text-sm px-3 py-1.5 rounded border transition-colors ${v?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:v?"Two Column":"Single Column"}),w.jsxs("button",{onClick:de,className:"flex items-center gap-2 px-3 py-1.5 text-gray-600 hover:bg-gray-100 rounded-md text-sm font-medium transition-colors",style:{display:c?void 0:"none"},children:[w.jsx(AN,{size:16}),"Print PDF"]}),f&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:async()=>{const X=!f.isPublic;await f.onTogglePublic(X),X&&await f.onCopyShareLink()},className:`text-sm px-3 py-1.5 rounded border transition-colors ${f.isPublic?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,title:f.isPublic?"Public (click to make private)":"Private (click to make public)",children:f.isPublic?"Public":"Private"}),w.jsx("button",{onClick:()=>f.onCopyShareLink(),className:"flex items-center gap-2 px-3 py-1.5 text-gray-600 hover:bg-gray-100 rounded-md text-sm font-medium transition-colors",title:"Copy share link",children:"Share"})]}),w.jsxs("button",{onClick:()=>O(!0),className:"flex items-center gap-2 px-3 py-1.5 text-gray-600 hover:bg-gray-100 rounded-md text-sm font-medium transition-colors",title:"Settings",children:[w.jsx(Zb,{size:16}),"Settings"]}),w.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-sm font-medium transition-colors shadow-sm",style:{display:u?void 0:"none"},children:[w.jsx(Hb,{size:16}),"Save"]})]})]}),f!=null&&f.isPublic&&f.publicUrl?w.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 bg-white flex items-center gap-2 text-sm print:hidden",children:[w.jsx("span",{className:"text-gray-500",children:"Public link:"}),w.jsx("input",{className:"flex-1 min-w-0 border border-gray-200 rounded px-2 py-1 text-xs font-mono text-gray-700 bg-gray-50",value:f.publicUrl,readOnly:!0}),w.jsx("button",{className:"px-2 py-1 rounded bg-gray-100 hover:bg-gray-200 text-gray-700 text-xs font-medium",onClick:()=>f.onCopyShareLink(),children:"Copy"})]}):null,w.jsxs("div",{className:"flex-1 flex overflow-hidden paper-editor-main",children:[w.jsxs("div",{className:`${y==="preview"?"hidden":y==="code"?"w-full":"w-1/2"} flex flex-col border-r border-gray-200 transition-all duration-300 print:hidden`,children:[w.jsx("div",{className:"bg-gray-50 px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b border-gray-200",children:"Markdown Source"}),w.jsx("textarea",{className:"flex-1 w-full h-full p-6 resize-none outline-none font-mono text-sm bg-white text-gray-800 leading-relaxed",value:h,onChange:X=>{const K=X.target.value;p(K),s==null||s(K)},placeholder:"# Start writing your paper...",spellCheck:!1})]}),w.jsxs("div",{className:`${y==="code"?"hidden":y==="preview"?"w-full":"w-1/2"} bg-gray-100 flex flex-col relative overflow-hidden transition-all duration-300 paper-preview-pane`,children:[w.jsxs("div",{className:"bg-gray-100 px-4 py-2 text-xs font-semibold text-gray-500 uppercase tracking-wider border-b border-gray-200 flex justify-between print:hidden",children:[w.jsx("span",{children:"Live Preview"}),w.jsx("span",{className:"text-[10px] text-gray-400",children:"Paged.js Rendering"})]}),w.jsx("div",{className:"flex-1 overflow-auto p-8 relative paper-scroll-container",children:w.jsx("div",{className:"mx-auto w-fit paper-content-wrapper",children:w.jsx(tC,{markdown:h,isTwoColumn:v,onEditDiagram:Q})})})]})]}),_&&w.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm flex items-center justify-center p-8",children:w.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl h-[80vh] flex flex-col overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"h-14 border-b border-gray-200 flex items-center justify-between px-6 bg-gray-50",children:[w.jsxs("h3",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[w.jsx(fN,{size:20,className:"text-indigo-600"}),"Edit Diagram"]}),w.jsx("button",{onClick:()=>T(null),className:"p-2 hover:bg-gray-200 rounded-full text-gray-500 transition-colors",children:w.jsx(rl,{size:20})})]}),w.jsx("div",{className:"flex-1 overflow-hidden relative",children:w.jsx(QC,{initialSpec:_.spec,onSave:X=>G(X)})})]})}),w.jsx(f7,{isOpen:R,onClose:()=>O(!1)})]})}function QC({initialSpec:e,onSave:t}){const r=_t(c=>c.setSpec),a=_t(c=>c.spec),s=_t(c=>c.selectedIds),o=_t(c=>c.setSelection),u={key:s.values().next().value};return Ir.useEffect(()=>{r(e),o(new Set)},[]),w.jsxs("div",{className:"flex flex-col h-full bg-gray-50",children:[w.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[w.jsx("div",{className:"flex-1 relative",children:w.jsx(Yb,{})}),w.jsxs("div",{className:"w-80 border-l border-gray-200 bg-white overflow-y-auto",children:[w.jsx("div",{className:"p-4 border-b border-gray-100 font-semibold text-gray-700 bg-gray-50/50",children:"Properties"}),w.jsx("div",{className:"p-4",children:w.jsx(h7,{selection:u,spec:a,onSpecChange:r})})]})]}),w.jsx("div",{className:"h-16 border-t border-gray-200 flex items-center justify-end px-6 gap-3 bg-white z-10",children:w.jsx("button",{onClick:()=>t(a),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-lg shadow-sm transition-colors",children:"Apply Changes"})})]})}const eO=`
{
  "nodes": [
    { "name": "T", "left": 100, "top": 100, "label": "T" },
    { "name": "P", "left": 300, "top": 300, "label": "$A \\times_C B$" },
    { "name": "A", "left": 300, "top": 600, "label": "A" },
    { "name": "B", "left": 600, "top": 300, "label": "B" },
    { "name": "C", "left": 600, "top": 600, "label": "C" }
  ],
  "arrows": [
    { "from": "P", "to": "A", "label": "p", "style": { "tail": { "name": "mono" } } },
    { "from": "P", "to": "B", "label": "p" },
    { "from": "A", "to": "C", "label": "f", "label_alignment": "left", "style": { "head": { "name": "epi" } } },
    { "from": "B", "to": "C", "label": "g", "label_alignment": "right", "style": { "tail": { "name": "mono" } } },
    { "from": "T", "to": "A", "label": "t", "curve": -80 },
    { "from": "T", "to": "B", "label": "t", "curve": 80 },
    { "from": "T", "to": "P", "label": "! u", "style": { "body": { "name": "dashed" } } }
  ]
}
`,tO=`
{
  "nodes": [
    { "name": "A", "left": 100, "top": 100, "label": "A" },
    { "name": "B", "left": 400, "top": 100, "label": "B" }
  ],
  "arrows": [
    { "name": "f", "from": "A", "to": "B", "label": "F(f)", "curve": -90 },
    { "name": "g", "from": "A", "to": "B", "label": "G(f)", "curve": 90 },
    { "name": "eta", "from": "f", "to": "g", "label": "", "style": { "head": { "name": "epi" } } }
  ]
}
`,rO=`
{
  "nodes": [
    { "name": "A", "left": 100, "top": 100, "label": "A" },
    { "name": "B", "left": 500, "top": 100, "label": "B" },
    { "name": "C", "left": 100, "top": 400, "label": "C" },
    { "name": "D", "left": 500, "top": 400, "label": "D" }
  ],
  "arrows": [
    { "name": "top_arrow", "from": "A", "to": "B", "label": "f", "curve": 90 },
    { "name": "bottom_arrow", "from": "C", "to": "D", "label": "g" },
    { "name": "left_arrow", "from": "A", "to": "C", "label": "" },
    { "name": "right_arrow", "from": "B", "to": "D", "label": "" },
    { "name": "diag1", "from": "top_arrow", "to": "right_arrow", "label": "", "curve": 40, "label_alignment": "left",
      "style": { "level": 2,  "head": { "name": "epi" },  "tail": { "name": "mono" }  } },
    { "name": "diag2", "from": "left_arrow", "to": "bottom_arrow", "label": "", "curve": -40, "label_alignment": "right" }
  ]
}
`,aO=`
{
  "nodes": [
    { "name": "A", "left": 100, "top": 100, "label": "A" },
    { "name": "B", "left": 600, "top": 100, "label": "B" },
    { "name": "C", "left": 100, "top": 400, "label": "C" },
    { "name": "D", "left": 600, "top": 400, "label": "D" }
  ],
  "arrows": [
    { "name": "f1", "from": "A", "to": "B", "label": "f", "curve": -90 },
    { "name": "f2", "from": "A", "to": "B", "label": "f", "curve": 90 },
    { "name": "g1", "from": "C", "to": "D", "label": "g", "curve": -60 },
    { "name": "g2", "from": "C", "to": "D", "label": "g", "curve": 60 },
    { "name": "h1", "from": "f1", "to": "f2", "label": "h", "curve": -90,
      "style": { "level": 2 }  },
    { "name": "h2", "from": "g1", "to": "g2", "label": "h", "curve": 90  },
    { "name": "h3", "from": "h1", "to": "h2", "label": "h", "curve": -50,
      "style": { "level": 3 } }
  ]
}
`,Q2={Pullback:eO.trim(),"Natural Transformation":tO.trim(),"Higher Order Square":rO.trim(),"Higher Orderception":aO.trim()};function nO({isOpen:e,onClose:t}){const r=_t(R=>R.spec),a=_t(R=>R.setSpec),[s,o]=ye.useState(r),[u,c]=ye.useState(null),{addToast:f}=Vs(),[h,p]=ye.useState(!1),[v,b]=ye.useState(!1);ye.useEffect(()=>{o(r),c(null)},[r,e]);const y=R=>{o(R.target.value),c(null)},k=()=>{try{JSON.parse(s),a(s),f("Specification updated","success"),t()}catch(R){c(R.message)}},_=()=>{navigator.clipboard.writeText(s),p(!0),setTimeout(()=>p(!1),2e3),f("Copied to clipboard","info")},T=R=>{o(Q2[R]),b(!1),f(`Loaded example: ${R}`,"info")};return e?Td.createPortal(w.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[800px] h-[80vh] flex flex-col ring-1 ring-black/5 animate-in fade-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100 relative",children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:["JSON Specification",u&&w.jsx("span",{className:"text-xs font-normal text-red-500 bg-red-50 px-2 py-1 rounded",children:"Invalid JSON"})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>b(!v),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",title:"Load Example",children:w.jsx(ZM,{size:20})}),v&&w.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden z-50",children:[w.jsx("div",{className:"p-2 text-xs font-semibold text-gray-400 bg-gray-50 border-b border-gray-100",children:"Load Example"}),Object.keys(Q2).map(R=>w.jsx("button",{onClick:()=>T(R),className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-700 transition-colors",children:R},R))]})]}),w.jsx("button",{onClick:_,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Copy to Clipboard",children:h?w.jsx(Vc,{size:20,className:"text-green-500"}):w.jsx(n1,{size:20})}),w.jsx("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100",children:w.jsx(rl,{size:20})})]})]}),w.jsx("div",{className:"flex-1 p-0 relative",children:w.jsx("textarea",{value:s,onChange:y,className:"w-full h-full p-4 font-mono text-sm resize-none focus:outline-none text-gray-700 bg-gray-50",spellCheck:!1})}),w.jsxs("div",{className:"p-4 border-t border-gray-100 bg-gray-50/50 rounded-b-2xl flex justify-between items-center",children:[w.jsx("div",{className:"text-xs text-gray-500",children:"Edit the raw JSON to modify the diagram directly."}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(ma,{variant:"secondary",onClick:t,children:"Cancel"}),w.jsx(ma,{onClick:k,disabled:!!u,children:"Apply Changes"})]})]})]})}),document.body):null}const Xc=40,m7=-25,lp=10,up=-90,e3={left:0,centre:1,right:2,over:3},iO={0:"left",1:"over",2:"right",3:"over"},sO={none:[],normal:["epi"],epi:["epi","epi"],mono:["mono"],maps_to:["maps to"],hook:["hook"],harpoon:["harpoon"],corner:["corner"],corner_inverse:["corner-inverse"]},oO={none:[],normal:[],mono:["mono"],maps_to:["maps to"],hook:["hook"]},lO={solid:"cell",dashed:"dashed",dotted:"dotted",squiggly:"squiggly",wavy:"squiggly",barred:"barred",double_barred:"double barred",bullet_solid:"bullet solid",bullet_hollow:"bullet hollow",none:"none"};function uO(e){if(typeof e>"u")return{name:"normal"};if(e.length===0)return{name:"none"};const t=JSON.stringify(e);if(t==='["epi"]')return{name:"normal"};if(t==='["epi","epi"]')return{name:"epi"};if(t==='["mono"]')return{name:"mono"};if(t==='["maps to"]')return{name:"maps_to"};if(t==='["corner"]')return{name:"corner"};const r=e[0];return r.startsWith("harpoon")?{name:"harpoon",side:r.endsWith("top")?"top":"bottom"}:r.startsWith("hook")?{name:"hook",side:r.endsWith("top")?"top":"bottom"}:{name:"normal"}}function cO(e){if(!e||e.length===0)return{name:"none"};const t=JSON.stringify(e);if(t==='["mono"]')return{name:"mono"};if(t==='["maps to"]')return{name:"maps_to"};const r=e[0];return r.startsWith("hook")?{name:"hook",side:r.endsWith("top")?"top":"bottom"}:{name:"none"}}const dO={cell:"solid",dashed:"dashed",dotted:"dotted",squiggly:"squiggly",barred:"barred","double barred":"double_barred","bullet solid":"bullet_solid","bullet hollow":"bullet_hollow",none:"none"};function gm(e){const t=e[0],r=e[1],a=e[2],s=e[3]!==void 0?e[3]:1;return`hsla(${t}, ${r}%, ${a}%, ${s})`}function vm(e){if(!e)return[0,0,0,1];const t=e.trim().toLowerCase();if(t==="black")return[0,0,0,1];if(t==="white")return[0,0,100,1];if(t==="red")return[0,100,50,1];if(t==="blue")return[240,100,50,1];if(t==="green")return[120,100,50,1];if(t==="transparent")return[0,0,0,0];if(t.startsWith("#")){let r=t.substring(1);r.length===3&&(r=r.split("").map(u=>u+u).join(""));const a=parseInt(r.substring(0,2),16)/255,s=parseInt(r.substring(2,4),16)/255,o=parseInt(r.substring(4,6),16)/255;return t3(a,s,o)}if(t.startsWith("rgb")){const r=t.match(/[\d.]+/g);if(r&&r.length>=3){const a=parseFloat(r[0])/255,s=parseFloat(r[1])/255,o=parseFloat(r[2])/255,u=r.length>3?parseFloat(r[3]):1,[c,f,h]=t3(a,s,o);return[c,f,h,u]}}if(t.startsWith("hsl")){const r=t.match(/[\d.]+/g);if(r&&r.length>=3){const a=parseFloat(r[0]),s=parseFloat(r[1]),o=parseFloat(r[2]),u=r.length>3?parseFloat(r[3]):1;return[a,s,o,u]}}return[0,0,0,1]}function t3(e,t,r){const a=Math.max(e,t,r),s=Math.min(e,t,r);let o=0,u=0,c=(a+s)/2;if(a!==s){const f=a-s;switch(u=c>.5?f/(2-a-s):f/(a+s),a){case e:o=(t-r)/f+(t<r?6:0);break;case t:o=(r-e)/f+2;break;case r:o=(e-t)/f+4;break}o*=60}return[Math.round(o),Math.round(u*100),Math.round(c*100),1]}function fO(e){var t,r,a;try{const o=(e.includes("#")?e.substring(e.indexOf("#")+1):e).split("&").find(T=>T.startsWith("q="));if(!o)throw new Error("No 'q' parameter found in URL fragment.");const u=o.substring(2),c=atob(u),f=new Uint8Array(c.length);for(let T=0;T<c.length;T++)f[T]=c.charCodeAt(T);const h=new TextDecoder().decode(f),p=JSON.parse(h),[v,b,...y]=p,k={version:1,nodes:[],arrows:[]},_=[];for(let T=0;T<b;T++){const R=y[T],[O,M,j="",I]=R,$=`v${T}`,E={name:$,left:O*Xc,top:M*Xc,label:j?`$${j}$`:""};I&&Array.isArray(I)&&I.length>=3&&(I[0]===0&&I[2]===0||(E.color=gm(I))),k.nodes.push(E),_[T]={name:$,type:"node"}}for(let T=b;T<y.length;T++){const R=y[T],O=R[0],M=R[1],j=(t=_[O])==null?void 0:t.name,I=(r=_[M])==null?void 0:r.name;if(j&&I){const $=`e${T-b}`,E={name:$,from:j,to:I,label:"",label_alignment:"over"};let D=2;if(D<R.length&&typeof R[D]=="string"){const ae=R[D];ae&&(E.label=`$${ae}$`),D++}let V=0;D<R.length&&typeof R[D]=="number"&&(V=R[D],D++),E.label_alignment=iO[V]||"over";let de={};if(D<R.length&&typeof R[D]=="object"&&!Array.isArray(R[D])&&(de=R[D],D++),typeof de.curve=="number"&&(E.curve=de.curve*m7),typeof de.offset=="number"&&(E.shift=de.offset),de.shorten)E.shorten={source:de.shorten.source,target:de.shorten.target};else if(typeof de.length=="number"){const ae=(100-de.length)/2;E.shorten={source:ae,target:ae}}if(O===M){const ae=typeof de.radius=="number"?de.radius:3,q=typeof de.angle=="number"?de.angle:0;E.radius=-1*ae*lp,E.angle=q+up}else typeof de.radius=="number"&&(E.radius=de.radius*lp),typeof de.angle=="number"&&(E.angle=de.angle+up);E.style={level:de.level||1};const Q=de.style||{};Q.name==="adjunction"?E.style.mode="adjunction":Q.name==="corner"?E.style.mode="corner":Q.name==="corner-inverse"&&(E.style.mode="corner_inverse");const G=uO(Q.heads);G.name!=="normal"&&(E.style.head=G);const X=cO(Q.tails);X.name!=="none"&&(E.style.tail=X);const K=(a=Q.body)!=null&&a.name?dO[Q.body.name]:null;if(K&&K!=="solid"?E.style.body={name:K}:Q.dash_style&&(Q.dash_style==="dashed"&&(E.style.body={name:"dashed"}),Q.dash_style==="dotted"&&(E.style.body={name:"dotted"})),typeof de.colour<"u"){const ae=de.colour;Array.isArray(ae)&&(E.color=gm(ae))}D<R.length&&Array.isArray(R[D])&&(E.label_color=gm(R[D])),k.arrows?k.arrows.push(E):k.arrows=[E],_[T]={name:$,type:"arrow"}}}return k}catch(s){throw console.error("Failed to decode Quiver URL:",s),new Error("Failed to decode URL. Please check the format.")}}function hO(e){try{const t=[],r=[],a=new Map;e.nodes.forEach((p,v)=>{const b=[Math.round(p.left/Xc),Math.round(p.top/Xc)];if(p.label){let y=p.label;y.startsWith("$")&&y.endsWith("$")&&(y=y.slice(1,-1)),b.push(y)}p.color&&p.label&&b.push(vm(p.color)),t.push(b),a.set(p.name,v)});const s=Su(e);let o=t.length;s.arrows.forEach((p,v)=>{a.set(p.spec.name||p.key,o+v)}),s.arrows.forEach(p=>{var G,X,K,ae;const v=p.spec,b=a.get(v.from),y=a.get(v.to);if(b===void 0||y===void 0)return;const k=[b,y],_={},T={};if(v.curve&&(_.curve=Math.round(v.curve/m7)),v.shift&&(_.offset=v.shift),(G=v.style)!=null&&G.level&&v.style.level>1&&(_.level=v.style.level),v.shorten&&p.arcLength>0){const q=(v.shorten.source||0)/p.arcLength*100,F=(v.shorten.target||0)/p.arcLength*100;(q>0||F>0)&&(_.shorten={source:Math.round(q),target:Math.round(F)})}const R=b===y;if(v.radius){const q=v.radius/lp,F=R?-1*q:q;(!R||F!==3)&&(_.radius=F)}if(typeof v.angle=="number"){const q=v.angle-up;(!R||q!==0)&&(_.angle=q)}v.color&&(_.colour=vm(v.color));const O=v.style||{};if(O.mode==="adjunction"?T.name="adjunction":O.mode==="corner"?T.name="corner":O.mode==="corner_inverse"?T.name="corner-inverse":T.name="arrow",(X=O.head)!=null&&X.name&&O.head.name!=="normal"){const q=sO[O.head.name];q&&(T.heads=[...q],O.head.side&&(O.head.name==="harpoon"||O.head.name==="hook")&&(T.heads[0]+=O.head.side==="top"?"-top":"-bottom"))}if((K=O.tail)!=null&&K.name&&O.tail.name!=="none"){const q=oO[O.tail.name];q&&(T.tails=[...q],O.tail.side&&O.tail.name==="hook"&&(T.tails[0]+=O.tail.side==="top"?"-top":"-bottom"))}(ae=O.body)!=null&&ae.name&&O.body.name!=="solid"&&(T.body={name:lO[O.body.name]||"cell"}),Object.keys(T).length>0&&(T.name==="arrow"&&Object.keys(T).length===1||(_.style=T));let M="";v.label&&(M=v.label,M.startsWith("$")&&M.endsWith("$")&&(M=M.slice(1,-1)));const j=e3[v.label_alignment||"over"],I=Object.keys(_).length>0,$=j!==e3.over,E=v.label_color?vm(v.label_color):null,D=M!==""||$||I||E,V=$||I||E,de=I||E,Q=!!E;D&&k.push(M),V&&k.push(j),de&&k.push(_),Q&&k.push(E),r.push(k)});const u=[0,t.length,...t,...r],c=JSON.stringify(u),f=new TextEncoder().encode(c),h=String.fromCharCode.apply(null,Array.from(f));return btoa(h)}catch(t){throw console.error("Failed to encode Arrowgram spec:",t),new Error("Failed to encode spec.")}}function mO({isOpen:e,onClose:t}){const{spec:r,setSpec:a}=_t(),[s,o]=ye.useState(""),[u,c]=ye.useState(""),{addToast:f}=Vs(),[h,p]=ye.useState(!1),v=()=>{try{const k=fO(s);a(Na(k)),f("Quiver diagram imported successfully!","success"),t()}catch(k){f(k.message||"Failed to decode Quiver URL","error")}},b=()=>{try{const k=JSON.parse(r),T=`https://q.uiver.app/#q=${hO(k)}`;c(T)}catch{f("Failed to encode diagram","error")}},y=()=>{navigator.clipboard.writeText(u),p(!0),setTimeout(()=>p(!1),2e3),f("Quiver URL copied!","success")};return e?Td.createPortal(w.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-[500px] ring-1 ring-black/5 animate-in fade-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-100",children:[w.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[w.jsx(gN,{size:18})," Quiver Integration"]}),w.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:w.jsx(rl,{size:20})})]}),w.jsxs("div",{className:"p-6 space-y-8",children:[w.jsxs("div",{className:"space-y-3",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Import from Quiver"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(Ur,{value:s,onChange:k=>o(k.target.value),placeholder:"Paste https://q.uiver.app/... URL here",className:"flex-1"}),w.jsx(ma,{onClick:v,disabled:!s,children:"Import"})]}),w.jsx("p",{className:"text-xs text-gray-500",children:"Paste a URL from q.uiver.app to load the diagram here."})]}),w.jsx("div",{className:"h-px bg-gray-100"}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Export to Quiver"}),w.jsx("div",{className:"flex gap-2 items-start",children:w.jsxs(ma,{onClick:b,variant:"outline",className:"w-full justify-center",children:["Generate Quiver URL ",w.jsx(PM,{size:16,className:"ml-2"})]})}),u&&w.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200 flex items-center gap-2 mt-2",children:[w.jsx("div",{className:"flex-1 text-xs text-gray-600 font-mono break-all line-clamp-2",children:u}),w.jsx("button",{onClick:y,className:"p-1.5 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded-md transition-colors",title:"Copy",children:h?w.jsx(Vc,{size:16}):w.jsx(n1,{size:16})})]}),w.jsx("p",{className:"text-xs text-gray-500",children:"Generate a URL to open this diagram in q.uiver.app."})]})]})]})}),document.body):null}function pO({onExport:e,onShare:t,onToggleChat:r,isChatOpen:a,isChatBusy:s}){const{filename:o}=_t(),{undo:u,redo:c,pastStates:f,futureStates:h}=Vb(_t.temporal),[p,v]=ye.useState(!1),[b,y]=ye.useState(!1),[k,_]=ye.useState(!1),[T,R]=ye.useState(!1),[O,M]=ye.useState({fitView:!0,showGrid:!0}),j=f.length>0,I=h.length>0,$="p-2 rounded-lg text-gray-600 hover:bg-gray-100/80 hover:text-gray-900 transition-all disabled:opacity-40 disabled:cursor-not-allowed active:scale-95",E=w.jsx("div",{className:"h-5 w-px bg-gray-200 mx-1"});return w.jsxs("div",{className:"flex items-center gap-1 p-1 bg-white/90 backdrop-blur-md border border-gray-200/50 shadow-lg rounded-xl ring-1 ring-black/5",children:[w.jsx("button",{className:$,onClick:()=>u(),disabled:!j,title:"Undo",children:w.jsx(qN,{size:18})}),w.jsx("button",{className:$,onClick:()=>c(),disabled:!I,title:"Redo",children:w.jsx(MN,{size:18})}),E,w.jsxs("button",{className:`${$} relative ${a?"bg-purple-100 text-purple-700 hover:bg-purple-200":""}`,onClick:r,title:"AI Assistant",children:[w.jsx(rp,{size:18}),!a&&s?w.jsx("span",{className:"absolute -top-0.5 -right-0.5 h-3 w-3 animate-spin rounded-full border-2 border-purple-200 border-t-purple-700"}):null]}),w.jsx("button",{className:$,onClick:()=>v(!0),title:"Settings",children:w.jsx(Zb,{size:18})}),w.jsx("button",{className:$,onClick:()=>y(!0),title:"Edit JSON Spec",children:w.jsx(oN,{size:18})}),w.jsx("button",{className:$,onClick:()=>_(!0),title:"Quiver Integration",children:w.jsx(q2,{size:18,className:"rotate-90"})}),E,w.jsxs("div",{className:"relative flex items-center",children:[w.jsx("button",{className:`${$} rounded-r-none border-r border-gray-200/50 pr-1`,onClick:()=>e("svg",O),title:"Export SVG",children:w.jsx(Pb,{size:18})}),w.jsx("button",{className:`${$} rounded-l-none px-1`,onClick:()=>R(!T),title:"Export Options",children:w.jsx(YM,{size:14})}),T&&w.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-gray-100 p-2 z-50 animate-in fade-in zoom-in-95",children:[w.jsx("div",{className:"text-xs font-semibold text-gray-500 px-2 py-1 uppercase tracking-wider",children:"Export Settings"}),w.jsxs("button",{className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded-lg text-sm text-gray-700 transition-colors",onClick:()=>M(D=>({...D,fitView:!D.fitView})),children:[w.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${O.fitView?"bg-purple-600 border-purple-600 text-white":"border-gray-300"}`,children:O.fitView&&w.jsx(Vc,{size:10})}),"Fit View to Content"]}),w.jsxs("button",{className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-gray-100 rounded-lg text-sm text-gray-700 transition-colors",onClick:()=>M(D=>({...D,showGrid:!D.showGrid})),children:[w.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${O.showGrid?"bg-purple-600 border-purple-600 text-white":"border-gray-300"}`,children:O.showGrid&&w.jsx(Vc,{size:10})}),"Include Grid"]}),w.jsx("div",{className:"h-px bg-gray-100 my-2"}),w.jsx("button",{className:"w-full text-left px-2 py-1.5 hover:bg-gray-100 rounded-lg text-sm text-gray-700 font-medium transition-colors",onClick:()=>{e("svg",O),R(!1)},children:"Export SVG"}),w.jsx("button",{className:"w-full text-left px-2 py-1.5 hover:bg-gray-100 rounded-lg text-sm text-gray-700 font-medium transition-colors",onClick:()=>{e("png",O),R(!1)},children:"Export PNG"})]})]}),w.jsx("button",{className:$,onClick:()=>e("tikz"),title:"Export TikZ",children:w.jsx("span",{className:"font-mono font-bold text-xs",children:"TeX"})}),w.jsx("button",{className:$,onClick:t,title:"Share Link",children:w.jsx(q2,{size:18})}),E,w.jsx("div",{className:"px-3 py-1 font-medium text-sm text-gray-500 max-w-[150px] truncate select-none",title:o,children:o}),w.jsx(f7,{isOpen:p,onClose:()=>v(!1)}),w.jsx(nO,{isOpen:b,onClose:()=>y(!1)}),w.jsx(mO,{isOpen:k,onClose:()=>_(!1)})]})}function gO({tikzCode:e,onClose:t,isOpen:r}){const{addToast:a}=Vs();if(!r)return null;const s=()=>{navigator.clipboard.writeText(e),a("TikZ code copied to clipboard","success")};return Td.createPortal(w.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 animate-in fade-in duration-200",children:w.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-2xl w-3/4 max-w-2xl ring-1 ring-black/5 animate-in zoom-in-95 duration-200",children:[w.jsxs("div",{className:"flex justify-between items-center mb-4",children:[w.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Export to TikZ-CD"}),w.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:w.jsx(rl,{size:24})})]}),w.jsxs("div",{className:"relative mb-6",children:[w.jsx("textarea",{readOnly:!0,value:e||"",className:"w-full h-64 p-4 font-mono text-sm border border-gray-200 rounded-xl bg-gray-50 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500/50 resize-none"}),w.jsx("div",{className:"absolute top-2 right-2",children:w.jsxs(ma,{size:"sm",variant:"secondary",onClick:s,title:"Copy",children:[w.jsx(n1,{size:14,className:"mr-1.5"})," Copy"]})})]}),w.jsxs("div",{className:"flex justify-end gap-2",children:[w.jsx(ma,{variant:"ghost",onClick:t,children:"Close"}),w.jsx(ma,{onClick:s,children:"Copy to Clipboard"})]})]})}),document.body)}function r3(e,t){return(e%t+t)%t}const bc=40;function a3(e){const t=(e||"").replace(/^\$|\$$/g,"").trim();return t?t.includes("\\\\")?`\\begin{array}{c} ${t} \\end{array}`:`{${t}}`:""}function ym(e){const t=e.replace("#",""),r=parseInt(t.substring(0,2),16),a=parseInt(t.substring(2,4),16),s=parseInt(t.substring(4,6),16);return`{rgb,255:red,${r};green,${a};blue,${s}}`}function vO(e){try{const t=JSON.parse(e);if(!t.nodes||t.nodes.length===0)return"";const r=.75,a=.4,s=1.3;let o=1/0,u=-1/0,c=1/0,f=-1/0;const h=new Map,p=new Map;t.nodes.forEach(_=>{const T=Math.round(_.left/bc),R=Math.round(_.top/bc);o=Math.min(o,T),u=Math.max(u,T),c=Math.min(c,R),f=Math.max(f,R),h.set(_.name,{r:R,c:T,label:_.label||"",color:_.color})}),t.arrows&&t.arrows.forEach((_,T)=>{const R=`${T}`;_.name&&p.set(_.name,R)});const v=f-c+1,b=u-o+1,y=Array(v).fill(null).map(()=>Array(b).fill(""));h.forEach((_,T)=>{const R=_.r-c,O=_.c-o;let M=a3(_.label);_.color&&_.color!=="#000000"&&(M=`\\textcolor${ym(_.color)}{${M}}`),y[R][O]=M,h.set(T,{r:R+1,c:O+1,label:_.label})});const k=[];k.push("\\[\\begin{tikzcd}");for(let _=0;_<v;_++){const T=y[_].join(" & ");k.push(`	${T}${_<v-1?" \\\\":""}`)}return t.arrows&&t.arrows.forEach((_,T)=>{var Q,G,X,K,ae,q,F,J,Ae,De,L,ne;const R=h.get(_.from),O=h.get(_.to),M=R?null:p.get(_.from),j=O?null:p.get(_.to);if(!R&&!M||!O&&!j)return;const I=[],$=[],E=`${T}`;if($.push(`""{name=${E}, anchor=center, inner sep=0}`),_.label){const ee=(_.label||"").replace(/^$|"$/g,"");let re=`"${a3(ee)}"`;const we=[];_.label_alignment==="left"&&(re+="'"),_.label_color&&_.label_color!=="#000000"&&we.push(`text=${ym(_.label_color)}`),_.label_alignment==="over"&&we.push("description"),we.length>0&&(re+=`{${we.join(", ")}}`),$.push(re)}_.color&&_.color!=="#000000"&&I.push(`draw=${ym(_.color)}`);const D=_.style||{};((Q=D.head)==null?void 0:Q.name)==="epi"&&I.push("two heads"),((G=D.head)==null?void 0:G.name)==="none"&&I.push("no head"),((X=D.head)==null?void 0:X.name)==="maps_to"&&I.push("maps to"),((K=D.head)==null?void 0:K.name)==="harpoon"&&I.push((D.head.side==="bottom","harpoon")),((ae=D.head)==null?void 0:ae.name)==="hook"&&I.push((D.head.side==="bottom","hook")),((q=D.tail)==null?void 0:q.name)==="mono"&&I.push("tail"),((F=D.tail)==null?void 0:F.name)==="maps_to"&&I.push("maps to"),((J=D.tail)==null?void 0:J.name)==="hook"&&I.push((D.tail.side==="bottom","hook")),((Ae=D.body)==null?void 0:Ae.name)==="dashed"&&I.push("dashed"),((De=D.body)==null?void 0:De.name)==="dotted"&&I.push("dotted"),((L=D.body)==null?void 0:L.name)==="squiggly"&&I.push("squiggly"),((ne=D.body)==null?void 0:ne.name)==="barred"&&I.push("slashed"),D.level===2?I.push("Rightarrow"):D.level===3&&I.push("Rrightarrow"),R?I.push(`from=${R.r}-${R.c}`):I.push(`from=${M}`),O?I.push(`to=${O.r}-${O.c}`):I.push(`to=${j}`);let V=!1;if(R&&O&&R.r===O.r&&R.c===O.c){V=!0,I.push("loop");const re=(_.radius??40)/10,we=_.angle??-90,Ee=re>=0?1:-1,ue=180-90*Ee-we,Ce=35,H=r3(ue-Ce*Ee,360),oe=r3(ue+Ce*Ee,360);I.push(`in=${Math.round(H)}`),I.push(`out=${Math.round(oe)}`),I.push(`distance=${Math.abs(re)*3}mm`)}else{if(_.curve){const ee=_.curve*s;let re=ee;if(R&&O){const we=(O.r-R.r)*bc,Ee=(O.c-R.c)*bc,ue=Math.sqrt(we*we+Ee*Ee);ue>0&&(re=2*Math.atan(2*ee/ue)*(180/Math.PI))}I.push(`bend left=${Math.round(re)}`)}_.shift&&I.push(`shift left=${_.shift/20}em`)}if(_.shorten){let ee=_.shorten.source||0,re=_.shorten.target||0;ee*=r,re*=r,V&&(ee*=a,re*=a);const we=20;V&&(ee=Math.min(ee,we),re=Math.min(re,we)),ee>0&&I.push(`shorten <=${Math.round(ee)}pt`),re>0&&I.push(`shorten >=${Math.round(re)}pt`)}const de=[...I,...$];k.push(`	\\arrow[${de.join(", ")}]`)}),k.push("\\end{tikzcd}\\]"),k.join(`
`)}catch(t){return`% Failed to export to TikZ-CD: ${t.message}`}}var bm={},n3;function yO(){return n3||(n3=1,function(e){(function(){var t=e||!1||this||window;t.default=t;var r="http://www.w3.org/2000/xmlns/",a="http://www.w3.org/1999/xhtml",s="http://www.w3.org/2000/svg",o='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>',u=/url\(["']?(.+?)["']?\)/,c={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},f=function(G){return G instanceof HTMLElement||G instanceof SVGElement},h=function(G){if(!f(G))throw new Error("an HTMLElement or SVGElement is required; got "+G)},p=function(G){return new Promise(function(X,K){f(G)?X(G):K(new Error("an HTMLElement or SVGElement is required; got "+G))})},v=function(G){return G&&G.lastIndexOf("http",0)===0&&G.lastIndexOf(window.location.host)===-1},b=function(G){var X=Object.keys(c).filter(function(K){return G.indexOf("."+K)>0}).map(function(K){return c[K]});return X?X[0]:(console.error("Unknown font format for "+G+". Fonts may not be working correctly."),"application/octet-stream")},y=function(G){for(var X="",K=new Uint8Array(G),ae=0;ae<K.byteLength;ae++)X+=String.fromCharCode(K[ae]);return window.btoa(X)},k=function(G,X,K){var ae=G.viewBox&&G.viewBox.baseVal&&G.viewBox.baseVal[K]||X.getAttribute(K)!==null&&!X.getAttribute(K).match(/%$/)&&parseInt(X.getAttribute(K))||G.getBoundingClientRect()[K]||parseInt(X.style[K])||parseInt(window.getComputedStyle(G).getPropertyValue(K));return typeof ae>"u"||ae===null||isNaN(parseFloat(ae))?0:ae},_=function(G,X,K,ae){if(G.tagName==="svg")return{width:K||k(G,X,"width"),height:ae||k(G,X,"height")};if(G.getBBox){var q=G.getBBox(),F=q.x,J=q.y,Ae=q.width,De=q.height;return{width:F+Ae,height:J+De}}},T=function(G){return decodeURIComponent(encodeURIComponent(G).replace(/%([0-9A-F]{2})/g,function(X,K){var ae=String.fromCharCode("0x"+K);return ae==="%"?"%25":ae}))},R=function(G){for(var X=window.atob(G.split(",")[1]),K=G.split(",")[0].split(":")[1].split(";")[0],ae=new ArrayBuffer(X.length),q=new Uint8Array(ae),F=0;F<X.length;F++)q[F]=X.charCodeAt(F);return new Blob([ae],{type:K})},O=function(G,X){if(X)try{return G.querySelector(X)||G.parentNode&&G.parentNode.querySelector(X)}catch(K){console.warn('Invalid CSS selector "'+X+'"',K)}},M=function(G,X){var K=G.cssText.match(u),ae=K&&K[1]||"";if(!(!ae||ae.match(/^data:/)||ae==="about:blank")){var q=ae.startsWith("../")?X+"/../"+ae:ae.startsWith("./")?X+"/."+ae:ae;return{text:G.cssText,format:b(q),url:q}}},j=function(G){return Promise.all(Array.from(G.querySelectorAll("image")).map(function(X){var K=X.getAttributeNS("http://www.w3.org/1999/xlink","href")||X.getAttribute("href");return K?(v(K)&&(K+=(K.indexOf("?")===-1?"?":"&")+"t="+new Date().valueOf()),new Promise(function(ae,q){var F=document.createElement("canvas"),J=new Image;J.crossOrigin="anonymous",J.src=K,J.onerror=function(){return q(new Error("Could not load "+K))},J.onload=function(){F.width=J.width,F.height=J.height,F.getContext("2d").drawImage(J,0,0),X.setAttributeNS("http://www.w3.org/1999/xlink","href",F.toDataURL("image/png")),ae(!0)}})):Promise.resolve(null)}))},I={},$=function(G){return Promise.all(G.map(function(X){return new Promise(function(K,ae){if(I[X.url])return K(I[X.url]);var q=new XMLHttpRequest;q.addEventListener("load",function(){var F=y(q.response),J=X.text.replace(u,'url("data:'+X.format+";base64,"+F+'")')+`
`;I[X.url]=J,K(J)}),q.addEventListener("error",function(F){console.warn("Failed to load font from: "+X.url,F),I[X.url]=null,K(null)}),q.addEventListener("abort",function(F){console.warn("Aborted loading font from: "+X.url,F),K(null)}),q.open("GET",X.url),q.responseType="arraybuffer",q.send()})})).then(function(X){return X.filter(function(K){return K}).join("")})},E=null,D=function(){return E||(E=Array.from(document.styleSheets).map(function(G){try{return{rules:G.cssRules,href:G.href}}catch(X){return console.warn("Stylesheet could not be loaded: "+G.href,X),{}}}))},V=function(G,X){var K=X||{},ae=K.selectorRemap,q=K.modifyStyle,F=K.modifyCss,J=K.fonts,Ae=K.excludeUnusedCss,De=F||function(re,we){var Ee=ae?ae(re):re,ue=q?q(we):we;return Ee+"{"+ue+`}
`},L=[],ne=typeof J>"u",ee=J||[];return D().forEach(function(re){var we=re.rules,Ee=re.href;we&&Array.from(we).forEach(function(ue){if(typeof ue.style<"u")if(O(G,ue.selectorText))L.push(De(ue.selectorText,ue.style.cssText));else if(ne&&ue.cssText.match(/^@font-face/)){var Ce=M(ue,Ee);Ce&&ee.push(Ce)}else Ae||L.push(ue.cssText)})}),$(ee).then(function(re){return L.join(`
`)+re})},de=function(){if(!navigator.msSaveOrOpenBlob&&!("download"in document.createElement("a")))return{popup:window.open()}};t.prepareSvg=function(Q,G,X){h(Q);var K=G||{},ae=K.left,q=ae===void 0?0:ae,F=K.top,J=F===void 0?0:F,Ae=K.width,De=K.height,L=K.scale,ne=L===void 0?1:L,ee=K.responsive,re=ee===void 0?!1:ee,we=K.excludeCss,Ee=we===void 0?!1:we;return j(Q).then(function(){var ue=Q.cloneNode(!0);ue.style.backgroundColor=(G||{}).backgroundColor||Q.style.backgroundColor;var Ce=_(Q,ue,Ae,De),H=Ce.width,oe=Ce.height;if(Q.tagName!=="svg")if(Q.getBBox){ue.getAttribute("transform")!=null&&ue.setAttribute("transform",ue.getAttribute("transform").replace(/translate\(.*?\)/,""));var ge=document.createElementNS("http://www.w3.org/2000/svg","svg");ge.appendChild(ue),ue=ge}else{console.error("Attempted to render non-SVG element",Q);return}if(ue.setAttribute("version","1.1"),ue.setAttribute("viewBox",[q,J,H,oe].join(" ")),ue.getAttribute("xmlns")||ue.setAttributeNS(r,"xmlns",s),ue.getAttribute("xmlns:xlink")||ue.setAttributeNS(r,"xmlns:xlink","http://www.w3.org/1999/xlink"),re?(ue.removeAttribute("width"),ue.removeAttribute("height"),ue.setAttribute("preserveAspectRatio","xMinYMin meet")):(ue.setAttribute("width",H*ne),ue.setAttribute("height",oe*ne)),Array.from(ue.querySelectorAll("foreignObject > *")).forEach(function(je){je.setAttributeNS(r,"xmlns",je.tagName==="svg"?s:a)}),Ee){var Me=document.createElement("div");Me.appendChild(ue);var _e=Me.innerHTML;if(typeof X=="function")X(_e,H,oe);else return{src:_e,width:H,height:oe}}else return V(Q,G).then(function(je){var Ye=document.createElement("style");Ye.setAttribute("type","text/css"),Ye.innerHTML=`<![CDATA[
`+je+`
]]>`;var qe=document.createElement("defs");qe.appendChild(Ye),ue.insertBefore(qe,ue.firstChild);var ct=document.createElement("div");ct.appendChild(ue);var nt=ct.innerHTML.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href');if(typeof X=="function")X(nt,H,oe);else return{src:nt,width:H,height:oe}})})},t.svgAsDataUri=function(Q,G,X){return h(Q),t.prepareSvg(Q,G).then(function(K){var ae=K.src,q=K.width,F=K.height,J="data:image/svg+xml;base64,"+window.btoa(T(o+ae));return typeof X=="function"&&X(J,q,F),J})},t.svgAsPngUri=function(Q,G,X){h(Q);var K=G||{},ae=K.encoderType,q=ae===void 0?"image/png":ae,F=K.encoderOptions,J=F===void 0?.8:F,Ae=K.canvg,De=function(ne){var ee=ne.src,re=ne.width,we=ne.height,Ee=document.createElement("canvas"),ue=Ee.getContext("2d"),Ce=window.devicePixelRatio||1;Ee.width=re*Ce,Ee.height=we*Ce,Ee.style.width=Ee.width+"px",Ee.style.height=Ee.height+"px",ue.setTransform(Ce,0,0,Ce,0,0),Ae?Ae(Ee,ee):ue.drawImage(ee,0,0);var H=void 0;try{H=Ee.toDataURL(q,J)}catch(oe){if(typeof SecurityError<"u"&&oe instanceof SecurityError||oe.name==="SecurityError"){console.error("Rendered SVG images cannot be downloaded in this browser.");return}else throw oe}return typeof X=="function"&&X(H,Ee.width,Ee.height),Promise.resolve(H)};return Ae?t.prepareSvg(Q,G).then(De):t.svgAsDataUri(Q,G).then(function(L){return new Promise(function(ne,ee){var re=new Image;re.onload=function(){return ne(De({src:re,width:re.width,height:re.height}))},re.onerror=function(){ee(`There was an error loading the data URI as an image on the following SVG
`+window.atob(L.slice(26))+`Open the following link to see browser's diagnosis
`+L)},re.src=L})})},t.download=function(Q,G,X){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(R(G),Q);else{var K=document.createElement("a");if("download"in K){K.download=Q,K.style.display="none",document.body.appendChild(K);try{var ae=R(G),q=URL.createObjectURL(ae);K.href=q,K.onclick=function(){return requestAnimationFrame(function(){return URL.revokeObjectURL(q)})}}catch(F){console.error(F),console.warn("Error while getting object URL. Falling back to string URL."),K.href=G}K.click(),document.body.removeChild(K)}else X&&X.popup&&(X.popup.document.title=Q,X.popup.location.replace(G))}},t.saveSvg=function(Q,G,X){var K=de();return p(Q).then(function(ae){return t.svgAsDataUri(ae,X||{})}).then(function(ae){return t.download(G,ae,K)})},t.saveSvgAsPng=function(Q,G,X){var K=de();return p(Q).then(function(ae){return t.svgAsPngUri(ae,X||{})}).then(function(ae){return t.download(G,ae,K)})}})()}(bm)),bm}var bO=yO(),Mc={exports:{}},xO=Mc.exports,i3;function wO(){return i3||(i3=1,function(e,t){(function(r,a){a()})(xO,function(){function r(h,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function a(h,p,v){var b=new XMLHttpRequest;b.open("GET",h),b.responseType="blob",b.onload=function(){f(b.response,p,v)},b.onerror=function(){console.error("could not download file")},b.send()}function s(h){var p=new XMLHttpRequest;p.open("HEAD",h,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function o(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(p)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof rc=="object"&&rc.global===rc?rc:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(h,p,v){var b=u.URL||u.webkitURL,y=document.createElement("a");p=p||h.name||"download",y.download=p,y.rel="noopener",typeof h=="string"?(y.href=h,y.origin===location.origin?o(y):s(y.href)?a(h,p,v):o(y,y.target="_blank")):(y.href=b.createObjectURL(h),setTimeout(function(){b.revokeObjectURL(y.href)},4e4),setTimeout(function(){o(y)},0))}:"msSaveOrOpenBlob"in navigator?function(h,p,v){if(p=p||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,v),p);else if(s(h))a(h,p,v);else{var b=document.createElement("a");b.href=h,b.target="_blank",setTimeout(function(){o(b)})}}:function(h,p,v,b){if(b=b||open("","_blank"),b&&(b.document.title=b.document.body.innerText="downloading..."),typeof h=="string")return a(h,p,v);var y=h.type==="application/octet-stream",k=/constructor/i.test(u.HTMLElement)||u.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||y&&k||c)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var M=T.result;M=_?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=M:location=M,b=null},T.readAsDataURL(h)}else{var R=u.URL||u.webkitURL,O=R.createObjectURL(h);b?b.location=O:location.href=O,b=null,setTimeout(function(){R.revokeObjectURL(O)},4e4)}});u.saveAs=f.saveAs=f,e.exports=f})}(Mc)),Mc.exports}var SO=wO(),p7="vercel.ai.error",_O=Symbol.for(p7),s3,o3,Qe=class g7 extends(o3=Error,s3=_O,o3){constructor({name:t,message:r,cause:a}){super(r),this[s3]=!0,this.name=t,this.cause=a}static isInstance(t){return g7.hasMarker(t,p7)}static hasMarker(t,r){const a=Symbol.for(r);return t!=null&&typeof t=="object"&&a in t&&typeof t[a]=="boolean"&&t[a]===!0}},v7="AI_APICallError",y7=`vercel.ai.error.${v7}`,zO=Symbol.for(y7),l3,u3,Xr=class extends(u3=Qe,l3=zO,u3){constructor({message:e,url:t,requestBodyValues:r,statusCode:a,responseHeaders:s,responseBody:o,cause:u,isRetryable:c=a!=null&&(a===408||a===409||a===429||a>=500),data:f}){super({name:v7,message:e,cause:u}),this[l3]=!0,this.url=t,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=s,this.responseBody=o,this.isRetryable=c,this.data=f}static isInstance(e){return Qe.hasMarker(e,y7)}},b7="AI_EmptyResponseBodyError",x7=`vercel.ai.error.${b7}`,kO=Symbol.for(x7),c3,d3,TO=class extends(d3=Qe,c3=kO,d3){constructor({message:e="Empty response body"}={}){super({name:b7,message:e}),this[c3]=!0}static isInstance(e){return Qe.hasMarker(e,x7)}};function Ls(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var w7="AI_InvalidArgumentError",S7=`vercel.ai.error.${w7}`,AO=Symbol.for(S7),f3,h3,_7=class extends(h3=Qe,f3=AO,h3){constructor({message:t,cause:r,argument:a}){super({name:w7,message:t,cause:r}),this[f3]=!0,this.argument=a}static isInstance(t){return Qe.hasMarker(t,S7)}},z7="AI_InvalidPromptError",k7=`vercel.ai.error.${z7}`,EO=Symbol.for(k7),m3,p3,Do=class extends(p3=Qe,m3=EO,p3){constructor({prompt:e,message:t,cause:r}){super({name:z7,message:`Invalid prompt: ${t}`,cause:r}),this[m3]=!0,this.prompt=e}static isInstance(e){return Qe.hasMarker(e,k7)}},T7="AI_JSONParseError",A7=`vercel.ai.error.${T7}`,MO=Symbol.for(A7),g3,v3,Kc=class extends(v3=Qe,g3=MO,v3){constructor({text:e,cause:t}){super({name:T7,message:`JSON parsing failed: Text: ${e}.
Error message: ${Ls(t)}`,cause:t}),this[g3]=!0,this.text=e}static isInstance(e){return Qe.hasMarker(e,A7)}},E7="AI_LoadAPIKeyError",M7=`vercel.ai.error.${E7}`,NO=Symbol.for(M7),y3,b3,xc=class extends(b3=Qe,y3=NO,b3){constructor({message:e}){super({name:E7,message:e}),this[y3]=!0}static isInstance(e){return Qe.hasMarker(e,M7)}},N7="AI_TooManyEmbeddingValuesForCallError",C7=`vercel.ai.error.${N7}`,CO=Symbol.for(C7),x3,w3,OO=class extends(w3=Qe,x3=CO,w3){constructor(e){super({name:N7,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[x3]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Qe.hasMarker(e,C7)}},O7="AI_TypeValidationError",R7=`vercel.ai.error.${O7}`,RO=Symbol.for(R7),S3,_3,Us=class cp extends(_3=Qe,S3=RO,_3){constructor({value:t,cause:r}){super({name:O7,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Ls(r)}`,cause:r}),this[S3]=!0,this.value=t}static isInstance(t){return Qe.hasMarker(t,R7)}static wrap({value:t,cause:r}){return cp.isInstance(r)&&r.value===t?r:new cp({value:t,cause:r})}},I7="AI_UnsupportedFunctionalityError",D7=`vercel.ai.error.${I7}`,IO=Symbol.for(D7),z3,k3,Jc=class extends(k3=Qe,z3=IO,k3){constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:I7,message:t}),this[z3]=!0,this.functionality=e}static isInstance(e){return Qe.hasMarker(e,D7)}};function he(e,t,r){function a(c,f){if(c._zod||Object.defineProperty(c,"_zod",{value:{def:f,constr:u,traits:new Set},enumerable:!1}),c._zod.traits.has(e))return;c._zod.traits.add(e),t(c,f);const h=u.prototype,p=Object.keys(h);for(let v=0;v<p.length;v++){const b=p[v];b in c||(c[b]=h[b].bind(c))}}const s=(r==null?void 0:r.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:e});function u(c){var f;const h=r!=null&&r.Parent?new o:this;a(h,c),(f=h._zod).deferred??(f.deferred=[]);for(const p of h._zod.deferred)p();return h}return Object.defineProperty(u,"init",{value:a}),Object.defineProperty(u,Symbol.hasInstance,{value:c=>{var f,h;return r!=null&&r.Parent&&c instanceof r.Parent?!0:(h=(f=c==null?void 0:c._zod)==null?void 0:f.traits)==null?void 0:h.has(e)}}),Object.defineProperty(u,"name",{value:e}),u}class Fo extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class j7 extends Error{constructor(t){super(`Encountered unidirectional transform during encode: ${t}`),this.name="ZodEncodeError"}}const $7={};function Qi(e){return $7}function B7(e){const t=Object.values(e).filter(a=>typeof a=="number");return Object.entries(e).filter(([a,s])=>t.indexOf(+a)===-1).map(([a,s])=>s)}function dp(e,t){return typeof t=="bigint"?t.toString():t}function Ed(e){return{get value(){{const t=e();return Object.defineProperty(this,"value",{value:t}),t}}}}function o1(e){return e==null}function l1(e){const t=e.startsWith("^")?1:0,r=e.endsWith("$")?e.length-1:e.length;return e.slice(t,r)}function DO(e,t){const r=(e.toString().split(".")[1]||"").length,a=t.toString();let s=(a.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(a)){const f=a.match(/\d?e-(\d?)/);f!=null&&f[1]&&(s=Number.parseInt(f[1]))}const o=r>s?r:s,u=Number.parseInt(e.toFixed(o).replace(".","")),c=Number.parseInt(t.toFixed(o).replace(".",""));return u%c/10**o}const T3=Symbol("evaluating");function wt(e,t,r){let a;Object.defineProperty(e,t,{get(){if(a!==T3)return a===void 0&&(a=T3,a=r()),a},set(s){Object.defineProperty(e,t,{value:s})},configurable:!0})}function Fs(e,t,r){Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0})}function ss(...e){const t={};for(const r of e){const a=Object.getOwnPropertyDescriptors(r);Object.assign(t,a)}return Object.defineProperties({},t)}function A3(e){return JSON.stringify(e)}function jO(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const L7="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function _u(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const $O=Ed(()=>{var e;if(typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)!=null&&e.includes("Cloudflare")))return!1;try{const t=Function;return new t(""),!0}catch{return!1}});function Ko(e){if(_u(e)===!1)return!1;const t=e.constructor;if(t===void 0||typeof t!="function")return!0;const r=t.prototype;return!(_u(r)===!1||Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")===!1)}function U7(e){return Ko(e)?{...e}:Array.isArray(e)?[...e]:e}const BO=new Set(["string","number","symbol"]);function Jo(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function os(e,t,r){const a=new e._zod.constr(t??e._zod.def);return(!t||r!=null&&r.parent)&&(a._zod.parent=e),a}function He(e){const t=e;if(!t)return{};if(typeof t=="string")return{error:()=>t};if((t==null?void 0:t.message)!==void 0){if((t==null?void 0:t.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");t.error=t.message}return delete t.message,typeof t.error=="string"?{...t,error:()=>t.error}:t}function LO(e){return Object.keys(e).filter(t=>e[t]._zod.optin==="optional"&&e[t]._zod.optout==="optional")}const UO={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function qO(e,t){const r=e._zod.def,a=r.checks;if(a&&a.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const o=ss(e._zod.def,{get shape(){const u={};for(const c in t){if(!(c in r.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&(u[c]=r.shape[c])}return Fs(this,"shape",u),u},checks:[]});return os(e,o)}function PO(e,t){const r=e._zod.def,a=r.checks;if(a&&a.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const o=ss(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const c in t){if(!(c in r.shape))throw new Error(`Unrecognized key: "${c}"`);t[c]&&delete u[c]}return Fs(this,"shape",u),u},checks:[]});return os(e,o)}function HO(e,t){if(!Ko(t))throw new Error("Invalid input to extend: expected a plain object");const r=e._zod.def.checks;if(r&&r.length>0){const o=e._zod.def.shape;for(const u in t)if(Object.getOwnPropertyDescriptor(o,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const s=ss(e._zod.def,{get shape(){const o={...e._zod.def.shape,...t};return Fs(this,"shape",o),o}});return os(e,s)}function ZO(e,t){if(!Ko(t))throw new Error("Invalid input to safeExtend: expected a plain object");const r=ss(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t};return Fs(this,"shape",a),a}});return os(e,r)}function GO(e,t){const r=ss(e._zod.def,{get shape(){const a={...e._zod.def.shape,...t._zod.def.shape};return Fs(this,"shape",a),a},get catchall(){return t._zod.def.catchall},checks:[]});return os(e,r)}function VO(e,t,r){const s=t._zod.def.checks;if(s&&s.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=ss(t._zod.def,{get shape(){const c=t._zod.def.shape,f={...c};if(r)for(const h in r){if(!(h in c))throw new Error(`Unrecognized key: "${h}"`);r[h]&&(f[h]=e?new e({type:"optional",innerType:c[h]}):c[h])}else for(const h in c)f[h]=e?new e({type:"optional",innerType:c[h]}):c[h];return Fs(this,"shape",f),f},checks:[]});return os(t,u)}function FO(e,t,r){const a=ss(t._zod.def,{get shape(){const s=t._zod.def.shape,o={...s};if(r)for(const u in r){if(!(u in o))throw new Error(`Unrecognized key: "${u}"`);r[u]&&(o[u]=new e({type:"nonoptional",innerType:s[u]}))}else for(const u in s)o[u]=new e({type:"nonoptional",innerType:s[u]});return Fs(this,"shape",o),o}});return os(t,a)}function Po(e,t=0){var r;if(e.aborted===!0)return!0;for(let a=t;a<e.issues.length;a++)if(((r=e.issues[a])==null?void 0:r.continue)!==!0)return!0;return!1}function Ho(e,t){return t.map(r=>{var a;return(a=r).path??(a.path=[]),r.path.unshift(e),r})}function wc(e){return typeof e=="string"?e:e==null?void 0:e.message}function es(e,t,r){var s,o,u,c,f,h;const a={...e,path:e.path??[]};if(!e.message){const p=wc((u=(o=(s=e.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:u.call(o,e))??wc((c=t==null?void 0:t.error)==null?void 0:c.call(t,e))??wc((f=r.customError)==null?void 0:f.call(r,e))??wc((h=r.localeError)==null?void 0:h.call(r,e))??"Invalid input";a.message=p}return delete a.inst,delete a.continue,t!=null&&t.reportInput||delete a.input,a}function u1(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function zu(...e){const[t,r,a]=e;return typeof t=="string"?{message:t,code:"custom",input:r,inst:a}:{...t}}const q7=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),e.message=JSON.stringify(t,dp,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},P7=he("$ZodError",q7),H7=he("$ZodError",q7,{Parent:Error});function YO(e,t=r=>r.message){const r={},a=[];for(const s of e.issues)s.path.length>0?(r[s.path[0]]=r[s.path[0]]||[],r[s.path[0]].push(t(s))):a.push(t(s));return{formErrors:a,fieldErrors:r}}function XO(e,t=r=>r.message){const r={_errors:[]},a=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(u=>a({issues:u}));else if(o.code==="invalid_key")a({issues:o.issues});else if(o.code==="invalid_element")a({issues:o.issues});else if(o.path.length===0)r._errors.push(t(o));else{let u=r,c=0;for(;c<o.path.length;){const f=o.path[c];c===o.path.length-1?(u[f]=u[f]||{_errors:[]},u[f]._errors.push(t(o))):u[f]=u[f]||{_errors:[]},u=u[f],c++}}};return a(e),r}const c1=e=>(t,r,a,s)=>{const o=a?Object.assign(a,{async:!1}):{async:!1},u=t._zod.run({value:r,issues:[]},o);if(u instanceof Promise)throw new Fo;if(u.issues.length){const c=new((s==null?void 0:s.Err)??e)(u.issues.map(f=>es(f,o,Qi())));throw L7(c,s==null?void 0:s.callee),c}return u.value},d1=e=>async(t,r,a,s)=>{const o=a?Object.assign(a,{async:!0}):{async:!0};let u=t._zod.run({value:r,issues:[]},o);if(u instanceof Promise&&(u=await u),u.issues.length){const c=new((s==null?void 0:s.Err)??e)(u.issues.map(f=>es(f,o,Qi())));throw L7(c,s==null?void 0:s.callee),c}return u.value},Md=e=>(t,r,a)=>{const s=a?{...a,async:!1}:{async:!1},o=t._zod.run({value:r,issues:[]},s);if(o instanceof Promise)throw new Fo;return o.issues.length?{success:!1,error:new(e??P7)(o.issues.map(u=>es(u,s,Qi())))}:{success:!0,data:o.value}},KO=Md(H7),Nd=e=>async(t,r,a)=>{const s=a?Object.assign(a,{async:!0}):{async:!0};let o=t._zod.run({value:r,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new e(o.issues.map(u=>es(u,s,Qi())))}:{success:!0,data:o.value}},JO=Nd(H7),WO=e=>(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return c1(e)(t,r,s)},QO=e=>(t,r,a)=>c1(e)(t,r,a),eR=e=>async(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return d1(e)(t,r,s)},tR=e=>async(t,r,a)=>d1(e)(t,r,a),rR=e=>(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return Md(e)(t,r,s)},aR=e=>(t,r,a)=>Md(e)(t,r,a),nR=e=>async(t,r,a)=>{const s=a?Object.assign(a,{direction:"backward"}):{direction:"backward"};return Nd(e)(t,r,s)},iR=e=>async(t,r,a)=>Nd(e)(t,r,a),sR=/^[cC][^\s-]{8,}$/,oR=/^[0-9a-z]+$/,lR=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,uR=/^[0-9a-vA-V]{20}$/,cR=/^[A-Za-z0-9]{27}$/,dR=/^[a-zA-Z0-9_-]{21}$/,fR=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,hR=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,E3=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,mR=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,pR="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function gR(){return new RegExp(pR,"u")}const vR=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,yR=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,bR=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,xR=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,wR=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Z7=/^[A-Za-z0-9_-]*$/,SR=/^\+[1-9]\d{6,14}$/,G7="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",_R=new RegExp(`^${G7}$`);function V7(e){const t="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${t}`:e.precision===0?`${t}:[0-5]\\d`:`${t}:[0-5]\\d\\.\\d{${e.precision}}`:`${t}(?::[0-5]\\d(?:\\.\\d+)?)?`}function zR(e){return new RegExp(`^${V7(e)}$`)}function kR(e){const t=V7({precision:e.precision}),r=["Z"];e.local&&r.push(""),e.offset&&r.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const a=`${t}(?:${r.join("|")})`;return new RegExp(`^${G7}T(?:${a})$`)}const TR=e=>{const t=e?`[\\s\\S]{${(e==null?void 0:e.minimum)??0},${(e==null?void 0:e.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${t}$`)},AR=/^-?\d+$/,F7=/^-?\d+(?:\.\d+)?$/,ER=/^(?:true|false)$/i,MR=/^null$/i,NR=/^[^A-Z]*$/,CR=/^[^a-z]*$/,va=he("$ZodCheck",(e,t)=>{var r;e._zod??(e._zod={}),e._zod.def=t,(r=e._zod).onattach??(r.onattach=[])}),Y7={number:"number",bigint:"bigint",object:"date"},X7=he("$ZodCheckLessThan",(e,t)=>{va.init(e,t);const r=Y7[typeof t.value];e._zod.onattach.push(a=>{const s=a._zod.bag,o=(t.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;t.value<o&&(t.inclusive?s.maximum=t.value:s.exclusiveMaximum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value<=t.value:a.value<t.value)||a.issues.push({origin:r,code:"too_big",maximum:typeof t.value=="object"?t.value.getTime():t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),K7=he("$ZodCheckGreaterThan",(e,t)=>{va.init(e,t);const r=Y7[typeof t.value];e._zod.onattach.push(a=>{const s=a._zod.bag,o=(t.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;t.value>o&&(t.inclusive?s.minimum=t.value:s.exclusiveMinimum=t.value)}),e._zod.check=a=>{(t.inclusive?a.value>=t.value:a.value>t.value)||a.issues.push({origin:r,code:"too_small",minimum:typeof t.value=="object"?t.value.getTime():t.value,input:a.value,inclusive:t.inclusive,inst:e,continue:!t.abort})}}),OR=he("$ZodCheckMultipleOf",(e,t)=>{va.init(e,t),e._zod.onattach.push(r=>{var a;(a=r._zod.bag).multipleOf??(a.multipleOf=t.value)}),e._zod.check=r=>{if(typeof r.value!=typeof t.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof r.value=="bigint"?r.value%t.value===BigInt(0):DO(r.value,t.value)===0)||r.issues.push({origin:typeof r.value,code:"not_multiple_of",divisor:t.value,input:r.value,inst:e,continue:!t.abort})}}),RR=he("$ZodCheckNumberFormat",(e,t)=>{var u;va.init(e,t),t.format=t.format||"float64";const r=(u=t.format)==null?void 0:u.includes("int"),a=r?"int":"number",[s,o]=UO[t.format];e._zod.onattach.push(c=>{const f=c._zod.bag;f.format=t.format,f.minimum=s,f.maximum=o,r&&(f.pattern=AR)}),e._zod.check=c=>{const f=c.value;if(r){if(!Number.isInteger(f)){c.issues.push({expected:a,format:t.format,code:"invalid_type",continue:!1,input:f,inst:e});return}if(!Number.isSafeInteger(f)){f>0?c.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,inclusive:!0,continue:!t.abort}):c.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:a,inclusive:!0,continue:!t.abort});return}}f<s&&c.issues.push({origin:"number",input:f,code:"too_small",minimum:s,inclusive:!0,inst:e,continue:!t.abort}),f>o&&c.issues.push({origin:"number",input:f,code:"too_big",maximum:o,inclusive:!0,inst:e,continue:!t.abort})}}),IR=he("$ZodCheckMaxLength",(e,t)=>{var r;va.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!o1(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag.maximum??Number.POSITIVE_INFINITY;t.maximum<s&&(a._zod.bag.maximum=t.maximum)}),e._zod.check=a=>{const s=a.value;if(s.length<=t.maximum)return;const u=u1(s);a.issues.push({origin:u,code:"too_big",maximum:t.maximum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),DR=he("$ZodCheckMinLength",(e,t)=>{var r;va.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!o1(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag.minimum??Number.NEGATIVE_INFINITY;t.minimum>s&&(a._zod.bag.minimum=t.minimum)}),e._zod.check=a=>{const s=a.value;if(s.length>=t.minimum)return;const u=u1(s);a.issues.push({origin:u,code:"too_small",minimum:t.minimum,inclusive:!0,input:s,inst:e,continue:!t.abort})}}),jR=he("$ZodCheckLengthEquals",(e,t)=>{var r;va.init(e,t),(r=e._zod.def).when??(r.when=a=>{const s=a.value;return!o1(s)&&s.length!==void 0}),e._zod.onattach.push(a=>{const s=a._zod.bag;s.minimum=t.length,s.maximum=t.length,s.length=t.length}),e._zod.check=a=>{const s=a.value,o=s.length;if(o===t.length)return;const u=u1(s),c=o>t.length;a.issues.push({origin:u,...c?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},inclusive:!0,exact:!0,input:a.value,inst:e,continue:!t.abort})}}),Cd=he("$ZodCheckStringFormat",(e,t)=>{var r,a;va.init(e,t),e._zod.onattach.push(s=>{const o=s._zod.bag;o.format=t.format,t.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(t.pattern))}),t.pattern?(r=e._zod).check??(r.check=s=>{t.pattern.lastIndex=0,!t.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:t.format,input:s.value,...t.pattern?{pattern:t.pattern.toString()}:{},inst:e,continue:!t.abort})}):(a=e._zod).check??(a.check=()=>{})}),$R=he("$ZodCheckRegex",(e,t)=>{Cd.init(e,t),e._zod.check=r=>{t.pattern.lastIndex=0,!t.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:"regex",input:r.value,pattern:t.pattern.toString(),inst:e,continue:!t.abort})}}),BR=he("$ZodCheckLowerCase",(e,t)=>{t.pattern??(t.pattern=NR),Cd.init(e,t)}),LR=he("$ZodCheckUpperCase",(e,t)=>{t.pattern??(t.pattern=CR),Cd.init(e,t)}),UR=he("$ZodCheckIncludes",(e,t)=>{va.init(e,t);const r=Jo(t.includes),a=new RegExp(typeof t.position=="number"?`^.{${t.position}}${r}`:r);t.pattern=a,e._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(a)}),e._zod.check=s=>{s.value.includes(t.includes,t.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:t.includes,input:s.value,inst:e,continue:!t.abort})}}),qR=he("$ZodCheckStartsWith",(e,t)=>{va.init(e,t);const r=new RegExp(`^${Jo(t.prefix)}.*`);t.pattern??(t.pattern=r),e._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.startsWith(t.prefix)||a.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:t.prefix,input:a.value,inst:e,continue:!t.abort})}}),PR=he("$ZodCheckEndsWith",(e,t)=>{va.init(e,t);const r=new RegExp(`.*${Jo(t.suffix)}$`);t.pattern??(t.pattern=r),e._zod.onattach.push(a=>{const s=a._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(r)}),e._zod.check=a=>{a.value.endsWith(t.suffix)||a.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:t.suffix,input:a.value,inst:e,continue:!t.abort})}}),HR=he("$ZodCheckOverwrite",(e,t)=>{va.init(e,t),e._zod.check=r=>{r.value=t.tx(r.value)}});class ZR{constructor(t=[]){this.content=[],this.indent=0,this&&(this.args=t)}indented(t){this.indent+=1,t(this),this.indent-=1}write(t){if(typeof t=="function"){t(this,{execution:"sync"}),t(this,{execution:"async"});return}const a=t.split(`
`).filter(u=>u),s=Math.min(...a.map(u=>u.length-u.trimStart().length)),o=a.map(u=>u.slice(s)).map(u=>" ".repeat(this.indent*2)+u);for(const u of o)this.content.push(u)}compile(){const t=Function,r=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new t(...r,s.join(`
`))}}const GR={major:4,minor:3,patch:5},Pt=he("$ZodType",(e,t)=>{var s;var r;e??(e={}),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=GR;const a=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&a.unshift(e);for(const o of a)for(const u of o._zod.onattach)u(e);if(a.length===0)(r=e._zod).deferred??(r.deferred=[]),(s=e._zod.deferred)==null||s.push(()=>{e._zod.run=e._zod.parse});else{const o=(c,f,h)=>{let p=Po(c),v;for(const b of f){if(b._zod.def.when){if(!b._zod.def.when(c))continue}else if(p)continue;const y=c.issues.length,k=b._zod.check(c);if(k instanceof Promise&&(h==null?void 0:h.async)===!1)throw new Fo;if(v||k instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await k,c.issues.length!==y&&(p||(p=Po(c,y)))});else{if(c.issues.length===y)continue;p||(p=Po(c,y))}}return v?v.then(()=>c):c},u=(c,f,h)=>{if(Po(c))return c.aborted=!0,c;const p=o(f,a,h);if(p instanceof Promise){if(h.async===!1)throw new Fo;return p.then(v=>e._zod.parse(v,h))}return e._zod.parse(p,h)};e._zod.run=(c,f)=>{if(f.skipChecks)return e._zod.parse(c,f);if(f.direction==="backward"){const p=e._zod.parse({value:c.value,issues:[]},{...f,skipChecks:!0});return p instanceof Promise?p.then(v=>u(v,c,f)):u(p,c,f)}const h=e._zod.parse(c,f);if(h instanceof Promise){if(f.async===!1)throw new Fo;return h.then(p=>o(p,a,f))}return o(h,a,f)}}wt(e,"~standard",()=>({validate:o=>{var u;try{const c=KO(e,o);return c.success?{value:c.data}:{issues:(u=c.error)==null?void 0:u.issues}}catch{return JO(e,o).then(f=>{var h;return f.success?{value:f.data}:{issues:(h=f.error)==null?void 0:h.issues}})}},vendor:"zod",version:1}))}),f1=he("$ZodString",(e,t)=>{var r;Pt.init(e,t),e._zod.pattern=[...((r=e==null?void 0:e._zod.bag)==null?void 0:r.patterns)??[]].pop()??TR(e._zod.bag),e._zod.parse=(a,s)=>{if(t.coerce)try{a.value=String(a.value)}catch{}return typeof a.value=="string"||a.issues.push({expected:"string",code:"invalid_type",input:a.value,inst:e}),a}}),ar=he("$ZodStringFormat",(e,t)=>{Cd.init(e,t),f1.init(e,t)}),VR=he("$ZodGUID",(e,t)=>{t.pattern??(t.pattern=hR),ar.init(e,t)}),FR=he("$ZodUUID",(e,t)=>{if(t.version){const a={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[t.version];if(a===void 0)throw new Error(`Invalid UUID version: "${t.version}"`);t.pattern??(t.pattern=E3(a))}else t.pattern??(t.pattern=E3());ar.init(e,t)}),YR=he("$ZodEmail",(e,t)=>{t.pattern??(t.pattern=mR),ar.init(e,t)}),XR=he("$ZodURL",(e,t)=>{ar.init(e,t),e._zod.check=r=>{try{const a=r.value.trim(),s=new URL(a);t.hostname&&(t.hostname.lastIndex=0,t.hostname.test(s.hostname)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:t.hostname.source,input:r.value,inst:e,continue:!t.abort})),t.protocol&&(t.protocol.lastIndex=0,t.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||r.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:t.protocol.source,input:r.value,inst:e,continue:!t.abort})),t.normalize?r.value=s.href:r.value=a;return}catch{r.issues.push({code:"invalid_format",format:"url",input:r.value,inst:e,continue:!t.abort})}}}),KR=he("$ZodEmoji",(e,t)=>{t.pattern??(t.pattern=gR()),ar.init(e,t)}),JR=he("$ZodNanoID",(e,t)=>{t.pattern??(t.pattern=dR),ar.init(e,t)}),WR=he("$ZodCUID",(e,t)=>{t.pattern??(t.pattern=sR),ar.init(e,t)}),QR=he("$ZodCUID2",(e,t)=>{t.pattern??(t.pattern=oR),ar.init(e,t)}),eI=he("$ZodULID",(e,t)=>{t.pattern??(t.pattern=lR),ar.init(e,t)}),tI=he("$ZodXID",(e,t)=>{t.pattern??(t.pattern=uR),ar.init(e,t)}),rI=he("$ZodKSUID",(e,t)=>{t.pattern??(t.pattern=cR),ar.init(e,t)}),aI=he("$ZodISODateTime",(e,t)=>{t.pattern??(t.pattern=kR(t)),ar.init(e,t)}),nI=he("$ZodISODate",(e,t)=>{t.pattern??(t.pattern=_R),ar.init(e,t)}),iI=he("$ZodISOTime",(e,t)=>{t.pattern??(t.pattern=zR(t)),ar.init(e,t)}),sI=he("$ZodISODuration",(e,t)=>{t.pattern??(t.pattern=fR),ar.init(e,t)}),oI=he("$ZodIPv4",(e,t)=>{t.pattern??(t.pattern=vR),ar.init(e,t),e._zod.bag.format="ipv4"}),lI=he("$ZodIPv6",(e,t)=>{t.pattern??(t.pattern=yR),ar.init(e,t),e._zod.bag.format="ipv6",e._zod.check=r=>{try{new URL(`http://[${r.value}]`)}catch{r.issues.push({code:"invalid_format",format:"ipv6",input:r.value,inst:e,continue:!t.abort})}}}),uI=he("$ZodCIDRv4",(e,t)=>{t.pattern??(t.pattern=bR),ar.init(e,t)}),cI=he("$ZodCIDRv6",(e,t)=>{t.pattern??(t.pattern=xR),ar.init(e,t),e._zod.check=r=>{const a=r.value.split("/");try{if(a.length!==2)throw new Error;const[s,o]=a;if(!o)throw new Error;const u=Number(o);if(`${u}`!==o)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${s}]`)}catch{r.issues.push({code:"invalid_format",format:"cidrv6",input:r.value,inst:e,continue:!t.abort})}}});function J7(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const dI=he("$ZodBase64",(e,t)=>{t.pattern??(t.pattern=wR),ar.init(e,t),e._zod.bag.contentEncoding="base64",e._zod.check=r=>{J7(r.value)||r.issues.push({code:"invalid_format",format:"base64",input:r.value,inst:e,continue:!t.abort})}});function fI(e){if(!Z7.test(e))return!1;const t=e.replace(/[-_]/g,a=>a==="-"?"+":"/"),r=t.padEnd(Math.ceil(t.length/4)*4,"=");return J7(r)}const hI=he("$ZodBase64URL",(e,t)=>{t.pattern??(t.pattern=Z7),ar.init(e,t),e._zod.bag.contentEncoding="base64url",e._zod.check=r=>{fI(r.value)||r.issues.push({code:"invalid_format",format:"base64url",input:r.value,inst:e,continue:!t.abort})}}),mI=he("$ZodE164",(e,t)=>{t.pattern??(t.pattern=SR),ar.init(e,t)});function pI(e,t=null){try{const r=e.split(".");if(r.length!==3)return!1;const[a]=r;if(!a)return!1;const s=JSON.parse(atob(a));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||t&&(!("alg"in s)||s.alg!==t))}catch{return!1}}const gI=he("$ZodJWT",(e,t)=>{ar.init(e,t),e._zod.check=r=>{pI(r.value,t.alg)||r.issues.push({code:"invalid_format",format:"jwt",input:r.value,inst:e,continue:!t.abort})}}),W7=he("$ZodNumber",(e,t)=>{Pt.init(e,t),e._zod.pattern=e._zod.bag.pattern??F7,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=Number(r.value)}catch{}const s=r.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return r;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return r.issues.push({expected:"number",code:"invalid_type",input:s,inst:e,...o?{received:o}:{}}),r}}),vI=he("$ZodNumberFormat",(e,t)=>{RR.init(e,t),W7.init(e,t)}),yI=he("$ZodBoolean",(e,t)=>{Pt.init(e,t),e._zod.pattern=ER,e._zod.parse=(r,a)=>{if(t.coerce)try{r.value=!!r.value}catch{}const s=r.value;return typeof s=="boolean"||r.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:e}),r}}),bI=he("$ZodNull",(e,t)=>{Pt.init(e,t),e._zod.pattern=MR,e._zod.values=new Set([null]),e._zod.parse=(r,a)=>{const s=r.value;return s===null||r.issues.push({expected:"null",code:"invalid_type",input:s,inst:e}),r}}),xI=he("$ZodAny",(e,t)=>{Pt.init(e,t),e._zod.parse=r=>r}),wI=he("$ZodUnknown",(e,t)=>{Pt.init(e,t),e._zod.parse=r=>r}),SI=he("$ZodNever",(e,t)=>{Pt.init(e,t),e._zod.parse=(r,a)=>(r.issues.push({expected:"never",code:"invalid_type",input:r.value,inst:e}),r)});function M3(e,t,r){e.issues.length&&t.issues.push(...Ho(r,e.issues)),t.value[r]=e.value}const _I=he("$ZodArray",(e,t)=>{Pt.init(e,t),e._zod.parse=(r,a)=>{const s=r.value;if(!Array.isArray(s))return r.issues.push({expected:"array",code:"invalid_type",input:s,inst:e}),r;r.value=Array(s.length);const o=[];for(let u=0;u<s.length;u++){const c=s[u],f=t.element._zod.run({value:c,issues:[]},a);f instanceof Promise?o.push(f.then(h=>M3(h,r,u))):M3(f,r,u)}return o.length?Promise.all(o).then(()=>r):r}});function Wc(e,t,r,a,s){if(e.issues.length){if(s&&!(r in a))return;t.issues.push(...Ho(r,e.issues))}e.value===void 0?r in a&&(t.value[r]=void 0):t.value[r]=e.value}function Q7(e){var a,s,o,u;const t=Object.keys(e.shape);for(const c of t)if(!((u=(o=(s=(a=e.shape)==null?void 0:a[c])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&u.has("$ZodType")))throw new Error(`Invalid element at key "${c}": expected a Zod schema`);const r=LO(e.shape);return{...e,keys:t,keySet:new Set(t),numKeys:t.length,optionalKeys:new Set(r)}}function e8(e,t,r,a,s,o){const u=[],c=s.keySet,f=s.catchall._zod,h=f.def.type,p=f.optout==="optional";for(const v in t){if(c.has(v))continue;if(h==="never"){u.push(v);continue}const b=f.run({value:t[v],issues:[]},a);b instanceof Promise?e.push(b.then(y=>Wc(y,r,v,t,p))):Wc(b,r,v,t,p)}return u.length&&r.issues.push({code:"unrecognized_keys",keys:u,input:t,inst:o}),e.length?Promise.all(e).then(()=>r):r}const zI=he("$ZodObject",(e,t)=>{Pt.init(e,t);const r=Object.getOwnPropertyDescriptor(t,"shape");if(!(r!=null&&r.get)){const c=t.shape;Object.defineProperty(t,"shape",{get:()=>{const f={...c};return Object.defineProperty(t,"shape",{value:f}),f}})}const a=Ed(()=>Q7(t));wt(e._zod,"propValues",()=>{const c=t.shape,f={};for(const h in c){const p=c[h]._zod;if(p.values){f[h]??(f[h]=new Set);for(const v of p.values)f[h].add(v)}}return f});const s=_u,o=t.catchall;let u;e._zod.parse=(c,f)=>{u??(u=a.value);const h=c.value;if(!s(h))return c.issues.push({expected:"object",code:"invalid_type",input:h,inst:e}),c;c.value={};const p=[],v=u.shape;for(const b of u.keys){const y=v[b],k=y._zod.optout==="optional",_=y._zod.run({value:h[b],issues:[]},f);_ instanceof Promise?p.push(_.then(T=>Wc(T,c,b,h,k))):Wc(_,c,b,h,k)}return o?e8(p,h,c,f,a.value,e):p.length?Promise.all(p).then(()=>c):c}}),kI=he("$ZodObjectJIT",(e,t)=>{zI.init(e,t);const r=e._zod.parse,a=Ed(()=>Q7(t)),s=b=>{var M;const y=new ZR(["shape","payload","ctx"]),k=a.value,_=j=>{const I=A3(j);return`shape[${I}]._zod.run({ value: input[${I}], issues: [] }, ctx)`};y.write("const input = payload.value;");const T=Object.create(null);let R=0;for(const j of k.keys)T[j]=`key_${R++}`;y.write("const newResult = {};");for(const j of k.keys){const I=T[j],$=A3(j),E=b[j],D=((M=E==null?void 0:E._zod)==null?void 0:M.optout)==="optional";y.write(`const ${I} = ${_(j)};`),D?y.write(`
        if (${I}.issues.length) {
          if (${$} in input) {
            payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${$}, ...iss.path] : [${$}]
            })));
          }
        }
        
        if (${I}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${I}.value;
        }
        
      `):y.write(`
        if (${I}.issues.length) {
          payload.issues = payload.issues.concat(${I}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${$}, ...iss.path] : [${$}]
          })));
        }
        
        if (${I}.value === undefined) {
          if (${$} in input) {
            newResult[${$}] = undefined;
          }
        } else {
          newResult[${$}] = ${I}.value;
        }
        
      `)}y.write("payload.value = newResult;"),y.write("return payload;");const O=y.compile();return(j,I)=>O(b,j,I)};let o;const u=_u,c=!$7.jitless,h=c&&$O.value,p=t.catchall;let v;e._zod.parse=(b,y)=>{v??(v=a.value);const k=b.value;return u(k)?c&&h&&(y==null?void 0:y.async)===!1&&y.jitless!==!0?(o||(o=s(t.shape)),b=o(b,y),p?e8([],k,b,y,v,e):b):r(b,y):(b.issues.push({expected:"object",code:"invalid_type",input:k,inst:e}),b)}});function N3(e,t,r,a){for(const o of e)if(o.issues.length===0)return t.value=o.value,t;const s=e.filter(o=>!Po(o));return s.length===1?(t.value=s[0].value,s[0]):(t.issues.push({code:"invalid_union",input:t.value,inst:r,errors:e.map(o=>o.issues.map(u=>es(u,a,Qi())))}),t)}const t8=he("$ZodUnion",(e,t)=>{Pt.init(e,t),wt(e._zod,"optin",()=>t.options.some(s=>s._zod.optin==="optional")?"optional":void 0),wt(e._zod,"optout",()=>t.options.some(s=>s._zod.optout==="optional")?"optional":void 0),wt(e._zod,"values",()=>{if(t.options.every(s=>s._zod.values))return new Set(t.options.flatMap(s=>Array.from(s._zod.values)))}),wt(e._zod,"pattern",()=>{if(t.options.every(s=>s._zod.pattern)){const s=t.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>l1(o.source)).join("|")})$`)}});const r=t.options.length===1,a=t.options[0]._zod.run;e._zod.parse=(s,o)=>{if(r)return a(s,o);let u=!1;const c=[];for(const f of t.options){const h=f._zod.run({value:s.value,issues:[]},o);if(h instanceof Promise)c.push(h),u=!0;else{if(h.issues.length===0)return h;c.push(h)}}return u?Promise.all(c).then(f=>N3(f,s,e,o)):N3(c,s,e,o)}}),TI=he("$ZodDiscriminatedUnion",(e,t)=>{t.inclusive=!1,t8.init(e,t);const r=e._zod.parse;wt(e._zod,"propValues",()=>{const s={};for(const o of t.options){const u=o._zod.propValues;if(!u||Object.keys(u).length===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(o)}"`);for(const[c,f]of Object.entries(u)){s[c]||(s[c]=new Set);for(const h of f)s[c].add(h)}}return s});const a=Ed(()=>{var u;const s=t.options,o=new Map;for(const c of s){const f=(u=c._zod.propValues)==null?void 0:u[t.discriminator];if(!f||f.size===0)throw new Error(`Invalid discriminated union option at index "${t.options.indexOf(c)}"`);for(const h of f){if(o.has(h))throw new Error(`Duplicate discriminator value "${String(h)}"`);o.set(h,c)}}return o});e._zod.parse=(s,o)=>{const u=s.value;if(!_u(u))return s.issues.push({code:"invalid_type",expected:"object",input:u,inst:e}),s;const c=a.value.get(u==null?void 0:u[t.discriminator]);return c?c._zod.run(s,o):t.unionFallback?r(s,o):(s.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:t.discriminator,input:u,path:[t.discriminator],inst:e}),s)}}),AI=he("$ZodIntersection",(e,t)=>{Pt.init(e,t),e._zod.parse=(r,a)=>{const s=r.value,o=t.left._zod.run({value:s,issues:[]},a),u=t.right._zod.run({value:s,issues:[]},a);return o instanceof Promise||u instanceof Promise?Promise.all([o,u]).then(([f,h])=>C3(r,f,h)):C3(r,o,u)}});function fp(e,t){if(e===t)return{valid:!0,data:e};if(e instanceof Date&&t instanceof Date&&+e==+t)return{valid:!0,data:e};if(Ko(e)&&Ko(t)){const r=Object.keys(t),a=Object.keys(e).filter(o=>r.indexOf(o)!==-1),s={...e,...t};for(const o of a){const u=fp(e[o],t[o]);if(!u.valid)return{valid:!1,mergeErrorPath:[o,...u.mergeErrorPath]};s[o]=u.data}return{valid:!0,data:s}}if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return{valid:!1,mergeErrorPath:[]};const r=[];for(let a=0;a<e.length;a++){const s=e[a],o=t[a],u=fp(s,o);if(!u.valid)return{valid:!1,mergeErrorPath:[a,...u.mergeErrorPath]};r.push(u.data)}return{valid:!0,data:r}}return{valid:!1,mergeErrorPath:[]}}function C3(e,t,r){const a=new Map;let s;for(const c of t.issues)if(c.code==="unrecognized_keys"){s??(s=c);for(const f of c.keys)a.has(f)||a.set(f,{}),a.get(f).l=!0}else e.issues.push(c);for(const c of r.issues)if(c.code==="unrecognized_keys")for(const f of c.keys)a.has(f)||a.set(f,{}),a.get(f).r=!0;else e.issues.push(c);const o=[...a].filter(([,c])=>c.l&&c.r).map(([c])=>c);if(o.length&&s&&e.issues.push({...s,keys:o}),Po(e))return e;const u=fp(t.value,r.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const EI=he("$ZodRecord",(e,t)=>{Pt.init(e,t),e._zod.parse=(r,a)=>{const s=r.value;if(!Ko(s))return r.issues.push({expected:"record",code:"invalid_type",input:s,inst:e}),r;const o=[],u=t.keyType._zod.values;if(u){r.value={};const c=new Set;for(const h of u)if(typeof h=="string"||typeof h=="number"||typeof h=="symbol"){c.add(typeof h=="number"?h.toString():h);const p=t.valueType._zod.run({value:s[h],issues:[]},a);p instanceof Promise?o.push(p.then(v=>{v.issues.length&&r.issues.push(...Ho(h,v.issues)),r.value[h]=v.value})):(p.issues.length&&r.issues.push(...Ho(h,p.issues)),r.value[h]=p.value)}let f;for(const h in s)c.has(h)||(f=f??[],f.push(h));f&&f.length>0&&r.issues.push({code:"unrecognized_keys",input:s,inst:e,keys:f})}else{r.value={};for(const c of Reflect.ownKeys(s)){if(c==="__proto__")continue;let f=t.keyType._zod.run({value:c,issues:[]},a);if(f instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof c=="string"&&F7.test(c)&&f.issues.length&&f.issues.some(v=>v.code==="invalid_type"&&v.expected==="number")){const v=t.keyType._zod.run({value:Number(c),issues:[]},a);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(f=v)}if(f.issues.length){t.mode==="loose"?r.value[c]=s[c]:r.issues.push({code:"invalid_key",origin:"record",issues:f.issues.map(v=>es(v,a,Qi())),input:c,path:[c],inst:e});continue}const p=t.valueType._zod.run({value:s[c],issues:[]},a);p instanceof Promise?o.push(p.then(v=>{v.issues.length&&r.issues.push(...Ho(c,v.issues)),r.value[f.value]=v.value})):(p.issues.length&&r.issues.push(...Ho(c,p.issues)),r.value[f.value]=p.value)}}return o.length?Promise.all(o).then(()=>r):r}}),MI=he("$ZodEnum",(e,t)=>{Pt.init(e,t);const r=B7(t.entries),a=new Set(r);e._zod.values=a,e._zod.pattern=new RegExp(`^(${r.filter(s=>BO.has(typeof s)).map(s=>typeof s=="string"?Jo(s):s.toString()).join("|")})$`),e._zod.parse=(s,o)=>{const u=s.value;return a.has(u)||s.issues.push({code:"invalid_value",values:r,input:u,inst:e}),s}}),NI=he("$ZodLiteral",(e,t)=>{if(Pt.init(e,t),t.values.length===0)throw new Error("Cannot create literal schema with no valid values");const r=new Set(t.values);e._zod.values=r,e._zod.pattern=new RegExp(`^(${t.values.map(a=>typeof a=="string"?Jo(a):a?Jo(a.toString()):String(a)).join("|")})$`),e._zod.parse=(a,s)=>{const o=a.value;return r.has(o)||a.issues.push({code:"invalid_value",values:t.values,input:o,inst:e}),a}}),CI=he("$ZodTransform",(e,t)=>{Pt.init(e,t),e._zod.parse=(r,a)=>{if(a.direction==="backward")throw new j7(e.constructor.name);const s=t.transform(r.value,r);if(a.async)return(s instanceof Promise?s:Promise.resolve(s)).then(u=>(r.value=u,r));if(s instanceof Promise)throw new Fo;return r.value=s,r}});function O3(e,t){return e.issues.length&&t===void 0?{issues:[],value:void 0}:e}const r8=he("$ZodOptional",(e,t)=>{Pt.init(e,t),e._zod.optin="optional",e._zod.optout="optional",wt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,void 0]):void 0),wt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${l1(r.source)})?$`):void 0}),e._zod.parse=(r,a)=>{if(t.innerType._zod.optin==="optional"){const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>O3(o,r.value)):O3(s,r.value)}return r.value===void 0?r:t.innerType._zod.run(r,a)}}),OI=he("$ZodExactOptional",(e,t)=>{r8.init(e,t),wt(e._zod,"values",()=>t.innerType._zod.values),wt(e._zod,"pattern",()=>t.innerType._zod.pattern),e._zod.parse=(r,a)=>t.innerType._zod.run(r,a)}),RI=he("$ZodNullable",(e,t)=>{Pt.init(e,t),wt(e._zod,"optin",()=>t.innerType._zod.optin),wt(e._zod,"optout",()=>t.innerType._zod.optout),wt(e._zod,"pattern",()=>{const r=t.innerType._zod.pattern;return r?new RegExp(`^(${l1(r.source)}|null)$`):void 0}),wt(e._zod,"values",()=>t.innerType._zod.values?new Set([...t.innerType._zod.values,null]):void 0),e._zod.parse=(r,a)=>r.value===null?r:t.innerType._zod.run(r,a)}),II=he("$ZodDefault",(e,t)=>{Pt.init(e,t),e._zod.optin="optional",wt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);if(r.value===void 0)return r.value=t.defaultValue,r;const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>R3(o,t)):R3(s,t)}});function R3(e,t){return e.value===void 0&&(e.value=t.defaultValue),e}const DI=he("$ZodPrefault",(e,t)=>{Pt.init(e,t),e._zod.optin="optional",wt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>(a.direction==="backward"||r.value===void 0&&(r.value=t.defaultValue),t.innerType._zod.run(r,a))}),jI=he("$ZodNonOptional",(e,t)=>{Pt.init(e,t),wt(e._zod,"values",()=>{const r=t.innerType._zod.values;return r?new Set([...r].filter(a=>a!==void 0)):void 0}),e._zod.parse=(r,a)=>{const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>I3(o,e)):I3(s,e)}});function I3(e,t){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:t}),e}const $I=he("$ZodCatch",(e,t)=>{Pt.init(e,t),wt(e._zod,"optin",()=>t.innerType._zod.optin),wt(e._zod,"optout",()=>t.innerType._zod.optout),wt(e._zod,"values",()=>t.innerType._zod.values),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(o=>(r.value=o.value,o.issues.length&&(r.value=t.catchValue({...r,error:{issues:o.issues.map(u=>es(u,a,Qi()))},input:r.value}),r.issues=[]),r)):(r.value=s.value,s.issues.length&&(r.value=t.catchValue({...r,error:{issues:s.issues.map(o=>es(o,a,Qi()))},input:r.value}),r.issues=[]),r)}}),BI=he("$ZodPipe",(e,t)=>{Pt.init(e,t),wt(e._zod,"values",()=>t.in._zod.values),wt(e._zod,"optin",()=>t.in._zod.optin),wt(e._zod,"optout",()=>t.out._zod.optout),wt(e._zod,"propValues",()=>t.in._zod.propValues),e._zod.parse=(r,a)=>{if(a.direction==="backward"){const o=t.out._zod.run(r,a);return o instanceof Promise?o.then(u=>Sc(u,t.in,a)):Sc(o,t.in,a)}const s=t.in._zod.run(r,a);return s instanceof Promise?s.then(o=>Sc(o,t.out,a)):Sc(s,t.out,a)}});function Sc(e,t,r){return e.issues.length?(e.aborted=!0,e):t._zod.run({value:e.value,issues:e.issues},r)}const LI=he("$ZodReadonly",(e,t)=>{Pt.init(e,t),wt(e._zod,"propValues",()=>t.innerType._zod.propValues),wt(e._zod,"values",()=>t.innerType._zod.values),wt(e._zod,"optin",()=>{var r,a;return(a=(r=t.innerType)==null?void 0:r._zod)==null?void 0:a.optin}),wt(e._zod,"optout",()=>{var r,a;return(a=(r=t.innerType)==null?void 0:r._zod)==null?void 0:a.optout}),e._zod.parse=(r,a)=>{if(a.direction==="backward")return t.innerType._zod.run(r,a);const s=t.innerType._zod.run(r,a);return s instanceof Promise?s.then(D3):D3(s)}});function D3(e){return e.value=Object.freeze(e.value),e}const UI=he("$ZodLazy",(e,t)=>{Pt.init(e,t),wt(e._zod,"innerType",()=>t.getter()),wt(e._zod,"pattern",()=>{var r,a;return(a=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:a.pattern}),wt(e._zod,"propValues",()=>{var r,a;return(a=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:a.propValues}),wt(e._zod,"optin",()=>{var r,a;return((a=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:a.optin)??void 0}),wt(e._zod,"optout",()=>{var r,a;return((a=(r=e._zod.innerType)==null?void 0:r._zod)==null?void 0:a.optout)??void 0}),e._zod.parse=(r,a)=>e._zod.innerType._zod.run(r,a)}),qI=he("$ZodCustom",(e,t)=>{va.init(e,t),Pt.init(e,t),e._zod.parse=(r,a)=>r,e._zod.check=r=>{const a=r.value,s=t.fn(a);if(s instanceof Promise)return s.then(o=>j3(o,r,a,e));j3(s,r,a,e)}});function j3(e,t,r,a){if(!e){const s={code:"custom",input:r,inst:a,path:[...a._zod.def.path??[]],continue:!a._zod.def.abort};a._zod.def.params&&(s.params=a._zod.def.params),t.issues.push(zu(s))}}var $3;class PI{constructor(){this._map=new WeakMap,this._idmap=new Map}add(t,...r){const a=r[0];return this._map.set(t,a),a&&typeof a=="object"&&"id"in a&&this._idmap.set(a.id,t),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(t){const r=this._map.get(t);return r&&typeof r=="object"&&"id"in r&&this._idmap.delete(r.id),this._map.delete(t),this}get(t){const r=t._zod.parent;if(r){const a={...this.get(r)??{}};delete a.id;const s={...a,...this._map.get(t)};return Object.keys(s).length?s:void 0}return this._map.get(t)}has(t){return this._map.has(t)}}function HI(){return new PI}($3=globalThis).__zod_globalRegistry??($3.__zod_globalRegistry=HI());const du=globalThis.__zod_globalRegistry;function ZI(e,t){return new e({type:"string",...He(t)})}function GI(e,t){return new e({type:"string",format:"email",check:"string_format",abort:!1,...He(t)})}function B3(e,t){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...He(t)})}function VI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...He(t)})}function FI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...He(t)})}function YI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...He(t)})}function XI(e,t){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...He(t)})}function KI(e,t){return new e({type:"string",format:"url",check:"string_format",abort:!1,...He(t)})}function JI(e,t){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...He(t)})}function WI(e,t){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...He(t)})}function QI(e,t){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...He(t)})}function eD(e,t){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...He(t)})}function tD(e,t){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...He(t)})}function rD(e,t){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...He(t)})}function aD(e,t){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...He(t)})}function nD(e,t){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...He(t)})}function iD(e,t){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...He(t)})}function sD(e,t){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...He(t)})}function oD(e,t){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...He(t)})}function lD(e,t){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...He(t)})}function uD(e,t){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...He(t)})}function cD(e,t){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...He(t)})}function dD(e,t){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...He(t)})}function fD(e,t){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...He(t)})}function hD(e,t){return new e({type:"string",format:"date",check:"string_format",...He(t)})}function mD(e,t){return new e({type:"string",format:"time",check:"string_format",precision:null,...He(t)})}function pD(e,t){return new e({type:"string",format:"duration",check:"string_format",...He(t)})}function gD(e,t){return new e({type:"number",checks:[],...He(t)})}function vD(e,t){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...He(t)})}function yD(e,t){return new e({type:"boolean",...He(t)})}function bD(e,t){return new e({type:"null",...He(t)})}function xD(e){return new e({type:"any"})}function wD(e){return new e({type:"unknown"})}function SD(e,t){return new e({type:"never",...He(t)})}function L3(e,t){return new X7({check:"less_than",...He(t),value:e,inclusive:!1})}function xm(e,t){return new X7({check:"less_than",...He(t),value:e,inclusive:!0})}function U3(e,t){return new K7({check:"greater_than",...He(t),value:e,inclusive:!1})}function wm(e,t){return new K7({check:"greater_than",...He(t),value:e,inclusive:!0})}function q3(e,t){return new OR({check:"multiple_of",...He(t),value:e})}function a8(e,t){return new IR({check:"max_length",...He(t),maximum:e})}function Qc(e,t){return new DR({check:"min_length",...He(t),minimum:e})}function n8(e,t){return new jR({check:"length_equals",...He(t),length:e})}function _D(e,t){return new $R({check:"string_format",format:"regex",...He(t),pattern:e})}function zD(e){return new BR({check:"string_format",format:"lowercase",...He(e)})}function kD(e){return new LR({check:"string_format",format:"uppercase",...He(e)})}function TD(e,t){return new UR({check:"string_format",format:"includes",...He(t),includes:e})}function AD(e,t){return new qR({check:"string_format",format:"starts_with",...He(t),prefix:e})}function ED(e,t){return new PR({check:"string_format",format:"ends_with",...He(t),suffix:e})}function il(e){return new HR({check:"overwrite",tx:e})}function MD(e){return il(t=>t.normalize(e))}function ND(){return il(e=>e.trim())}function CD(){return il(e=>e.toLowerCase())}function OD(){return il(e=>e.toUpperCase())}function RD(){return il(e=>jO(e))}function ID(e,t,r){return new e({type:"array",element:t,...He(r)})}function DD(e,t,r){const a=He(r);return a.abort??(a.abort=!0),new e({type:"custom",check:"custom",fn:t,...a})}function jD(e,t,r){return new e({type:"custom",check:"custom",fn:t,...He(r)})}function $D(e){const t=BD(r=>(r.addIssue=a=>{if(typeof a=="string")r.issues.push(zu(a,r.value,t._zod.def));else{const s=a;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=r.value),s.inst??(s.inst=t),s.continue??(s.continue=!t._zod.def.abort),r.issues.push(zu(s))}},e(r.value,r)));return t}function BD(e,t){const r=new va({check:"custom",...He(t)});return r._zod.check=e,r}function ed(e){let t=(e==null?void 0:e.target)??"draft-2020-12";return t==="draft-4"&&(t="draft-04"),t==="draft-7"&&(t="draft-07"),{processors:e.processors??{},metadataRegistry:(e==null?void 0:e.metadata)??du,target:t,unrepresentable:(e==null?void 0:e.unrepresentable)??"throw",override:(e==null?void 0:e.override)??(()=>{}),io:(e==null?void 0:e.io)??"output",counter:0,seen:new Map,cycles:(e==null?void 0:e.cycles)??"ref",reused:(e==null?void 0:e.reused)??"inline",external:(e==null?void 0:e.external)??void 0}}function qt(e,t,r={path:[],schemaPath:[]}){var p,v;var a;const s=e._zod.def,o=t.seen.get(e);if(o)return o.count++,r.schemaPath.includes(e)&&(o.cycle=r.path),o.schema;const u={schema:{},count:1,cycle:void 0,path:r.path};t.seen.set(e,u);const c=(v=(p=e._zod).toJSONSchema)==null?void 0:v.call(p);if(c)u.schema=c;else{const b={...r,schemaPath:[...r.schemaPath,e],path:r.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(t,u.schema,b);else{const k=u.schema,_=t.processors[s.type];if(!_)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);_(e,t,k,b)}const y=e._zod.parent;y&&(u.ref||(u.ref=y),qt(y,t,b),t.seen.get(y).isParent=!0)}const f=t.metadataRegistry.get(e);return f&&Object.assign(u.schema,f),t.io==="input"&&ta(e)&&(delete u.schema.examples,delete u.schema.default),t.io==="input"&&u.schema._prefault&&((a=u.schema).default??(a.default=u.schema._prefault)),delete u.schema._prefault,t.seen.get(e).schema}function td(e,t){var u,c,f,h;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=new Map;for(const p of e.seen.entries()){const v=(u=e.metadataRegistry.get(p[0]))==null?void 0:u.id;if(v){const b=a.get(v);if(b&&b!==p[0])throw new Error(`Duplicate schema id "${v}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);a.set(v,p[0])}}const s=p=>{var _;const v=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const T=(_=e.external.registry.get(p[0]))==null?void 0:_.id,R=e.external.uri??(M=>M);if(T)return{ref:R(T)};const O=p[1].defId??p[1].schema.id??`schema${e.counter++}`;return p[1].defId=O,{defId:O,ref:`${R("__shared")}#/${v}/${O}`}}if(p[1]===r)return{ref:"#"};const y=`#/${v}/`,k=p[1].schema.id??`__schema${e.counter++}`;return{defId:k,ref:y+k}},o=p=>{if(p[1].schema.$ref)return;const v=p[1],{ref:b,defId:y}=s(p);v.def={...v.schema},y&&(v.defId=y);const k=v.schema;for(const _ in k)delete k[_];k.$ref=b};if(e.cycles==="throw")for(const p of e.seen.entries()){const v=p[1];if(v.cycle)throw new Error(`Cycle detected: #/${(c=v.cycle)==null?void 0:c.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const p of e.seen.entries()){const v=p[1];if(t===p[0]){o(p);continue}if(e.external){const y=(f=e.external.registry.get(p[0]))==null?void 0:f.id;if(t!==p[0]&&y){o(p);continue}}if((h=e.metadataRegistry.get(p[0]))==null?void 0:h.id){o(p);continue}if(v.cycle){o(p);continue}if(v.count>1&&e.reused==="ref"){o(p);continue}}}function rd(e,t){var u,c,f;const r=e.seen.get(t);if(!r)throw new Error("Unprocessed schema. This is a bug in Zod.");const a=h=>{const p=e.seen.get(h);if(p.ref===null)return;const v=p.def??p.schema,b={...v},y=p.ref;if(p.ref=null,y){a(y);const _=e.seen.get(y),T=_.schema;if(T.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(T)):Object.assign(v,T),Object.assign(v,b),h._zod.parent===y)for(const O in v)O==="$ref"||O==="allOf"||O in b||delete v[O];if(T.$ref)for(const O in v)O==="$ref"||O==="allOf"||O in _.def&&JSON.stringify(v[O])===JSON.stringify(_.def[O])&&delete v[O]}const k=h._zod.parent;if(k&&k!==y){a(k);const _=e.seen.get(k);if(_!=null&&_.schema.$ref&&(v.$ref=_.schema.$ref,_.def))for(const T in v)T==="$ref"||T==="allOf"||T in _.def&&JSON.stringify(v[T])===JSON.stringify(_.def[T])&&delete v[T]}e.override({zodSchema:h,jsonSchema:v,path:p.path??[]})};for(const h of[...e.seen.entries()].reverse())a(h[0]);const s={};if(e.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":e.target,(u=e.external)!=null&&u.uri){const h=(c=e.external.registry.get(t))==null?void 0:c.id;if(!h)throw new Error("Schema is missing an `id` property");s.$id=e.external.uri(h)}Object.assign(s,r.def??r.schema);const o=((f=e.external)==null?void 0:f.defs)??{};for(const h of e.seen.entries()){const p=h[1];p.def&&p.defId&&(o[p.defId]=p.def)}e.external||Object.keys(o).length>0&&(e.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const h=JSON.parse(JSON.stringify(s));return Object.defineProperty(h,"~standard",{value:{...t["~standard"],jsonSchema:{input:ad(t,"input",e.processors),output:ad(t,"output",e.processors)}},enumerable:!1,writable:!1}),h}catch{throw new Error("Error converting schema to JSON.")}}function ta(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const a=e._zod.def;if(a.type==="transform")return!0;if(a.type==="array")return ta(a.element,r);if(a.type==="set")return ta(a.valueType,r);if(a.type==="lazy")return ta(a.getter(),r);if(a.type==="promise"||a.type==="optional"||a.type==="nonoptional"||a.type==="nullable"||a.type==="readonly"||a.type==="default"||a.type==="prefault")return ta(a.innerType,r);if(a.type==="intersection")return ta(a.left,r)||ta(a.right,r);if(a.type==="record"||a.type==="map")return ta(a.keyType,r)||ta(a.valueType,r);if(a.type==="pipe")return ta(a.in,r)||ta(a.out,r);if(a.type==="object"){for(const s in a.shape)if(ta(a.shape[s],r))return!0;return!1}if(a.type==="union"){for(const s of a.options)if(ta(s,r))return!0;return!1}if(a.type==="tuple"){for(const s of a.items)if(ta(s,r))return!0;return!!(a.rest&&ta(a.rest,r))}return!1}const LD=(e,t={})=>r=>{const a=ed({...r,processors:t});return qt(e,a),td(a,e),rd(a,e)},ad=(e,t,r={})=>a=>{const{libraryOptions:s,target:o}=a??{},u=ed({...s??{},target:o,io:t,processors:r});return qt(e,u),td(u,e),rd(u,e)},UD={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i8=(e,t,r,a)=>{const s=r;s.type="string";const{minimum:o,maximum:u,format:c,patterns:f,contentEncoding:h}=e._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof u=="number"&&(s.maxLength=u),c&&(s.format=UD[c]??c,s.format===""&&delete s.format,c==="time"&&delete s.format),h&&(s.contentEncoding=h),f&&f.size>0){const p=[...f];p.length===1?s.pattern=p[0].source:p.length>1&&(s.allOf=[...p.map(v=>({...t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},s8=(e,t,r,a)=>{const s=r,{minimum:o,maximum:u,format:c,multipleOf:f,exclusiveMaximum:h,exclusiveMinimum:p}=e._zod.bag;typeof c=="string"&&c.includes("int")?s.type="integer":s.type="number",typeof p=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.minimum=p,s.exclusiveMinimum=!0):s.exclusiveMinimum=p),typeof o=="number"&&(s.minimum=o,typeof p=="number"&&t.target!=="draft-04"&&(p>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof h=="number"&&(t.target==="draft-04"||t.target==="openapi-3.0"?(s.maximum=h,s.exclusiveMaximum=!0):s.exclusiveMaximum=h),typeof u=="number"&&(s.maximum=u,typeof h=="number"&&t.target!=="draft-04"&&(h<=u?delete s.maximum:delete s.exclusiveMaximum)),typeof f=="number"&&(s.multipleOf=f)},o8=(e,t,r,a)=>{r.type="boolean"},qD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema")},PD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema")},l8=(e,t,r,a)=>{t.target==="openapi-3.0"?(r.type="string",r.nullable=!0,r.enum=[null]):r.type="null"},HD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema")},ZD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema")},u8=(e,t,r,a)=>{r.not={}},c8=(e,t,r,a)=>{},d8=(e,t,r,a)=>{},GD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema")},f8=(e,t,r,a)=>{const s=e._zod.def,o=B7(s.entries);o.every(u=>typeof u=="number")&&(r.type="number"),o.every(u=>typeof u=="string")&&(r.type="string"),r.enum=o},h8=(e,t,r,a)=>{const s=e._zod.def,o=[];for(const u of s.values)if(u===void 0){if(t.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof u=="bigint"){if(t.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");o.push(Number(u))}else o.push(u);if(o.length!==0)if(o.length===1){const u=o[0];r.type=u===null?"null":typeof u,t.target==="draft-04"||t.target==="openapi-3.0"?r.enum=[u]:r.const=u}else o.every(u=>typeof u=="number")&&(r.type="number"),o.every(u=>typeof u=="string")&&(r.type="string"),o.every(u=>typeof u=="boolean")&&(r.type="boolean"),o.every(u=>u===null)&&(r.type="null"),r.enum=o},VD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema")},FD=(e,t,r,a)=>{const s=r,o=e._zod.pattern;if(!o)throw new Error("Pattern not found in template literal");s.type="string",s.pattern=o.source},YD=(e,t,r,a)=>{const s=r,o={type:"string",format:"binary",contentEncoding:"binary"},{minimum:u,maximum:c,mime:f}=e._zod.bag;u!==void 0&&(o.minLength=u),c!==void 0&&(o.maxLength=c),f?f.length===1?(o.contentMediaType=f[0],Object.assign(s,o)):(Object.assign(s,o),s.anyOf=f.map(h=>({contentMediaType:h}))):Object.assign(s,o)},XD=(e,t,r,a)=>{r.type="boolean"},m8=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},KD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema")},p8=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},JD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema")},WD=(e,t,r,a)=>{if(t.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema")},g8=(e,t,r,a)=>{const s=r,o=e._zod.def,{minimum:u,maximum:c}=e._zod.bag;typeof u=="number"&&(s.minItems=u),typeof c=="number"&&(s.maxItems=c),s.type="array",s.items=qt(o.element,t,{...a,path:[...a.path,"items"]})},v8=(e,t,r,a)=>{var h;const s=r,o=e._zod.def;s.type="object",s.properties={};const u=o.shape;for(const p in u)s.properties[p]=qt(u[p],t,{...a,path:[...a.path,"properties",p]});const c=new Set(Object.keys(u)),f=new Set([...c].filter(p=>{const v=o.shape[p]._zod;return t.io==="input"?v.optin===void 0:v.optout===void 0}));f.size>0&&(s.required=Array.from(f)),((h=o.catchall)==null?void 0:h._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=qt(o.catchall,t,{...a,path:[...a.path,"additionalProperties"]})):t.io==="output"&&(s.additionalProperties=!1)},y8=(e,t,r,a)=>{const s=e._zod.def,o=s.inclusive===!1,u=s.options.map((c,f)=>qt(c,t,{...a,path:[...a.path,o?"oneOf":"anyOf",f]}));o?r.oneOf=u:r.anyOf=u},b8=(e,t,r,a)=>{const s=e._zod.def,o=qt(s.left,t,{...a,path:[...a.path,"allOf",0]}),u=qt(s.right,t,{...a,path:[...a.path,"allOf",1]}),c=h=>"allOf"in h&&Object.keys(h).length===1,f=[...c(o)?o.allOf:[o],...c(u)?u.allOf:[u]];r.allOf=f},QD=(e,t,r,a)=>{const s=r,o=e._zod.def;s.type="array";const u=t.target==="draft-2020-12"?"prefixItems":"items",c=t.target==="draft-2020-12"||t.target==="openapi-3.0"?"items":"additionalItems",f=o.items.map((b,y)=>qt(b,t,{...a,path:[...a.path,u,y]})),h=o.rest?qt(o.rest,t,{...a,path:[...a.path,c,...t.target==="openapi-3.0"?[o.items.length]:[]]}):null;t.target==="draft-2020-12"?(s.prefixItems=f,h&&(s.items=h)):t.target==="openapi-3.0"?(s.items={anyOf:f},h&&s.items.anyOf.push(h),s.minItems=f.length,h||(s.maxItems=f.length)):(s.items=f,h&&(s.additionalItems=h));const{minimum:p,maximum:v}=e._zod.bag;typeof p=="number"&&(s.minItems=p),typeof v=="number"&&(s.maxItems=v)},x8=(e,t,r,a)=>{const s=r,o=e._zod.def;s.type="object";const u=o.keyType,c=u._zod.bag,f=c==null?void 0:c.patterns;if(o.mode==="loose"&&f&&f.size>0){const p=qt(o.valueType,t,{...a,path:[...a.path,"patternProperties","*"]});s.patternProperties={};for(const v of f)s.patternProperties[v.source]=p}else(t.target==="draft-07"||t.target==="draft-2020-12")&&(s.propertyNames=qt(o.keyType,t,{...a,path:[...a.path,"propertyNames"]})),s.additionalProperties=qt(o.valueType,t,{...a,path:[...a.path,"additionalProperties"]});const h=u._zod.values;if(h){const p=[...h].filter(v=>typeof v=="string"||typeof v=="number");p.length>0&&(s.required=p)}},w8=(e,t,r,a)=>{const s=e._zod.def,o=qt(s.innerType,t,a),u=t.seen.get(e);t.target==="openapi-3.0"?(u.ref=s.innerType,r.nullable=!0):r.anyOf=[o,{type:"null"}]},S8=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType},_8=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType,r.default=JSON.parse(JSON.stringify(s.defaultValue))},z8=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType,t.io==="input"&&(r._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},k8=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType;let u;try{u=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}r.default=u},T8=(e,t,r,a)=>{const s=e._zod.def,o=t.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;qt(o,t,a);const u=t.seen.get(e);u.ref=o},A8=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType,r.readOnly=!0},ej=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType},h1=(e,t,r,a)=>{const s=e._zod.def;qt(s.innerType,t,a);const o=t.seen.get(e);o.ref=s.innerType},E8=(e,t,r,a)=>{const s=e._zod.innerType;qt(s,t,a);const o=t.seen.get(e);o.ref=s},P3={string:i8,number:s8,boolean:o8,bigint:qD,symbol:PD,null:l8,undefined:HD,void:ZD,never:u8,any:c8,unknown:d8,date:GD,enum:f8,literal:h8,nan:VD,template_literal:FD,file:YD,success:XD,custom:m8,function:KD,transform:p8,map:JD,set:WD,array:g8,object:v8,union:y8,intersection:b8,tuple:QD,record:x8,nullable:w8,nonoptional:S8,default:_8,prefault:z8,catch:k8,pipe:T8,readonly:A8,promise:ej,optional:h1,lazy:E8};function tj(e,t){if("_idmap"in e){const a=e,s=ed({...t,processors:P3}),o={};for(const f of a._idmap.entries()){const[h,p]=f;qt(p,s)}const u={},c={registry:a,uri:t==null?void 0:t.uri,defs:o};s.external=c;for(const f of a._idmap.entries()){const[h,p]=f;td(s,p),u[h]=rd(s,p)}if(Object.keys(o).length>0){const f=s.target==="draft-2020-12"?"$defs":"definitions";u.__shared={[f]:o}}return{schemas:u}}const r=ed({...t,processors:P3});return qt(e,r),td(r,e),rd(r,e)}const rj=he("ZodISODateTime",(e,t)=>{aI.init(e,t),lr.init(e,t)});function aj(e){return fD(rj,e)}const nj=he("ZodISODate",(e,t)=>{nI.init(e,t),lr.init(e,t)});function ij(e){return hD(nj,e)}const sj=he("ZodISOTime",(e,t)=>{iI.init(e,t),lr.init(e,t)});function oj(e){return mD(sj,e)}const lj=he("ZodISODuration",(e,t)=>{sI.init(e,t),lr.init(e,t)});function uj(e){return pD(lj,e)}const cj=(e,t)=>{P7.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:r=>XO(e,r)},flatten:{value:r=>YO(e,r)},addIssue:{value:r=>{e.issues.push(r),e.message=JSON.stringify(e.issues,dp,2)}},addIssues:{value:r=>{e.issues.push(...r),e.message=JSON.stringify(e.issues,dp,2)}},isEmpty:{get(){return e.issues.length===0}}})},tn=he("ZodError",cj,{Parent:Error}),dj=c1(tn),fj=d1(tn),hj=Md(tn),M8=Nd(tn),mj=WO(tn),pj=QO(tn),gj=eR(tn),vj=tR(tn),yj=rR(tn),bj=aR(tn),xj=nR(tn),wj=iR(tn),Ht=he("ZodType",(e,t)=>(Pt.init(e,t),Object.assign(e["~standard"],{jsonSchema:{input:ad(e,"input"),output:ad(e,"output")}}),e.toJSONSchema=LD(e,{}),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...r)=>e.clone(ss(t,{checks:[...t.checks??[],...r.map(a=>typeof a=="function"?{_zod:{check:a,def:{check:"custom"},onattach:[]}}:a)]}),{parent:!0}),e.with=e.check,e.clone=(r,a)=>os(e,r,a),e.brand=()=>e,e.register=(r,a)=>(r.add(e,a),e),e.parse=(r,a)=>dj(e,r,a,{callee:e.parse}),e.safeParse=(r,a)=>hj(e,r,a),e.parseAsync=async(r,a)=>fj(e,r,a,{callee:e.parseAsync}),e.safeParseAsync=async(r,a)=>M8(e,r,a),e.spa=e.safeParseAsync,e.encode=(r,a)=>mj(e,r,a),e.decode=(r,a)=>pj(e,r,a),e.encodeAsync=async(r,a)=>gj(e,r,a),e.decodeAsync=async(r,a)=>vj(e,r,a),e.safeEncode=(r,a)=>yj(e,r,a),e.safeDecode=(r,a)=>bj(e,r,a),e.safeEncodeAsync=async(r,a)=>xj(e,r,a),e.safeDecodeAsync=async(r,a)=>wj(e,r,a),e.refine=(r,a)=>e.check(v$(r,a)),e.superRefine=r=>e.check(y$(r)),e.overwrite=r=>e.check(il(r)),e.optional=()=>G3(e),e.exactOptional=()=>a$(e),e.nullable=()=>V3(e),e.nullish=()=>G3(V3(e)),e.nonoptional=r=>u$(e,r),e.array=()=>at(e),e.or=r=>mr([e,r]),e.and=r=>Jj(e,r),e.transform=r=>F3(e,t$(r)),e.default=r=>s$(e,r),e.prefault=r=>l$(e,r),e.catch=r=>d$(e,r),e.pipe=r=>F3(e,r),e.readonly=()=>m$(e),e.describe=r=>{const a=e.clone();return du.add(a,{description:r}),a},Object.defineProperty(e,"description",{get(){var r;return(r=du.get(e))==null?void 0:r.description},configurable:!0}),e.meta=(...r)=>{if(r.length===0)return du.get(e);const a=e.clone();return du.add(a,r[0]),a},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=r=>r(e),e)),N8=he("_ZodString",(e,t)=>{f1.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(a,s,o)=>i8(e,a,s);const r=e._zod.bag;e.format=r.format??null,e.minLength=r.minimum??null,e.maxLength=r.maximum??null,e.regex=(...a)=>e.check(_D(...a)),e.includes=(...a)=>e.check(TD(...a)),e.startsWith=(...a)=>e.check(AD(...a)),e.endsWith=(...a)=>e.check(ED(...a)),e.min=(...a)=>e.check(Qc(...a)),e.max=(...a)=>e.check(a8(...a)),e.length=(...a)=>e.check(n8(...a)),e.nonempty=(...a)=>e.check(Qc(1,...a)),e.lowercase=a=>e.check(zD(a)),e.uppercase=a=>e.check(kD(a)),e.trim=()=>e.check(ND()),e.normalize=(...a)=>e.check(MD(...a)),e.toLowerCase=()=>e.check(CD()),e.toUpperCase=()=>e.check(OD()),e.slugify=()=>e.check(RD())}),Sj=he("ZodString",(e,t)=>{f1.init(e,t),N8.init(e,t),e.email=r=>e.check(GI(_j,r)),e.url=r=>e.check(KI(zj,r)),e.jwt=r=>e.check(dD(Lj,r)),e.emoji=r=>e.check(JI(kj,r)),e.guid=r=>e.check(B3(H3,r)),e.uuid=r=>e.check(VI(_c,r)),e.uuidv4=r=>e.check(FI(_c,r)),e.uuidv6=r=>e.check(YI(_c,r)),e.uuidv7=r=>e.check(XI(_c,r)),e.nanoid=r=>e.check(WI(Tj,r)),e.guid=r=>e.check(B3(H3,r)),e.cuid=r=>e.check(QI(Aj,r)),e.cuid2=r=>e.check(eD(Ej,r)),e.ulid=r=>e.check(tD(Mj,r)),e.base64=r=>e.check(lD(jj,r)),e.base64url=r=>e.check(uD($j,r)),e.xid=r=>e.check(rD(Nj,r)),e.ksuid=r=>e.check(aD(Cj,r)),e.ipv4=r=>e.check(nD(Oj,r)),e.ipv6=r=>e.check(iD(Rj,r)),e.cidrv4=r=>e.check(sD(Ij,r)),e.cidrv6=r=>e.check(oD(Dj,r)),e.e164=r=>e.check(cD(Bj,r)),e.datetime=r=>e.check(aj(r)),e.date=r=>e.check(ij(r)),e.time=r=>e.check(oj(r)),e.duration=r=>e.check(uj(r))});function W(e){return ZI(Sj,e)}const lr=he("ZodStringFormat",(e,t)=>{ar.init(e,t),N8.init(e,t)}),_j=he("ZodEmail",(e,t)=>{YR.init(e,t),lr.init(e,t)}),H3=he("ZodGUID",(e,t)=>{VR.init(e,t),lr.init(e,t)}),_c=he("ZodUUID",(e,t)=>{FR.init(e,t),lr.init(e,t)}),zj=he("ZodURL",(e,t)=>{XR.init(e,t),lr.init(e,t)}),kj=he("ZodEmoji",(e,t)=>{KR.init(e,t),lr.init(e,t)}),Tj=he("ZodNanoID",(e,t)=>{JR.init(e,t),lr.init(e,t)}),Aj=he("ZodCUID",(e,t)=>{WR.init(e,t),lr.init(e,t)}),Ej=he("ZodCUID2",(e,t)=>{QR.init(e,t),lr.init(e,t)}),Mj=he("ZodULID",(e,t)=>{eI.init(e,t),lr.init(e,t)}),Nj=he("ZodXID",(e,t)=>{tI.init(e,t),lr.init(e,t)}),Cj=he("ZodKSUID",(e,t)=>{rI.init(e,t),lr.init(e,t)}),Oj=he("ZodIPv4",(e,t)=>{oI.init(e,t),lr.init(e,t)}),Rj=he("ZodIPv6",(e,t)=>{lI.init(e,t),lr.init(e,t)}),Ij=he("ZodCIDRv4",(e,t)=>{uI.init(e,t),lr.init(e,t)}),Dj=he("ZodCIDRv6",(e,t)=>{cI.init(e,t),lr.init(e,t)}),jj=he("ZodBase64",(e,t)=>{dI.init(e,t),lr.init(e,t)}),$j=he("ZodBase64URL",(e,t)=>{hI.init(e,t),lr.init(e,t)}),Bj=he("ZodE164",(e,t)=>{mI.init(e,t),lr.init(e,t)}),Lj=he("ZodJWT",(e,t)=>{gI.init(e,t),lr.init(e,t)}),C8=he("ZodNumber",(e,t)=>{W7.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(a,s,o)=>s8(e,a,s),e.gt=(a,s)=>e.check(U3(a,s)),e.gte=(a,s)=>e.check(wm(a,s)),e.min=(a,s)=>e.check(wm(a,s)),e.lt=(a,s)=>e.check(L3(a,s)),e.lte=(a,s)=>e.check(xm(a,s)),e.max=(a,s)=>e.check(xm(a,s)),e.int=a=>e.check(Z3(a)),e.safe=a=>e.check(Z3(a)),e.positive=a=>e.check(U3(0,a)),e.nonnegative=a=>e.check(wm(0,a)),e.negative=a=>e.check(L3(0,a)),e.nonpositive=a=>e.check(xm(0,a)),e.multipleOf=(a,s)=>e.check(q3(a,s)),e.step=(a,s)=>e.check(q3(a,s)),e.finite=()=>e;const r=e._zod.bag;e.minValue=Math.max(r.minimum??Number.NEGATIVE_INFINITY,r.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(r.maximum??Number.POSITIVE_INFINITY,r.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(r.format??"").includes("int")||Number.isSafeInteger(r.multipleOf??.5),e.isFinite=!0,e.format=r.format??null});function ot(e){return gD(C8,e)}const Uj=he("ZodNumberFormat",(e,t)=>{vI.init(e,t),C8.init(e,t)});function Z3(e){return vD(Uj,e)}const qj=he("ZodBoolean",(e,t)=>{yI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>o8(e,r,a)});function kr(e){return yD(qj,e)}const Pj=he("ZodNull",(e,t)=>{bI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>l8(e,r,a)});function Hj(e){return bD(Pj,e)}const Zj=he("ZodAny",(e,t)=>{xI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>c8()});function Yi(){return xD(Zj)}const Gj=he("ZodUnknown",(e,t)=>{wI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>d8()});function ra(){return wD(Gj)}const Vj=he("ZodNever",(e,t)=>{SI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>u8(e,r,a)});function O8(e){return SD(Vj,e)}const Fj=he("ZodArray",(e,t)=>{_I.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>g8(e,r,a,s),e.element=t.element,e.min=(r,a)=>e.check(Qc(r,a)),e.nonempty=r=>e.check(Qc(1,r)),e.max=(r,a)=>e.check(a8(r,a)),e.length=(r,a)=>e.check(n8(r,a)),e.unwrap=()=>e.element});function at(e,t){return ID(Fj,e,t)}const R8=he("ZodObject",(e,t)=>{kI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>v8(e,r,a,s),wt(e,"shape",()=>t.shape),e.keyof=()=>Rr(Object.keys(e._zod.def.shape)),e.catchall=r=>e.clone({...e._zod.def,catchall:r}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ra()}),e.loose=()=>e.clone({...e._zod.def,catchall:ra()}),e.strict=()=>e.clone({...e._zod.def,catchall:O8()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=r=>HO(e,r),e.safeExtend=r=>ZO(e,r),e.merge=r=>GO(e,r),e.pick=r=>qO(e,r),e.omit=r=>PO(e,r),e.partial=(...r)=>VO(D8,e,r[0]),e.required=(...r)=>FO(j8,e,r[0])});function xe(e,t){const r={type:"object",shape:e??{},...He(t)};return new R8(r)}function Xt(e,t){return new R8({type:"object",shape:e,catchall:O8(),...He(t)})}const I8=he("ZodUnion",(e,t)=>{t8.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>y8(e,r,a,s),e.options=t.options});function mr(e,t){return new I8({type:"union",options:e,...He(t)})}const Yj=he("ZodDiscriminatedUnion",(e,t)=>{I8.init(e,t),TI.init(e,t)});function Xj(e,t,r){return new Yj({type:"union",options:t,discriminator:e,...He(r)})}const Kj=he("ZodIntersection",(e,t)=>{AI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>b8(e,r,a,s)});function Jj(e,t){return new Kj({type:"intersection",left:e,right:t})}const Wj=he("ZodRecord",(e,t)=>{EI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>x8(e,r,a,s),e.keyType=t.keyType,e.valueType=t.valueType});function ci(e,t,r){return new Wj({type:"record",keyType:e,valueType:t,...He(r)})}const hp=he("ZodEnum",(e,t)=>{MI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(a,s,o)=>f8(e,a,s),e.enum=t.entries,e.options=Object.values(t.entries);const r=new Set(Object.keys(t.entries));e.extract=(a,s)=>{const o={};for(const u of a)if(r.has(u))o[u]=t.entries[u];else throw new Error(`Key ${u} not found in enum`);return new hp({...t,checks:[],...He(s),entries:o})},e.exclude=(a,s)=>{const o={...t.entries};for(const u of a)if(r.has(u))delete o[u];else throw new Error(`Key ${u} not found in enum`);return new hp({...t,checks:[],...He(s),entries:o})}});function Rr(e,t){const r=Array.isArray(e)?Object.fromEntries(e.map(a=>[a,a])):e;return new hp({type:"enum",entries:r,...He(t)})}const Qj=he("ZodLiteral",(e,t)=>{NI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>h8(e,r,a),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function Ve(e,t){return new Qj({type:"literal",values:Array.isArray(e)?e:[e],...He(t)})}const e$=he("ZodTransform",(e,t)=>{CI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>p8(e,r),e._zod.parse=(r,a)=>{if(a.direction==="backward")throw new j7(e.constructor.name);r.addIssue=o=>{if(typeof o=="string")r.issues.push(zu(o,r.value,t));else{const u=o;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=r.value),u.inst??(u.inst=e),r.issues.push(zu(u))}};const s=t.transform(r.value,r);return s instanceof Promise?s.then(o=>(r.value=o,r)):(r.value=s,r)}});function t$(e){return new e$({type:"transform",transform:e})}const D8=he("ZodOptional",(e,t)=>{r8.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>h1(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function G3(e){return new D8({type:"optional",innerType:e})}const r$=he("ZodExactOptional",(e,t)=>{OI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>h1(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function a$(e){return new r$({type:"optional",innerType:e})}const n$=he("ZodNullable",(e,t)=>{RI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>w8(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function V3(e){return new n$({type:"nullable",innerType:e})}const i$=he("ZodDefault",(e,t)=>{II.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>_8(e,r,a,s),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function s$(e,t){return new i$({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():U7(t)}})}const o$=he("ZodPrefault",(e,t)=>{DI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>z8(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function l$(e,t){return new o$({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():U7(t)}})}const j8=he("ZodNonOptional",(e,t)=>{jI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>S8(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function u$(e,t){return new j8({type:"nonoptional",innerType:e,...He(t)})}const c$=he("ZodCatch",(e,t)=>{$I.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>k8(e,r,a,s),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function d$(e,t){return new c$({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}const f$=he("ZodPipe",(e,t)=>{BI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>T8(e,r,a,s),e.in=t.in,e.out=t.out});function F3(e,t){return new f$({type:"pipe",in:e,out:t})}const h$=he("ZodReadonly",(e,t)=>{LI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>A8(e,r,a,s),e.unwrap=()=>e._zod.def.innerType});function m$(e){return new h$({type:"readonly",innerType:e})}const p$=he("ZodLazy",(e,t)=>{UI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>E8(e,r,a,s),e.unwrap=()=>e._zod.def.getter()});function g$(e){return new p$({type:"lazy",getter:e})}const m1=he("ZodCustom",(e,t)=>{qI.init(e,t),Ht.init(e,t),e._zod.processJSONSchema=(r,a,s)=>m8(e,r)});function $8(e,t){return DD(m1,e??(()=>!0),t)}function v$(e,t={}){return jD(m1,e,t)}function y$(e){return $D(e)}function nd(e,t={}){const r=new m1({type:"custom",check:"custom",fn:a=>a instanceof e,abort:!0,...He(t)});return r._zod.bag.Class=e,r._zod.check=a=>{a.value instanceof e||a.issues.push({code:"invalid_type",expected:e.name,input:a.value,inst:r,path:[...r._zod.def.path??[]]})},r}var ku;(function(e){e.assertEqual=s=>{};function t(s){}e.assertIs=t;function r(s){throw new Error}e.assertNever=r,e.arrayToEnum=s=>{const o={};for(const u of s)o[u]=u;return o},e.getValidEnumValues=s=>{const o=e.objectKeys(s).filter(c=>typeof s[s[c]]!="number"),u={};for(const c of o)u[c]=s[c];return e.objectValues(u)},e.objectValues=s=>e.objectKeys(s).map(function(o){return s[o]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const u in s)Object.prototype.hasOwnProperty.call(s,u)&&o.push(u);return o},e.find=(s,o)=>{for(const u of s)if(o(u))return u},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function a(s,o=" | "){return s.map(u=>typeof u=="string"?`'${u}'`:u).join(o)}e.joinValues=a,e.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(ku||(ku={}));var Y3;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(Y3||(Y3={}));ku.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]);ku.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class id extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=a=>{this.issues=[...this.issues,a]},this.addIssues=(a=[])=>{this.issues=[...this.issues,...a]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(o){return o.message},a={_errors:[]},s=o=>{for(const u of o.issues)if(u.code==="invalid_union")u.unionErrors.map(s);else if(u.code==="invalid_return_type")s(u.returnTypeError);else if(u.code==="invalid_arguments")s(u.argumentsError);else if(u.path.length===0)a._errors.push(r(u));else{let c=a,f=0;for(;f<u.path.length;){const h=u.path[f];f===u.path.length-1?(c[h]=c[h]||{_errors:[]},c[h]._errors.push(r(u))):c[h]=c[h]||{_errors:[]},c=c[h],f++}}};return s(this),a}static assert(t){if(!(t instanceof id))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ku.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r=Object.create(null),a=[];for(const s of this.issues)if(s.path.length>0){const o=s.path[0];r[o]=r[o]||[],r[o].push(t(s))}else a.push(t(s));return{formErrors:a,fieldErrors:r}}get formErrors(){return this.flatten()}}id.create=e=>new id(e);var X3;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(X3||(X3={}));var it;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(it||(it={}));class K3 extends Error{constructor(t,r){super(t),this.name="ParseError",this.type=r.type,this.field=r.field,this.value=r.value,this.line=r.line}}function Sm(e){}function b$(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=Sm,onError:r=Sm,onRetry:a=Sm,onComment:s}=e;let o="",u=!0,c,f="",h="";function p(_){const T=u?_.replace(/^\xEF\xBB\xBF/,""):_,[R,O]=x$(`${o}${T}`);for(const M of R)v(M);o=O,u=!1}function v(_){if(_===""){y();return}if(_.startsWith(":")){s&&s(_.slice(_.startsWith(": ")?2:1));return}const T=_.indexOf(":");if(T!==-1){const R=_.slice(0,T),O=_[T+1]===" "?2:1,M=_.slice(T+O);b(R,M,_);return}b(_,"",_)}function b(_,T,R){switch(_){case"event":h=T;break;case"data":f=`${f}${T}
`;break;case"id":c=T.includes("\0")?void 0:T;break;case"retry":/^\d+$/.test(T)?a(parseInt(T,10)):r(new K3(`Invalid \`retry\` value: "${T}"`,{type:"invalid-retry",value:T,line:R}));break;default:r(new K3(`Unknown field "${_.length>20?`${_.slice(0,20)}`:_}"`,{type:"unknown-field",field:_,value:T,line:R}));break}}function y(){f.length>0&&t({id:c,event:h||void 0,data:f.endsWith(`
`)?f.slice(0,-1):f}),c=void 0,f="",h=""}function k(_={}){o&&_.consume&&v(o),u=!0,c=void 0,f="",h="",o=""}return{feed:p,reset:k}}function x$(e){const t=[];let r="",a=0;for(;a<e.length;){const s=e.indexOf("\r",a),o=e.indexOf(`
`,a);let u=-1;if(s!==-1&&o!==-1?u=Math.min(s,o):s!==-1?s===e.length-1?u=-1:u=s:o!==-1&&(u=o),u===-1){r=e.slice(a);break}else{const c=e.slice(a,u);t.push(c),a=u+1,e[a-1]==="\r"&&e[a]===`
`&&a++}}return[t,r]}class w$ extends TransformStream{constructor({onError:t,onRetry:r,onComment:a}={}){let s;super({start(o){s=b$({onEvent:u=>{o.enqueue(u)},onError(u){t==="terminate"?o.error(u):typeof t=="function"&&t(u)},onRetry:r,onComment:a})},transform(o){s.feed(o)}})}}var B8={};function ts(...e){return e.reduce((t,r)=>({...t,...r??{}}),{})}async function S$(e,t){if(e==null)return Promise.resolve();const r=t==null?void 0:t.abortSignal;return new Promise((a,s)=>{if(r!=null&&r.aborted){s(J3());return}const o=setTimeout(()=>{u(),a()},e),u=()=>{clearTimeout(o),r==null||r.removeEventListener("abort",c)},c=()=>{u(),s(J3())};r==null||r.addEventListener("abort",c)})}function J3(){return new DOMException("Delay was aborted","AbortError")}var iu=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get promise(){return this._promise?this._promise:(this._promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this._promise)}resolve(e){var t;this.status={type:"resolved",value:e},this._promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this._promise&&((t=this._reject)==null||t.call(this,e))}isResolved(){return this.status.type==="resolved"}isRejected(){return this.status.type==="rejected"}isPending(){return this.status.type==="pending"}};function ju(e){return Object.fromEntries([...e.headers])}var{btoa:_$,atob:z$}=globalThis;function p1(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=z$(t);return Uint8Array.from(r,a=>a.codePointAt(0))}function Tu(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCodePoint(e[r]);return _$(t)}function W3(e){return e instanceof Uint8Array?Tu(e):e}var L8="AI_DownloadError",U8=`vercel.ai.error.${L8}`,k$=Symbol.for(U8),Q3,e5,_m=class extends(e5=Qe,Q3=k$,e5){constructor({url:e,statusCode:t,statusText:r,cause:a,message:s=a==null?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${a}`}){super({name:L8,message:s,cause:a}),this[Q3]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return Qe.hasMarker(e,U8)}},$u=({prefix:e,size:t=16,alphabet:r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:a="-"}={})=>{const s=()=>{const o=r.length,u=new Array(t);for(let c=0;c<t;c++)u[c]=r[Math.random()*o|0];return u.join("")};if(e==null)return s;if(r.includes(a))throw new _7({argument:"separator",message:`The separator "${a}" must not be part of the alphabet "${r}".`});return()=>`${e}${a}${s()}`},g1=$u();function q8(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function qs(e){return(e instanceof Error||e instanceof DOMException)&&(e.name==="AbortError"||e.name==="ResponseAborted"||e.name==="TimeoutError")}var T$=["fetch failed","failed to fetch"],A$=["ConnectionRefused","ConnectionClosed","FailedToOpenSocket","ECONNRESET","ECONNREFUSED","ETIMEDOUT","EPIPE"];function E$(e){if(!(e instanceof Error))return!1;const t=e.code;return!!(typeof t=="string"&&A$.includes(t))}function P8({error:e,url:t,requestBodyValues:r}){if(qs(e))return e;if(e instanceof TypeError&&T$.includes(e.message.toLowerCase())){const a=e.cause;if(a!=null)return new Xr({message:`Cannot connect to API: ${a.message}`,cause:a,url:t,requestBodyValues:r,isRetryable:!0})}return E$(e)?new Xr({message:`Cannot connect to API: ${e.message}`,cause:e,url:t,requestBodyValues:r,isRetryable:!0}):e}function Au(e=globalThis){var t,r,a;return e.window?"runtime/browser":(t=e.navigator)!=null&&t.userAgent?`runtime/${e.navigator.userAgent.toLowerCase()}`:(a=(r=e.process)==null?void 0:r.versions)!=null&&a.node?`runtime/node.js/${e.process.version.substring(0)}`:e.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function Os(e){if(e==null)return{};const t={};if(e instanceof Headers)e.forEach((r,a)=>{t[a.toLowerCase()]=r});else{Array.isArray(e)||(e=Object.entries(e));for(const[r,a]of e)a!=null&&(t[r.toLowerCase()]=a)}return t}function Ps(e,...t){const r=new Headers(Os(e)),a=r.get("user-agent")||"";return r.set("user-agent",[a,...t].filter(Boolean).join(" ")),Object.fromEntries(r.entries())}var H8="4.0.10",M$=()=>globalThis.fetch,t5=async({url:e,headers:t={},successfulResponseHandler:r,failedResponseHandler:a,abortSignal:s,fetch:o=M$()})=>{try{const u=await o(e,{method:"GET",headers:Ps(t,`ai-sdk/provider-utils/${H8}`,Au()),signal:s}),c=ju(u);if(!u.ok){let f;try{f=await a({response:u,url:e,requestBodyValues:{}})}catch(h){throw qs(h)||Xr.isInstance(h)?h:new Xr({message:"Failed to process error response",cause:h,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:{}})}throw f.value}try{return await r({response:u,url:e,requestBodyValues:{}})}catch(f){throw f instanceof Error&&(qs(f)||Xr.isInstance(f))?f:new Xr({message:"Failed to process successful response",cause:f,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:{}})}}catch(u){throw P8({error:u,url:e,requestBodyValues:{}})}};function N$(e){return e!=null}function C$({mediaType:e,url:t,supportedUrls:r}){return t=t.toLowerCase(),e=e.toLowerCase(),Object.entries(r).map(([a,s])=>{const o=a.toLowerCase();return o==="*"||o==="*/*"?{mediaTypePrefix:"",regexes:s}:{mediaTypePrefix:o.replace(/\*/,""),regexes:s}}).filter(({mediaTypePrefix:a})=>e.startsWith(a)).flatMap(({regexes:a})=>a).some(a=>a.test(t))}function O$({apiKey:e,environmentVariableName:t,apiKeyParameterName:r="apiKey",description:a}){if(typeof e=="string")return e;if(e!=null)throw new xc({message:`${a} API key must be a string.`});if(typeof process>"u")throw new xc({message:`${a} API key is missing. Pass it using the '${r}' parameter. Environment variables is not supported in this environment.`});if(e=B8[t],e==null)throw new xc({message:`${a} API key is missing. Pass it using the '${r}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new xc({message:`${a} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}function Nc({settingValue:e,environmentVariableName:t}){if(typeof e=="string")return e;if(!(e!=null||typeof process>"u")&&(e=B8[t],!(e==null||typeof e!="string")))return e}var R$=/"__proto__"\s*:/,I$=/"constructor"\s*:/;function r5(e){const t=JSON.parse(e);return t===null||typeof t!="object"||R$.test(e)===!1&&I$.test(e)===!1?t:D$(t)}function D$(e){let t=[e];for(;t.length;){const r=t;t=[];for(const a of r){if(Object.prototype.hasOwnProperty.call(a,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(a,"constructor")&&Object.prototype.hasOwnProperty.call(a.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const s in a){const o=a[s];o&&typeof o=="object"&&t.push(o)}}}return e}function Z8(e){const{stackTraceLimit:t}=Error;try{Error.stackTraceLimit=0}catch{return r5(e)}try{return r5(e)}finally{Error.stackTraceLimit=t}}function v1(e){if(e.type==="object"||Array.isArray(e.type)&&e.type.includes("object")){e.additionalProperties=!1;const{properties:r}=e;if(r!=null)for(const a of Object.keys(r))r[a]=Cs(r[a])}e.items!=null&&(e.items=Array.isArray(e.items)?e.items.map(Cs):Cs(e.items)),e.anyOf!=null&&(e.anyOf=e.anyOf.map(Cs)),e.allOf!=null&&(e.allOf=e.allOf.map(Cs)),e.oneOf!=null&&(e.oneOf=e.oneOf.map(Cs));const{definitions:t}=e;if(t!=null)for(const r of Object.keys(t))t[r]=Cs(t[r]);return e}function Cs(e){return typeof e=="boolean"?e:v1(e)}var j$=Symbol("Let zodToJsonSchema decide on which parser to use"),a5={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},$$=e=>typeof e=="string"?{...a5,name:e}:{...a5,...e};function Oa(){return{}}function B$(e,t){var r,a,s;const o={type:"array"};return(r=e.type)!=null&&r._def&&((s=(a=e.type)==null?void 0:a._def)==null?void 0:s.typeName)!==it.ZodAny&&(o.items=Ct(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&(o.minItems=e.minLength.value),e.maxLength&&(o.maxItems=e.maxLength.value),e.exactLength&&(o.minItems=e.exactLength.value,o.maxItems=e.exactLength.value),o}function L$(e){const t={type:"integer",format:"int64"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function U$(){return{type:"boolean"}}function G8(e,t){return Ct(e.type._def,t)}var q$=(e,t)=>Ct(e.innerType._def,t);function V8(e,t,r){const a=r??t.dateStrategy;if(Array.isArray(a))return{anyOf:a.map((s,o)=>V8(e,t,s))};switch(a){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return P$(e)}}var P$=e=>{const t={type:"integer",format:"unix-time"};for(const r of e.checks)switch(r.kind){case"min":t.minimum=r.value;break;case"max":t.maximum=r.value;break}return t};function H$(e,t){return{...Ct(e.innerType._def,t),default:e.defaultValue()}}function Z$(e,t){return t.effectStrategy==="input"?Ct(e.schema._def,t):Oa()}function G$(e){return{type:"string",enum:Array.from(e.values)}}var V$=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function F$(e,t){const r=[Ct(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Ct(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(s=>!!s),a=[];return r.forEach(s=>{if(V$(s))a.push(...s.allOf);else{let o=s;if("additionalProperties"in s&&s.additionalProperties===!1){const{additionalProperties:u,...c}=s;o=c}a.push(o)}}),a.length?{allOf:a}:void 0}function Y$(e){const t=typeof e.value;return t!=="bigint"&&t!=="number"&&t!=="boolean"&&t!=="string"?{type:Array.isArray(e.value)?"array":"object"}:{type:t==="bigint"?"integer":t,const:e.value}}var zm=void 0,ln={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(zm===void 0&&(zm=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),zm),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function F8(e,t){const r={type:"string"};if(e.checks)for(const a of e.checks)switch(a.kind){case"min":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value;break;case"max":r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"email":switch(t.emailStrategy){case"format:email":un(r,"email",a.message,t);break;case"format:idn-email":un(r,"idn-email",a.message,t);break;case"pattern:zod":Qr(r,ln.email,a.message,t);break}break;case"url":un(r,"uri",a.message,t);break;case"uuid":un(r,"uuid",a.message,t);break;case"regex":Qr(r,a.regex,a.message,t);break;case"cuid":Qr(r,ln.cuid,a.message,t);break;case"cuid2":Qr(r,ln.cuid2,a.message,t);break;case"startsWith":Qr(r,RegExp(`^${km(a.value,t)}`),a.message,t);break;case"endsWith":Qr(r,RegExp(`${km(a.value,t)}$`),a.message,t);break;case"datetime":un(r,"date-time",a.message,t);break;case"date":un(r,"date",a.message,t);break;case"time":un(r,"time",a.message,t);break;case"duration":un(r,"duration",a.message,t);break;case"length":r.minLength=typeof r.minLength=="number"?Math.max(r.minLength,a.value):a.value,r.maxLength=typeof r.maxLength=="number"?Math.min(r.maxLength,a.value):a.value;break;case"includes":{Qr(r,RegExp(km(a.value,t)),a.message,t);break}case"ip":{a.version!=="v6"&&un(r,"ipv4",a.message,t),a.version!=="v4"&&un(r,"ipv6",a.message,t);break}case"base64url":Qr(r,ln.base64url,a.message,t);break;case"jwt":Qr(r,ln.jwt,a.message,t);break;case"cidr":{a.version!=="v6"&&Qr(r,ln.ipv4Cidr,a.message,t),a.version!=="v4"&&Qr(r,ln.ipv6Cidr,a.message,t);break}case"emoji":Qr(r,ln.emoji(),a.message,t);break;case"ulid":{Qr(r,ln.ulid,a.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{un(r,"binary",a.message,t);break}case"contentEncoding:base64":{r.contentEncoding="base64";break}case"pattern:zod":{Qr(r,ln.base64,a.message,t);break}}break}case"nanoid":Qr(r,ln.nanoid,a.message,t)}return r}function km(e,t){return t.patternStrategy==="escape"?K$(e):e}var X$=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function K$(e){let t="";for(let r=0;r<e.length;r++)X$.has(e[r])||(t+="\\"),t+=e[r];return t}function un(e,t,r,a){var s;e.format||(s=e.anyOf)!=null&&s.some(o=>o.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format}),delete e.format),e.anyOf.push({format:t,...r&&a.errorMessages&&{errorMessage:{format:r}}})):e.format=t}function Qr(e,t,r,a){var s;e.pattern||(s=e.allOf)!=null&&s.some(o=>o.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern}),delete e.pattern),e.allOf.push({pattern:n5(t,a),...r&&a.errorMessages&&{errorMessage:{pattern:r}}})):e.pattern=n5(t,a)}function n5(e,t){var r;if(!t.applyRegexFlags||!e.flags)return e.source;const a={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},s=a.i?e.source.toLowerCase():e.source;let o="",u=!1,c=!1,f=!1;for(let h=0;h<s.length;h++){if(u){o+=s[h],u=!1;continue}if(a.i){if(c){if(s[h].match(/[a-z]/)){f?(o+=s[h],o+=`${s[h-2]}-${s[h]}`.toUpperCase(),f=!1):s[h+1]==="-"&&((r=s[h+2])!=null&&r.match(/[a-z]/))?(o+=s[h],f=!0):o+=`${s[h]}${s[h].toUpperCase()}`;continue}}else if(s[h].match(/[a-z]/)){o+=`[${s[h]}${s[h].toUpperCase()}]`;continue}}if(a.m){if(s[h]==="^"){o+=`(^|(?<=[\r
]))`;continue}else if(s[h]==="$"){o+=`($|(?=[\r
]))`;continue}}if(a.s&&s[h]==="."){o+=c?`${s[h]}\r
`:`[${s[h]}\r
]`;continue}o+=s[h],s[h]==="\\"?u=!0:c&&s[h]==="]"?c=!1:!c&&s[h]==="["&&(c=!0)}try{new RegExp(o)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return o}function Y8(e,t){var r,a,s,o,u,c;const f={type:"object",additionalProperties:(r=Ct(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]}))!=null?r:t.allowedAdditionalProperties};if(((a=e.keyType)==null?void 0:a._def.typeName)===it.ZodString&&((s=e.keyType._def.checks)!=null&&s.length)){const{type:h,...p}=F8(e.keyType._def,t);return{...f,propertyNames:p}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===it.ZodEnum)return{...f,propertyNames:{enum:e.keyType._def.values}};if(((u=e.keyType)==null?void 0:u._def.typeName)===it.ZodBranded&&e.keyType._def.type._def.typeName===it.ZodString&&((c=e.keyType._def.type._def.checks)!=null&&c.length)){const{type:h,...p}=G8(e.keyType._def,t);return{...f,propertyNames:p}}}return f}function J$(e,t){if(t.mapStrategy==="record")return Y8(e,t);const r=Ct(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||Oa(),a=Ct(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||Oa();return{type:"array",maxItems:125,items:{type:"array",items:[r,a],minItems:2,maxItems:2}}}function W$(e){const t=e.values,a=Object.keys(e.values).filter(o=>typeof t[t[o]]!="number").map(o=>t[o]),s=Array.from(new Set(a.map(o=>typeof o)));return{type:s.length===1?s[0]==="string"?"string":"number":["string","number"],enum:a}}function Q$(){return{not:Oa()}}function eB(){return{type:"null"}}var mp={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function tB(e,t){const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(a=>a._def.typeName in mp&&(!a._def.checks||!a._def.checks.length))){const a=r.reduce((s,o)=>{const u=mp[o._def.typeName];return u&&!s.includes(u)?[...s,u]:s},[]);return{type:a.length>1?a:a[0]}}else if(r.every(a=>a._def.typeName==="ZodLiteral"&&!a.description)){const a=r.reduce((s,o)=>{const u=typeof o._def.value;switch(u){case"string":case"number":case"boolean":return[...s,u];case"bigint":return[...s,"integer"];case"object":if(o._def.value===null)return[...s,"null"];case"symbol":case"undefined":case"function":default:return s}},[]);if(a.length===r.length){const s=a.filter((o,u,c)=>c.indexOf(o)===u);return{type:s.length>1?s:s[0],enum:r.reduce((o,u)=>o.includes(u._def.value)?o:[...o,u._def.value],[])}}}else if(r.every(a=>a._def.typeName==="ZodEnum"))return{type:"string",enum:r.reduce((a,s)=>[...a,...s._def.values.filter(o=>!a.includes(o))],[])};return rB(e,t)}var rB=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((a,s)=>Ct(a._def,{...t,currentPath:[...t.currentPath,"anyOf",`${s}`]})).filter(a=>!!a&&(!t.strictUnions||typeof a=="object"&&Object.keys(a).length>0));return r.length?{anyOf:r}:void 0};function aB(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return{type:[mp[e.innerType._def.typeName],"null"]};const r=Ct(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function nB(e){const t={type:"number"};if(!e.checks)return t;for(const r of e.checks)switch(r.kind){case"int":t.type="integer";break;case"min":r.inclusive?t.minimum=r.value:t.exclusiveMinimum=r.value;break;case"max":r.inclusive?t.maximum=r.value:t.exclusiveMaximum=r.value;break;case"multipleOf":t.multipleOf=r.value;break}return t}function iB(e,t){const r={type:"object",properties:{}},a=[],s=e.shape();for(const u in s){let c=s[u];if(c===void 0||c._def===void 0)continue;const f=oB(c),h=Ct(c._def,{...t,currentPath:[...t.currentPath,"properties",u],propertyPath:[...t.currentPath,"properties",u]});h!==void 0&&(r.properties[u]=h,f||a.push(u))}a.length&&(r.required=a);const o=sB(e,t);return o!==void 0&&(r.additionalProperties=o),r}function sB(e,t){if(e.catchall._def.typeName!=="ZodNever")return Ct(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function oB(e){try{return e.isOptional()}catch{return!0}}var lB=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return Ct(e.innerType._def,t);const a=Ct(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return a?{anyOf:[{not:Oa()},a]}:Oa()},uB=(e,t)=>{if(t.pipeStrategy==="input")return Ct(e.in._def,t);if(t.pipeStrategy==="output")return Ct(e.out._def,t);const r=Ct(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),a=Ct(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]});return{allOf:[r,a].filter(s=>s!==void 0)}};function cB(e,t){return Ct(e.type._def,t)}function dB(e,t){const a={type:"array",uniqueItems:!0,items:Ct(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&(a.minItems=e.minSize.value),e.maxSize&&(a.maxItems=e.maxSize.value),a}function fB(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((r,a)=>Ct(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[]),additionalItems:Ct(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((r,a)=>Ct(r._def,{...t,currentPath:[...t.currentPath,"items",`${a}`]})).reduce((r,a)=>a===void 0?r:[...r,a],[])}}function hB(){return{not:Oa()}}function mB(){return Oa()}var pB=(e,t)=>Ct(e.innerType._def,t),gB=(e,t,r)=>{switch(t){case it.ZodString:return F8(e,r);case it.ZodNumber:return nB(e);case it.ZodObject:return iB(e,r);case it.ZodBigInt:return L$(e);case it.ZodBoolean:return U$();case it.ZodDate:return V8(e,r);case it.ZodUndefined:return hB();case it.ZodNull:return eB();case it.ZodArray:return B$(e,r);case it.ZodUnion:case it.ZodDiscriminatedUnion:return tB(e,r);case it.ZodIntersection:return F$(e,r);case it.ZodTuple:return fB(e,r);case it.ZodRecord:return Y8(e,r);case it.ZodLiteral:return Y$(e);case it.ZodEnum:return G$(e);case it.ZodNativeEnum:return W$(e);case it.ZodNullable:return aB(e,r);case it.ZodOptional:return lB(e,r);case it.ZodMap:return J$(e,r);case it.ZodSet:return dB(e,r);case it.ZodLazy:return()=>e.getter()._def;case it.ZodPromise:return cB(e,r);case it.ZodNaN:case it.ZodNever:return Q$();case it.ZodEffects:return Z$(e,r);case it.ZodAny:return Oa();case it.ZodUnknown:return mB();case it.ZodDefault:return H$(e,r);case it.ZodBranded:return G8(e,r);case it.ZodReadonly:return pB(e,r);case it.ZodCatch:return q$(e,r);case it.ZodPipeline:return uB(e,r);case it.ZodFunction:case it.ZodVoid:case it.ZodSymbol:return;default:return(a=>{})()}},vB=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function Ct(e,t,r=!1){var a;const s=t.seen.get(e);if(t.override){const f=(a=t.override)==null?void 0:a.call(t,e,t,s,r);if(f!==j$)return f}if(s&&!r){const f=yB(s,t);if(f!==void 0)return f}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const u=gB(e,e.typeName,t),c=typeof u=="function"?Ct(u(),t):u;if(c&&bB(e,t,c),t.postProcess){const f=t.postProcess(c,e,t);return o.jsonSchema=c,f}return o.jsonSchema=c,c}var yB=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:vB(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((r,a)=>t.currentPath[a]===r)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),Oa()):t.$refStrategy==="seen"?Oa():void 0}},bB=(e,t,r)=>(e.description&&(r.description=e.description),r),xB=e=>{const t=$$(e),r=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([a,s])=>[s._def,{def:s._def,path:[...t.basePath,t.definitionPath,a],jsonSchema:void 0}]))}},wB=(e,t)=>{var r;const a=xB(t);let s=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((h,[p,v])=>{var b;return{...h,[p]:(b=Ct(v._def,{...a,currentPath:[...a.basePath,a.definitionPath,p]},!0))!=null?b:Oa()}},{}):void 0;const o=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,u=(r=Ct(e._def,o===void 0?a:{...a,currentPath:[...a.basePath,a.definitionPath,o]},!1))!=null?r:Oa(),c=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;c!==void 0&&(u.title=c);const f=o===void 0?s?{...u,[a.definitionPath]:s}:u:{$ref:[...a.$refStrategy==="relative"?[]:a.basePath,a.definitionPath,o].join("/"),[a.definitionPath]:{...s,[o]:u}};return f.$schema="http://json-schema.org/draft-07/schema#",f},pp=Symbol.for("vercel.ai.schema");function Jt(e){let t;return()=>(t==null&&(t=e()),t)}function Od(e,{validate:t}={}){return{[pp]:!0,_type:void 0,get jsonSchema(){return typeof e=="function"&&(e=e()),e},validate:t}}function SB(e){return typeof e=="object"&&e!==null&&pp in e&&e[pp]===!0&&"jsonSchema"in e&&"validate"in e}function sl(e){return e==null?Od({properties:{},additionalProperties:!1}):SB(e)?e:"~standard"in e?e["~standard"].vendor==="zod"?Zt(e):_B(e):e()}function _B(e){return Od(()=>v1(e["~standard"].jsonSchema.input({target:"draft-07"})),{validate:async t=>{const r=await e["~standard"].validate(t);return"value"in r?{success:!0,value:r.value}:{success:!1,error:new Us({value:t,cause:r.issues})}}})}function zB(e,t){var r;const a=(r=void 0)!=null?r:!1;return Od(()=>wB(e,{$refStrategy:a?"root":"none"}),{validate:async s=>{const o=await e.safeParseAsync(s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function kB(e,t){var r;const a=(r=void 0)!=null?r:!1;return Od(()=>v1(tj(e,{target:"draft-7",io:"input",reused:a?"ref":"inline"})),{validate:async s=>{const o=await M8(e,s);return o.success?{success:!0,value:o.data}:{success:!1,error:o.error}}})}function TB(e){return"_zod"in e}function Zt(e,t){return TB(e)?kB(e):zB(e)}async function gp({value:e,schema:t}){const r=await fn({value:e,schema:t});if(!r.success)throw Us.wrap({value:e,cause:r.error});return r.value}async function fn({value:e,schema:t}){const r=sl(t);try{if(r.validate==null)return{success:!0,value:e,rawValue:e};const a=await r.validate(e);return a.success?{success:!0,value:a.value,rawValue:e}:{success:!1,error:Us.wrap({value:e,cause:a.error}),rawValue:e}}catch(a){return{success:!1,error:Us.wrap({value:e,cause:a}),rawValue:e}}}async function AB({text:e,schema:t}){try{const r=Z8(e);return t==null?r:gp({value:r,schema:t})}catch(r){throw Kc.isInstance(r)||Us.isInstance(r)?r:new Kc({text:e,cause:r})}}async function hn({text:e,schema:t}){try{const r=Z8(e);return t==null?{success:!0,value:r,rawValue:r}:await fn({value:r,schema:t})}catch(r){return{success:!1,error:Kc.isInstance(r)?r:new Kc({text:e,cause:r}),rawValue:void 0}}}function X8({stream:e,schema:t}){return e.pipeThrough(new TextDecoderStream).pipeThrough(new w$).pipeThrough(new TransformStream({async transform({data:r},a){r!=="[DONE]"&&a.enqueue(await hn({text:r,schema:t}))}}))}async function sd({provider:e,providerOptions:t,schema:r}){if((t==null?void 0:t[e])==null)return;const a=await fn({value:t[e],schema:r});if(!a.success)throw new _7({argument:"providerOptions",message:`invalid ${e} provider options`,cause:a.error});return a.value}var EB=()=>globalThis.fetch,di=async({url:e,headers:t,body:r,failedResponseHandler:a,successfulResponseHandler:s,abortSignal:o,fetch:u})=>MB({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(r),values:r},failedResponseHandler:a,successfulResponseHandler:s,abortSignal:o,fetch:u}),MB=async({url:e,headers:t={},body:r,successfulResponseHandler:a,failedResponseHandler:s,abortSignal:o,fetch:u=EB()})=>{try{const c=await u(e,{method:"POST",headers:Ps(t,`ai-sdk/provider-utils/${H8}`,Au()),body:r.content,signal:o}),f=ju(c);if(!c.ok){let h;try{h=await s({response:c,url:e,requestBodyValues:r.values})}catch(p){throw qs(p)||Xr.isInstance(p)?p:new Xr({message:"Failed to process error response",cause:p,statusCode:c.status,url:e,responseHeaders:f,requestBodyValues:r.values})}throw h.value}try{return await a({response:c,url:e,requestBodyValues:r.values})}catch(h){throw h instanceof Error&&(qs(h)||Xr.isInstance(h))?h:new Xr({message:"Failed to process successful response",cause:h,statusCode:c.status,url:e,responseHeaders:f,requestBodyValues:r.values})}}catch(c){throw P8({error:c,url:e,requestBodyValues:r.values})}};function ol({id:e,inputSchema:t}){return({execute:r,outputSchema:a,needsApproval:s,toModelOutput:o,onInputStart:u,onInputDelta:c,onInputAvailable:f,...h})=>({type:"provider",id:e,args:h,inputSchema:t,outputSchema:a,execute:r,needsApproval:s,toModelOutput:o,onInputStart:u,onInputDelta:c,onInputAvailable:f})}function y1({id:e,inputSchema:t,outputSchema:r,supportsDeferredResults:a}){return({execute:s,needsApproval:o,toModelOutput:u,onInputStart:c,onInputDelta:f,onInputAvailable:h,...p})=>({type:"provider",id:e,args:p,inputSchema:t,outputSchema:r,execute:s,needsApproval:o,toModelOutput:u,onInputStart:c,onInputDelta:f,onInputAvailable:h,supportsDeferredResults:a})}async function hr(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Hs=({errorSchema:e,errorToMessage:t,isRetryable:r})=>async({response:a,url:s,requestBodyValues:o})=>{const u=await a.text(),c=ju(a);if(u.trim()==="")return{responseHeaders:c,value:new Xr({message:a.statusText,url:s,requestBodyValues:o,statusCode:a.status,responseHeaders:c,responseBody:u,isRetryable:r==null?void 0:r(a)})};try{const f=await AB({text:u,schema:e});return{responseHeaders:c,value:new Xr({message:t(f),url:s,requestBodyValues:o,statusCode:a.status,responseHeaders:c,responseBody:u,data:f,isRetryable:r==null?void 0:r(a,f)})}}catch{return{responseHeaders:c,value:new Xr({message:a.statusText,url:s,requestBodyValues:o,statusCode:a.status,responseHeaders:c,responseBody:u,isRetryable:r==null?void 0:r(a)})}}},K8=e=>async({response:t})=>{const r=ju(t);if(t.body==null)throw new TO({});return{responseHeaders:r,value:X8({stream:t.body,schema:e})}},fi=e=>async({response:t,url:r,requestBodyValues:a})=>{const s=await t.text(),o=await hn({text:s,schema:e}),u=ju(t);if(!o.success)throw new Xr({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:u,responseBody:s,url:r,requestBodyValues:a});return{responseHeaders:u,value:o.value,rawValue:o.rawValue}};function J8(e){return e==null?void 0:e.replace(/\/$/,"")}function NB(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}async function*CB({execute:e,input:t,options:r}){const a=e(t,r);if(NB(a)){let s;for await(const o of a)s=o,yield{type:"preliminary",output:o};yield{type:"final",output:s}}else yield{type:"final",output:await a}}var Tm,i5;function OB(){if(i5)return Tm;i5=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(p,v)=>{for(var b in v)e(p,b,{get:v[b],enumerable:!0})},o=(p,v,b,y)=>{if(v&&typeof v=="object"||typeof v=="function")for(let k of r(v))!a.call(p,k)&&k!==b&&e(p,k,{get:()=>v[k],enumerable:!(y=t(v,k))||y.enumerable});return p},u=p=>o(e({},"__esModule",{value:!0}),p),c={};s(c,{SYMBOL_FOR_REQ_CONTEXT:()=>f,getContext:()=>h}),Tm=u(c);const f=Symbol.for("@vercel/request-context");function h(){var v,b;return((b=(v=globalThis[f])==null?void 0:v.get)==null?void 0:b.call(v))??{}}return Tm}var Am,s5;function RB(){if(s5)return Am;s5=1;var e=Object.defineProperty,t=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,s=(v,b)=>{for(var y in b)e(v,y,{get:b[y],enumerable:!0})},o=(v,b,y,k)=>{if(b&&typeof b=="object"||typeof b=="function")for(let _ of r(b))!a.call(v,_)&&_!==y&&e(v,_,{get:()=>b[_],enumerable:!(k=t(b,_))||k.enumerable});return v},u=v=>o(e({},"__esModule",{value:!0}),v),c={};s(c,{getContext:()=>f.getContext,getVercelOidcToken:()=>h,getVercelOidcTokenSync:()=>p}),Am=u(c);var f=OB();async function h(){return""}function p(){return""}return Am}var W8=RB(),IB="vercel.ai.gateway.error",Em=Symbol.for(IB),o5,l5,Ra=class Q8 extends(l5=Error,o5=Em,l5){constructor({message:t,statusCode:r=500,cause:a,generationId:s}){super(s?`${t} [${s}]`:t),this[o5]=!0,this.statusCode=r,this.cause=a,this.generationId=s}static isInstance(t){return Q8.hasMarker(t)}static hasMarker(t){return typeof t=="object"&&t!==null&&Em in t&&t[Em]===!0}},ex="GatewayAuthenticationError",DB=`vercel.ai.gateway.error.${ex}`,u5=Symbol.for(DB),c5,d5,b1=class tx extends(d5=Ra,c5=u5,d5){constructor({message:t="Authentication failed",statusCode:r=401,cause:a,generationId:s}={}){super({message:t,statusCode:r,cause:a,generationId:s}),this[c5]=!0,this.name=ex,this.type="authentication_error"}static isInstance(t){return Ra.hasMarker(t)&&u5 in t}static createContextualError({apiKeyProvided:t,oidcTokenProvided:r,message:a="Authentication failed",statusCode:s=401,cause:o,generationId:u}){let c;return t?c=`AI Gateway authentication failed: Invalid API key.

Create a new API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys

Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.`:r?c=`AI Gateway authentication failed: Invalid OIDC token.

Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.

Alternatively, use an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys`:c=`AI Gateway authentication failed: No authentication provided.

Option 1 - API key:
Create an API key: https://vercel.com/d?to=%2F%5Bteam%5D%2F%7E%2Fai%2Fapi-keys
Provide via 'apiKey' option or 'AI_GATEWAY_API_KEY' environment variable.

Option 2 - OIDC token:
Run 'npx vercel link' to link your project, then 'vc env pull' to fetch the token.`,new tx({message:c,statusCode:s,cause:o,generationId:u})}},rx="GatewayInvalidRequestError",jB=`vercel.ai.gateway.error.${rx}`,f5=Symbol.for(jB),h5,m5,$B=class extends(m5=Ra,h5=f5,m5){constructor({message:e="Invalid request",statusCode:t=400,cause:r,generationId:a}={}){super({message:e,statusCode:t,cause:r,generationId:a}),this[h5]=!0,this.name=rx,this.type="invalid_request_error"}static isInstance(e){return Ra.hasMarker(e)&&f5 in e}},ax="GatewayRateLimitError",BB=`vercel.ai.gateway.error.${ax}`,p5=Symbol.for(BB),g5,v5,LB=class extends(v5=Ra,g5=p5,v5){constructor({message:e="Rate limit exceeded",statusCode:t=429,cause:r,generationId:a}={}){super({message:e,statusCode:t,cause:r,generationId:a}),this[g5]=!0,this.name=ax,this.type="rate_limit_exceeded"}static isInstance(e){return Ra.hasMarker(e)&&p5 in e}},nx="GatewayModelNotFoundError",UB=`vercel.ai.gateway.error.${nx}`,y5=Symbol.for(UB),qB=Jt(()=>Zt(xe({modelId:W()}))),b5,x5,PB=class extends(x5=Ra,b5=y5,x5){constructor({message:e="Model not found",statusCode:t=404,modelId:r,cause:a,generationId:s}={}){super({message:e,statusCode:t,cause:a,generationId:s}),this[b5]=!0,this.name=nx,this.type="model_not_found",this.modelId=r}static isInstance(e){return Ra.hasMarker(e)&&y5 in e}},ix="GatewayInternalServerError",HB=`vercel.ai.gateway.error.${ix}`,w5=Symbol.for(HB),S5,_5,z5=class extends(_5=Ra,S5=w5,_5){constructor({message:e="Internal server error",statusCode:t=500,cause:r,generationId:a}={}){super({message:e,statusCode:t,cause:r,generationId:a}),this[S5]=!0,this.name=ix,this.type="internal_server_error"}static isInstance(e){return Ra.hasMarker(e)&&w5 in e}},sx="GatewayResponseError",ZB=`vercel.ai.gateway.error.${sx}`,k5=Symbol.for(ZB),T5,A5,GB=class extends(A5=Ra,T5=k5,A5){constructor({message:e="Invalid response from Gateway",statusCode:t=502,response:r,validationError:a,cause:s,generationId:o}={}){super({message:e,statusCode:t,cause:s,generationId:o}),this[T5]=!0,this.name=sx,this.type="response_error",this.response=r,this.validationError=a}static isInstance(e){return Ra.hasMarker(e)&&k5 in e}};async function E5({response:e,statusCode:t,defaultMessage:r="Gateway request failed",cause:a,authMethod:s}){var o;const u=await fn({value:e,schema:VB});if(!u.success){const v=typeof e=="object"&&e!==null&&"generationId"in e?e.generationId:void 0;return new GB({message:`Invalid error response format: ${r}`,statusCode:t,response:e,validationError:u.error,cause:a,generationId:v})}const c=u.value,f=c.error.type,h=c.error.message,p=(o=c.generationId)!=null?o:void 0;switch(f){case"authentication_error":return b1.createContextualError({apiKeyProvided:s==="api-key",oidcTokenProvided:s==="oidc",statusCode:t,cause:a,generationId:p});case"invalid_request_error":return new $B({message:h,statusCode:t,cause:a,generationId:p});case"rate_limit_exceeded":return new LB({message:h,statusCode:t,cause:a,generationId:p});case"model_not_found":{const v=await fn({value:c.error.param,schema:qB});return new PB({message:h,statusCode:t,modelId:v.success?v.value.modelId:void 0,cause:a,generationId:p})}case"internal_server_error":return new z5({message:h,statusCode:t,cause:a,generationId:p});default:return new z5({message:h,statusCode:t,cause:a,generationId:p})}}var VB=Jt(()=>Zt(xe({error:xe({message:W(),type:W().nullish(),param:ra().nullish(),code:mr([W(),ot()]).nullish()}),generationId:W().nullish()})));function rs(e,t){var r;return Ra.isInstance(e)?e:Xr.isInstance(e)?E5({response:FB(e),statusCode:(r=e.statusCode)!=null?r:500,defaultMessage:"Gateway request failed",cause:e,authMethod:t}):E5({response:{},statusCode:500,defaultMessage:e instanceof Error?`Gateway request failed: ${e.message}`:"Unknown Gateway error",cause:e,authMethod:t})}function FB(e){if(e.data!==void 0)return e.data;if(e.responseBody!=null)try{return JSON.parse(e.responseBody)}catch{return e.responseBody}return{}}var ox="ai-gateway-auth-method";async function Wo(e){const t=await fn({value:e[ox],schema:YB});return t.success?t.value:void 0}var YB=Jt(()=>Zt(mr([Ve("api-key"),Ve("oidc")]))),M5=class{constructor(e){this.config=e}async getAvailableModels(){try{const{value:e}=await t5({url:`${this.config.baseURL}/config`,headers:await hr(this.config.headers()),successfulResponseHandler:fi(XB),failedResponseHandler:Hs({errorSchema:Yi(),errorToMessage:t=>t}),fetch:this.config.fetch});return e}catch(e){throw await rs(e)}}async getCredits(){try{const e=new URL(this.config.baseURL),{value:t}=await t5({url:`${e.origin}/v1/credits`,headers:await hr(this.config.headers()),successfulResponseHandler:fi(KB),failedResponseHandler:Hs({errorSchema:Yi(),errorToMessage:r=>r}),fetch:this.config.fetch});return t}catch(e){throw await rs(e)}}},XB=Jt(()=>Zt(xe({models:at(xe({id:W(),name:W(),description:W().nullish(),pricing:xe({input:W(),output:W(),input_cache_read:W().nullish(),input_cache_write:W().nullish()}).transform(({input:e,output:t,input_cache_read:r,input_cache_write:a})=>({input:e,output:t,...r?{cachedInputTokens:r}:{},...a?{cacheCreationInputTokens:a}:{}})).nullish(),specification:xe({specificationVersion:Ve("v3"),provider:W(),modelId:W()}),modelType:Rr(["language","embedding","image"]).nullish()}))}))),KB=Jt(()=>Zt(xe({balance:W(),total_used:W()}).transform(({balance:e,total_used:t})=>({balance:e,totalUsed:t})))),JB=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.supportedUrls={"*/*":[/.*/]}}get provider(){return this.config.provider}async getArgs(e){const{abortSignal:t,...r}=e;return{args:this.maybeEncodeFileParts(r),warnings:[]}}async doGenerate(e){const{args:t,warnings:r}=await this.getArgs(e),{abortSignal:a}=e,s=await hr(this.config.headers());try{const{responseHeaders:o,value:u,rawValue:c}=await di({url:this.getUrl(),headers:ts(s,e.headers,this.getModelConfigHeaders(this.modelId,!1),await hr(this.config.o11yHeaders)),body:t,successfulResponseHandler:fi(Yi()),failedResponseHandler:Hs({errorSchema:Yi(),errorToMessage:f=>f}),...a&&{abortSignal:a},fetch:this.config.fetch});return{...u,request:{body:t},response:{headers:o,body:c},warnings:r}}catch(o){throw await rs(o,await Wo(s))}}async doStream(e){const{args:t,warnings:r}=await this.getArgs(e),{abortSignal:a}=e,s=await hr(this.config.headers());try{const{value:o,responseHeaders:u}=await di({url:this.getUrl(),headers:ts(s,e.headers,this.getModelConfigHeaders(this.modelId,!0),await hr(this.config.o11yHeaders)),body:t,successfulResponseHandler:K8(Yi()),failedResponseHandler:Hs({errorSchema:Yi(),errorToMessage:c=>c}),...a&&{abortSignal:a},fetch:this.config.fetch});return{stream:o.pipeThrough(new TransformStream({start(c){r.length>0&&c.enqueue({type:"stream-start",warnings:r})},transform(c,f){if(c.success){const h=c.value;if(h.type==="raw"&&!e.includeRawChunks)return;h.type==="response-metadata"&&h.timestamp&&typeof h.timestamp=="string"&&(h.timestamp=new Date(h.timestamp)),f.enqueue(h)}else f.error(c.error)}})),request:{body:t},response:{headers:u}}}catch(o){throw await rs(o,await Wo(s))}}isFilePart(e){return e&&typeof e=="object"&&"type"in e&&e.type==="file"}maybeEncodeFileParts(e){for(const t of e.prompt)for(const r of t.content)if(this.isFilePart(r)){const a=r;if(a.data instanceof Uint8Array){const s=Uint8Array.from(a.data),o=Buffer.from(s).toString("base64");a.data=new URL(`data:${a.mediaType||"application/octet-stream"};base64,${o}`)}}return e}getUrl(){return`${this.config.baseURL}/language-model`}getModelConfigHeaders(e,t){return{"ai-language-model-specification-version":"3","ai-language-model-id":e,"ai-language-model-streaming":String(t)}}},WB=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){var s;const o=await hr(this.config.headers());try{const{responseHeaders:u,value:c,rawValue:f}=await di({url:this.getUrl(),headers:ts(o,t??{},this.getModelConfigHeaders(),await hr(this.config.o11yHeaders)),body:{values:e,...a?{providerOptions:a}:{}},successfulResponseHandler:fi(QB),failedResponseHandler:Hs({errorSchema:Yi(),errorToMessage:h=>h}),...r&&{abortSignal:r},fetch:this.config.fetch});return{embeddings:c.embeddings,usage:(s=c.usage)!=null?s:void 0,providerMetadata:c.providerMetadata,response:{headers:u,body:f},warnings:[]}}catch(u){throw await rs(u,await Wo(o))}}getUrl(){return`${this.config.baseURL}/embedding-model`}getModelConfigHeaders(){return{"ai-embedding-model-specification-version":"3","ai-model-id":this.modelId}}},QB=Jt(()=>Zt(xe({embeddings:at(at(ot())),usage:xe({tokens:ot()}).nullish(),providerMetadata:ci(W(),ci(W(),ra())).optional()}))),eL=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v3",this.maxImagesPerCall=Number.MAX_SAFE_INTEGER}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:r,aspectRatio:a,seed:s,files:o,mask:u,providerOptions:c,headers:f,abortSignal:h}){var p;const v=await hr(this.config.headers());try{const{responseHeaders:b,value:y,rawValue:k}=await di({url:this.getUrl(),headers:ts(v,f??{},this.getModelConfigHeaders(),await hr(this.config.o11yHeaders)),body:{prompt:e,n:t,...r&&{size:r},...a&&{aspectRatio:a},...s&&{seed:s},...c&&{providerOptions:c},...o&&{files:o.map(_=>N5(_))},...u&&{mask:N5(u)}},successfulResponseHandler:fi(rL),failedResponseHandler:Hs({errorSchema:Yi(),errorToMessage:_=>_}),...h&&{abortSignal:h},fetch:this.config.fetch});return{images:y.images,warnings:(p=y.warnings)!=null?p:[],providerMetadata:y.providerMetadata,response:{timestamp:new Date,modelId:this.modelId,headers:b}}}catch(b){throw rs(b,await Wo(v))}}getUrl(){return`${this.config.baseURL}/image-model`}getModelConfigHeaders(){return{"ai-image-model-specification-version":"3","ai-model-id":this.modelId}}};function N5(e){return e.type==="file"&&e.data instanceof Uint8Array?{...e,data:Tu(e.data)}:e}var tL=xe({images:at(ra()).optional()}).catchall(ra()),rL=xe({images:at(W()),warnings:at(xe({type:Ve("other"),message:W()})).optional(),providerMetadata:ci(W(),tL).optional()}),aL=Jt(()=>Zt(xe({objective:W().describe("Natural-language description of the web research goal, including source or freshness guidance and broader context from the task. Maximum 5000 characters."),search_queries:at(W()).optional().describe("Optional search queries to supplement the objective. Maximum 200 characters per query."),mode:Rr(["one-shot","agentic"]).optional().describe('Mode preset: "one-shot" for comprehensive results with longer excerpts (default), "agentic" for concise, token-efficient results for multi-step workflows.'),max_results:ot().optional().describe("Maximum number of results to return (1-20). Defaults to 10 if not specified."),source_policy:xe({include_domains:at(W()).optional().describe("List of domains to include in search results."),exclude_domains:at(W()).optional().describe("List of domains to exclude from search results."),after_date:W().optional().describe("Only include results published after this date (ISO 8601 format).")}).optional().describe("Source policy for controlling which domains to include/exclude and freshness."),excerpts:xe({max_chars_per_result:ot().optional().describe("Maximum characters per result."),max_chars_total:ot().optional().describe("Maximum total characters across all results.")}).optional().describe("Excerpt configuration for controlling result length."),fetch_policy:xe({max_age_seconds:ot().optional().describe("Maximum age in seconds for cached content. Set to 0 to always fetch fresh content.")}).optional().describe("Fetch policy for controlling content freshness.")}))),nL=Jt(()=>Zt(mr([xe({searchId:W(),results:at(xe({url:W(),title:W(),excerpt:W(),publishDate:W().nullable().optional(),relevanceScore:ot().optional()}))}),xe({error:Rr(["api_error","rate_limit","timeout","invalid_input","configuration_error","unknown"]),statusCode:ot().optional(),message:W()})]))),iL=y1({id:"gateway.parallel_search",inputSchema:aL,outputSchema:nL}),sL=(e={})=>iL(e),oL=Jt(()=>Zt(xe({query:mr([W(),at(W())]).describe("Search query (string) or multiple queries (array of up to 5 strings). Multi-query searches return combined results from all queries."),max_results:ot().optional().describe("Maximum number of search results to return (1-20, default: 10)"),max_tokens_per_page:ot().optional().describe("Maximum number of tokens to extract per search result page (256-2048, default: 2048)"),max_tokens:ot().optional().describe("Maximum total tokens across all search results (default: 25000, max: 1000000)"),country:W().optional().describe("Two-letter ISO 3166-1 alpha-2 country code for regional search results (e.g., 'US', 'GB', 'FR')"),search_domain_filter:at(W()).optional().describe("List of domains to include or exclude from search results (max 20). To include: ['nature.com', 'science.org']. To exclude: ['-example.com', '-spam.net']"),search_language_filter:at(W()).optional().describe("List of ISO 639-1 language codes to filter results (max 10, lowercase). Examples: ['en', 'fr', 'de']"),search_after_date:W().optional().describe("Include only results published after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),search_before_date:W().optional().describe("Include only results published before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),last_updated_after_filter:W().optional().describe("Include only results last updated after this date. Format: 'MM/DD/YYYY' (e.g., '3/1/2025'). Cannot be used with search_recency_filter."),last_updated_before_filter:W().optional().describe("Include only results last updated before this date. Format: 'MM/DD/YYYY' (e.g., '3/15/2025'). Cannot be used with search_recency_filter."),search_recency_filter:Rr(["day","week","month","year"]).optional().describe("Filter results by relative time period. Cannot be used with search_after_date or search_before_date.")}))),lL=Jt(()=>Zt(mr([xe({results:at(xe({title:W(),url:W(),snippet:W(),date:W().optional(),lastUpdated:W().optional()})),id:W()}),xe({error:Rr(["api_error","rate_limit","timeout","invalid_input","unknown"]),statusCode:ot().optional(),message:W()})]))),uL=y1({id:"gateway.perplexity_search",inputSchema:oL,outputSchema:lL}),cL=(e={})=>uL(e),dL={parallelSearch:sL,perplexitySearch:cL};async function fL(){var e;return(e=W8.getContext().headers)==null?void 0:e["x-vercel-id"]}var hL="3.0.27",mL="0.0.1";function pL(e={}){var t,r;let a=null,s=null;const o=(t=e.metadataCacheRefreshMillis)!=null?t:1e3*60*5;let u=0;const c=(r=J8(e.baseURL))!=null?r:"https://ai-gateway.vercel.sh/v3/ai",f=async()=>{try{const _=await vL(e);return Ps({Authorization:`Bearer ${_.token}`,"ai-gateway-protocol-version":mL,[ox]:_.authMethod,...e.headers},`ai-sdk/gateway/${hL}`)}catch(_){throw b1.createContextualError({apiKeyProvided:!1,oidcTokenProvided:!1,statusCode:401,cause:_})}},h=()=>{const _=Nc({settingValue:void 0,environmentVariableName:"VERCEL_DEPLOYMENT_ID"}),T=Nc({settingValue:void 0,environmentVariableName:"VERCEL_ENV"}),R=Nc({settingValue:void 0,environmentVariableName:"VERCEL_REGION"});return async()=>{const O=await fL();return{..._&&{"ai-o11y-deployment-id":_},...T&&{"ai-o11y-environment":T},...R&&{"ai-o11y-region":R},...O&&{"ai-o11y-request-id":O}}}},p=_=>new JB(_,{provider:"gateway",baseURL:c,headers:f,fetch:e.fetch,o11yHeaders:h()}),v=async()=>{var _,T,R;const O=(R=(T=(_=e._internal)==null?void 0:_.currentDate)==null?void 0:T.call(_).getTime())!=null?R:Date.now();return(!a||O-u>o)&&(u=O,a=new M5({baseURL:c,headers:f,fetch:e.fetch}).getAvailableModels().then(M=>(s=M,M)).catch(async M=>{throw await rs(M,await Wo(await f()))})),s?Promise.resolve(s):a},b=async()=>new M5({baseURL:c,headers:f,fetch:e.fetch}).getCredits().catch(async _=>{throw await rs(_,await Wo(await f()))}),y=function(_){if(new.target)throw new Error("The Gateway Provider model function cannot be called with the new keyword.");return p(_)};y.specificationVersion="v3",y.getAvailableModels=v,y.getCredits=b,y.imageModel=_=>new eL(_,{provider:"gateway",baseURL:c,headers:f,fetch:e.fetch,o11yHeaders:h()}),y.languageModel=p;const k=_=>new WB(_,{provider:"gateway",baseURL:c,headers:f,fetch:e.fetch,o11yHeaders:h()});return y.embeddingModel=k,y.textEmbeddingModel=k,y.tools=dL,y}var gL=pL();async function vL(e){const t=Nc({settingValue:e.apiKey,environmentVariableName:"AI_GATEWAY_API_KEY"});return t?{token:t,authMethod:"api-key"}:{token:await W8.getVercelOidcToken(),authMethod:"oidc"}}var yL=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Ds="1.9.0",C5=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function bL(e){var t=new Set([e]),r=new Set,a=e.match(C5);if(!a)return function(){return!1};var s={major:+a[1],minor:+a[2],patch:+a[3],prerelease:a[4]};if(s.prerelease!=null)return function(f){return f===e};function o(c){return r.add(c),!1}function u(c){return t.add(c),!0}return function(f){if(t.has(f))return!0;if(r.has(f))return!1;var h=f.match(C5);if(!h)return o(f);var p={major:+h[1],minor:+h[2],patch:+h[3],prerelease:h[4]};return p.prerelease!=null||s.major!==p.major?o(f):s.major===0?s.minor===p.minor&&s.patch<=p.patch?u(f):o(f):s.minor<=p.minor?u(f):o(f)}}var xL=bL(Ds),wL=Ds.split(".")[0],Eu=Symbol.for("opentelemetry.js.api."+wL),Mu=yL;function x1(e,t,r,a){var s;a===void 0&&(a=!1);var o=Mu[Eu]=(s=Mu[Eu])!==null&&s!==void 0?s:{version:Ds};if(!a&&o[e]){var u=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(u.stack||u.message),!1}if(o.version!==Ds){var u=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+Ds);return r.error(u.stack||u.message),!1}return o[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+Ds+"."),!0}function Nu(e){var t,r,a=(t=Mu[Eu])===null||t===void 0?void 0:t.version;if(!(!a||!xL(a)))return(r=Mu[Eu])===null||r===void 0?void 0:r[e]}function w1(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Ds+".");var r=Mu[Eu];r&&delete r[e]}var SL=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),s,o=[],u;try{for(;(t===void 0||t-- >0)&&!(s=a.next()).done;)o.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(u)throw u.error}}return o},_L=function(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,o;a<s;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},zL=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return su("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return su("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return su("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return su("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return su("verbose",this._namespace,t)},e}();function su(e,t,r){var a=Nu("diag");if(a)return r.unshift(t),a[e].apply(a,_L([],SL(r),!1))}var Ta;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ta||(Ta={}));function kL(e,t){e<Ta.NONE?e=Ta.NONE:e>Ta.ALL&&(e=Ta.ALL),t=t||{};function r(a,s){var o=t[a];return typeof o=="function"&&e>=s?o.bind(t):function(){}}return{error:r("error",Ta.ERROR),warn:r("warn",Ta.WARN),info:r("info",Ta.INFO),debug:r("debug",Ta.DEBUG),verbose:r("verbose",Ta.VERBOSE)}}var TL=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),s,o=[],u;try{for(;(t===void 0||t-- >0)&&!(s=a.next()).done;)o.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(u)throw u.error}}return o},AL=function(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,o;a<s;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},EL="diag",od=function(){function e(){function t(s){return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];var c=Nu("diag");if(c)return c[s].apply(c,AL([],TL(o),!1))}}var r=this,a=function(s,o){var u,c,f;if(o===void 0&&(o={logLevel:Ta.INFO}),s===r){var h=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((u=h.stack)!==null&&u!==void 0?u:h.message),!1}typeof o=="number"&&(o={logLevel:o});var p=Nu("diag"),v=kL((c=o.logLevel)!==null&&c!==void 0?c:Ta.INFO,s);if(p&&!o.suppressOverrideMessage){var b=(f=new Error().stack)!==null&&f!==void 0?f:"<failed to generate stacktrace>";p.warn("Current logger will be overwritten from "+b),v.warn("Current logger will overwrite one already registered from "+b)}return x1("diag",v,r,!0)};r.setLogger=a,r.disable=function(){w1(EL,r)},r.createComponentLogger=function(s){return new zL(s)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function ML(e){return Symbol.for(e)}var NL=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(a){return r._currentContext.get(a)},r.setValue=function(a,s){var o=new e(r._currentContext);return o._currentContext.set(a,s),o},r.deleteValue=function(a){var s=new e(r._currentContext);return s._currentContext.delete(a),s}}return e}(),CL=new NL,OL=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),s,o=[],u;try{for(;(t===void 0||t-- >0)&&!(s=a.next()).done;)o.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(u)throw u.error}}return o},RL=function(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,o;a<s;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},IL=function(){function e(){}return e.prototype.active=function(){return CL},e.prototype.with=function(t,r,a){for(var s=[],o=3;o<arguments.length;o++)s[o-3]=arguments[o];return r.call.apply(r,RL([a],OL(s),!1))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),DL=function(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var a=r.call(e),s,o=[],u;try{for(;(t===void 0||t-- >0)&&!(s=a.next()).done;)o.push(s.value)}catch(c){u={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(u)throw u.error}}return o},jL=function(e,t,r){if(r||arguments.length===2)for(var a=0,s=t.length,o;a<s;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},Mm="context",$L=new IL,S1=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return x1(Mm,t,od.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,a){for(var s,o=[],u=3;u<arguments.length;u++)o[u-3]=arguments[u];return(s=this._getContextManager()).with.apply(s,jL([t,r,a],DL(o),!1))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Nu(Mm)||$L},e.prototype.disable=function(){this._getContextManager().disable(),w1(Mm,od.instance())},e}(),vp;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(vp||(vp={}));var lx="0000000000000000",ux="00000000000000000000000000000000",BL={traceId:ux,spanId:lx,traceFlags:vp.NONE},vu=function(){function e(t){t===void 0&&(t=BL),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}(),_1=ML("OpenTelemetry Context Key SPAN");function z1(e){return e.getValue(_1)||void 0}function LL(){return z1(S1.getInstance().active())}function k1(e,t){return e.setValue(_1,t)}function UL(e){return e.deleteValue(_1)}function qL(e,t){return k1(e,new vu(t))}function cx(e){var t;return(t=z1(e))===null||t===void 0?void 0:t.spanContext()}var PL=/^([0-9a-f]{32})$/i,HL=/^[0-9a-f]{16}$/i;function ZL(e){return PL.test(e)&&e!==ux}function GL(e){return HL.test(e)&&e!==lx}function dx(e){return ZL(e.traceId)&&GL(e.spanId)}function VL(e){return new vu(e)}var Nm=S1.getInstance(),fx=function(){function e(){}return e.prototype.startSpan=function(t,r,a){a===void 0&&(a=Nm.active());var s=!!(r!=null&&r.root);if(s)return new vu;var o=a&&cx(a);return FL(o)&&dx(o)?new vu(o):new vu},e.prototype.startActiveSpan=function(t,r,a,s){var o,u,c;if(!(arguments.length<2)){arguments.length===2?c=r:arguments.length===3?(o=r,c=a):(o=r,u=a,c=s);var f=u??Nm.active(),h=this.startSpan(t,o,f),p=k1(f,h);return Nm.with(p,c,void 0,h)}},e}();function FL(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var YL=new fx,XL=function(){function e(t,r,a,s){this._provider=t,this.name=r,this.version=a,this.options=s}return e.prototype.startSpan=function(t,r,a){return this._getTracer().startSpan(t,r,a)},e.prototype.startActiveSpan=function(t,r,a,s){var o=this._getTracer();return Reflect.apply(o.startActiveSpan,o,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):YL},e}(),KL=function(){function e(){}return e.prototype.getTracer=function(t,r,a){return new fx},e}(),JL=new KL,O5=function(){function e(){}return e.prototype.getTracer=function(t,r,a){var s;return(s=this.getDelegateTracer(t,r,a))!==null&&s!==void 0?s:new XL(this,t,r,a)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:JL},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r,a){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,r,a)},e}(),ld;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(ld||(ld={}));var R5=S1.getInstance(),Cm="trace",WL=function(){function e(){this._proxyTracerProvider=new O5,this.wrapSpanContext=VL,this.isSpanContextValid=dx,this.deleteSpan=UL,this.getSpan=z1,this.getActiveSpan=LL,this.getSpanContext=cx,this.setSpan=k1,this.setSpanContext=qL}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=x1(Cm,this._proxyTracerProvider,od.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Nu(Cm)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){w1(Cm,od.instance()),this._proxyTracerProvider=new O5},e}(),QL=WL.getInstance(),eU=Object.defineProperty,tU=(e,t)=>{for(var r in t)eU(e,r,{get:t[r],enumerable:!0})},hx="AI_InvalidArgumentError",mx=`vercel.ai.error.${hx}`,rU=Symbol.for(mx),px,Sn=class extends Qe{constructor({parameter:e,value:t,message:r}){super({name:hx,message:`Invalid argument for parameter ${e}: ${r}`}),this[px]=!0,this.parameter=e,this.value=t}static isInstance(e){return Qe.hasMarker(e,mx)}};px=rU;var gx="AI_InvalidToolApprovalError",vx=`vercel.ai.error.${gx}`,aU=Symbol.for(vx),yx,nU=class extends Qe{constructor({approvalId:e}){super({name:gx,message:`Tool approval response references unknown approvalId: "${e}". No matching tool-approval-request found in message history.`}),this[yx]=!0,this.approvalId=e}static isInstance(e){return Qe.hasMarker(e,vx)}};yx=aU;var bx="AI_InvalidToolInputError",xx=`vercel.ai.error.${bx}`,iU=Symbol.for(xx),wx,T1=class extends Qe{constructor({toolInput:e,toolName:t,cause:r,message:a=`Invalid input for tool ${t}: ${Ls(r)}`}){super({name:bx,message:a,cause:r}),this[wx]=!0,this.toolInput=e,this.toolName=t}static isInstance(e){return Qe.hasMarker(e,xx)}};wx=iU;var Sx="AI_ToolCallNotFoundForApprovalError",_x=`vercel.ai.error.${Sx}`,sU=Symbol.for(_x),zx,kx=class extends Qe{constructor({toolCallId:e,approvalId:t}){super({name:Sx,message:`Tool call "${e}" not found for approval request "${t}".`}),this[zx]=!0,this.toolCallId=e,this.approvalId=t}static isInstance(e){return Qe.hasMarker(e,_x)}};zx=sU;var Tx="AI_MissingToolResultsError",Ax=`vercel.ai.error.${Tx}`,oU=Symbol.for(Ax),Ex,I5=class extends Qe{constructor({toolCallIds:e}){super({name:Tx,message:`Tool result${e.length>1?"s are":" is"} missing for tool call${e.length>1?"s":""} ${e.join(", ")}.`}),this[Ex]=!0,this.toolCallIds=e}static isInstance(e){return Qe.hasMarker(e,Ax)}};Ex=oU;var Mx="AI_NoObjectGeneratedError",Nx=`vercel.ai.error.${Mx}`,lU=Symbol.for(Nx),Cx,Xi=class extends Qe{constructor({message:e="No object generated.",cause:t,text:r,response:a,usage:s,finishReason:o}){super({name:Mx,message:e,cause:t}),this[Cx]=!0,this.text=r,this.response=a,this.usage=s,this.finishReason=o}static isInstance(e){return Qe.hasMarker(e,Nx)}};Cx=lU;var Ox="AI_NoOutputGeneratedError",Rx=`vercel.ai.error.${Ox}`,uU=Symbol.for(Rx),Ix,cU=class extends Qe{constructor({message:e="No output generated.",cause:t}={}){super({name:Ox,message:e,cause:t}),this[Ix]=!0}static isInstance(e){return Qe.hasMarker(e,Rx)}};Ix=uU;var Dx="AI_NoSuchToolError",jx=`vercel.ai.error.${Dx}`,dU=Symbol.for(jx),$x,yp=class extends Qe{constructor({toolName:e,availableTools:t=void 0,message:r=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:Dx,message:r}),this[$x]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Qe.hasMarker(e,jx)}};$x=dU;var Bx="AI_ToolCallRepairError",Lx=`vercel.ai.error.${Bx}`,fU=Symbol.for(Lx),Ux,hU=class extends Qe{constructor({cause:e,originalError:t,message:r=`Error repairing tool call: ${Ls(e)}`}){super({name:Bx,message:r,cause:e}),this[Ux]=!0,this.originalError=t}static isInstance(e){return Qe.hasMarker(e,Lx)}};Ux=fU;var mU=class extends Qe{constructor(e){super({name:"AI_UnsupportedModelVersionError",message:`Unsupported model version ${e.version} for provider "${e.provider}" and model "${e.modelId}". AI SDK 5 only supports models that implement specification version "v2".`}),this.version=e.version,this.provider=e.provider,this.modelId=e.modelId}},qx="AI_UIMessageStreamError",Px=`vercel.ai.error.${qx}`,pU=Symbol.for(Px),Hx,jo=class extends Qe{constructor({chunkType:e,chunkId:t,message:r}){super({name:qx,message:r}),this[Hx]=!0,this.chunkType=e,this.chunkId=t}static isInstance(e){return Qe.hasMarker(e,Px)}};Hx=pU;var Zx="AI_InvalidMessageRoleError",Gx=`vercel.ai.error.${Zx}`,gU=Symbol.for(Gx),Vx,vU=class extends Qe{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:Zx,message:t}),this[Vx]=!0,this.role=e}static isInstance(e){return Qe.hasMarker(e,Gx)}};Vx=gU;var Fx="AI_MessageConversionError",Yx=`vercel.ai.error.${Fx}`,yU=Symbol.for(Yx),Xx,bU=class extends Qe{constructor({originalMessage:e,message:t}){super({name:Fx,message:t}),this[Xx]=!0,this.originalMessage=e}static isInstance(e){return Qe.hasMarker(e,Yx)}};Xx=yU;var Kx="AI_RetryError",Jx=`vercel.ai.error.${Kx}`,xU=Symbol.for(Jx),Wx,D5=class extends Qe{constructor({message:e,reason:t,errors:r}){super({name:Kx,message:e}),this[Wx]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return Qe.hasMarker(e,Jx)}};Wx=xU;function wU({warning:e,provider:t,model:r}){const a=`AI SDK Warning (${t} / ${r}):`;switch(e.type){case"unsupported":{let s=`${a} The feature "${e.feature}" is not supported.`;return e.details&&(s+=` ${e.details}`),s}case"compatibility":{let s=`${a} The feature "${e.feature}" is used in a compatibility mode.`;return e.details&&(s+=` ${e.details}`),s}case"other":return`${a} ${e.message}`;default:return`${a} ${JSON.stringify(e,null,2)}`}}var SU="AI SDK Warning System: To turn off warning logging, set the AI_SDK_LOG_WARNINGS global to false.",j5=!1,Qx=e=>{if(e.warnings.length===0)return;const t=globalThis.AI_SDK_LOG_WARNINGS;if(t!==!1){if(typeof t=="function"){t(e);return}j5||(j5=!0,console.info(SU));for(const r of e.warnings)console.warn(wU({warning:r,provider:e.provider,model:e.model}))}};function _U({provider:e,modelId:t}){Qx({warnings:[{type:"compatibility",feature:"specificationVersion",details:"Using v2 specification compatibility mode. Some features may not be available."}],provider:e,model:t})}function zU(e){return e.specificationVersion==="v3"?e:(_U({provider:e.provider,modelId:e.modelId}),new Proxy(e,{get(t,r){switch(r){case"specificationVersion":return"v3";case"doGenerate":return async(...a)=>{const s=await t.doGenerate(...a);return{...s,finishReason:ew(s.finishReason),usage:tw(s.usage)}};case"doStream":return async(...a)=>{const s=await t.doStream(...a);return{...s,stream:kU(s.stream)}};default:return t[r]}}}))}function kU(e){return e.pipeThrough(new TransformStream({transform(t,r){switch(t.type){case"finish":r.enqueue({...t,finishReason:ew(t.finishReason),usage:tw(t.usage)});break;default:r.enqueue(t);break}}}))}function ew(e){return{unified:e==="unknown"?"other":e,raw:void 0}}function tw(e){return{inputTokens:{total:e.inputTokens,noCache:void 0,cacheRead:e.cachedInputTokens,cacheWrite:void 0},outputTokens:{total:e.outputTokens,text:void 0,reasoning:e.reasoningTokens}}}function rw(e){if(typeof e!="string"){if(e.specificationVersion!=="v3"&&e.specificationVersion!=="v2"){const t=e;throw new mU({version:t.specificationVersion,provider:t.provider,modelId:t.modelId})}return zU(e)}return TU().languageModel(e)}function TU(){var e;return(e=globalThis.AI_SDK_DEFAULT_PROVIDER)!=null?e:gL}function aw(e){if(e!=null)return typeof e=="number"?e:e.totalMs}function AU(e){if(!(e==null||typeof e=="number"))return e.stepMs}function EU(e){if(!(e==null||typeof e=="number"))return e.chunkMs}var MU=[{mediaType:"image/gif",bytesPrefix:[71,73,70]},{mediaType:"image/png",bytesPrefix:[137,80,78,71]},{mediaType:"image/jpeg",bytesPrefix:[255,216]},{mediaType:"image/webp",bytesPrefix:[82,73,70,70,null,null,null,null,87,69,66,80]},{mediaType:"image/bmp",bytesPrefix:[66,77]},{mediaType:"image/tiff",bytesPrefix:[73,73,42,0]},{mediaType:"image/tiff",bytesPrefix:[77,77,0,42]},{mediaType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102]},{mediaType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99]}],NU=e=>{const t=typeof e=="string"?p1(e):e,r=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(r+10)};function CU(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?NU(e):e}function OU({data:e,signatures:t}){const r=CU(e),a=typeof r=="string"?p1(r.substring(0,Math.min(r.length,24))):r;for(const s of t)if(a.length>=s.bytesPrefix.length&&s.bytesPrefix.every((o,u)=>o===null||a[u]===o))return s.mediaType}var bp="6.0.59",RU=async({url:e})=>{var t;const r=e.toString();try{const a=await fetch(r,{headers:Ps({},`ai-sdk/${bp}`,Au())});if(!a.ok)throw new _m({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mediaType:(t=a.headers.get("content-type"))!=null?t:void 0}}catch(a){throw _m.isInstance(a)?a:new _m({url:r,cause:a})}},IU=(e=RU)=>t=>Promise.all(t.map(async r=>r.isUrlSupportedByModel?null:e(r)));function DU(e){try{const[t,r]=e.split(",");return{mediaType:t.split(";")[0].split(":")[1],base64Content:r}}catch{return{mediaType:void 0,base64Content:void 0}}}var nw=mr([W(),nd(Uint8Array),nd(ArrayBuffer),$8(e=>{var t,r;return(r=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?r:!1},{message:"Must be a Buffer"})]);function iw(e){if(e instanceof Uint8Array)return{data:e,mediaType:void 0};if(e instanceof ArrayBuffer)return{data:new Uint8Array(e),mediaType:void 0};if(typeof e=="string")try{e=new URL(e)}catch{}if(e instanceof URL&&e.protocol==="data:"){const{mediaType:t,base64Content:r}=DU(e.toString());if(t==null||r==null)throw new Qe({name:"InvalidDataContentError",message:`Invalid data URL format in content ${e.toString()}`});return{data:r,mediaType:t}}return{data:e,mediaType:void 0}}function jU(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Tu(new Uint8Array(e)):Tu(e)}function ud(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function $U({prompt:e,supportedUrls:t,download:r=IU()}){const a=await LU(e.messages,r,t),s=new Map;for(const h of e.messages)if(h.role==="assistant"&&Array.isArray(h.content))for(const p of h.content)p.type==="tool-approval-request"&&"approvalId"in p&&"toolCallId"in p&&s.set(p.approvalId,p.toolCallId);const o=new Set;for(const h of e.messages)if(h.role==="tool"){for(const p of h.content)if(p.type==="tool-approval-response"){const v=s.get(p.approvalId);v&&o.add(v)}}const u=[...e.system!=null?typeof e.system=="string"?[{role:"system",content:e.system}]:ud(e.system).map(h=>({role:"system",content:h.content,providerOptions:h.providerOptions})):[],...e.messages.map(h=>BU({message:h,downloadedAssets:a}))],c=[];for(const h of u){if(h.role!=="tool"){c.push(h);continue}const p=c.at(-1);(p==null?void 0:p.role)==="tool"?p.content.push(...h.content):c.push(h)}const f=new Set;for(const h of c)switch(h.role){case"assistant":{for(const p of h.content)p.type==="tool-call"&&!p.providerExecuted&&f.add(p.toolCallId);break}case"tool":{for(const p of h.content)p.type==="tool-result"&&f.delete(p.toolCallId);break}case"user":case"system":for(const p of o)f.delete(p);if(f.size>0)throw new I5({toolCallIds:Array.from(f)});break}for(const h of o)f.delete(h);if(f.size>0)throw new I5({toolCallIds:Array.from(f)});return c.filter(h=>h.role!=="tool"||h.content.length>0)}function BU({message:e,downloadedAssets:t}){const r=e.role;switch(r){case"system":return{role:"system",content:e.content,providerOptions:e.providerOptions};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"user",content:e.content.map(a=>UU(a,t)).filter(a=>a.type!=="text"||a.text!==""),providerOptions:e.providerOptions};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerOptions:e.providerOptions}:{role:"assistant",content:e.content.filter(a=>a.type!=="text"||a.text!==""||a.providerOptions!=null).filter(a=>a.type!=="tool-approval-request").map(a=>{const s=a.providerOptions;switch(a.type){case"file":{const{data:o,mediaType:u}=iw(a.data);return{type:"file",data:o,filename:a.filename,mediaType:u??a.mediaType,providerOptions:s}}case"reasoning":return{type:"reasoning",text:a.text,providerOptions:s};case"text":return{type:"text",text:a.text,providerOptions:s};case"tool-call":return{type:"tool-call",toolCallId:a.toolCallId,toolName:a.toolName,input:a.input,providerExecuted:a.providerExecuted,providerOptions:s};case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:$5(a.output),providerOptions:s}}}),providerOptions:e.providerOptions};case"tool":return{role:"tool",content:e.content.filter(a=>a.type!=="tool-approval-response"||a.providerExecuted).map(a=>{switch(a.type){case"tool-result":return{type:"tool-result",toolCallId:a.toolCallId,toolName:a.toolName,output:$5(a.output),providerOptions:a.providerOptions};case"tool-approval-response":return{type:"tool-approval-response",approvalId:a.approvalId,approved:a.approved,reason:a.reason}}}),providerOptions:e.providerOptions};default:{const a=r;throw new vU({role:a})}}}async function LU(e,t,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").map(o=>{var u;const c=(u=o.mediaType)!=null?u:o.type==="image"?"image/*":void 0;let f=o.type==="image"?o.image:o.data;if(typeof f=="string")try{f=new URL(f)}catch{}return{mediaType:c,data:f}}).filter(o=>o.data instanceof URL).map(o=>({url:o.data,isUrlSupportedByModel:o.mediaType!=null&&C$({url:o.data.toString(),mediaType:o.mediaType,supportedUrls:r})})),s=await t(a);return Object.fromEntries(s.map((o,u)=>o==null?null:[a[u].url.toString(),{data:o.data,mediaType:o.mediaType}]).filter(o=>o!=null))}function UU(e,t){var r;if(e.type==="text")return{type:"text",text:e.text,providerOptions:e.providerOptions};let a;const s=e.type;switch(s){case"image":a=e.image;break;case"file":a=e.data;break;default:throw new Error(`Unsupported part type: ${s}`)}const{data:o,mediaType:u}=iw(a);let c=u??e.mediaType,f=o;if(f instanceof URL){const h=t[f.toString()];h&&(f=h.data,c??(c=h.mediaType))}switch(s){case"image":return(f instanceof Uint8Array||typeof f=="string")&&(c=(r=OU({data:f,signatures:MU}))!=null?r:c),{type:"file",mediaType:c??"image/*",filename:void 0,data:f,providerOptions:e.providerOptions};case"file":{if(c==null)throw new Error("Media type is missing for file part");return{type:"file",mediaType:c,filename:e.filename,data:f,providerOptions:e.providerOptions}}}}function $5(e){return e.type!=="content"?e:{type:"content",value:e.value.map(t=>t.type!=="media"?t:t.mediaType.startsWith("image/")?{type:"image-data",data:t.data,mediaType:t.mediaType}:{type:"file-data",data:t.data,mediaType:t.mediaType})}}async function Yo({toolCallId:e,input:t,output:r,tool:a,errorMode:s}){return s==="text"?{type:"error-text",value:Ls(r)}:s==="json"?{type:"error-json",value:B5(r)}:a!=null&&a.toModelOutput?await a.toModelOutput({toolCallId:e,input:t,output:r}):typeof r=="string"?{type:"text",value:r}:{type:"json",value:B5(r)}}function B5(e){return e===void 0?null:e}function qU({maxOutputTokens:e,temperature:t,topP:r,topK:a,presencePenalty:s,frequencyPenalty:o,seed:u,stopSequences:c}){if(e!=null){if(!Number.isInteger(e))throw new Sn({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be an integer"});if(e<1)throw new Sn({parameter:"maxOutputTokens",value:e,message:"maxOutputTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new Sn({parameter:"temperature",value:t,message:"temperature must be a number"});if(r!=null&&typeof r!="number")throw new Sn({parameter:"topP",value:r,message:"topP must be a number"});if(a!=null&&typeof a!="number")throw new Sn({parameter:"topK",value:a,message:"topK must be a number"});if(s!=null&&typeof s!="number")throw new Sn({parameter:"presencePenalty",value:s,message:"presencePenalty must be a number"});if(o!=null&&typeof o!="number")throw new Sn({parameter:"frequencyPenalty",value:o,message:"frequencyPenalty must be a number"});if(u!=null&&!Number.isInteger(u))throw new Sn({parameter:"seed",value:u,message:"seed must be an integer"});return{maxOutputTokens:e,temperature:t,topP:r,topK:a,presencePenalty:s,frequencyPenalty:o,stopSequences:c,seed:u}}function PU(e){return e!=null&&Object.keys(e).length>0}async function HU({tools:e,toolChoice:t,activeTools:r}){if(!PU(e))return{tools:void 0,toolChoice:void 0};const a=r!=null?Object.entries(e).filter(([o])=>r.includes(o)):Object.entries(e),s=[];for(const[o,u]of a){const c=u.type;switch(c){case void 0:case"dynamic":case"function":s.push({type:"function",name:o,description:u.description,inputSchema:await sl(u.inputSchema).jsonSchema,...u.inputExamples!=null?{inputExamples:u.inputExamples}:{},providerOptions:u.providerOptions,...u.strict!=null?{strict:u.strict}:{}});break;case"provider":s.push({type:"provider",name:o,id:u.id,args:u.args});break;default:{const f=c;throw new Error(`Unsupported tool type: ${f}`)}}}return{tools:s,toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}}var Cu=g$(()=>mr([Hj(),W(),ot(),kr(),ci(W(),Cu.optional()),at(Cu)])),xt=ci(W(),ci(W(),Cu.optional())),sw=xe({type:Ve("text"),text:W(),providerOptions:xt.optional()}),ZU=xe({type:Ve("image"),image:mr([nw,nd(URL)]),mediaType:W().optional(),providerOptions:xt.optional()}),ow=xe({type:Ve("file"),data:mr([nw,nd(URL)]),filename:W().optional(),mediaType:W(),providerOptions:xt.optional()}),GU=xe({type:Ve("reasoning"),text:W(),providerOptions:xt.optional()}),VU=xe({type:Ve("tool-call"),toolCallId:W(),toolName:W(),input:ra(),providerOptions:xt.optional(),providerExecuted:kr().optional()}),FU=Xj("type",[xe({type:Ve("text"),value:W(),providerOptions:xt.optional()}),xe({type:Ve("json"),value:Cu,providerOptions:xt.optional()}),xe({type:Ve("execution-denied"),reason:W().optional(),providerOptions:xt.optional()}),xe({type:Ve("error-text"),value:W(),providerOptions:xt.optional()}),xe({type:Ve("error-json"),value:Cu,providerOptions:xt.optional()}),xe({type:Ve("content"),value:at(mr([xe({type:Ve("text"),text:W(),providerOptions:xt.optional()}),xe({type:Ve("media"),data:W(),mediaType:W()}),xe({type:Ve("file-data"),data:W(),mediaType:W(),filename:W().optional(),providerOptions:xt.optional()}),xe({type:Ve("file-url"),url:W(),providerOptions:xt.optional()}),xe({type:Ve("file-id"),fileId:mr([W(),ci(W(),W())]),providerOptions:xt.optional()}),xe({type:Ve("image-data"),data:W(),mediaType:W(),providerOptions:xt.optional()}),xe({type:Ve("image-url"),url:W(),providerOptions:xt.optional()}),xe({type:Ve("image-file-id"),fileId:mr([W(),ci(W(),W())]),providerOptions:xt.optional()}),xe({type:Ve("custom"),providerOptions:xt.optional()})]))})]),lw=xe({type:Ve("tool-result"),toolCallId:W(),toolName:W(),output:FU,providerOptions:xt.optional()}),YU=xe({type:Ve("tool-approval-request"),approvalId:W(),toolCallId:W()}),XU=xe({type:Ve("tool-approval-response"),approvalId:W(),approved:kr(),reason:W().optional()}),KU=xe({role:Ve("system"),content:W(),providerOptions:xt.optional()}),JU=xe({role:Ve("user"),content:mr([W(),at(mr([sw,ZU,ow]))]),providerOptions:xt.optional()}),WU=xe({role:Ve("assistant"),content:mr([W(),at(mr([sw,ow,GU,VU,lw,YU]))]),providerOptions:xt.optional()}),QU=xe({role:Ve("tool"),content:at(mr([lw,XU])),providerOptions:xt.optional()}),eq=mr([KU,JU,WU,QU]);async function tq(e){if(e.prompt==null&&e.messages==null)throw new Do({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new Do({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string"&&!ud(e.system).every(a=>typeof a=="object"&&a!==null&&"role"in a&&a.role==="system"))throw new Do({prompt:e,message:"system must be a string, SystemModelMessage, or array of SystemModelMessage"});let t;if(e.prompt!=null&&typeof e.prompt=="string")t=[{role:"user",content:e.prompt}];else if(e.prompt!=null&&Array.isArray(e.prompt))t=e.prompt;else if(e.messages!=null)t=e.messages;else throw new Do({prompt:e,message:"prompt or messages must be defined"});if(t.length===0)throw new Do({prompt:e,message:"messages must not be empty"});const r=await fn({value:t,schema:at(eq)});if(!r.success)throw new Do({prompt:e,message:"The messages do not match the ModelMessage[] schema.",cause:r.error});return{messages:t,system:e.system}}function rq(e){if(!b1.isInstance(e))return e;const t=(process==null?void 0:"production")==="production",r="https://ai-sdk.dev/unauthenticated-ai-gateway";return t?new Qe({name:"GatewayError",message:`Unauthenticated. Configure AI_GATEWAY_API_KEY or use a provider module. Learn more: ${r}`}):Object.assign(new Error(`\x1B[1m\x1B[31mUnauthenticated request to AI Gateway.\x1B[0m

To authenticate, set the \x1B[33mAI_GATEWAY_API_KEY\x1B[0m environment variable with your API key.

Alternatively, you can use a provider module instead of the AI Gateway.

Learn more: \x1B[34m${r}\x1B[0m

`),{name:"GatewayAuthenticationError"})}function xp({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function aq({model:e,settings:t,telemetry:r,headers:a}){var s;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((o,[u,c])=>{if(u==="timeout"){const f=aw(c);f!=null&&(o[`ai.settings.${u}`]=f)}else o[`ai.settings.${u}`]=c;return o},{}),...Object.entries((s=r==null?void 0:r.metadata)!=null?s:{}).reduce((o,[u,c])=>(o[`ai.telemetry.metadata.${u}`]=c,o),{}),...Object.entries(a??{}).reduce((o,[u,c])=>(c!==void 0&&(o[`ai.request.headers.${u}`]=c),o),{})}}var nq={startSpan(){return zc},startActiveSpan(e,t,r,a){if(typeof t=="function")return t(zc);if(typeof r=="function")return r(zc);if(typeof a=="function")return a(zc)}},zc={spanContext(){return iq},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},iq={traceId:"",spanId:"",traceFlags:0};function sq({isEnabled:e=!1,tracer:t}={}){return e?t||QL.getTracer("ai"):nq}async function wp({name:e,tracer:t,attributes:r,fn:a,endWhenDone:s=!0}){return t.startActiveSpan(e,{attributes:await r},async o=>{const u=R5.active();try{const c=await R5.with(u,()=>a(o));return s&&o.end(),c}catch(c){try{uw(o,c)}finally{o.end()}throw c}})}function uw(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:ld.ERROR,message:t.message})):e.setStatus({code:ld.ERROR})}async function Zo({telemetry:e,attributes:t}){if((e==null?void 0:e.isEnabled)!==!0)return{};const r={};for(const[a,s]of Object.entries(t))if(s!=null){if(typeof s=="object"&&"input"in s&&typeof s.input=="function"){if((e==null?void 0:e.recordInputs)===!1)continue;const o=await s.input();o!=null&&(r[a]=o);continue}if(typeof s=="object"&&"output"in s&&typeof s.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)continue;const o=await s.output();o!=null&&(r[a]=o);continue}r[a]=s}return r}function oq(e){return JSON.stringify(e.map(t=>({...t,content:typeof t.content=="string"?t.content:t.content.map(r=>r.type==="file"?{...r,data:r.data instanceof Uint8Array?jU(r.data):r.data}:r)})))}function lq(e){return{inputTokens:e.inputTokens.total,inputTokenDetails:{noCacheTokens:e.inputTokens.noCache,cacheReadTokens:e.inputTokens.cacheRead,cacheWriteTokens:e.inputTokens.cacheWrite},outputTokens:e.outputTokens.total,outputTokenDetails:{textTokens:e.outputTokens.text,reasoningTokens:e.outputTokens.reasoning},totalTokens:cn(e.inputTokens.total,e.outputTokens.total),raw:e.raw,reasoningTokens:e.outputTokens.reasoning,cachedInputTokens:e.inputTokens.cacheRead}}function Om(){return{inputTokens:void 0,inputTokenDetails:{noCacheTokens:void 0,cacheReadTokens:void 0,cacheWriteTokens:void 0},outputTokens:void 0,outputTokenDetails:{textTokens:void 0,reasoningTokens:void 0},totalTokens:void 0,raw:void 0}}function uq(e,t){var r,a,s,o,u,c,f,h,p,v;return{inputTokens:cn(e.inputTokens,t.inputTokens),inputTokenDetails:{noCacheTokens:cn((r=e.inputTokenDetails)==null?void 0:r.noCacheTokens,(a=t.inputTokenDetails)==null?void 0:a.noCacheTokens),cacheReadTokens:cn((s=e.inputTokenDetails)==null?void 0:s.cacheReadTokens,(o=t.inputTokenDetails)==null?void 0:o.cacheReadTokens),cacheWriteTokens:cn((u=e.inputTokenDetails)==null?void 0:u.cacheWriteTokens,(c=t.inputTokenDetails)==null?void 0:c.cacheWriteTokens)},outputTokens:cn(e.outputTokens,t.outputTokens),outputTokenDetails:{textTokens:cn((f=e.outputTokenDetails)==null?void 0:f.textTokens,(h=t.outputTokenDetails)==null?void 0:h.textTokens),reasoningTokens:cn((p=e.outputTokenDetails)==null?void 0:p.reasoningTokens,(v=t.outputTokenDetails)==null?void 0:v.reasoningTokens)},totalTokens:cn(e.totalTokens,t.totalTokens),reasoningTokens:cn(e.reasoningTokens,t.reasoningTokens),cachedInputTokens:cn(e.cachedInputTokens,t.cachedInputTokens)}}function cn(e,t){return e==null&&t==null?void 0:(e??0)+(t??0)}function A1(e,t){if(e===void 0&&t===void 0)return;if(e===void 0)return t;if(t===void 0)return e;const r={...e};for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)){const s=t[a];if(s===void 0)continue;const o=a in e?e[a]:void 0,u=s!==null&&typeof s=="object"&&!Array.isArray(s)&&!(s instanceof Date)&&!(s instanceof RegExp),c=o!=null&&typeof o=="object"&&!Array.isArray(o)&&!(o instanceof Date)&&!(o instanceof RegExp);u&&c?r[a]=A1(o,s):r[a]=s}return r}function cq({error:e,exponentialBackoffDelay:t}){const r=e.responseHeaders;if(!r)return t;let a;const s=r["retry-after-ms"];if(s){const u=parseFloat(s);Number.isNaN(u)||(a=u)}const o=r["retry-after"];if(o&&a===void 0){const u=parseFloat(o);Number.isNaN(u)?a=Date.parse(o)-Date.now():a=u*1e3}return a!=null&&!Number.isNaN(a)&&0<=a&&(a<60*1e3||a<t)?a:t}var dq=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:r=2,abortSignal:a}={})=>async s=>cw(s,{maxRetries:e,delayInMs:t,backoffFactor:r,abortSignal:a});async function cw(e,{maxRetries:t,delayInMs:r,backoffFactor:a,abortSignal:s},o=[]){try{return await e()}catch(u){if(qs(u)||t===0)throw u;const c=q8(u),f=[...o,u],h=f.length;if(h>t)throw new D5({message:`Failed after ${h} attempts. Last error: ${c}`,reason:"maxRetriesExceeded",errors:f});if(u instanceof Error&&Xr.isInstance(u)&&u.isRetryable===!0&&h<=t)return await S$(cq({error:u,exponentialBackoffDelay:r}),{abortSignal:s}),cw(e,{maxRetries:t,delayInMs:a*r,backoffFactor:a,abortSignal:s},f);throw h===1?u:new D5({message:`Failed after ${h} attempts with non-retryable error: '${c}'`,reason:"errorNotRetryable",errors:f})}}function fq({maxRetries:e,abortSignal:t}){if(e!=null){if(!Number.isInteger(e))throw new Sn({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new Sn({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const r=e??2;return{maxRetries:r,retry:dq({maxRetries:r,abortSignal:t})}}function hq({messages:e}){const t=e.at(-1);if((t==null?void 0:t.role)!="tool")return{approvedToolApprovals:[],deniedToolApprovals:[]};const r={};for(const f of e)if(f.role==="assistant"&&typeof f.content!="string"){const h=f.content;for(const p of h)p.type==="tool-call"&&(r[p.toolCallId]=p)}const a={};for(const f of e)if(f.role==="assistant"&&typeof f.content!="string"){const h=f.content;for(const p of h)p.type==="tool-approval-request"&&(a[p.approvalId]=p)}const s={};for(const f of t.content)f.type==="tool-result"&&(s[f.toolCallId]=f);const o=[],u=[],c=t.content.filter(f=>f.type==="tool-approval-response");for(const f of c){const h=a[f.approvalId];if(h==null)throw new nU({approvalId:f.approvalId});if(s[h.toolCallId]!=null)continue;const p=r[h.toolCallId];if(p==null)throw new kx({toolCallId:h.toolCallId,approvalId:h.approvalId});const v={approvalRequest:h,approvalResponse:f,toolCall:p};f.approved?o.push(v):u.push(v)}return{approvedToolApprovals:o,deniedToolApprovals:u}}async function dw({toolCall:e,tools:t,tracer:r,telemetry:a,messages:s,abortSignal:o,experimental_context:u,onPreliminaryToolResult:c}){const{toolName:f,toolCallId:h,input:p}=e,v=t==null?void 0:t[f];if((v==null?void 0:v.execute)!=null)return wp({name:"ai.toolCall",attributes:Zo({telemetry:a,attributes:{...xp({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":f,"ai.toolCall.id":h,"ai.toolCall.args":{output:()=>JSON.stringify(p)}}}),tracer:r,fn:async b=>{let y;try{const k=CB({execute:v.execute.bind(v),input:p,options:{toolCallId:h,messages:s,abortSignal:o,experimental_context:u}});for await(const _ of k)_.type==="preliminary"?c==null||c({...e,type:"tool-result",output:_.output,preliminary:!0}):y=_.output}catch(k){return uw(b,k),{type:"tool-error",toolCallId:h,toolName:f,input:p,error:k,dynamic:v.type==="dynamic",...e.providerMetadata!=null?{providerMetadata:e.providerMetadata}:{}}}try{b.setAttributes(await Zo({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(y)}}}))}catch{}return{type:"tool-result",toolCallId:h,toolName:f,input:p,output:y,dynamic:v.type==="dynamic",...e.providerMetadata!=null?{providerMetadata:e.providerMetadata}:{}}}})}var mq=class{constructor({data:e,mediaType:t}){const r=e instanceof Uint8Array;this.base64Data=r?void 0:e,this.uint8ArrayData=r?e:void 0,this.mediaType=t}get base64(){return this.base64Data==null&&(this.base64Data=Tu(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=p1(this.base64Data)),this.uint8ArrayData}},pq=class extends mq{constructor(e){super(e),this.type="file"}};async function gq({tool:e,toolCall:t,messages:r,experimental_context:a}){return e.needsApproval==null?!1:typeof e.needsApproval=="boolean"?e.needsApproval:await e.needsApproval(t.input,{toolCallId:t.toolCallId,messages:r,experimental_context:a})}var vq={};tU(vq,{array:()=>xq,choice:()=>wq,json:()=>Sq,object:()=>bq,text:()=>Sp});function yq(e){const t=["ROOT"];let r=-1,a=null;function s(f,h,p){switch(f){case'"':{r=h,t.pop(),t.push(p),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{r=h,a=h,t.pop(),t.push(p),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(p),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=h,t.pop(),t.push(p),t.push("INSIDE_NUMBER");break}case"{":{r=h,t.pop(),t.push(p),t.push("INSIDE_OBJECT_START");break}case"[":{r=h,t.pop(),t.push(p),t.push("INSIDE_ARRAY_START");break}}}function o(f,h){switch(f){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{r=h,t.pop();break}}}function u(f,h){switch(f){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=h,t.pop();break}}}for(let f=0;f<e.length;f++){const h=e[f];switch(t[t.length-1]){case"ROOT":s(h,f,"FINISH");break;case"INSIDE_OBJECT_START":{switch(h){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{r=f,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(h){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(h){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(h){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{s(h,f,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{o(h,f);break}case"INSIDE_STRING":{switch(h){case'"':{t.pop(),r=f;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:r=f}break}case"INSIDE_ARRAY_START":{switch(h){case"]":{r=f,t.pop();break}default:{r=f,s(h,f,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(h){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{r=f,t.pop();break}default:{r=f;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{s(h,f,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),r=f;break}case"INSIDE_NUMBER":{switch(h){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{r=f;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(h,f),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(h,f);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&o(h,f);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(h,f);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const v=e.substring(a,f+1);!"false".startsWith(v)&&!"true".startsWith(v)&&!"null".startsWith(v)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?o(h,f):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&u(h,f)):r=f;break}}}let c=e.slice(0,r+1);for(let f=t.length-1;f>=0;f--)switch(t[f]){case"INSIDE_STRING":{c+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{c+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{c+="]";break}case"INSIDE_LITERAL":{const p=e.substring(a,e.length);"true".startsWith(p)?c+="true".slice(p.length):"false".startsWith(p)?c+="false".slice(p.length):"null".startsWith(p)&&(c+="null".slice(p.length))}}return c}async function Bu(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=await hn({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=await hn({text:yq(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Sp=()=>({name:"text",responseFormat:Promise.resolve({type:"text"}),async parseCompleteOutput({text:e}){return e},async parsePartialOutput({text:e}){return{partial:e}},createElementStreamTransform(){}}),bq=({schema:e,name:t,description:r})=>{const a=sl(e);return{name:"object",responseFormat:hr(a.jsonSchema).then(s=>({type:"json",schema:s,...t!=null&&{name:t},...r!=null&&{description:r}})),async parseCompleteOutput({text:s},o){const u=await hn({text:s});if(!u.success)throw new Xi({message:"No object generated: could not parse the response.",cause:u.error,text:s,response:o.response,usage:o.usage,finishReason:o.finishReason});const c=await fn({value:u.value,schema:a});if(!c.success)throw new Xi({message:"No object generated: response did not match schema.",cause:c.error,text:s,response:o.response,usage:o.usage,finishReason:o.finishReason});return c.value},async parsePartialOutput({text:s}){const o=await Bu(s);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:o.value}}},createElementStreamTransform(){}}},xq=({element:e,name:t,description:r})=>{const a=sl(e);return{name:"array",responseFormat:hr(a.jsonSchema).then(s=>{const{$schema:o,...u}=s;return{type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{elements:{type:"array",items:u}},required:["elements"],additionalProperties:!1},...t!=null&&{name:t},...r!=null&&{description:r}}}),async parseCompleteOutput({text:s},o){const u=await hn({text:s});if(!u.success)throw new Xi({message:"No object generated: could not parse the response.",cause:u.error,text:s,response:o.response,usage:o.usage,finishReason:o.finishReason});const c=u.value;if(c==null||typeof c!="object"||!("elements"in c)||!Array.isArray(c.elements))throw new Xi({message:"No object generated: response did not match schema.",cause:new Us({value:c,cause:"response must be an object with an elements array"}),text:s,response:o.response,usage:o.usage,finishReason:o.finishReason});for(const f of c.elements){const h=await fn({value:f,schema:a});if(!h.success)throw new Xi({message:"No object generated: response did not match schema.",cause:h.error,text:s,response:o.response,usage:o.usage,finishReason:o.finishReason})}return c.elements},async parsePartialOutput({text:s}){const o=await Bu(s);switch(o.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const u=o.value;if(u==null||typeof u!="object"||!("elements"in u)||!Array.isArray(u.elements))return;const c=o.state==="repaired-parse"&&u.elements.length>0?u.elements.slice(0,-1):u.elements,f=[];for(const h of c){const p=await fn({value:h,schema:a});p.success&&f.push(p.value)}return{partial:f}}}},createElementStreamTransform(){let s=0;return new TransformStream({transform({partialOutput:o},u){if(o!=null)for(;s<o.length;s++)u.enqueue(o[s])}})}}},wq=({options:e,name:t,description:r})=>({name:"choice",responseFormat:Promise.resolve({type:"json",schema:{$schema:"http://json-schema.org/draft-07/schema#",type:"object",properties:{result:{type:"string",enum:e}},required:["result"],additionalProperties:!1},...t!=null&&{name:t},...r!=null&&{description:r}}),async parseCompleteOutput({text:a},s){const o=await hn({text:a});if(!o.success)throw new Xi({message:"No object generated: could not parse the response.",cause:o.error,text:a,response:s.response,usage:s.usage,finishReason:s.finishReason});const u=o.value;if(u==null||typeof u!="object"||!("result"in u)||typeof u.result!="string"||!e.includes(u.result))throw new Xi({message:"No object generated: response did not match schema.",cause:new Us({value:u,cause:"response must be an object that contains a choice value."}),text:a,response:s.response,usage:s.usage,finishReason:s.finishReason});return u.result},async parsePartialOutput({text:a}){const s=await Bu(a);switch(s.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":{const o=s.value;if(o==null||typeof o!="object"||!("result"in o)||typeof o.result!="string")return;const u=e.filter(c=>c.startsWith(o.result));return s.state==="successful-parse"?u.includes(o.result)?{partial:o.result}:void 0:u.length===1?{partial:u[0]}:void 0}}},createElementStreamTransform(){}}),Sq=({name:e,description:t}={})=>({name:"json",responseFormat:Promise.resolve({type:"json",...e!=null&&{name:e},...t!=null&&{description:t}}),async parseCompleteOutput({text:r},a){const s=await hn({text:r});if(!s.success)throw new Xi({message:"No object generated: could not parse the response.",cause:s.error,text:r,response:a.response,usage:a.usage,finishReason:a.finishReason});return s.value},async parsePartialOutput({text:r}){const a=await Bu(r);switch(a.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return a.value===void 0?void 0:{partial:a.value}}},createElementStreamTransform(){}});async function _q({toolCall:e,tools:t,repairToolCall:r,system:a,messages:s}){var o;try{if(t==null){if(e.providerExecuted&&e.dynamic)return await fw(e);throw new yp({toolName:e.toolName})}try{return await L5({toolCall:e,tools:t})}catch(u){if(r==null||!(yp.isInstance(u)||T1.isInstance(u)))throw u;let c=null;try{c=await r({toolCall:e,tools:t,inputSchema:async({toolName:f})=>{const{inputSchema:h}=t[f];return await sl(h).jsonSchema},system:a,messages:s,error:u})}catch(f){throw new hU({cause:f,originalError:u})}if(c==null)throw u;return await L5({toolCall:c,tools:t})}}catch(u){const c=await hn({text:e.input}),f=c.success?c.value:e.input;return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:f,dynamic:!0,invalid:!0,error:u,title:(o=t==null?void 0:t[e.toolName])==null?void 0:o.title,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata}}}async function fw(e){const t=e.input.trim()===""?{success:!0,value:{}}:await hn({text:e.input});if(t.success===!1)throw new T1({toolName:e.toolName,toolInput:e.input,cause:t.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:t.value,providerExecuted:!0,dynamic:!0,providerMetadata:e.providerMetadata}}async function L5({toolCall:e,tools:t}){const r=e.toolName,a=t[r];if(a==null){if(e.providerExecuted&&e.dynamic)return await fw(e);throw new yp({toolName:e.toolName,availableTools:Object.keys(t)})}const s=sl(a.inputSchema),o=e.input.trim()===""?await fn({value:{},schema:s}):await hn({text:e.input,schema:s});if(o.success===!1)throw new T1({toolName:r,toolInput:e.input,cause:o.error});return a.type==="dynamic"?{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,input:o.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,dynamic:!0,title:a.title}:{type:"tool-call",toolCallId:e.toolCallId,toolName:r,input:o.value,providerExecuted:e.providerExecuted,providerMetadata:e.providerMetadata,title:a.title}}var zq=class{constructor({content:e,finishReason:t,rawFinishReason:r,usage:a,warnings:s,request:o,response:u,providerMetadata:c}){this.content=e,this.finishReason=t,this.rawFinishReason=r,this.usage=a,this.warnings=s,this.request=o,this.response=u,this.providerMetadata=c}get text(){return this.content.filter(e=>e.type==="text").map(e=>e.text).join("")}get reasoning(){return this.content.filter(e=>e.type==="reasoning")}get reasoningText(){return this.reasoning.length===0?void 0:this.reasoning.map(e=>e.text).join("")}get files(){return this.content.filter(e=>e.type==="file").map(e=>e.file)}get sources(){return this.content.filter(e=>e.type==="source")}get toolCalls(){return this.content.filter(e=>e.type==="tool-call")}get staticToolCalls(){return this.toolCalls.filter(e=>e.dynamic!==!0)}get dynamicToolCalls(){return this.toolCalls.filter(e=>e.dynamic===!0)}get toolResults(){return this.content.filter(e=>e.type==="tool-result")}get staticToolResults(){return this.toolResults.filter(e=>e.dynamic!==!0)}get dynamicToolResults(){return this.toolResults.filter(e=>e.dynamic===!0)}};function hw(e){return({steps:t})=>t.length===e}function kq(e){return({steps:t})=>{var r,a,s;return(s=(a=(r=t[t.length-1])==null?void 0:r.toolCalls)==null?void 0:a.some(o=>o.toolName===e))!=null?s:!1}}async function Tq({stopConditions:e,steps:t}){return(await Promise.all(e.map(r=>r({steps:t})))).some(r=>r)}async function U5({content:e,tools:t}){const r=[],a=[];for(const o of e)if(o.type!=="source"&&!((o.type==="tool-result"||o.type==="tool-error")&&!o.providerExecuted)&&!(o.type==="text"&&o.text.length===0))switch(o.type){case"text":a.push({type:"text",text:o.text,providerOptions:o.providerMetadata});break;case"reasoning":a.push({type:"reasoning",text:o.text,providerOptions:o.providerMetadata});break;case"file":a.push({type:"file",data:o.file.base64,mediaType:o.file.mediaType,providerOptions:o.providerMetadata});break;case"tool-call":a.push({type:"tool-call",toolCallId:o.toolCallId,toolName:o.toolName,input:o.input,providerExecuted:o.providerExecuted,providerOptions:o.providerMetadata});break;case"tool-result":{const u=await Yo({toolCallId:o.toolCallId,input:o.input,tool:t==null?void 0:t[o.toolName],output:o.output,errorMode:"none"});a.push({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:u,providerOptions:o.providerMetadata});break}case"tool-error":{const u=await Yo({toolCallId:o.toolCallId,input:o.input,tool:t==null?void 0:t[o.toolName],output:o.error,errorMode:"json"});a.push({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:u,providerOptions:o.providerMetadata});break}case"tool-approval-request":a.push({type:"tool-approval-request",approvalId:o.approvalId,toolCallId:o.toolCall.toolCallId});break}a.length>0&&r.push({role:"assistant",content:a});const s=[];for(const o of e){if(!(o.type==="tool-result"||o.type==="tool-error")||o.providerExecuted)continue;const u=await Yo({toolCallId:o.toolCallId,input:o.input,tool:t==null?void 0:t[o.toolName],output:o.type==="tool-result"?o.output:o.error,errorMode:o.type==="tool-error"?"text":"none"});s.push({type:"tool-result",toolCallId:o.toolCallId,toolName:o.toolName,output:u,...o.providerMetadata!=null?{providerOptions:o.providerMetadata}:{}})}return s.length>0&&r.push({role:"tool",content:s}),r}function Aq(...e){const t=e.filter(a=>a!=null);if(t.length===0)return;if(t.length===1)return t[0];const r=new AbortController;for(const a of t){if(a.aborted)return r.abort(a.reason),r.signal;a.addEventListener("abort",()=>{r.abort(a.reason)},{once:!0})}return r.signal}$u({prefix:"aitxt",size:24});function Rd(e,t){const r=new Headers(e??{});for(const[a,s]of Object.entries(t))r.has(a)||r.set(a,s);return r}function Eq({status:e,statusText:t,headers:r,textStream:a}){return new Response(a.pipeThrough(new TextEncoderStream),{status:e??200,statusText:t,headers:Rd(r,{"content-type":"text/plain; charset=utf-8"})})}function mw({response:e,status:t,statusText:r,headers:a,stream:s}){const o=t??200;r!==void 0?e.writeHead(o,r,a):e.writeHead(o,a);const u=s.getReader();(async()=>{try{for(;;){const{done:f,value:h}=await u.read();if(f)break;e.write(h)||await new Promise(v=>{e.once("drain",v)})}}catch(f){throw f}finally{e.end()}})()}function Mq({response:e,status:t,statusText:r,headers:a,textStream:s}){mw({response:e,status:t,statusText:r,headers:Object.fromEntries(Rd(a,{"content-type":"text/plain; charset=utf-8"}).entries()),stream:s.pipeThrough(new TextEncoderStream)})}var pw=class extends TransformStream{constructor(){super({transform(e,t){t.enqueue(`data: ${JSON.stringify(e)}

`)},flush(e){e.enqueue(`data: [DONE]

`)}})}},gw={"content-type":"text/event-stream","cache-control":"no-cache",connection:"keep-alive","x-vercel-ai-ui-message-stream":"v1","x-accel-buffering":"no"};function Nq({status:e,statusText:t,headers:r,stream:a,consumeSseStream:s}){let o=a.pipeThrough(new pw);if(s){const[u,c]=o.tee();o=u,s({stream:c})}return new Response(o.pipeThrough(new TextEncoderStream),{status:e,statusText:t,headers:Rd(r,gw)})}function Cq({originalMessages:e,responseMessageId:t}){if(e==null)return;const r=e[e.length-1];return(r==null?void 0:r.role)==="assistant"?r.id:typeof t=="function"?t():t}var Oq=Jt(()=>Zt(mr([Xt({type:Ve("text-start"),id:W(),providerMetadata:xt.optional()}),Xt({type:Ve("text-delta"),id:W(),delta:W(),providerMetadata:xt.optional()}),Xt({type:Ve("text-end"),id:W(),providerMetadata:xt.optional()}),Xt({type:Ve("error"),errorText:W()}),Xt({type:Ve("tool-input-start"),toolCallId:W(),toolName:W(),providerExecuted:kr().optional(),providerMetadata:xt.optional(),dynamic:kr().optional(),title:W().optional()}),Xt({type:Ve("tool-input-delta"),toolCallId:W(),inputTextDelta:W()}),Xt({type:Ve("tool-input-available"),toolCallId:W(),toolName:W(),input:ra(),providerExecuted:kr().optional(),providerMetadata:xt.optional(),dynamic:kr().optional(),title:W().optional()}),Xt({type:Ve("tool-input-error"),toolCallId:W(),toolName:W(),input:ra(),providerExecuted:kr().optional(),providerMetadata:xt.optional(),dynamic:kr().optional(),errorText:W(),title:W().optional()}),Xt({type:Ve("tool-approval-request"),approvalId:W(),toolCallId:W()}),Xt({type:Ve("tool-output-available"),toolCallId:W(),output:ra(),providerExecuted:kr().optional(),dynamic:kr().optional(),preliminary:kr().optional()}),Xt({type:Ve("tool-output-error"),toolCallId:W(),errorText:W(),providerExecuted:kr().optional(),dynamic:kr().optional()}),Xt({type:Ve("tool-output-denied"),toolCallId:W()}),Xt({type:Ve("reasoning-start"),id:W(),providerMetadata:xt.optional()}),Xt({type:Ve("reasoning-delta"),id:W(),delta:W(),providerMetadata:xt.optional()}),Xt({type:Ve("reasoning-end"),id:W(),providerMetadata:xt.optional()}),Xt({type:Ve("source-url"),sourceId:W(),url:W(),title:W().optional(),providerMetadata:xt.optional()}),Xt({type:Ve("source-document"),sourceId:W(),mediaType:W(),title:W(),filename:W().optional(),providerMetadata:xt.optional()}),Xt({type:Ve("file"),url:W(),mediaType:W(),providerMetadata:xt.optional()}),Xt({type:$8(e=>typeof e=="string"&&e.startsWith("data-"),{message:'Type must start with "data-"'}),id:W().optional(),data:ra(),transient:kr().optional()}),Xt({type:Ve("start-step")}),Xt({type:Ve("finish-step")}),Xt({type:Ve("start"),messageId:W().optional(),messageMetadata:ra().optional()}),Xt({type:Ve("finish"),finishReason:Rr(["stop","length","content-filter","tool-calls","error","other"]).optional(),messageMetadata:ra().optional()}),Xt({type:Ve("abort"),reason:W().optional()}),Xt({type:Ve("message-metadata"),messageMetadata:ra()})])));function Rq(e){return e.type.startsWith("data-")}function Rm(e){return e.type.startsWith("data-")}function Im(e){return e.type==="text"}function Dm(e){return e.type==="file"}function q5(e){return e.type==="reasoning"}function _p(e){return e.type.startsWith("tool-")}function vw(e){return e.type==="dynamic-tool"}function js(e){return _p(e)||vw(e)}function zp(e){return e.type.split("-").slice(1).join("-")}function jm(e){return vw(e)?e.toolName:zp(e)}function yw({lastMessage:e,messageId:t}){return{message:(e==null?void 0:e.role)==="assistant"?e:{id:t,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function bw({stream:e,messageMetadataSchema:t,dataPartSchemas:r,runUpdateMessageJob:a,onError:s,onToolCall:o,onData:u}){return e.pipeThrough(new TransformStream({async transform(c,f){await a(async({state:h,write:p})=>{var v,b,y,k;function _(M){const I=h.message.parts.filter(js).find($=>$.toolCallId===M);if(I==null)throw new jo({chunkType:"tool-invocation",chunkId:M,message:`No tool invocation found for tool call ID "${M}".`});return I}function T(M){var j;const I=h.message.parts.find(D=>_p(D)&&D.toolCallId===M.toolCallId),$=M,E=I;I!=null?(I.state=M.state,E.input=$.input,E.output=$.output,E.errorText=$.errorText,E.rawInput=$.rawInput,E.preliminary=$.preliminary,M.title!==void 0&&(E.title=M.title),E.providerExecuted=(j=$.providerExecuted)!=null?j:I.providerExecuted,$.providerMetadata!=null&&(I.callProviderMetadata=$.providerMetadata)):h.message.parts.push({type:`tool-${M.toolName}`,toolCallId:M.toolCallId,state:M.state,title:M.title,input:$.input,output:$.output,rawInput:$.rawInput,errorText:$.errorText,providerExecuted:$.providerExecuted,preliminary:$.preliminary,...$.providerMetadata!=null?{callProviderMetadata:$.providerMetadata}:{}})}function R(M){var j,I;const $=h.message.parts.find(V=>V.type==="dynamic-tool"&&V.toolCallId===M.toolCallId),E=M,D=$;$!=null?($.state=M.state,D.toolName=M.toolName,D.input=E.input,D.output=E.output,D.errorText=E.errorText,D.rawInput=(j=E.rawInput)!=null?j:D.rawInput,D.preliminary=E.preliminary,M.title!==void 0&&(D.title=M.title),D.providerExecuted=(I=E.providerExecuted)!=null?I:$.providerExecuted,E.providerMetadata!=null&&($.callProviderMetadata=E.providerMetadata)):h.message.parts.push({type:"dynamic-tool",toolName:M.toolName,toolCallId:M.toolCallId,state:M.state,input:E.input,output:E.output,errorText:E.errorText,preliminary:E.preliminary,providerExecuted:E.providerExecuted,title:M.title,...E.providerMetadata!=null?{callProviderMetadata:E.providerMetadata}:{}})}async function O(M){if(M!=null){const j=h.message.metadata!=null?A1(h.message.metadata,M):M;t!=null&&await gp({value:j,schema:t}),h.message.metadata=j}}switch(c.type){case"text-start":{const M={type:"text",text:"",providerMetadata:c.providerMetadata,state:"streaming"};h.activeTextParts[c.id]=M,h.message.parts.push(M),p();break}case"text-delta":{const M=h.activeTextParts[c.id];if(M==null)throw new jo({chunkType:"text-delta",chunkId:c.id,message:`Received text-delta for missing text part with ID "${c.id}". Ensure a "text-start" chunk is sent before any "text-delta" chunks.`});M.text+=c.delta,M.providerMetadata=(v=c.providerMetadata)!=null?v:M.providerMetadata,p();break}case"text-end":{const M=h.activeTextParts[c.id];if(M==null)throw new jo({chunkType:"text-end",chunkId:c.id,message:`Received text-end for missing text part with ID "${c.id}". Ensure a "text-start" chunk is sent before any "text-end" chunks.`});M.state="done",M.providerMetadata=(b=c.providerMetadata)!=null?b:M.providerMetadata,delete h.activeTextParts[c.id],p();break}case"reasoning-start":{const M={type:"reasoning",text:"",providerMetadata:c.providerMetadata,state:"streaming"};h.activeReasoningParts[c.id]=M,h.message.parts.push(M),p();break}case"reasoning-delta":{const M=h.activeReasoningParts[c.id];if(M==null)throw new jo({chunkType:"reasoning-delta",chunkId:c.id,message:`Received reasoning-delta for missing reasoning part with ID "${c.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-delta" chunks.`});M.text+=c.delta,M.providerMetadata=(y=c.providerMetadata)!=null?y:M.providerMetadata,p();break}case"reasoning-end":{const M=h.activeReasoningParts[c.id];if(M==null)throw new jo({chunkType:"reasoning-end",chunkId:c.id,message:`Received reasoning-end for missing reasoning part with ID "${c.id}". Ensure a "reasoning-start" chunk is sent before any "reasoning-end" chunks.`});M.providerMetadata=(k=c.providerMetadata)!=null?k:M.providerMetadata,M.state="done",delete h.activeReasoningParts[c.id],p();break}case"file":{h.message.parts.push({type:"file",mediaType:c.mediaType,url:c.url}),p();break}case"source-url":{h.message.parts.push({type:"source-url",sourceId:c.sourceId,url:c.url,title:c.title,providerMetadata:c.providerMetadata}),p();break}case"source-document":{h.message.parts.push({type:"source-document",sourceId:c.sourceId,mediaType:c.mediaType,title:c.title,filename:c.filename,providerMetadata:c.providerMetadata}),p();break}case"tool-input-start":{const M=h.message.parts.filter(_p);h.partialToolCalls[c.toolCallId]={text:"",toolName:c.toolName,index:M.length,dynamic:c.dynamic,title:c.title},c.dynamic?R({toolCallId:c.toolCallId,toolName:c.toolName,state:"input-streaming",input:void 0,providerExecuted:c.providerExecuted,title:c.title,providerMetadata:c.providerMetadata}):T({toolCallId:c.toolCallId,toolName:c.toolName,state:"input-streaming",input:void 0,providerExecuted:c.providerExecuted,title:c.title,providerMetadata:c.providerMetadata}),p();break}case"tool-input-delta":{const M=h.partialToolCalls[c.toolCallId];if(M==null)throw new jo({chunkType:"tool-input-delta",chunkId:c.toolCallId,message:`Received tool-input-delta for missing tool call with ID "${c.toolCallId}". Ensure a "tool-input-start" chunk is sent before any "tool-input-delta" chunks.`});M.text+=c.inputTextDelta;const{value:j}=await Bu(M.text);M.dynamic?R({toolCallId:c.toolCallId,toolName:M.toolName,state:"input-streaming",input:j,title:M.title}):T({toolCallId:c.toolCallId,toolName:M.toolName,state:"input-streaming",input:j,title:M.title}),p();break}case"tool-input-available":{c.dynamic?R({toolCallId:c.toolCallId,toolName:c.toolName,state:"input-available",input:c.input,providerExecuted:c.providerExecuted,providerMetadata:c.providerMetadata,title:c.title}):T({toolCallId:c.toolCallId,toolName:c.toolName,state:"input-available",input:c.input,providerExecuted:c.providerExecuted,providerMetadata:c.providerMetadata,title:c.title}),p(),o&&!c.providerExecuted&&await o({toolCall:c});break}case"tool-input-error":{c.dynamic?R({toolCallId:c.toolCallId,toolName:c.toolName,state:"output-error",input:c.input,errorText:c.errorText,providerExecuted:c.providerExecuted,providerMetadata:c.providerMetadata}):T({toolCallId:c.toolCallId,toolName:c.toolName,state:"output-error",input:void 0,rawInput:c.input,errorText:c.errorText,providerExecuted:c.providerExecuted,providerMetadata:c.providerMetadata}),p();break}case"tool-approval-request":{const M=_(c.toolCallId);M.state="approval-requested",M.approval={id:c.approvalId},p();break}case"tool-output-denied":{const M=_(c.toolCallId);M.state="output-denied",p();break}case"tool-output-available":{const M=_(c.toolCallId);M.type==="dynamic-tool"?R({toolCallId:c.toolCallId,toolName:M.toolName,state:"output-available",input:M.input,output:c.output,preliminary:c.preliminary,providerExecuted:c.providerExecuted,title:M.title}):T({toolCallId:c.toolCallId,toolName:zp(M),state:"output-available",input:M.input,output:c.output,providerExecuted:c.providerExecuted,preliminary:c.preliminary,title:M.title}),p();break}case"tool-output-error":{const M=_(c.toolCallId);M.type==="dynamic-tool"?R({toolCallId:c.toolCallId,toolName:M.toolName,state:"output-error",input:M.input,errorText:c.errorText,providerExecuted:c.providerExecuted,title:M.title}):T({toolCallId:c.toolCallId,toolName:zp(M),state:"output-error",input:M.input,rawInput:M.rawInput,errorText:c.errorText,providerExecuted:c.providerExecuted,title:M.title}),p();break}case"start-step":{h.message.parts.push({type:"step-start"});break}case"finish-step":{h.activeTextParts={},h.activeReasoningParts={};break}case"start":{c.messageId!=null&&(h.message.id=c.messageId),await O(c.messageMetadata),(c.messageId!=null||c.messageMetadata!=null)&&p();break}case"finish":{c.finishReason!=null&&(h.finishReason=c.finishReason),await O(c.messageMetadata),c.messageMetadata!=null&&p();break}case"message-metadata":{await O(c.messageMetadata),c.messageMetadata!=null&&p();break}case"error":{s==null||s(new Error(c.errorText));break}default:if(Rq(c)){(r==null?void 0:r[c.type])!=null&&await gp({value:c.data,schema:r[c.type]});const M=c;if(M.transient){u==null||u(M);break}const j=M.id!=null?h.message.parts.find(I=>M.type===I.type&&M.id===I.id):void 0;j!=null?j.data=M.data:h.message.parts.push(M),u==null||u(M),p()}}f.enqueue(c)})}}))}function Iq({messageId:e,originalMessages:t=[],onFinish:r,onError:a,stream:s}){let o=t==null?void 0:t[t.length-1];(o==null?void 0:o.role)!=="assistant"?o=void 0:e=o.id;let u=!1;const c=s.pipeThrough(new TransformStream({transform(b,y){if(b.type==="start"){const k=b;k.messageId==null&&e!=null&&(k.messageId=e)}b.type==="abort"&&(u=!0),y.enqueue(b)}}));if(r==null)return c;const f=yw({lastMessage:o?structuredClone(o):void 0,messageId:e??""}),h=async b=>{await b({state:f,write:()=>{}})};let p=!1;const v=async()=>{if(p||!r)return;p=!0;const b=f.message.id===(o==null?void 0:o.id);await r({isAborted:u,isContinuation:b,responseMessage:f.message,messages:[...b?t.slice(0,-1):t,f.message],finishReason:f.finishReason})};return bw({stream:c,runUpdateMessageJob:h,onError:a}).pipeThrough(new TransformStream({transform(b,y){y.enqueue(b)},async cancel(){await v()},async flush(){await v()}}))}function Dq({response:e,status:t,statusText:r,headers:a,stream:s,consumeSseStream:o}){let u=s.pipeThrough(new pw);if(o){const[c,f]=u.tee();u=c,o({stream:f})}mw({response:e,status:t,statusText:r,headers:Object.fromEntries(Rd(a,gw).entries()),stream:u.pipeThrough(new TextEncoderStream)})}function ou(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=function(){const r=this.getReader();let a=!1;async function s(o){var u;if(!a){a=!0;try{o&&await((u=r.cancel)==null?void 0:u.call(r))}finally{try{r.releaseLock()}catch{}}}}return{async next(){if(a)return{done:!0,value:void 0};const{done:o,value:u}=await r.read();return o?(await s(!0),{done:!0,value:void 0}):{done:!1,value:u}},async return(){return await s(!0),{done:!0,value:void 0}},async throw(o){throw await s(!0),o}}},t}async function xw({stream:e,onError:t}){const r=e.getReader();try{for(;;){const{done:a}=await r.read();if(a)break}}catch(a){t==null||t(a)}finally{r.releaseLock()}}function P5(){let e,t;return{promise:new Promise((a,s)=>{e=a,t=s}),resolve:e,reject:t}}function jq(){let e=[],t=null,r=!1,a=P5();const s=()=>{r=!0,a.resolve(),e.forEach(u=>u.cancel()),e=[],t==null||t.close()},o=async()=>{if(r&&e.length===0){t==null||t.close();return}if(e.length===0)return a=P5(),await a.promise,o();try{const{value:u,done:c}=await e[0].read();c?(e.shift(),e.length===0&&r?t==null||t.close():await o()):t==null||t.enqueue(u)}catch(u){t==null||t.error(u),e.shift(),s()}};return{stream:new ReadableStream({start(u){t=u},pull:o,async cancel(){for(const u of e)await u.cancel();e=[],r=!0}}),addStream:u=>{if(r)throw new Error("Cannot add inner stream: outer stream is closed");e.push(u.getReader()),a.resolve()},close:()=>{r=!0,a.resolve(),e.length===0&&(t==null||t.close())},terminate:s}}function $q(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}function Bq({tools:e,generatorStream:t,tracer:r,telemetry:a,system:s,messages:o,abortSignal:u,repairToolCall:c,experimental_context:f,generateId:h}){let p=null;const v=new ReadableStream({start(M){p=M}}),b=new Set,y=new Map,k=new Map;let _=!1,T;function R(){_&&b.size===0&&(T!=null&&p.enqueue(T),p.close())}const O=new TransformStream({async transform(M,j){const I=M.type;switch(I){case"stream-start":case"text-start":case"text-delta":case"text-end":case"reasoning-start":case"reasoning-delta":case"reasoning-end":case"tool-input-start":case"tool-input-delta":case"tool-input-end":case"source":case"response-metadata":case"error":case"raw":{j.enqueue(M);break}case"file":{j.enqueue({type:"file",file:new pq({data:M.data,mediaType:M.mediaType})});break}case"finish":{T={type:"finish",finishReason:M.finishReason.unified,rawFinishReason:M.finishReason.raw,usage:lq(M.usage),providerMetadata:M.providerMetadata};break}case"tool-approval-request":{const $=k.get(M.toolCallId);if($==null){p.enqueue({type:"error",error:new kx({toolCallId:M.toolCallId,approvalId:M.approvalId})});break}j.enqueue({type:"tool-approval-request",approvalId:M.approvalId,toolCall:$});break}case"tool-call":{try{const $=await _q({toolCall:M,tools:e,repairToolCall:c,system:s,messages:o});if(k.set($.toolCallId,$),j.enqueue($),$.invalid){p.enqueue({type:"tool-error",toolCallId:$.toolCallId,toolName:$.toolName,input:$.input,error:q8($.error),dynamic:!0,title:$.title});break}const E=e==null?void 0:e[$.toolName];if(E==null)break;if(E.onInputAvailable!=null&&await E.onInputAvailable({input:$.input,toolCallId:$.toolCallId,messages:o,abortSignal:u,experimental_context:f}),await gq({tool:E,toolCall:$,messages:o,experimental_context:f})){p.enqueue({type:"tool-approval-request",approvalId:h(),toolCall:$});break}if(y.set($.toolCallId,$.input),E.execute!=null&&$.providerExecuted!==!0){const D=h();b.add(D),dw({toolCall:$,tools:e,tracer:r,telemetry:a,messages:o,abortSignal:u,experimental_context:f,onPreliminaryToolResult:V=>{p.enqueue(V)}}).then(V=>{p.enqueue(V)}).catch(V=>{p.enqueue({type:"error",error:V})}).finally(()=>{b.delete(D),R()})}}catch($){p.enqueue({type:"error",error:$})}break}case"tool-result":{const $=M.toolName;M.isError?p.enqueue({type:"tool-error",toolCallId:M.toolCallId,toolName:$,input:y.get(M.toolCallId),providerExecuted:!0,error:M.result,dynamic:M.dynamic}):j.enqueue({type:"tool-result",toolCallId:M.toolCallId,toolName:$,input:y.get(M.toolCallId),output:M.result,providerExecuted:!0,dynamic:M.dynamic});break}default:{const $=I;throw new Error(`Unhandled chunk type: ${$}`)}}},flush(){_=!0,R()}});return new ReadableStream({async start(M){return Promise.all([t.pipeThrough(O).pipeTo(new WritableStream({write(j){M.enqueue(j)},close(){}})),v.pipeTo(new WritableStream({write(j){M.enqueue(j)},close(){M.close()}}))])}})}var Lq=$u({prefix:"aitxt",size:24});function Uq({model:e,tools:t,toolChoice:r,system:a,prompt:s,messages:o,maxRetries:u,abortSignal:c,timeout:f,headers:h,stopWhen:p=hw(1),experimental_output:v,output:b=v,experimental_telemetry:y,prepareStep:k,providerOptions:_,experimental_activeTools:T,activeTools:R=T,experimental_repairToolCall:O,experimental_transform:M,experimental_download:j,includeRawChunks:I=!1,onChunk:$,onError:E=({error:ae})=>{console.error(ae)},onFinish:D,onAbort:V,onStepFinish:de,experimental_context:Q,_internal:{now:G=$q,generateId:X=Lq}={},...K}){const ae=aw(f),q=AU(f),F=EU(f),J=q!=null?new AbortController:void 0,Ae=F!=null?new AbortController:void 0;return new Pq({model:rw(e),telemetry:y,headers:h,settings:K,maxRetries:u,abortSignal:Aq(c,ae!=null?AbortSignal.timeout(ae):void 0,J==null?void 0:J.signal,Ae==null?void 0:Ae.signal),stepTimeoutMs:q,stepAbortController:J,chunkTimeoutMs:F,chunkAbortController:Ae,system:a,prompt:s,messages:o,tools:t,toolChoice:r,transforms:ud(M),activeTools:R,repairToolCall:O,stopConditions:ud(p),output:b,providerOptions:_,prepareStep:k,includeRawChunks:I,onChunk:$,onError:E,onFinish:D,onAbort:V,onStepFinish:de,now:G,generateId:X,experimental_context:Q,download:j})}function qq(e){let t,r="",a="",s,o="";function u({controller:c,partialOutput:f=void 0}){c.enqueue({part:{type:"text-delta",id:t,text:a,providerMetadata:s},partialOutput:f}),a=""}return new TransformStream({async transform(c,f){var h;if(c.type==="finish-step"&&a.length>0&&u({controller:f}),c.type!=="text-delta"&&c.type!=="text-start"&&c.type!=="text-end"){f.enqueue({part:c,partialOutput:void 0});return}if(t==null)t=c.id;else if(c.id!==t){f.enqueue({part:c,partialOutput:void 0});return}if(c.type==="text-start"){f.enqueue({part:c,partialOutput:void 0});return}if(c.type==="text-end"){a.length>0&&u({controller:f}),f.enqueue({part:c,partialOutput:void 0});return}r+=c.text,a+=c.text,s=(h=c.providerMetadata)!=null?h:s;const p=await e.parsePartialOutput({text:r});if(p!==void 0){const v=JSON.stringify(p.partial);v!==o&&(u({controller:f,partialOutput:p.partial}),o=v)}}})}var Pq=class{constructor({model:e,telemetry:t,headers:r,settings:a,maxRetries:s,abortSignal:o,stepTimeoutMs:u,stepAbortController:c,chunkTimeoutMs:f,chunkAbortController:h,system:p,prompt:v,messages:b,tools:y,toolChoice:k,transforms:_,activeTools:T,repairToolCall:R,stopConditions:O,output:M,providerOptions:j,prepareStep:I,includeRawChunks:$,now:E,generateId:D,onChunk:V,onError:de,onFinish:Q,onAbort:G,onStepFinish:X,experimental_context:K,download:ae}){this._totalUsage=new iu,this._finishReason=new iu,this._rawFinishReason=new iu,this._steps=new iu,this.outputSpecification=M,this.includeRawChunks=$,this.tools=y;let q,F=[];const J=[];let Ae,De,L,ne={},ee=[];const re=[],we=new Map;let Ee,ue={},Ce={};const H=new TransformStream({async transform(dt,Gt){var jt,ht,ur,nr;Gt.enqueue(dt);const{part:Re}=dt;if((Re.type==="text-delta"||Re.type==="reasoning-delta"||Re.type==="source"||Re.type==="tool-call"||Re.type==="tool-result"||Re.type==="tool-input-start"||Re.type==="tool-input-delta"||Re.type==="raw")&&await(V==null?void 0:V({chunk:Re})),Re.type==="error"&&await de({error:rq(Re.error)}),Re.type==="text-start"&&(ue[Re.id]={type:"text",text:"",providerMetadata:Re.providerMetadata},F.push(ue[Re.id])),Re.type==="text-delta"){const Ot=ue[Re.id];if(Ot==null){Gt.enqueue({part:{type:"error",error:`text part ${Re.id} not found`},partialOutput:void 0});return}Ot.text+=Re.text,Ot.providerMetadata=(jt=Re.providerMetadata)!=null?jt:Ot.providerMetadata}if(Re.type==="text-end"){const Ot=ue[Re.id];if(Ot==null){Gt.enqueue({part:{type:"error",error:`text part ${Re.id} not found`},partialOutput:void 0});return}Ot.providerMetadata=(ht=Re.providerMetadata)!=null?ht:Ot.providerMetadata,delete ue[Re.id]}if(Re.type==="reasoning-start"&&(Ce[Re.id]={type:"reasoning",text:"",providerMetadata:Re.providerMetadata},F.push(Ce[Re.id])),Re.type==="reasoning-delta"){const Ot=Ce[Re.id];if(Ot==null){Gt.enqueue({part:{type:"error",error:`reasoning part ${Re.id} not found`},partialOutput:void 0});return}Ot.text+=Re.text,Ot.providerMetadata=(ur=Re.providerMetadata)!=null?ur:Ot.providerMetadata}if(Re.type==="reasoning-end"){const Ot=Ce[Re.id];if(Ot==null){Gt.enqueue({part:{type:"error",error:`reasoning part ${Re.id} not found`},partialOutput:void 0});return}Ot.providerMetadata=(nr=Re.providerMetadata)!=null?nr:Ot.providerMetadata,delete Ce[Re.id]}if(Re.type==="file"&&F.push({type:"file",file:Re.file}),Re.type==="source"&&F.push(Re),Re.type==="tool-call"&&F.push(Re),Re.type==="tool-result"&&!Re.preliminary&&F.push(Re),Re.type==="tool-approval-request"&&F.push(Re),Re.type==="tool-error"&&F.push(Re),Re.type==="start-step"&&(F=[],Ce={},ue={},ne=Re.request,ee=Re.warnings),Re.type==="finish-step"){const Ot=await U5({content:F,tools:y}),rn=new zq({content:F,finishReason:Re.finishReason,rawFinishReason:Re.rawFinishReason,usage:Re.usage,warnings:ee,request:ne,response:{...Re.response,messages:[...J,...Ot]},providerMetadata:Re.providerMetadata});await(X==null?void 0:X(rn)),Qx({warnings:ee,provider:e.provider,model:e.modelId}),re.push(rn),J.push(...Ot),q.resolve()}Re.type==="finish"&&(L=Re.totalUsage,Ae=Re.finishReason,De=Re.rawFinishReason)},async flush(dt){try{if(re.length===0){const ur=o!=null&&o.aborted?o.reason:new cU({message:"No output generated. Check the stream for errors."});nt._finishReason.reject(ur),nt._rawFinishReason.reject(ur),nt._totalUsage.reject(ur),nt._steps.reject(ur);return}const Gt=Ae??"other",jt=L??Om();nt._finishReason.resolve(Gt),nt._rawFinishReason.resolve(De),nt._totalUsage.resolve(jt),nt._steps.resolve(re);const ht=re[re.length-1];await(Q==null?void 0:Q({finishReason:ht.finishReason,rawFinishReason:ht.rawFinishReason,totalUsage:jt,usage:ht.usage,content:ht.content,text:ht.text,reasoningText:ht.reasoningText,reasoning:ht.reasoning,files:ht.files,sources:ht.sources,toolCalls:ht.toolCalls,staticToolCalls:ht.staticToolCalls,dynamicToolCalls:ht.dynamicToolCalls,toolResults:ht.toolResults,staticToolResults:ht.staticToolResults,dynamicToolResults:ht.dynamicToolResults,request:ht.request,response:ht.response,warnings:ht.warnings,providerMetadata:ht.providerMetadata,steps:re,experimental_context:K})),Ee.setAttributes(await Zo({telemetry:t,attributes:{"ai.response.finishReason":Gt,"ai.response.text":{output:()=>ht.text},"ai.response.toolCalls":{output:()=>{var ur;return(ur=ht.toolCalls)!=null&&ur.length?JSON.stringify(ht.toolCalls):void 0}},"ai.response.providerMetadata":JSON.stringify(ht.providerMetadata),"ai.usage.inputTokens":jt.inputTokens,"ai.usage.outputTokens":jt.outputTokens,"ai.usage.totalTokens":jt.totalTokens,"ai.usage.reasoningTokens":jt.reasoningTokens,"ai.usage.cachedInputTokens":jt.cachedInputTokens}}))}catch(Gt){dt.error(Gt)}finally{Ee.end()}}}),oe=jq();this.addStream=oe.addStream,this.closeStream=oe.close;const ge=oe.stream.getReader();let Me=new ReadableStream({async start(dt){dt.enqueue({type:"start"})},async pull(dt){function Gt(){G==null||G({steps:re}),dt.enqueue({type:"abort",...(o==null?void 0:o.reason)!==void 0?{reason:Ls(o.reason)}:{}}),dt.close()}try{const{done:jt,value:ht}=await ge.read();if(jt){dt.close();return}if(o!=null&&o.aborted){Gt();return}dt.enqueue(ht)}catch(jt){qs(jt)&&(o!=null&&o.aborted)?Gt():dt.error(jt)}},cancel(dt){return oe.stream.cancel(dt)}});for(const dt of _)Me=Me.pipeThrough(dt({tools:y,stopStream(){oe.terminate()}}));this.baseStream=Me.pipeThrough(qq(M??Sp())).pipeThrough(H);const{maxRetries:_e,retry:je}=fq({maxRetries:s,abortSignal:o}),Ye=sq(t),qe=qU(a),ct=aq({model:e,telemetry:t,headers:r,settings:{...qe,maxRetries:_e}}),nt=this;wp({name:"ai.streamText",attributes:Zo({telemetry:t,attributes:{...xp({operationId:"ai.streamText",telemetry:t}),...ct,"ai.prompt":{input:()=>JSON.stringify({system:p,prompt:v,messages:b})}}}),tracer:Ye,endWhenDone:!1,fn:async dt=>{Ee=dt;const Gt=await tq({system:p,prompt:v,messages:b}),jt=Gt.messages,ht=[],{approvedToolApprovals:ur,deniedToolApprovals:nr}=hq({messages:jt});if(nr.length>0||ur.length>0){const Ot=[...ur,...nr].filter(jr=>jr.toolCall.providerExecuted),rn=ur.filter(jr=>!jr.toolCall.providerExecuted),mn=nr.filter(jr=>!jr.toolCall.providerExecuted),Ys=nr.filter(jr=>jr.toolCall.providerExecuted);let Kr;const Xs=new ReadableStream({start(jr){Kr=jr}});nt.addStream(Xs);try{for(const pr of[...mn,...Ys])Kr==null||Kr.enqueue({type:"tool-output-denied",toolCallId:pr.toolCall.toolCallId,toolName:pr.toolCall.toolName});const jr=[];if(await Promise.all(rn.map(async pr=>{const St=await dw({toolCall:pr.toolCall,tools:y,tracer:Ye,telemetry:t,messages:jt,abortSignal:o,experimental_context:K,onPreliminaryToolResult:ya=>{Kr==null||Kr.enqueue(ya)}});St!=null&&(Kr==null||Kr.enqueue(St),jr.push(St))})),Ot.length>0&&ht.push({role:"tool",content:Ot.map(pr=>({type:"tool-approval-response",approvalId:pr.approvalResponse.approvalId,approved:pr.approvalResponse.approved,reason:pr.approvalResponse.reason,providerExecuted:!0}))}),jr.length>0||mn.length>0){const pr=[];for(const St of jr)pr.push({type:"tool-result",toolCallId:St.toolCallId,toolName:St.toolName,output:await Yo({toolCallId:St.toolCallId,input:St.input,tool:y==null?void 0:y[St.toolName],output:St.type==="tool-result"?St.output:St.error,errorMode:St.type==="tool-error"?"json":"none"})});for(const St of mn)pr.push({type:"tool-result",toolCallId:St.toolCall.toolCallId,toolName:St.toolCall.toolName,output:{type:"execution-denied",reason:St.approvalResponse.reason}});ht.push({role:"tool",content:pr})}}finally{Kr==null||Kr.close()}}J.push(...ht);async function Re({currentStep:Ot,responseMessages:rn,usage:mn}){var Ys,Kr,Xs,jr,pr,St;const ya=nt.includeRawChunks,Vr=u!=null?setTimeout(()=>c.abort(),u):void 0;let mi;function Dd(){f!=null&&(mi!=null&&clearTimeout(mi),mi=setTimeout(()=>h.abort(),f))}function Lu(){mi!=null&&(clearTimeout(mi),mi=void 0)}function ls(){Vr!=null&&clearTimeout(Vr)}try{q=new iu;const pn=[...jt,...rn],Mr=await(I==null?void 0:I({model:e,steps:re,stepNumber:re.length,messages:pn,experimental_context:K})),ia=rw((Ys=Mr==null?void 0:Mr.model)!=null?Ys:e),us=await $U({prompt:{system:(Kr=Mr==null?void 0:Mr.system)!=null?Kr:Gt.system,messages:(Xs=Mr==null?void 0:Mr.messages)!=null?Xs:pn},supportedUrls:await ia.supportedUrls,download:ae}),{toolChoice:On,tools:ul}=await HU({tools:y,toolChoice:(jr=Mr==null?void 0:Mr.toolChoice)!=null?jr:k,activeTools:(pr=Mr==null?void 0:Mr.activeTools)!=null?pr:T});K=(St=Mr==null?void 0:Mr.experimental_context)!=null?St:K;const Uu=A1(j,Mr==null?void 0:Mr.providerOptions),{result:{stream:cl,response:pi,request:qu},doStreamSpan:Rn,startTimestampMs:dl}=await je(()=>wp({name:"ai.streamText.doStream",attributes:Zo({telemetry:t,attributes:{...xp({operationId:"ai.streamText.doStream",telemetry:t}),...ct,"ai.model.provider":ia.provider,"ai.model.id":ia.modelId,"ai.prompt.messages":{input:()=>oq(us)},"ai.prompt.tools":{input:()=>ul==null?void 0:ul.map(Ze=>JSON.stringify(Ze))},"ai.prompt.toolChoice":{input:()=>On!=null?JSON.stringify(On):void 0},"gen_ai.system":ia.provider,"gen_ai.request.model":ia.modelId,"gen_ai.request.frequency_penalty":qe.frequencyPenalty,"gen_ai.request.max_tokens":qe.maxOutputTokens,"gen_ai.request.presence_penalty":qe.presencePenalty,"gen_ai.request.stop_sequences":qe.stopSequences,"gen_ai.request.temperature":qe.temperature,"gen_ai.request.top_k":qe.topK,"gen_ai.request.top_p":qe.topP}}),tracer:Ye,endWhenDone:!1,fn:async Ze=>({startTimestampMs:E(),doStreamSpan:Ze,result:await ia.doStream({...qe,tools:ul,toolChoice:On,responseFormat:await(M==null?void 0:M.responseFormat),prompt:us,providerOptions:Uu,abortSignal:o,headers:r,includeRawChunks:ya})})})),Pu=Bq({tools:y,generatorStream:cl,tracer:Ye,telemetry:t,system:p,messages:pn,repairToolCall:R,abortSignal:o,experimental_context:K,generateId:D}),fl=qu??{},In=[],gi=[];let Ks;const Da={};let Wt="other",$r,Br=Om(),cs,Hu=!0,ja={id:D(),timestamp:new Date,modelId:e.modelId},hl="";nt.addStream(Pu.pipeThrough(new TransformStream({async transform(Ze,gr){var $a,Ba,gn,Lt,Vt;if(Dd(),Ze.type==="stream-start"){Ks=Ze.warnings;return}if(Hu){const Qt=E()-dl;Hu=!1,Rn.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Qt}),Rn.setAttributes({"ai.response.msToFirstChunk":Qt}),gr.enqueue({type:"start-step",request:fl,warnings:Ks??[]})}const Js=Ze.type;switch(Js){case"tool-approval-request":case"text-start":case"text-end":{gr.enqueue(Ze);break}case"text-delta":{Ze.delta.length>0&&(gr.enqueue({type:"text-delta",id:Ze.id,text:Ze.delta,providerMetadata:Ze.providerMetadata}),hl+=Ze.delta);break}case"reasoning-start":case"reasoning-end":{gr.enqueue(Ze);break}case"reasoning-delta":{gr.enqueue({type:"reasoning-delta",id:Ze.id,text:Ze.delta,providerMetadata:Ze.providerMetadata});break}case"tool-call":{gr.enqueue(Ze),In.push(Ze);break}case"tool-result":{gr.enqueue(Ze),Ze.preliminary||gi.push(Ze);break}case"tool-error":{gr.enqueue(Ze),gi.push(Ze);break}case"response-metadata":{ja={id:($a=Ze.id)!=null?$a:ja.id,timestamp:(Ba=Ze.timestamp)!=null?Ba:ja.timestamp,modelId:(gn=Ze.modelId)!=null?gn:ja.modelId};break}case"finish":{Br=Ze.usage,Wt=Ze.finishReason,$r=Ze.rawFinishReason,cs=Ze.providerMetadata;const Qt=E()-dl;Rn.addEvent("ai.stream.finish"),Rn.setAttributes({"ai.response.msToFinish":Qt,"ai.response.avgOutputTokensPerSecond":1e3*((Lt=Br.outputTokens)!=null?Lt:0)/Qt});break}case"file":{gr.enqueue(Ze);break}case"source":{gr.enqueue(Ze);break}case"tool-input-start":{Da[Ze.id]=Ze.toolName;const Qt=y==null?void 0:y[Ze.toolName];(Qt==null?void 0:Qt.onInputStart)!=null&&await Qt.onInputStart({toolCallId:Ze.id,messages:pn,abortSignal:o,experimental_context:K}),gr.enqueue({...Ze,dynamic:(Vt=Ze.dynamic)!=null?Vt:(Qt==null?void 0:Qt.type)==="dynamic",title:Qt==null?void 0:Qt.title});break}case"tool-input-end":{delete Da[Ze.id],gr.enqueue(Ze);break}case"tool-input-delta":{const Qt=Da[Ze.id],an=y==null?void 0:y[Qt];(an==null?void 0:an.onInputDelta)!=null&&await an.onInputDelta({inputTextDelta:Ze.delta,toolCallId:Ze.id,messages:pn,abortSignal:o,experimental_context:K}),gr.enqueue(Ze);break}case"error":{gr.enqueue(Ze),Wt="error";break}case"raw":{ya&&gr.enqueue(Ze);break}default:{const Qt=Js;throw new Error(`Unknown chunk type: ${Qt}`)}}},async flush(Ze){const gr=In.length>0?JSON.stringify(In):void 0;try{Rn.setAttributes(await Zo({telemetry:t,attributes:{"ai.response.finishReason":Wt,"ai.response.text":{output:()=>hl},"ai.response.toolCalls":{output:()=>gr},"ai.response.id":ja.id,"ai.response.model":ja.modelId,"ai.response.timestamp":ja.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(cs),"ai.usage.inputTokens":Br.inputTokens,"ai.usage.outputTokens":Br.outputTokens,"ai.usage.totalTokens":Br.totalTokens,"ai.usage.reasoningTokens":Br.reasoningTokens,"ai.usage.cachedInputTokens":Br.cachedInputTokens,"gen_ai.response.finish_reasons":[Wt],"gen_ai.response.id":ja.id,"gen_ai.response.model":ja.modelId,"gen_ai.usage.input_tokens":Br.inputTokens,"gen_ai.usage.output_tokens":Br.outputTokens}}))}catch{}finally{Rn.end()}Ze.enqueue({type:"finish-step",finishReason:Wt,rawFinishReason:$r,usage:Br,providerMetadata:cs,response:{...ja,headers:pi==null?void 0:pi.headers}});const $a=uq(mn,Br);await q.promise;const Ba=In.filter(Lt=>Lt.providerExecuted!==!0),gn=gi.filter(Lt=>Lt.providerExecuted!==!0);for(const Lt of In){if(Lt.providerExecuted!==!0)continue;const Vt=y==null?void 0:y[Lt.toolName];(Vt==null?void 0:Vt.type)==="provider"&&Vt.supportsDeferredResults&&(gi.some(Qt=>(Qt.type==="tool-result"||Qt.type==="tool-error")&&Qt.toolCallId===Lt.toolCallId)||we.set(Lt.toolCallId,{toolName:Lt.toolName}))}for(const Lt of gi)(Lt.type==="tool-result"||Lt.type==="tool-error")&&we.delete(Lt.toolCallId);if(ls(),Lu(),(Ba.length>0&&gn.length===Ba.length||we.size>0)&&!await Tq({stopConditions:O,steps:re})){rn.push(...await U5({content:re[re.length-1].content,tools:y}));try{await Re({currentStep:Ot+1,responseMessages:rn,usage:$a})}catch(Lt){Ze.enqueue({type:"error",error:Lt}),nt.closeStream()}}else Ze.enqueue({type:"finish",finishReason:Wt,rawFinishReason:$r,totalUsage:$a}),nt.closeStream()}})))}finally{ls(),Lu()}}await Re({currentStep:0,responseMessages:ht,usage:Om()})}}).catch(dt=>{nt.addStream(new ReadableStream({start(Gt){Gt.enqueue({type:"error",error:dt}),Gt.close()}})),nt.closeStream()})}get steps(){return this.consumeStream(),this._steps.promise}get finalStep(){return this.steps.then(e=>e[e.length-1])}get content(){return this.finalStep.then(e=>e.content)}get warnings(){return this.finalStep.then(e=>e.warnings)}get providerMetadata(){return this.finalStep.then(e=>e.providerMetadata)}get text(){return this.finalStep.then(e=>e.text)}get reasoningText(){return this.finalStep.then(e=>e.reasoningText)}get reasoning(){return this.finalStep.then(e=>e.reasoning)}get sources(){return this.finalStep.then(e=>e.sources)}get files(){return this.finalStep.then(e=>e.files)}get toolCalls(){return this.finalStep.then(e=>e.toolCalls)}get staticToolCalls(){return this.finalStep.then(e=>e.staticToolCalls)}get dynamicToolCalls(){return this.finalStep.then(e=>e.dynamicToolCalls)}get toolResults(){return this.finalStep.then(e=>e.toolResults)}get staticToolResults(){return this.finalStep.then(e=>e.staticToolResults)}get dynamicToolResults(){return this.finalStep.then(e=>e.dynamicToolResults)}get usage(){return this.finalStep.then(e=>e.usage)}get request(){return this.finalStep.then(e=>e.request)}get response(){return this.finalStep.then(e=>e.response)}get totalUsage(){return this.consumeStream(),this._totalUsage.promise}get finishReason(){return this.consumeStream(),this._finishReason.promise}get rawFinishReason(){return this.consumeStream(),this._rawFinishReason.promise}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return ou(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.text)}})))}get fullStream(){return ou(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await xw({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(r){(t=e==null?void 0:e.onError)==null||t.call(e,r)}}get experimental_partialOutputStream(){return this.partialOutputStream}get partialOutputStream(){return ou(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}get elementStream(){var e,t,r;const a=(e=this.outputSpecification)==null?void 0:e.createElementStreamTransform();if(a==null)throw new Jc({functionality:`element streams in ${(r=(t=this.outputSpecification)==null?void 0:t.name)!=null?r:"text"} mode`});return ou(this.teeStream().pipeThrough(a))}get output(){return this.finalStep.then(e=>{var t;return((t=this.outputSpecification)!=null?t:Sp()).parseCompleteOutput({text:e.text},{response:e.response,usage:e.usage,finishReason:e.finishReason})})}toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:a,sendReasoning:s=!0,sendSources:o=!1,sendStart:u=!0,sendFinish:c=!0,onError:f=Ls}={}){const h=t!=null?Cq({originalMessages:e,responseMessageId:t}):void 0,p=b=>{var y;const k=(y=this.tools)==null?void 0:y[b.toolName];return k==null?b.dynamic:(k==null?void 0:k.type)==="dynamic"?!0:void 0},v=this.fullStream.pipeThrough(new TransformStream({transform:async(b,y)=>{const k=a==null?void 0:a({part:b}),_=b.type;switch(_){case"text-start":{y.enqueue({type:"text-start",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"text-delta":{y.enqueue({type:"text-delta",id:b.id,delta:b.text,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"text-end":{y.enqueue({type:"text-end",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"reasoning-start":{y.enqueue({type:"reasoning-start",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"reasoning-delta":{s&&y.enqueue({type:"reasoning-delta",id:b.id,delta:b.text,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"reasoning-end":{y.enqueue({type:"reasoning-end",id:b.id,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"file":{y.enqueue({type:"file",mediaType:b.file.mediaType,url:`data:${b.file.mediaType};base64,${b.file.base64}`});break}case"source":{o&&b.sourceType==="url"&&y.enqueue({type:"source-url",sourceId:b.id,url:b.url,title:b.title,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}}),o&&b.sourceType==="document"&&y.enqueue({type:"source-document",sourceId:b.id,mediaType:b.mediaType,title:b.title,filename:b.filename,...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{}});break}case"tool-input-start":{const T=p(b);y.enqueue({type:"tool-input-start",toolCallId:b.id,toolName:b.toolName,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{},...T!=null?{dynamic:T}:{},...b.title!=null?{title:b.title}:{}});break}case"tool-input-delta":{y.enqueue({type:"tool-input-delta",toolCallId:b.id,inputTextDelta:b.delta});break}case"tool-call":{const T=p(b);b.invalid?y.enqueue({type:"tool-input-error",toolCallId:b.toolCallId,toolName:b.toolName,input:b.input,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{},...T!=null?{dynamic:T}:{},errorText:f(b.error),...b.title!=null?{title:b.title}:{}}):y.enqueue({type:"tool-input-available",toolCallId:b.toolCallId,toolName:b.toolName,input:b.input,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.providerMetadata!=null?{providerMetadata:b.providerMetadata}:{},...T!=null?{dynamic:T}:{},...b.title!=null?{title:b.title}:{}});break}case"tool-approval-request":{y.enqueue({type:"tool-approval-request",approvalId:b.approvalId,toolCallId:b.toolCall.toolCallId});break}case"tool-result":{const T=p(b);y.enqueue({type:"tool-output-available",toolCallId:b.toolCallId,output:b.output,...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...b.preliminary!=null?{preliminary:b.preliminary}:{},...T!=null?{dynamic:T}:{}});break}case"tool-error":{const T=p(b);y.enqueue({type:"tool-output-error",toolCallId:b.toolCallId,errorText:f(b.error),...b.providerExecuted!=null?{providerExecuted:b.providerExecuted}:{},...T!=null?{dynamic:T}:{}});break}case"tool-output-denied":{y.enqueue({type:"tool-output-denied",toolCallId:b.toolCallId});break}case"error":{y.enqueue({type:"error",errorText:f(b.error)});break}case"start-step":{y.enqueue({type:"start-step"});break}case"finish-step":{y.enqueue({type:"finish-step"});break}case"start":{u&&y.enqueue({type:"start",...k!=null?{messageMetadata:k}:{},...h!=null?{messageId:h}:{}});break}case"finish":{c&&y.enqueue({type:"finish",finishReason:b.finishReason,...k!=null?{messageMetadata:k}:{}});break}case"abort":{y.enqueue(b);break}case"tool-input-end":break;case"raw":break;default:{const T=_;throw new Error(`Unknown chunk type: ${T}`)}}k!=null&&_!=="start"&&_!=="finish"&&y.enqueue({type:"message-metadata",messageMetadata:k})}}));return ou(Iq({stream:v,messageId:h??(t==null?void 0:t()),originalMessages:e,onFinish:r,onError:f}))}pipeUIMessageStreamToResponse(e,{originalMessages:t,generateMessageId:r,onFinish:a,messageMetadata:s,sendReasoning:o,sendSources:u,sendFinish:c,sendStart:f,onError:h,...p}={}){Dq({response:e,stream:this.toUIMessageStream({originalMessages:t,generateMessageId:r,onFinish:a,messageMetadata:s,sendReasoning:o,sendSources:u,sendFinish:c,sendStart:f,onError:h}),...p})}pipeTextStreamToResponse(e,t){Mq({response:e,textStream:this.textStream,...t})}toUIMessageStreamResponse({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:a,sendReasoning:s,sendSources:o,sendFinish:u,sendStart:c,onError:f,...h}={}){return Nq({stream:this.toUIMessageStream({originalMessages:e,generateMessageId:t,onFinish:r,messageMetadata:a,sendReasoning:s,sendSources:o,sendFinish:u,sendStart:c,onError:f}),...h})}toTextStreamResponse(e){return Eq({textStream:this.textStream,...e})}};async function Hq(e,t){const r=[];for(const a of e)switch(a.role){case"system":{const s=a.parts.filter(u=>u.type==="text"),o=s.reduce((u,c)=>c.providerMetadata!=null?{...u,...c.providerMetadata}:u,{});r.push({role:"system",content:s.map(u=>u.text).join(""),...Object.keys(o).length>0?{providerOptions:o}:{}});break}case"user":{r.push({role:"user",content:a.parts.map(s=>{var o;if(Im(s))return{type:"text",text:s.text,...s.providerMetadata!=null?{providerOptions:s.providerMetadata}:{}};if(Dm(s))return{type:"file",mediaType:s.mediaType,filename:s.filename,data:s.url,...s.providerMetadata!=null?{providerOptions:s.providerMetadata}:{}};if(Rm(s))return(o=void 0)==null?void 0:o.call(t,s)}).filter(N$)});break}case"assistant":{if(a.parts!=null){let s=[];async function o(){var u,c,f,h,p,v;if(s.length===0)return;const b=[];for(const k of s)if(Im(k))b.push({type:"text",text:k.text,...k.providerMetadata!=null?{providerOptions:k.providerMetadata}:{}});else if(Dm(k))b.push({type:"file",mediaType:k.mediaType,filename:k.filename,data:k.url});else if(q5(k))b.push({type:"reasoning",text:k.text,providerOptions:k.providerMetadata});else if(js(k)){const _=jm(k);k.state!=="input-streaming"&&(b.push({type:"tool-call",toolCallId:k.toolCallId,toolName:_,input:k.state==="output-error"?(u=k.input)!=null?u:"rawInput"in k?k.rawInput:void 0:k.input,providerExecuted:k.providerExecuted,...k.callProviderMetadata!=null?{providerOptions:k.callProviderMetadata}:{}}),k.approval!=null&&b.push({type:"tool-approval-request",approvalId:k.approval.id,toolCallId:k.toolCallId}),k.providerExecuted===!0&&k.state!=="approval-responded"&&(k.state==="output-available"||k.state==="output-error")&&b.push({type:"tool-result",toolCallId:k.toolCallId,toolName:_,output:await Yo({toolCallId:k.toolCallId,input:k.input,output:k.state==="output-error"?k.errorText:k.output,tool:(c=void 0)==null?void 0:c[_],errorMode:k.state==="output-error"?"json":"none"}),...k.callProviderMetadata!=null?{providerOptions:k.callProviderMetadata}:{}}))}else if(Rm(k)){const _=(f=void 0)==null?void 0:f.call(t,k);_!=null&&b.push(_)}else{const _=k;throw new Error(`Unsupported part: ${_}`)}r.push({role:"assistant",content:b});const y=s.filter(k=>{var _;return js(k)&&(k.providerExecuted!==!0||((_=k.approval)==null?void 0:_.approved)!=null)});if(y.length>0){const k=[];for(const _ of y)if(((h=_.approval)==null?void 0:h.approved)!=null&&k.push({type:"tool-approval-response",approvalId:_.approval.id,approved:_.approval.approved,reason:_.approval.reason,providerExecuted:_.providerExecuted}),_.providerExecuted!==!0)switch(_.state){case"output-denied":{k.push({type:"tool-result",toolCallId:_.toolCallId,toolName:jm(_),output:{type:"error-text",value:(p=_.approval.reason)!=null?p:"Tool execution denied."},..._.callProviderMetadata!=null?{providerOptions:_.callProviderMetadata}:{}});break}case"output-error":case"output-available":{const T=jm(_);k.push({type:"tool-result",toolCallId:_.toolCallId,toolName:T,output:await Yo({toolCallId:_.toolCallId,input:_.input,output:_.state==="output-error"?_.errorText:_.output,tool:(v=void 0)==null?void 0:v[T],errorMode:_.state==="output-error"?"text":"none"}),..._.callProviderMetadata!=null?{providerOptions:_.callProviderMetadata}:{}});break}}k.length>0&&r.push({role:"tool",content:k})}s=[]}for(const u of a.parts)Im(u)||q5(u)||Dm(u)||js(u)||Rm(u)?s.push(u):u.type==="step-start"&&await o();await o();break}break}default:{const s=a.role;throw new bU({originalMessage:a,message:`Unsupported role: ${s}`})}}return r}$u({prefix:"aiobj",size:24});var Zq=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(e){return new Promise((t,r)=>{this.queue.push(async()=>{try{await e(),t()}catch(a){r(a)}}),this.processQueue()})}};$u({prefix:"aiobj",size:24});async function Gq(e){if(e==null)return[];if(!globalThis.FileList||!(e instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(e).map(async t=>{const{name:r,type:a}=t,s=await new Promise((o,u)=>{const c=new FileReader;c.onload=f=>{var h;o((h=f.target)==null?void 0:h.result)},c.onerror=f=>u(f),c.readAsDataURL(t)});return{type:"file",mediaType:a,filename:r,url:s}}))}var Vq=class{constructor({api:e="/api/chat",credentials:t,headers:r,body:a,fetch:s,prepareSendMessagesRequest:o,prepareReconnectToStreamRequest:u}){this.api=e,this.credentials=t,this.headers=r,this.body=a,this.fetch=s,this.prepareSendMessagesRequest=o,this.prepareReconnectToStreamRequest=u}async sendMessages({abortSignal:e,...t}){var r,a,s,o,u;const c=await hr(this.body),f=await hr(this.headers),h=await hr(this.credentials),p={...Os(f),...Os(t.headers)},v=await((r=this.prepareSendMessagesRequest)==null?void 0:r.call(this,{api:this.api,id:t.chatId,messages:t.messages,body:{...c,...t.body},headers:p,credentials:h,requestMetadata:t.metadata,trigger:t.trigger,messageId:t.messageId})),b=(a=v==null?void 0:v.api)!=null?a:this.api,y=(v==null?void 0:v.headers)!==void 0?Os(v.headers):p,k=(v==null?void 0:v.body)!==void 0?v.body:{...c,...t.body,id:t.chatId,messages:t.messages,trigger:t.trigger,messageId:t.messageId},_=(s=v==null?void 0:v.credentials)!=null?s:h,R=await((o=this.fetch)!=null?o:globalThis.fetch)(b,{method:"POST",headers:Ps({"Content-Type":"application/json",...y},`ai-sdk/${bp}`,Au()),body:JSON.stringify(k),credentials:_,signal:e});if(!R.ok)throw new Error((u=await R.text())!=null?u:"Failed to fetch the chat response.");if(!R.body)throw new Error("The response body is empty.");return this.processResponseStream(R.body)}async reconnectToStream(e){var t,r,a,s,o;const u=await hr(this.body),c=await hr(this.headers),f=await hr(this.credentials),h={...Os(c),...Os(e.headers)},p=await((t=this.prepareReconnectToStreamRequest)==null?void 0:t.call(this,{api:this.api,id:e.chatId,body:{...u,...e.body},headers:h,credentials:f,requestMetadata:e.metadata})),v=(r=p==null?void 0:p.api)!=null?r:`${this.api}/${e.chatId}/stream`,b=(p==null?void 0:p.headers)!==void 0?Os(p.headers):h,y=(a=p==null?void 0:p.credentials)!=null?a:f,_=await((s=this.fetch)!=null?s:globalThis.fetch)(v,{method:"GET",headers:Ps(b,`ai-sdk/${bp}`,Au()),credentials:y});if(_.status===204)return null;if(!_.ok)throw new Error((o=await _.text())!=null?o:"Failed to fetch the chat response.");if(!_.body)throw new Error("The response body is empty.");return this.processResponseStream(_.body)}},ww=class extends Vq{constructor(e={}){super(e)}processResponseStream(e){return X8({stream:e,schema:Oq}).pipeThrough(new TransformStream({async transform(t,r){if(!t.success)throw t.error;r.enqueue(t.value)}}))}},Fq=class{constructor({generateId:e=g1,id:t=e(),transport:r=new ww,messageMetadataSchema:a,dataPartSchemas:s,state:o,onError:u,onToolCall:c,onFinish:f,onData:h,sendAutomaticallyWhen:p}){this.activeResponse=void 0,this.jobExecutor=new Zq,this.sendMessage=async(v,b)=>{var y,k,_,T;if(v==null){await this.makeRequest({trigger:"submit-message",messageId:(y=this.lastMessage)==null?void 0:y.id,...b});return}let R;if("text"in v||"files"in v?R={parts:[...Array.isArray(v.files)?v.files:await Gq(v.files),..."text"in v&&v.text!=null?[{type:"text",text:v.text}]:[]]}:R=v,v.messageId!=null){const O=this.state.messages.findIndex(M=>M.id===v.messageId);if(O===-1)throw new Error(`message with id ${v.messageId} not found`);if(this.state.messages[O].role!=="user")throw new Error(`message with id ${v.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,O+1),this.state.replaceMessage(O,{...R,id:v.messageId,role:(k=R.role)!=null?k:"user",metadata:v.metadata})}else this.state.pushMessage({...R,id:(_=R.id)!=null?_:this.generateId(),role:(T=R.role)!=null?T:"user",metadata:v.metadata});await this.makeRequest({trigger:"submit-message",messageId:v.messageId,...b})},this.regenerate=async({messageId:v,...b}={})=>{const y=v==null?this.state.messages.length-1:this.state.messages.findIndex(k=>k.id===v);if(y===-1)throw new Error(`message ${v} not found`);this.state.messages=this.state.messages.slice(0,this.messages[y].role==="assistant"?y:y+1),await this.makeRequest({trigger:"regenerate-message",messageId:v,...b})},this.resumeStream=async(v={})=>{await this.makeRequest({trigger:"resume-stream",...v})},this.clearError=()=>{this.status==="error"&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolApprovalResponse=async({id:v,approved:b,reason:y})=>this.jobExecutor.run(async()=>{var k,_;const T=this.state.messages,R=T[T.length-1],O=M=>js(M)&&M.state==="approval-requested"&&M.approval.id===v?{...M,state:"approval-responded",approval:{id:v,approved:b,reason:y}}:M;this.state.replaceMessage(T.length-1,{...R,parts:R.parts.map(O)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(O)),this.status!=="streaming"&&this.status!=="submitted"&&((k=this.sendAutomaticallyWhen)!=null&&k.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(_=this.lastMessage)==null?void 0:_.id})}),this.addToolOutput=async({state:v="output-available",tool:b,toolCallId:y,output:k,errorText:_})=>this.jobExecutor.run(async()=>{var T,R;const O=this.state.messages,M=O[O.length-1],j=I=>js(I)&&I.toolCallId===y?{...I,state:v,output:k,errorText:_}:I;this.state.replaceMessage(O.length-1,{...M,parts:M.parts.map(j)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(j)),this.status!=="streaming"&&this.status!=="submitted"&&((T=this.sendAutomaticallyWhen)!=null&&T.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:(R=this.lastMessage)==null?void 0:R.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var v;this.status!=="streaming"&&this.status!=="submitted"||(v=this.activeResponse)!=null&&v.abortController&&this.activeResponse.abortController.abort()},this.id=t,this.transport=r,this.generateId=e,this.messageMetadataSchema=a,this.dataPartSchemas=s,this.state=o,this.onError=u,this.onToolCall=c,this.onFinish=f,this.onData=h,this.sendAutomaticallyWhen=p}get status(){return this.state.status}setStatus({status:e,error:t}){this.status!==e&&(this.state.status=e,this.state.error=t)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(e){this.state.messages=e}async makeRequest({trigger:e,metadata:t,headers:r,body:a,messageId:s}){var o,u,c,f;this.setStatus({status:"submitted",error:void 0});const h=this.lastMessage;let p=!1,v=!1,b=!1;try{const y={state:yw({lastMessage:this.state.snapshot(h),messageId:this.generateId()}),abortController:new AbortController};y.abortController.signal.addEventListener("abort",()=>{p=!0}),this.activeResponse=y;let k;if(e==="resume-stream"){const T=await this.transport.reconnectToStream({chatId:this.id,metadata:t,headers:r,body:a});if(T==null){this.setStatus({status:"ready"});return}k=T}else k=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:y.abortController.signal,metadata:t,headers:r,body:a,trigger:e,messageId:s});const _=T=>this.jobExecutor.run(()=>T({state:y.state,write:()=>{var R;this.setStatus({status:"streaming"}),y.state.message.id===((R=this.lastMessage)==null?void 0:R.id)?this.state.replaceMessage(this.state.messages.length-1,y.state.message):this.state.pushMessage(y.state.message)}}));await xw({stream:bw({stream:k,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob:_,onError:T=>{throw T}}),onError:T=>{throw T}}),this.setStatus({status:"ready"})}catch(y){if(p||y.name==="AbortError")return p=!0,this.setStatus({status:"ready"}),null;b=!0,y instanceof TypeError&&(y.message.toLowerCase().includes("fetch")||y.message.toLowerCase().includes("network"))&&(v=!0),this.onError&&y instanceof Error&&this.onError(y),this.setStatus({status:"error",error:y})}finally{try{(u=this.onFinish)==null||u.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort:p,isDisconnect:v,isError:b,finishReason:(o=this.activeResponse)==null?void 0:o.state.finishReason})}catch(y){console.error(y)}this.activeResponse=void 0}(c=this.sendAutomaticallyWhen)!=null&&c.call(this,{messages:this.state.messages})&&!b&&await this.makeRequest({trigger:"submit-message",messageId:(f=this.lastMessage)==null?void 0:f.id,metadata:t,headers:r,body:a})}};function Yq({messages:e}){const t=e[e.length-1];if(!t||t.role!=="assistant")return!1;const r=t.parts.reduce((s,o,u)=>o.type==="step-start"?u:s,-1),a=t.parts.slice(r+1).filter(js).filter(s=>!s.providerExecuted);return a.length>0&&a.every(s=>s.state==="output-available"||s.state==="output-error")}var $m,H5;function Xq(){if(H5)return $m;H5=1;function e(t,r){if(typeof t!="function")throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof t}\`.`);let a,s=0;return function(...u){clearTimeout(a);const c=Date.now(),f=c-s,h=r-f;h<=0?(s=c,t.apply(this,u)):a=setTimeout(()=>{s=Date.now(),t.apply(this,u)},h)}}return $m=e,$m}var Kq=Xq();const Jq=a6(Kq);var Sw=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Kt=(e,t,r)=>(Sw(e,t,"read from private field"),r?r.call(e):t.get(e)),wn=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},Zi=(e,t,r,a)=>(Sw(e,t,"write to private field"),t.set(e,r),r);function Wq(e,t){return t!=null?Jq(e,t):e}var Xa,Cc,Oc,fu,hu,mu,Lo,kp,Tp,Qq=class{constructor(e=[]){wn(this,Xa,void 0),wn(this,Cc,"ready"),wn(this,Oc,void 0),wn(this,fu,new Set),wn(this,hu,new Set),wn(this,mu,new Set),this.pushMessage=t=>{Zi(this,Xa,Kt(this,Xa).concat(t)),Kt(this,Lo).call(this)},this.popMessage=()=>{Zi(this,Xa,Kt(this,Xa).slice(0,-1)),Kt(this,Lo).call(this)},this.replaceMessage=(t,r)=>{Zi(this,Xa,[...Kt(this,Xa).slice(0,t),this.snapshot(r),...Kt(this,Xa).slice(t+1)]),Kt(this,Lo).call(this)},this.snapshot=t=>structuredClone(t),this["~registerMessagesCallback"]=(t,r)=>{const a=r?Wq(t,r):t;return Kt(this,fu).add(a),()=>{Kt(this,fu).delete(a)}},this["~registerStatusCallback"]=t=>(Kt(this,hu).add(t),()=>{Kt(this,hu).delete(t)}),this["~registerErrorCallback"]=t=>(Kt(this,mu).add(t),()=>{Kt(this,mu).delete(t)}),wn(this,Lo,()=>{Kt(this,fu).forEach(t=>t())}),wn(this,kp,()=>{Kt(this,hu).forEach(t=>t())}),wn(this,Tp,()=>{Kt(this,mu).forEach(t=>t())}),Zi(this,Xa,e)}get status(){return Kt(this,Cc)}set status(e){Zi(this,Cc,e),Kt(this,kp).call(this)}get error(){return Kt(this,Oc)}set error(e){Zi(this,Oc,e),Kt(this,Tp).call(this)}get messages(){return Kt(this,Xa)}set messages(e){Zi(this,Xa,[...e]),Kt(this,Lo).call(this)}};Xa=new WeakMap;Cc=new WeakMap;Oc=new WeakMap;fu=new WeakMap;hu=new WeakMap;mu=new WeakMap;Lo=new WeakMap;kp=new WeakMap;Tp=new WeakMap;var Uo,Z5=class extends Fq{constructor({messages:e,...t}){const r=new Qq(e);super({...t,state:r}),wn(this,Uo,void 0),this["~registerMessagesCallback"]=(a,s)=>Kt(this,Uo)["~registerMessagesCallback"](a,s),this["~registerStatusCallback"]=a=>Kt(this,Uo)["~registerStatusCallback"](a),this["~registerErrorCallback"]=a=>Kt(this,Uo)["~registerErrorCallback"](a),Zi(this,Uo,r)}};Uo=new WeakMap;function eP({experimental_throttle:e,resume:t=!1,...r}={}){const a=ye.useRef("chat"in r?{}:{onToolCall:r.onToolCall,onData:r.onData,onFinish:r.onFinish,onError:r.onError,sendAutomaticallyWhen:r.sendAutomaticallyWhen});"chat"in r||(a.current={onToolCall:r.onToolCall,onData:r.onData,onFinish:r.onFinish,onError:r.onError,sendAutomaticallyWhen:r.sendAutomaticallyWhen});const s={...r,onToolCall:b=>{var y,k;return(k=(y=a.current).onToolCall)==null?void 0:k.call(y,b)},onData:b=>{var y,k;return(k=(y=a.current).onData)==null?void 0:k.call(y,b)},onFinish:b=>{var y,k;return(k=(y=a.current).onFinish)==null?void 0:k.call(y,b)},onError:b=>{var y,k;return(k=(y=a.current).onError)==null?void 0:k.call(y,b)},sendAutomaticallyWhen:b=>{var y,k,_;return(_=(k=(y=a.current).sendAutomaticallyWhen)==null?void 0:k.call(y,b))!=null?_:!1}},o=ye.useRef("chat"in r?r.chat:new Z5(s));("chat"in r&&r.chat!==o.current||"id"in r&&o.current.id!==r.id)&&(o.current="chat"in r?r.chat:new Z5(s));const c=ye.useCallback(b=>o.current["~registerMessagesCallback"](b,e),[e,o.current.id]),f=ye.useSyncExternalStore(c,()=>o.current.messages,()=>o.current.messages),h=ye.useSyncExternalStore(o.current["~registerStatusCallback"],()=>o.current.status,()=>o.current.status),p=ye.useSyncExternalStore(o.current["~registerErrorCallback"],()=>o.current.error,()=>o.current.error),v=ye.useCallback(b=>{typeof b=="function"&&(b=b(o.current.messages)),o.current.messages=b},[o]);return ye.useEffect(()=>{t&&o.current.resumeStream()},[t,o]),{id:o.current.id,messages:f,setMessages:v,sendMessage:o.current.sendMessage,regenerate:o.current.regenerate,clearError:o.current.clearError,stop:o.current.stop,error:p,resumeStream:o.current.resumeStream,status:h,addToolResult:o.current.addToolOutput,addToolOutput:o.current.addToolOutput,addToolApprovalResponse:o.current.addToolApprovalResponse}}var tP="3.0.16",rP=Jt(()=>Zt(xe({error:xe({code:ot().nullable(),message:W(),status:W()})}))),Ou=Hs({errorSchema:rP,errorToMessage:e=>e.error.message}),aP=Jt(()=>Zt(xe({outputDimensionality:ot().optional(),taskType:Rr(["SEMANTIC_SIMILARITY","CLASSIFICATION","CLUSTERING","RETRIEVAL_DOCUMENT","RETRIEVAL_QUERY","QUESTION_ANSWERING","FACT_VERIFICATION","CODE_RETRIEVAL_QUERY"]).optional()}))),nP=class{constructor(e,t){this.specificationVersion="v3",this.maxEmbeddingsPerCall=2048,this.supportsParallelCalls=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}async doEmbed({values:e,headers:t,abortSignal:r,providerOptions:a}){const s=await sd({provider:"google",providerOptions:a,schema:aP});if(e.length>this.maxEmbeddingsPerCall)throw new OO({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const o=ts(await hr(this.config.headers),t);if(e.length===1){const{responseHeaders:h,value:p,rawValue:v}=await di({url:`${this.config.baseURL}/models/${this.modelId}:embedContent`,headers:o,body:{model:`models/${this.modelId}`,content:{parts:[{text:e[0]}]},outputDimensionality:s==null?void 0:s.outputDimensionality,taskType:s==null?void 0:s.taskType},failedResponseHandler:Ou,successfulResponseHandler:fi(sP),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:[p.embedding.values],usage:void 0,response:{headers:h,body:v}}}const{responseHeaders:u,value:c,rawValue:f}=await di({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:o,body:{requests:e.map(h=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:h}]},outputDimensionality:s==null?void 0:s.outputDimensionality,taskType:s==null?void 0:s.taskType}))},failedResponseHandler:Ou,successfulResponseHandler:fi(iP),abortSignal:r,fetch:this.config.fetch});return{warnings:[],embeddings:c.embeddings.map(h=>h.values),usage:void 0,response:{headers:u,body:f}}}},iP=Jt(()=>Zt(xe({embeddings:at(xe({values:at(ot())}))}))),sP=Jt(()=>Zt(xe({embedding:xe({values:at(ot())})})));function G5(e){var t,r,a,s;if(e==null)return{inputTokens:{total:void 0,noCache:void 0,cacheRead:void 0,cacheWrite:void 0},outputTokens:{total:void 0,text:void 0,reasoning:void 0},raw:void 0};const o=(t=e.promptTokenCount)!=null?t:0,u=(r=e.candidatesTokenCount)!=null?r:0,c=(a=e.cachedContentTokenCount)!=null?a:0,f=(s=e.thoughtsTokenCount)!=null?s:0;return{inputTokens:{total:o,noCache:o-c,cacheRead:c,cacheWrite:void 0},outputTokens:{total:u+f,text:u,reasoning:f},raw:e}}function _n(e,t=!0){if(e==null)return;if(oP(e))return t?void 0:typeof e=="object"&&e.description?{type:"object",description:e.description}:{type:"object"};if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:r,description:a,required:s,properties:o,items:u,allOf:c,anyOf:f,oneOf:h,format:p,const:v,minLength:b,enum:y}=e,k={};if(a&&(k.description=a),s&&(k.required=s),p&&(k.format=p),v!==void 0&&(k.enum=[v]),r)if(Array.isArray(r)){const _=r.includes("null"),T=r.filter(R=>R!=="null");T.length===0?k.type="null":(k.anyOf=T.map(R=>({type:R})),_&&(k.nullable=!0))}else k.type=r;if(y!==void 0&&(k.enum=y),o!=null&&(k.properties=Object.entries(o).reduce((_,[T,R])=>(_[T]=_n(R,!1),_),{})),u&&(k.items=Array.isArray(u)?u.map(_=>_n(_,!1)):_n(u,!1)),c&&(k.allOf=c.map(_=>_n(_,!1))),f)if(f.some(_=>typeof _=="object"&&(_==null?void 0:_.type)==="null")){const _=f.filter(T=>!(typeof T=="object"&&(T==null?void 0:T.type)==="null"));if(_.length===1){const T=_n(_[0],!1);typeof T=="object"&&(k.nullable=!0,Object.assign(k,T))}else k.anyOf=_.map(T=>_n(T,!1)),k.nullable=!0}else k.anyOf=f.map(_=>_n(_,!1));return h&&(k.oneOf=h.map(_=>_n(_,!1))),b!==void 0&&(k.minLength=b),k}function oP(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)&&!e.additionalProperties}function lP(e,t){var r,a,s;const o=[],u=[];let c=!0;const f=(r=t==null?void 0:t.isGemmaModel)!=null?r:!1,h=(a=t==null?void 0:t.providerOptionsName)!=null?a:"google";for(const{role:p,content:v}of e)switch(p){case"system":{if(!c)throw new Jc({functionality:"system messages are only supported at the beginning of the conversation"});o.push({text:v});break}case"user":{c=!1;const b=[];for(const y of v)switch(y.type){case"text":{b.push({text:y.text});break}case"file":{const k=y.mediaType==="image/*"?"image/jpeg":y.mediaType;b.push(y.data instanceof URL?{fileData:{mimeType:k,fileUri:y.data.toString()}}:{inlineData:{mimeType:k,data:W3(y.data)}});break}}u.push({role:"user",parts:b});break}case"assistant":{c=!1,u.push({role:"model",parts:v.map(b=>{var y;const k=(y=b.providerOptions)==null?void 0:y[h],_=(k==null?void 0:k.thoughtSignature)!=null?String(k.thoughtSignature):void 0;switch(b.type){case"text":return b.text.length===0?void 0:{text:b.text,thoughtSignature:_};case"reasoning":return b.text.length===0?void 0:{text:b.text,thought:!0,thoughtSignature:_};case"file":{if(b.data instanceof URL)throw new Jc({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:b.mediaType,data:W3(b.data)},thoughtSignature:_}}case"tool-call":return{functionCall:{name:b.toolName,args:b.input},thoughtSignature:_}}}).filter(b=>b!==void 0)});break}case"tool":{c=!1;const b=[];for(const y of v){if(y.type==="tool-approval-response")continue;const k=y.output;if(k.type==="content")for(const _ of k.value)switch(_.type){case"text":b.push({functionResponse:{name:y.toolName,response:{name:y.toolName,content:_.text}}});break;case"image-data":b.push({inlineData:{mimeType:_.mediaType,data:_.data}},{text:"Tool executed successfully and returned this image as a response"});break;default:b.push({text:JSON.stringify(_)});break}else b.push({functionResponse:{name:y.toolName,response:{name:y.toolName,content:k.type==="execution-denied"?(s=k.reason)!=null?s:"Tool execution denied.":k.value}}})}u.push({role:"user",parts:b});break}}if(f&&o.length>0&&u.length>0&&u[0].role==="user"){const p=o.map(v=>v.text).join(`

`);u[0].parts.unshift({text:p+`

`})}return{systemInstruction:o.length>0&&!f?{parts:o}:void 0,contents:u}}function V5(e){return e.includes("/")?e:`models/${e}`}var F5=Jt(()=>Zt(xe({responseModalities:at(Rr(["TEXT","IMAGE"])).optional(),thinkingConfig:xe({thinkingBudget:ot().optional(),includeThoughts:kr().optional(),thinkingLevel:Rr(["minimal","low","medium","high"]).optional()}).optional(),cachedContent:W().optional(),structuredOutputs:kr().optional(),safetySettings:at(xe({category:Rr(["HARM_CATEGORY_UNSPECIFIED","HARM_CATEGORY_HATE_SPEECH","HARM_CATEGORY_DANGEROUS_CONTENT","HARM_CATEGORY_HARASSMENT","HARM_CATEGORY_SEXUALLY_EXPLICIT","HARM_CATEGORY_CIVIC_INTEGRITY"]),threshold:Rr(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"])})).optional(),threshold:Rr(["HARM_BLOCK_THRESHOLD_UNSPECIFIED","BLOCK_LOW_AND_ABOVE","BLOCK_MEDIUM_AND_ABOVE","BLOCK_ONLY_HIGH","BLOCK_NONE","OFF"]).optional(),audioTimestamp:kr().optional(),labels:ci(W(),W()).optional(),mediaResolution:Rr(["MEDIA_RESOLUTION_UNSPECIFIED","MEDIA_RESOLUTION_LOW","MEDIA_RESOLUTION_MEDIUM","MEDIA_RESOLUTION_HIGH"]).optional(),imageConfig:xe({aspectRatio:Rr(["1:1","2:3","3:2","3:4","4:3","4:5","5:4","9:16","16:9","21:9"]).optional(),imageSize:Rr(["1K","2K","4K"]).optional()}).optional(),retrievalConfig:xe({latLng:xe({latitude:ot(),longitude:ot()}).optional()}).optional()})));function uP({tools:e,toolChoice:t,modelId:r}){var a;e=e!=null&&e.length?e:void 0;const s=[],o=["gemini-flash-latest","gemini-flash-lite-latest","gemini-pro-latest"].some(y=>y===r),u=r.includes("gemini-2")||r.includes("gemini-3")||o,c=r.includes("gemini-1.5-flash")&&!r.includes("-8b"),f=r.includes("gemini-2.5")||r.includes("gemini-3");if(e==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const h=e.some(y=>y.type==="function"),p=e.some(y=>y.type==="provider");if(h&&p&&s.push({type:"unsupported",feature:"combination of function and provider-defined tools"}),p){const y=[];return e.filter(_=>_.type==="provider").forEach(_=>{switch(_.id){case"google.google_search":u?y.push({googleSearch:{}}):c?y.push({googleSearchRetrieval:{dynamicRetrievalConfig:{mode:_.args.mode,dynamicThreshold:_.args.dynamicThreshold}}}):y.push({googleSearchRetrieval:{}});break;case"google.enterprise_web_search":u?y.push({enterpriseWebSearch:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`,details:"Enterprise Web Search requires Gemini 2.0 or newer."});break;case"google.url_context":u?y.push({urlContext:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`,details:"The URL context tool is not supported with other Gemini models than Gemini 2."});break;case"google.code_execution":u?y.push({codeExecution:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`,details:"The code execution tools is not supported with other Gemini models than Gemini 2."});break;case"google.file_search":f?y.push({fileSearch:{..._.args}}):s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`,details:"The file search tool is only supported with Gemini 2.5 models and Gemini 3 models."});break;case"google.vertex_rag_store":u?y.push({retrieval:{vertex_rag_store:{rag_resources:{rag_corpus:_.args.ragCorpus},similarity_top_k:_.args.topK}}}):s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`,details:"The RAG store tool is not supported with other Gemini models than Gemini 2."});break;case"google.google_maps":u?y.push({googleMaps:{}}):s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`,details:"The Google Maps grounding tool is not supported with Gemini models other than Gemini 2 or newer."});break;default:s.push({type:"unsupported",feature:`provider-defined tool ${_.id}`});break}}),{tools:y.length>0?y:void 0,toolConfig:void 0,toolWarnings:s}}const v=[];for(const y of e)switch(y.type){case"function":v.push({name:y.name,description:(a=y.description)!=null?a:"",parameters:_n(y.inputSchema)});break;default:s.push({type:"unsupported",feature:`function tool ${y.name}`});break}if(t==null)return{tools:[{functionDeclarations:v}],toolConfig:void 0,toolWarnings:s};const b=t.type;switch(b){case"auto":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:[{functionDeclarations:v}],toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[t.toolName]}},toolWarnings:s};default:{const y=b;throw new Jc({functionality:`tool choice type: ${y}`})}}}function Y5({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"MALFORMED_FUNCTION_CALL":return"error";case"FINISH_REASON_UNSPECIFIED":case"OTHER":default:return"other"}}var cP=class{constructor(e,t){this.specificationVersion="v3";var r;this.modelId=e,this.config=t,this.generateId=(r=t.generateId)!=null?r:g1}get provider(){return this.config.provider}get supportedUrls(){var e,t,r;return(r=(t=(e=this.config).supportedUrls)==null?void 0:t.call(e))!=null?r:{}}async getArgs({prompt:e,maxOutputTokens:t,temperature:r,topP:a,topK:s,frequencyPenalty:o,presencePenalty:u,stopSequences:c,responseFormat:f,seed:h,tools:p,toolChoice:v,providerOptions:b}){var y;const k=[],_=this.config.provider.includes("vertex")?"vertex":"google";let T=await sd({provider:_,providerOptions:b,schema:F5});T==null&&_!=="google"&&(T=await sd({provider:"google",providerOptions:b,schema:F5})),p!=null&&p.some(E=>E.type==="provider"&&E.id==="google.vertex_rag_store")&&!this.config.provider.startsWith("google.vertex.")&&k.push({type:"other",message:`The 'vertex_rag_store' tool is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const R=this.modelId.toLowerCase().startsWith("gemma-"),{contents:O,systemInstruction:M}=lP(e,{isGemmaModel:R,providerOptionsName:_}),{tools:j,toolConfig:I,toolWarnings:$}=uP({tools:p,toolChoice:v,modelId:this.modelId});return{args:{generationConfig:{maxOutputTokens:t,temperature:r,topK:s,topP:a,frequencyPenalty:o,presencePenalty:u,stopSequences:c,seed:h,responseMimeType:(f==null?void 0:f.type)==="json"?"application/json":void 0,responseSchema:(f==null?void 0:f.type)==="json"&&f.schema!=null&&((y=T==null?void 0:T.structuredOutputs)==null||y)?_n(f.schema):void 0,...(T==null?void 0:T.audioTimestamp)&&{audioTimestamp:T.audioTimestamp},responseModalities:T==null?void 0:T.responseModalities,thinkingConfig:T==null?void 0:T.thinkingConfig,...(T==null?void 0:T.mediaResolution)&&{mediaResolution:T.mediaResolution},...(T==null?void 0:T.imageConfig)&&{imageConfig:T.imageConfig}},contents:O,systemInstruction:R?void 0:M,safetySettings:T==null?void 0:T.safetySettings,tools:j,toolConfig:T!=null&&T.retrievalConfig?{...I,retrievalConfig:T.retrievalConfig}:I,cachedContent:T==null?void 0:T.cachedContent,labels:T==null?void 0:T.labels},warnings:[...k,...$],providerOptionsName:_}}async doGenerate(e){var t,r,a,s,o,u,c,f,h;const{args:p,warnings:v,providerOptionsName:b}=await this.getArgs(e),y=ts(await hr(this.config.headers),e.headers),{responseHeaders:k,value:_,rawValue:T}=await di({url:`${this.config.baseURL}/${V5(this.modelId)}:generateContent`,headers:y,body:p,failedResponseHandler:Ou,successfulResponseHandler:fi(fP),abortSignal:e.abortSignal,fetch:this.config.fetch}),R=_.candidates[0],O=[],M=(r=(t=R.content)==null?void 0:t.parts)!=null?r:[],j=_.usageMetadata;let I;for(const E of M)if("executableCode"in E&&((a=E.executableCode)!=null&&a.code)){const D=this.config.generateId();I=D,O.push({type:"tool-call",toolCallId:D,toolName:"code_execution",input:JSON.stringify(E.executableCode),providerExecuted:!0})}else"codeExecutionResult"in E&&E.codeExecutionResult?(O.push({type:"tool-result",toolCallId:I,toolName:"code_execution",result:{outcome:E.codeExecutionResult.outcome,output:E.codeExecutionResult.output}}),I=void 0):"text"in E&&E.text!=null&&E.text.length>0?O.push({type:E.thought===!0?"reasoning":"text",text:E.text,providerMetadata:E.thoughtSignature?{[b]:{thoughtSignature:E.thoughtSignature}}:void 0}):"functionCall"in E?O.push({type:"tool-call",toolCallId:this.config.generateId(),toolName:E.functionCall.name,input:JSON.stringify(E.functionCall.args),providerMetadata:E.thoughtSignature?{[b]:{thoughtSignature:E.thoughtSignature}}:void 0}):"inlineData"in E&&O.push({type:"file",data:E.inlineData.data,mediaType:E.inlineData.mimeType,providerMetadata:E.thoughtSignature?{[b]:{thoughtSignature:E.thoughtSignature}}:void 0});const $=(s=X5({groundingMetadata:R.groundingMetadata,generateId:this.config.generateId}))!=null?s:[];for(const E of $)O.push(E);return{content:O,finishReason:{unified:Y5({finishReason:R.finishReason,hasToolCalls:O.some(E=>E.type==="tool-call"&&!E.providerExecuted)}),raw:(o=R.finishReason)!=null?o:void 0},usage:G5(j),warnings:v,providerMetadata:{[b]:{promptFeedback:(u=_.promptFeedback)!=null?u:null,groundingMetadata:(c=R.groundingMetadata)!=null?c:null,urlContextMetadata:(f=R.urlContextMetadata)!=null?f:null,safetyRatings:(h=R.safetyRatings)!=null?h:null,usageMetadata:j??null}},request:{body:p},response:{headers:k,body:T}}}async doStream(e){const{args:t,warnings:r,providerOptionsName:a}=await this.getArgs(e),s=ts(await hr(this.config.headers),e.headers),{responseHeaders:o,value:u}=await di({url:`${this.config.baseURL}/${V5(this.modelId)}:streamGenerateContent?alt=sse`,headers:s,body:t,failedResponseHandler:Ou,successfulResponseHandler:K8(hP),abortSignal:e.abortSignal,fetch:this.config.fetch});let c={unified:"other",raw:void 0},f,h;const p=this.config.generateId;let v=!1,b=null,y=null,k=0;const _=new Set;let T;return{stream:u.pipeThrough(new TransformStream({start(R){R.enqueue({type:"stream-start",warnings:r})},transform(R,O){var M,j,I,$,E,D,V;if(e.includeRawChunks&&O.enqueue({type:"raw",rawValue:R.rawValue}),!R.success){O.enqueue({type:"error",error:R.error});return}const de=R.value,Q=de.usageMetadata;Q!=null&&(f=Q);const G=(M=de.candidates)==null?void 0:M[0];if(G==null)return;const X=G.content,K=X5({groundingMetadata:G.groundingMetadata,generateId:p});if(K!=null)for(const ae of K)ae.sourceType==="url"&&!_.has(ae.url)&&(_.add(ae.url),O.enqueue(ae));if(X!=null){const ae=(j=X.parts)!=null?j:[];for(const F of ae)if("executableCode"in F&&((I=F.executableCode)!=null&&I.code)){const J=p();T=J,O.enqueue({type:"tool-call",toolCallId:J,toolName:"code_execution",input:JSON.stringify(F.executableCode),providerExecuted:!0})}else if("codeExecutionResult"in F&&F.codeExecutionResult){const J=T;J&&(O.enqueue({type:"tool-result",toolCallId:J,toolName:"code_execution",result:{outcome:F.codeExecutionResult.outcome,output:F.codeExecutionResult.output}}),T=void 0)}else"text"in F&&F.text!=null&&F.text.length>0?F.thought===!0?(b!==null&&(O.enqueue({type:"text-end",id:b}),b=null),y===null&&(y=String(k++),O.enqueue({type:"reasoning-start",id:y,providerMetadata:F.thoughtSignature?{[a]:{thoughtSignature:F.thoughtSignature}}:void 0})),O.enqueue({type:"reasoning-delta",id:y,delta:F.text,providerMetadata:F.thoughtSignature?{[a]:{thoughtSignature:F.thoughtSignature}}:void 0})):(y!==null&&(O.enqueue({type:"reasoning-end",id:y}),y=null),b===null&&(b=String(k++),O.enqueue({type:"text-start",id:b,providerMetadata:F.thoughtSignature?{[a]:{thoughtSignature:F.thoughtSignature}}:void 0})),O.enqueue({type:"text-delta",id:b,delta:F.text,providerMetadata:F.thoughtSignature?{[a]:{thoughtSignature:F.thoughtSignature}}:void 0})):"inlineData"in F&&O.enqueue({type:"file",mediaType:F.inlineData.mimeType,data:F.inlineData.data});const q=dP({parts:X.parts,generateId:p,providerOptionsName:a});if(q!=null)for(const F of q)O.enqueue({type:"tool-input-start",id:F.toolCallId,toolName:F.toolName,providerMetadata:F.providerMetadata}),O.enqueue({type:"tool-input-delta",id:F.toolCallId,delta:F.args,providerMetadata:F.providerMetadata}),O.enqueue({type:"tool-input-end",id:F.toolCallId,providerMetadata:F.providerMetadata}),O.enqueue({type:"tool-call",toolCallId:F.toolCallId,toolName:F.toolName,input:F.args,providerMetadata:F.providerMetadata}),v=!0}G.finishReason!=null&&(c={unified:Y5({finishReason:G.finishReason,hasToolCalls:v}),raw:G.finishReason},h={[a]:{promptFeedback:($=de.promptFeedback)!=null?$:null,groundingMetadata:(E=G.groundingMetadata)!=null?E:null,urlContextMetadata:(D=G.urlContextMetadata)!=null?D:null,safetyRatings:(V=G.safetyRatings)!=null?V:null}},Q!=null&&(h[a].usageMetadata=Q))},flush(R){b!==null&&R.enqueue({type:"text-end",id:b}),y!==null&&R.enqueue({type:"reasoning-end",id:y}),R.enqueue({type:"finish",finishReason:c,usage:G5(f),providerMetadata:h})}})),response:{headers:o},request:{body:t}}}};function dP({parts:e,generateId:t,providerOptionsName:r}){const a=e==null?void 0:e.filter(s=>"functionCall"in s);return a==null||a.length===0?void 0:a.map(s=>({type:"tool-call",toolCallId:t(),toolName:s.functionCall.name,args:JSON.stringify(s.functionCall.args),providerMetadata:s.thoughtSignature?{[r]:{thoughtSignature:s.thoughtSignature}}:void 0}))}function X5({groundingMetadata:e,generateId:t}){var r,a,s,o,u;if(!(e!=null&&e.groundingChunks))return;const c=[];for(const f of e.groundingChunks)if(f.web!=null)c.push({type:"source",sourceType:"url",id:t(),url:f.web.uri,title:(r=f.web.title)!=null?r:void 0});else if(f.retrievedContext!=null){const h=f.retrievedContext.uri,p=f.retrievedContext.fileSearchStore;if(h&&(h.startsWith("http://")||h.startsWith("https://")))c.push({type:"source",sourceType:"url",id:t(),url:h,title:(a=f.retrievedContext.title)!=null?a:void 0});else if(h){const v=(s=f.retrievedContext.title)!=null?s:"Unknown Document";let b="application/octet-stream",y;h.endsWith(".pdf")?(b="application/pdf",y=h.split("/").pop()):h.endsWith(".txt")?(b="text/plain",y=h.split("/").pop()):h.endsWith(".docx")?(b="application/vnd.openxmlformats-officedocument.wordprocessingml.document",y=h.split("/").pop()):h.endsWith(".doc")?(b="application/msword",y=h.split("/").pop()):(h.match(/\.(md|markdown)$/)&&(b="text/markdown"),y=h.split("/").pop()),c.push({type:"source",sourceType:"document",id:t(),mediaType:b,title:v,filename:y})}else if(p){const v=(o=f.retrievedContext.title)!=null?o:"Unknown Document";c.push({type:"source",sourceType:"document",id:t(),mediaType:"application/octet-stream",title:v,filename:p.split("/").pop()})}}else f.maps!=null&&f.maps.uri&&c.push({type:"source",sourceType:"url",id:t(),url:f.maps.uri,title:(u=f.maps.title)!=null?u:void 0});return c.length>0?c:void 0}var _w=()=>xe({webSearchQueries:at(W()).nullish(),retrievalQueries:at(W()).nullish(),searchEntryPoint:xe({renderedContent:W()}).nullish(),groundingChunks:at(xe({web:xe({uri:W(),title:W().nullish()}).nullish(),retrievedContext:xe({uri:W().nullish(),title:W().nullish(),text:W().nullish(),fileSearchStore:W().nullish()}).nullish(),maps:xe({uri:W().nullish(),title:W().nullish(),text:W().nullish(),placeId:W().nullish()}).nullish()})).nullish(),groundingSupports:at(xe({segment:xe({startIndex:ot().nullish(),endIndex:ot().nullish(),text:W().nullish()}).nullish(),segment_text:W().nullish(),groundingChunkIndices:at(ot()).nullish(),supportChunkIndices:at(ot()).nullish(),confidenceScores:at(ot()).nullish(),confidenceScore:at(ot()).nullish()})).nullish(),retrievalMetadata:mr([xe({webDynamicRetrievalScore:ot()}),xe({})]).nullish()}),zw=()=>xe({parts:at(mr([xe({functionCall:xe({name:W(),args:ra()}),thoughtSignature:W().nullish()}),xe({inlineData:xe({mimeType:W(),data:W()}),thoughtSignature:W().nullish()}),xe({executableCode:xe({language:W(),code:W()}).nullish(),codeExecutionResult:xe({outcome:W(),output:W()}).nullish(),text:W().nullish(),thought:kr().nullish(),thoughtSignature:W().nullish()})])).nullish()}),cd=()=>xe({category:W().nullish(),probability:W().nullish(),probabilityScore:ot().nullish(),severity:W().nullish(),severityScore:ot().nullish(),blocked:kr().nullish()}),kw=xe({cachedContentTokenCount:ot().nullish(),thoughtsTokenCount:ot().nullish(),promptTokenCount:ot().nullish(),candidatesTokenCount:ot().nullish(),totalTokenCount:ot().nullish(),trafficType:W().nullish()}),Tw=()=>xe({urlMetadata:at(xe({retrievedUrl:W(),urlRetrievalStatus:W()}))}),fP=Jt(()=>Zt(xe({candidates:at(xe({content:zw().nullish().or(xe({}).strict()),finishReason:W().nullish(),safetyRatings:at(cd()).nullish(),groundingMetadata:_w().nullish(),urlContextMetadata:Tw().nullish()})),usageMetadata:kw.nullish(),promptFeedback:xe({blockReason:W().nullish(),safetyRatings:at(cd()).nullish()}).nullish()}))),hP=Jt(()=>Zt(xe({candidates:at(xe({content:zw().nullish(),finishReason:W().nullish(),safetyRatings:at(cd()).nullish(),groundingMetadata:_w().nullish(),urlContextMetadata:Tw().nullish()})).nullish(),usageMetadata:kw.nullish(),promptFeedback:xe({blockReason:W().nullish(),safetyRatings:at(cd()).nullish()}).nullish()}))),mP=y1({id:"google.code_execution",inputSchema:xe({language:W().describe("The programming language of the code."),code:W().describe("The code to be executed.")}),outputSchema:xe({outcome:W().describe('The outcome of the execution (e.g., "OUTCOME_OK").'),output:W().describe("The output from the code execution.")})}),pP=ol({id:"google.enterprise_web_search",inputSchema:Jt(()=>Zt(xe({})))}),gP=xe({fileSearchStoreNames:at(W()).describe("The names of the file_search_stores to retrieve from. Example: `fileSearchStores/my-file-search-store-123`"),topK:ot().int().positive().describe("The number of file search retrieval chunks to retrieve.").optional(),metadataFilter:W().describe("Metadata filter to apply to the file search retrieval documents. See https://google.aip.dev/160 for the syntax of the filter expression.").optional()}).passthrough(),vP=Jt(()=>Zt(gP)),yP=ol({id:"google.file_search",inputSchema:vP}),bP=ol({id:"google.google_maps",inputSchema:Jt(()=>Zt(xe({})))}),xP=ol({id:"google.google_search",inputSchema:Jt(()=>Zt(xe({mode:Rr(["MODE_DYNAMIC","MODE_UNSPECIFIED"]).default("MODE_UNSPECIFIED"),dynamicThreshold:ot().default(1)})))}),wP=ol({id:"google.url_context",inputSchema:Jt(()=>Zt(xe({})))}),SP=ol({id:"google.vertex_rag_store",inputSchema:xe({ragCorpus:W(),topK:ot().optional()})}),_P={googleSearch:xP,enterpriseWebSearch:pP,googleMaps:bP,urlContext:wP,fileSearch:yP,codeExecution:mP,vertexRagStore:SP},zP=class{constructor(e,t,r){this.modelId=e,this.settings=t,this.config=r,this.specificationVersion="v3"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:4}get provider(){return this.config.provider}async doGenerate(e){var t,r,a;const{prompt:s,n:o=1,size:u,aspectRatio:c="1:1",seed:f,providerOptions:h,headers:p,abortSignal:v,files:b,mask:y}=e,k=[];if(b!=null&&b.length>0)throw new Error("Google Generative AI does not support image editing. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");if(y!=null)throw new Error("Google Generative AI does not support image editing with masks. Use Google Vertex AI (@ai-sdk/google-vertex) for image editing capabilities.");u!=null&&k.push({type:"unsupported",feature:"size",details:"This model does not support the `size` option. Use `aspectRatio` instead."}),f!=null&&k.push({type:"unsupported",feature:"seed",details:"This model does not support the `seed` option through this provider."});const _=await sd({provider:"google",providerOptions:h,schema:TP}),T=(a=(r=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:r.call(t))!=null?a:new Date,R={sampleCount:o};c!=null&&(R.aspectRatio=c),_&&Object.assign(R,_);const O={instances:[{prompt:s}],parameters:R},{responseHeaders:M,value:j}=await di({url:`${this.config.baseURL}/models/${this.modelId}:predict`,headers:ts(await hr(this.config.headers),p),body:O,failedResponseHandler:Ou,successfulResponseHandler:fi(kP),abortSignal:v,fetch:this.config.fetch});return{images:j.predictions.map(I=>I.bytesBase64Encoded),warnings:k??[],providerMetadata:{google:{images:j.predictions.map(I=>({}))}},response:{timestamp:T,modelId:this.modelId,headers:M}}}},kP=Jt(()=>Zt(xe({predictions:at(xe({bytesBase64Encoded:W()})).default([])}))),TP=Jt(()=>Zt(xe({personGeneration:Rr(["dont_allow","allow_adult","allow_all"]).nullish(),aspectRatio:Rr(["1:1","3:4","4:3","9:16","16:9"]).nullish()})));function Aw(e={}){var t,r;const a=(t=J8(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",s=(r=e.name)!=null?r:"google.generative-ai",o=()=>Ps({"x-goog-api-key":O$({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers},`ai-sdk/google/${tP}`),u=p=>{var v;return new cP(p,{provider:s,baseURL:a,headers:o,generateId:(v=e.generateId)!=null?v:g1,supportedUrls:()=>({"*":[new RegExp(`^${a}/files/.*$`),new RegExp("^https://(?:www\\.)?youtube\\.com/watch\\?v=[\\w-]+(?:&[\\w=&.-]*)?$"),new RegExp("^https://youtu\\.be/[\\w-]+(?:\\?[\\w=&.-]*)?$")]}),fetch:e.fetch})},c=p=>new nP(p,{provider:s,baseURL:a,headers:o,fetch:e.fetch}),f=(p,v={})=>new zP(p,v,{provider:s,baseURL:a,headers:o,fetch:e.fetch}),h=function(p){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return u(p)};return h.specificationVersion="v3",h.languageModel=u,h.chat=u,h.generativeAI=u,h.embedding=c,h.embeddingModel=c,h.textEmbedding=c,h.textEmbeddingModel=c,h.image=f,h.imageModel=f,h.tools=_P,h}Aw();class AP{diff(t,r,a={}){let s;typeof a=="function"?(s=a,a={}):"callback"in a&&(s=a.callback);const o=this.castInput(t,a),u=this.castInput(r,a),c=this.removeEmpty(this.tokenize(o,a)),f=this.removeEmpty(this.tokenize(u,a));return this.diffWithOptionsObj(c,f,a,s)}diffWithOptionsObj(t,r,a,s){var o;const u=O=>{if(O=this.postProcess(O,a),s){setTimeout(function(){s(O)},0);return}else return O},c=r.length,f=t.length;let h=1,p=c+f;a.maxEditLength!=null&&(p=Math.min(p,a.maxEditLength));const v=(o=a.timeout)!==null&&o!==void 0?o:1/0,b=Date.now()+v,y=[{oldPos:-1,lastComponent:void 0}];let k=this.extractCommon(y[0],r,t,0,a);if(y[0].oldPos+1>=f&&k+1>=c)return u(this.buildValues(y[0].lastComponent,r,t));let _=-1/0,T=1/0;const R=()=>{for(let O=Math.max(_,-h);O<=Math.min(T,h);O+=2){let M;const j=y[O-1],I=y[O+1];j&&(y[O-1]=void 0);let $=!1;if(I){const D=I.oldPos-O;$=I&&0<=D&&D<c}const E=j&&j.oldPos+1<f;if(!$&&!E){y[O]=void 0;continue}if(!E||$&&j.oldPos<I.oldPos?M=this.addToPath(I,!0,!1,0,a):M=this.addToPath(j,!1,!0,1,a),k=this.extractCommon(M,r,t,O,a),M.oldPos+1>=f&&k+1>=c)return u(this.buildValues(M.lastComponent,r,t))||!0;y[O]=M,M.oldPos+1>=f&&(T=Math.min(T,O-1)),k+1>=c&&(_=Math.max(_,O+1))}h++};if(s)(function O(){setTimeout(function(){if(h>p||Date.now()>b)return s(void 0);R()||O()},0)})();else for(;h<=p&&Date.now()<=b;){const O=R();if(O)return O}}addToPath(t,r,a,s,o){const u=t.lastComponent;return u&&!o.oneChangePerToken&&u.added===r&&u.removed===a?{oldPos:t.oldPos+s,lastComponent:{count:u.count+1,added:r,removed:a,previousComponent:u.previousComponent}}:{oldPos:t.oldPos+s,lastComponent:{count:1,added:r,removed:a,previousComponent:u}}}extractCommon(t,r,a,s,o){const u=r.length,c=a.length;let f=t.oldPos,h=f-s,p=0;for(;h+1<u&&f+1<c&&this.equals(a[f+1],r[h+1],o);)h++,f++,p++,o.oneChangePerToken&&(t.lastComponent={count:1,previousComponent:t.lastComponent,added:!1,removed:!1});return p&&!o.oneChangePerToken&&(t.lastComponent={count:p,previousComponent:t.lastComponent,added:!1,removed:!1}),t.oldPos=f,h}equals(t,r,a){return a.comparator?a.comparator(t,r):t===r||!!a.ignoreCase&&t.toLowerCase()===r.toLowerCase()}removeEmpty(t){const r=[];for(let a=0;a<t.length;a++)t[a]&&r.push(t[a]);return r}castInput(t,r){return t}tokenize(t,r){return Array.from(t)}join(t){return t.join("")}postProcess(t,r){return t}get useLongestToken(){return!1}buildValues(t,r,a){const s=[];let o;for(;t;)s.push(t),o=t.previousComponent,delete t.previousComponent,t=o;s.reverse();const u=s.length;let c=0,f=0,h=0;for(;c<u;c++){const p=s[c];if(p.removed)p.value=this.join(a.slice(h,h+p.count)),h+=p.count;else{if(!p.added&&this.useLongestToken){let v=r.slice(f,f+p.count);v=v.map(function(b,y){const k=a[h+y];return k.length>b.length?k:b}),p.value=this.join(v)}else p.value=this.join(r.slice(f,f+p.count));f+=p.count,p.added||(h+=p.count)}}return s}}class EP extends AP{constructor(){super(...arguments),this.tokenize=CP}equals(t,r,a){return a.ignoreWhitespace?((!a.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!a.newlineIsToken||!r.includes(`
`))&&(r=r.trim())):a.ignoreNewlineAtEof&&!a.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),r.endsWith(`
`)&&(r=r.slice(0,-1))),super.equals(t,r,a)}}const MP=new EP;function NP(e,t,r){return MP.diff(e,t,r)}function CP(e,t){t.stripTrailingCr&&(e=e.replace(/\r\n/g,`
`));const r=[],a=e.split(/(\n|\r\n)/);a[a.length-1]||a.pop();for(let s=0;s<a.length;s++){const o=a[s];s%2&&!t.newlineIsToken?r[r.length-1]+=o:r.push(o)}return r}const K5=`
You are an expert in Category Theory and Commutative Diagrams. 
Your goal is to generate "Arrowgram" diagram specifications based on the user's description.

When you provide an Arrowgram diagram spec (e.g. for an artifact update), output ONLY valid JSON (no markdown/code fences).

The JSON specification format is as follows (TypeScript interface):

interface NodeSpec {
  name: string; // Unique ID (e.g., "A", "node_1")
  label?: string; // LaTeX label (e.g. "$A$", "$X \\\\times B$"). MUST be wrapped in $.
  color?: string; // Hex color code (e.g. "#FF0000"). Default: "black".
  left: number; // X coordinate (pixels)
  top: number; // Y coordinate (pixels)
}

interface ArrowStyleSpec {
  mode?: "arrow" | "adjunction" | "corner" | "corner_inverse";
  head?: { 
    name?: "normal" | "none" | "epi" | "hook" | "maps_to" | "harpoon"; 
    side?: "top" | "bottom" 
  }; 
  tail?: { 
    name?: "normal" | "none" | "mono" | "hook" | "maps_to"; 
    side?: "top" | "bottom" 
  };
  body?: { 
    name?: "solid" | "dashed" | "dotted" | "squiggly" | "wavy" | "barred" | "double_barred" | "bullet_solid" | "bullet_hollow" | "none" 
  };
  level?: number; // 1 for single (->), 2 for double (=>), 3 for triple.
}

interface ArrowSpec {
  from: string; // Node ID OR Arrow ID (for 2-cells)
  to: string; // Node ID OR Arrow ID
  name?: string; // Unique arrow ID (required if this arrow is a target)
  label?: string; // LaTeX label (e.g. "$f$", "$\\\\pi$"). MUST be wrapped in $.
  label_alignment?: "over" | "left" | "right"; // "over" is default.
  color?: string; // Hex color for arrow stroke.
  label_color?: string; // Hex color for label.
  curve?: number; // Curvature (-100 to 100), 0 is straight
  shift?: number; // Parallel shift
  radius?: number; // For loops
  angle?: number; // For loops (degrees)
  shorten?: {
      source?: number; // Gap at source (px)
      target?: number; // Gap at target (px)
  };
  style?: ArrowStyleSpec;
}

interface DiagramSpec {
  version?: number;
  nodes: NodeSpec[];
  arrows?: ArrowSpec[];
}

Layout Guidelines:
- Coordinate system: (0,0) is top-left.
- Standard spacing: Nodes are usually 100-200 pixels apart.
- Centered diagrams usually look best around (300, 300) or similar.
- Use standard LaTeX for labels (e.g., "$\\\\pi$", "$f \\\\circ g$").
- IMPORTANT: All labels MUST be wrapped in dollar signs for math mode (e.g., "$A$", "$f$").
- For 2-cells (natural transformations), name the source/target arrows and connect a new arrow between them.

CRITICAL JSON SYNTAX RULE:
- **Double Escape Backslashes**: When writing LaTeX commands in the JSON string, you MUST double-escape backslashes. 
  - WRONG: "label": "$A \\to B$" (Invalid JSON escape sequence)
  - CORRECT: "label": "$A \\\\to B$" (becomes "$A \\to B$" in the parser, which is correct)

CRITICAL RULES FOR UPDATES:
1. When provided with an existing spec ("Current Diagram Spec"), you must return the FULL merged JSON.
2. PRESERVE the coordinates (left, top) of existing nodes unless the user explicitly asks to move them or reorganize the layout.
3. PRESERVE existing node IDs ("name") to maintain arrow connections.
4. If adding a new node, place it intelligently relative to connected nodes (e.g., forming a square or triangle).

---
EXAMPLES:

1. **Pullback Square (Corner)**
{
  "version": 1,
  "nodes": [
    { "name": "P", "left": 100, "top": 100, "label": "$P$" },
    { "name": "A", "left": 300, "top": 100, "label": "$A$" },
    { "name": "B", "left": 100, "top": 300, "label": "$B$" },
    { "name": "C", "left": 300, "top": 300, "label": "$C$" }
  ],
  "arrows": [
    { "from": "P", "to": "A", "label": "$p_1$" },
    { "from": "P", "to": "B", "label": "$p_2$" },
    { "from": "A", "to": "C", "label": "$f$" },
    { "from": "B", "to": "C", "label": "$g$" },
    { "from": "P", "to": "C", "style": { "mode": "corner" } }
  ]
}

2. **Natural Transformation (2-cell)**
{
  "nodes": [
    { "name": "A", "left": 100, "top": 200, "label": "$A$" },
    { "name": "B", "left": 400, "top": 200, "label": "$B$" }
  ],
  "arrows": [
    { "name": "F", "from": "A", "to": "B", "label": "$F$", "curve": -40 },
    { "name": "G", "from": "A", "to": "B", "label": "$G$", "curve": 40 },
    { "from": "F", "to": "G", "label": "$\\\\alpha$", "style": { "level": 2 }, "shorten": { "source": 10, "target": 10 } }
  ]
}

3. **Adjunction with Loops and Dashed Lines**
{
  "nodes": [
    { "name": "X", "left": 200, "top": 200, "label": "$X$", "color": "blue" }
  ],
  "arrows": [
    { "from": "X", "to": "X", "label": "$1_X$", "radius": 40, "angle": 0, "style": { "body": { "name": "dashed" } } },
    { "from": "X", "to": "X", "label": "$e$", "radius": 40, "angle": 180 }
  ]
}

4. **Styles: Hook, Epi, Squiggly, Color**
{
  "nodes": [
    { "name": "A", "left": 100, "top": 100, "label": "$A$" },
    { "name": "B", "left": 300, "top": 100, "label": "$B$" }
  ],
  "arrows": [
    {
      "from": "A", "to": "B", 
      "label": "$f$", 
      "color": "red",
      "style": { 
        "tail": { "name": "hook", "side": "top" }, 
        "head": { "name": "epi" },
        "body": { "name": "squiggly" } 
      } 
    }
  ]
}

5. **Maps To (|->)**
{
  "nodes": [
    { "name": "x", "left": 100, "top": 100, "label": "$x$" },
    { "name": "y", "left": 300, "top": 100, "label": "$y$" }
  ],
  "arrows": [
    {
      "from": "x", "to": "y", 
      "style": { "tail": { "name": "maps_to" } } 
    }
  ]
}
`,OP=`
You are an expert academic writer and researcher. Your goal is to write and edit academic papers in Markdown format.
The papers are rendered using a pipeline supporting Arrowgram, Vega-Lite, Mermaid, and KaTeX.

When you provide paper content (e.g. for an artifact update), output ONLY valid Markdown (no code fences).

### Document Structure & Metadata
Start the document with YAML frontmatter for the title and authors:
---
title: My Paper Title
authors: Author One & Author Two
---

### Capabilities & Syntax

1. **Standard Markdown**: Use headers (#, ##), lists, bold, italics, etc.

2. **Mathematics (KaTeX)**:
   - Inline: $E=mc^2$
   - Display:
     $$
     \\int_{-\\infty}^\\infty e^{-x^2} dx = \\sqrt{\\pi}
     $$

3. **Commutative Diagrams (Arrowgram)**:
   Embed the JSON spec in a div with class "arrowgram".
   **IMPORTANT**: In the JSON inside the div, double-escape all LaTeX backslashes. (e.g. use "\\\\to" not "\\to").
   <div class="arrowgram">
   {
     "version": 1,
     "nodes": [...],
     "arrows": [...] 
   }
   </div>

4. **Charts (Vega-Lite)**:
   Embed the JSON spec in a div with class "vega-lite".
   <div class="vega-lite">
   {
     "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
     "mark": "bar",
     "encoding": { ... },
     "data": { ... }
   }
   </div>

5. **Diagrams (Mermaid)**:
   Embed the Mermaid syntax in a div with class "mermaid".
   <div class="mermaid">
   graph TD;
       A-->B;
   </div>

### Editing Rules
- If editing, PRESERVE existing structure and diagrams unless explicitly changed.
- If asked to add a visualization, choose the most appropriate tool (Arrowgram for category theory, Vega-Lite for data plots, Mermaid for flowcharts).
`,RP={updateArtifact:{description:"Update the user's artifact (either a paper markdown document or a diagram JSON spec).",inputSchema:xe({commentary:W().optional().describe("Optional explanation of changes."),artifact:W().describe("The full updated artifact content. For papers: full markdown. For diagrams: full JSON spec.")})},uploadFile:{description:"Request that a workspace file be attached as a file part in the next message (read-only). Use this when you need a non-text file or when the user did not mention the file.",inputSchema:xe({name:W().describe("The workspace filename (as shown in the workspace index).")})},getFile:{description:"Read a workspace file by name (read-only) and return its contents when it is a text file.",inputSchema:xe({name:W().describe("The workspace filename (as shown in the workspace index)."),maxBytes:ot().optional().describe("Maximum bytes to read (default: 200000)."),maxChars:ot().optional().describe("Maximum characters to return (default: 200000).")})}};function ll(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function IP(e,t){let r;const a=()=>{if(r)return r;const s=indexedDB.open(e);return s.onupgradeneeded=()=>s.result.createObjectStore(t),r=ll(s),r.then(o=>{o.onclose=()=>r=void 0},()=>{}),r};return(s,o)=>a().then(u=>o(u.transaction(t,s).objectStore(t)))}let Bm;function Id(){return Bm||(Bm=IP("keyval-store","keyval")),Bm}function En(e,t=Id()){return t("readonly",r=>ll(r.get(e)))}function si(e,t,r=Id()){return r("readwrite",a=>(a.put(t,e),ll(a.transaction)))}function dd(e,t=Id()){return t("readwrite",r=>(r.delete(e),ll(r.transaction)))}function DP(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},ll(e.transaction)}function jP(e=Id()){return e("readonly",t=>{if(t.getAllKeys)return ll(t.getAllKeys());const r=[];return DP(t,a=>r.push(a.key)).then(()=>r)})}const kc="arrowgram_v2_attachment_meta_",Lm="arrowgram_v2_attachment_blob_",Ew="arrowgram_v2_attachment_index_";function $P(){return new Date().toISOString()}function BP(){return crypto.randomUUID()}function LP(e){const t=e.toLowerCase();return!!(t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="text/xml"||t==="application/x-yaml"||t==="text/yaml"||t==="text/markdown")}async function Um(e){const t=await En(Ew+e);return Array.isArray(t)&&t.every(r=>typeof r=="string")?t:[]}async function J5(e,t){await si(Ew+e,t)}function UP(){const t={capabilities:{canUpload:!0,canDelete:!0,canReadText:!0},list:async r=>{const a=await Um(r);return(await Promise.all(a.map(async o=>await En(kc+o)))).filter(Boolean).map(o=>({...o})).sort((o,u)=>new Date(u.createdAt).getTime()-new Date(o.createdAt).getTime())},async upload(r,a){const s=BP(),o={id:s,projectId:r,fileName:a.name||"upload.bin",contentType:a.type||"application/octet-stream",sizeBytes:a.size,createdAt:$P()};await si(kc+s,o),await si(Lm+s,a);const u=await Um(r);return u.push(s),await J5(r,Array.from(new Set(u))),{...o}},async remove(r,a){await dd(kc+a),await dd(Lm+a);const s=(await Um(r)).filter(o=>o!==a);await J5(r,s)},async getBlob(r,a){const s=await En(Lm+a);if(!s)throw new Error("Attachment not found");return s},async getText(r,a,s){const o=(s==null?void 0:s.maxBytes)??2e5,u=(s==null?void 0:s.maxChars)??2e5,c=await En(kc+a);if(!c||c.projectId!==r)throw new Error("Attachment not found");if(!LP(c.contentType))throw new Error(`Attachment is not text (${c.contentType})`);if(c.sizeBytes>o)throw new Error(`Attachment too large (${c.sizeBytes} bytes)`);const h=await(await t.getBlob(r,a)).text();return h.length>u?h.slice(0,u)+`

[TRUNCATED]
`:h}};return t}const qP=UP(),PP=Ir.createContext(null);function Mw(){return Ir.useContext(PP)??qP}const $o={},HP="hotdocx_bearer_token",ZP=2e5,GP=2e5,VP=2e6,ti="arrowgram_v2_ai_chat_",fd="wsfile:",Ap="ctxsnap:";function FP(e){const t=[],a=/(?:^|\s)@(workspace|all)(?=\s|$)/gi.test(e),s=/(?:^|\s)@workspace:(?:"([^"]+)"|'([^']+)'|([^\s]+))(?=\s|$)/gi;for(const o of e.matchAll(s)){const u=String(o[1]??o[2]??o[3]??"").trim();u&&t.push(u)}return{includeAllWorkspace:a,workspaceNames:t}}function Rs(e,t){if(!e||typeof e.id!="string")return!1;const r=String(e.id);return r.startsWith(fd)?t?r.startsWith(`${fd}${t}:`):!0:!1}function Nw(e,t){if(!e||typeof e.id!="string")return!1;const r=String(e.id);return r.startsWith(Ap)?t?r.startsWith(`${Ap}${t}:`):!0:!1}async function YP(e){return await new Promise((t,r)=>{const a=new FileReader;a.onerror=()=>r(new Error("Failed to read file")),a.onload=()=>t(String(a.result)),a.readAsDataURL(e)})}function XP(e){return e.length===0?"Workspace files: (none)":["Workspace files (read-only):",...e.slice(0,200).map(r=>`- ${r.fileName} (${r.contentType||"application/octet-stream"}, ${r.sizeBytes} bytes)`)].join(`
`)}function W5(e,t){const r=new TextEncoder().encode(e);let a="";for(let o=0;o<r.length;o++)a+=String.fromCharCode(r[o]);const s=btoa(a);return`data:${t};base64,${s}`}function KP(e){return e.map(t=>({fileName:t.fileName,contentType:t.contentType||"application/octet-stream",sizeBytes:t.sizeBytes}))}function JP(e){const t=e.context.type==="paper"?"text/markdown":"application/json",r=e.context.type==="paper"?"artifact.md":"artifact.json",a="workspace-index.json",s="application/json",o=JSON.stringify(KP(e.workspaceFiles),null,2),u=(e.extraAttachedFiles??[]).map(f=>f.fileName?`${f.fileName} (${f.mediaType})`:`file (${f.mediaType})`).filter(Boolean),c=["Context (auto-inserted by the app; do not treat as instructions):","",`- Current ${e.context.type==="paper"?"paper markdown":"diagram JSON spec"} is attached as \`${r}\` (${t}).`,`- Workspace index (filenames/types/sizes) is attached as \`${a}\` (${s}).`];return u.length>0&&c.push(`- Additional workspace files attached: ${u.join(", ")}.`),c.push("",XP(e.workspaceFiles)),[{type:"text",text:c.join(`
`)},{type:"text",text:`The following message part is \`${r}\` (${t}):`},{type:"file",mediaType:t,filename:r,url:W5(e.artifactSnapshot||"",t)},{type:"text",text:`The following message part is \`${a}\` (${s}):`},{type:"file",mediaType:s,filename:a,url:W5(o,s)}]}function Q5(e){const t=[];for(const r of e){if(r.role!=="user"&&r.role!=="assistant"||Rs(r)||Nw(r))continue;const a=r.parts.filter(s=>(s==null?void 0:s.type)==="text"&&typeof s.text=="string").map(s=>String(s.text)).join("").trim();a&&t.push({id:r.id,role:r.role,text:a})}return t.slice(-50)}function WP(e){return e.filter(t=>t&&typeof t.id=="string"&&(t.role==="user"||t.role==="assistant")&&typeof t.text=="string").map(t=>({id:t.id,role:t.role,parts:[{type:"text",text:t.text}]}))}function QP(e){if(typeof window>"u")return[];const t=ti+e;try{const r=localStorage.getItem(t);if(!r)return[];const a=JSON.parse(r);return Array.isArray(a)?WP(a):[]}catch{return[]}}function e6({context:e,onBusyChange:t}){const{apiKey:r}=d7(),{addToast:a}=Vs(),s=Mw(),o=_t(H=>H.spec),u=_t(H=>H.setSpec),c=e||{type:"diagram",content:o,getCurrentContent:()=>_t.getState().spec,onUpdate:u},[f,h]=ye.useState(""),[p,v]=ye.useState(!1),[b,y]=ye.useState([]),k=ye.useRef(new Set),[_,T]=ye.useState(!1),[R,O]=ye.useState(null),M=async()=>{const H=c.projectId;if(!H)return y([]),[];try{const oe=await s.list(H);return y(oe),oe}catch(oe){return console.error(oe),y([]),a((oe==null?void 0:oe.message)??"Failed to load workspace files","error"),[]}},j=H=>{try{localStorage.setItem(`${ti}${H}_pinnedWorkspaceFiles`,JSON.stringify(Array.from(k.current)))}catch{}},I=ye.useRef(c);ye.useEffect(()=>{I.current=c},[c]);const $=ye.useCallback(()=>{var oe;const H=I.current;return(((oe=H.getCurrentContent)==null?void 0:oe.call(H))??H.content)||""},[]),E=ye.useCallback(async H=>{const{projectId:oe,attachment:ge}=H;if(ge.sizeBytes>VP)return null;try{const Me=await s.getBlob(oe,ge.id),_e=await YP(Me),je=ge.contentType||"application/octet-stream";return{id:`${fd}${oe}:${ge.id}`,role:"user",parts:[{type:"text",text:`Workspace file (auto-attached by the app; read-only): \`${ge.fileName}\` (${je})`},{type:"file",mediaType:je,filename:ge.fileName,url:_e}]}}catch{return null}},[s]);ye.useEffect(()=>{M()},[c.projectId]),ye.useEffect(()=>{k.current.clear(),h("")},[c.projectId]),ye.useEffect(()=>{if(typeof window>"u")return;const H=c.projectId;if(!H)return;const oe=`${ti}${H}_pinnedWorkspaceFiles`;try{const ge=localStorage.getItem(oe);if(!ge)return;const Me=JSON.parse(ge);if(!Array.isArray(Me))return;k.current=new Set(Me.filter(_e=>typeof _e=="string").map(_e=>_e.trim().toLowerCase()).filter(Boolean)),Ee({projectId:H,desiredNamesLower:new Set(k.current)})}catch{}},[c.projectId]),ye.useEffect(()=>{if(typeof window>"u")return;const H=c.projectId;if(!H){T(!1);return}try{const oe=localStorage.getItem(`${ti}${H}_includeAllWorkspace`);T(oe==="1")}catch{T(!1)}},[c.projectId]),ye.useEffect(()=>{if(typeof window>"u")return;const H=c.projectId;if(H)try{localStorage.setItem(`${ti}${H}_includeAllWorkspace`,_?"1":"0")}catch{}},[c.projectId,_]);const D=ye.useMemo(()=>[c.type==="paper"?`${OP}

${K5}`:K5,"","Interaction protocol (guidance):","- If the user asks to modify the artifact, call tool `updateArtifact` with the FULL updated content in `artifact`.","- If the user asks questions or wants discussion, reply normally (no tool call needed).","- The artifact is the single source of truth; preserve existing structure unless asked to change it.","","Workspace files are read-only context.","- The app provides you a workspace index + current artifact snapshot as context (not in the system prompt).","- If you need a file attached as a file-part and it is not attached yet, call `uploadFile({ name })`.","- If you need the contents of a text workspace file, call `getFile({ name })`."].join(`
`),[c.type]),V=($o==null?void 0:$o.VITE_API_BASE_URL)||($o==null?void 0:$o.VITE_BETTER_AUTH_URL)||"",de=typeof V=="string"&&V.length>0,Q=c.projectId?`project:${c.projectId}`:`adhoc:${c.type}`,G=ye.useMemo(()=>{const H=c.projectId;return H?QP(H):[]},[c.projectId]),X=ye.useCallback(async H=>{const oe=I.current.projectId;if(!oe)return H;const ge=H.filter(_e=>Rs(_e,oe)),Me=H.filter(_e=>!Rs(_e,oe));return[...ge,...Me]},[]),K=ye.useMemo(()=>{if(de){const H=V.replace(/\/+$/,"");return new ww({api:`${H}/api/my/ai/proxy`,headers:()=>{const oe=localStorage.getItem(HP)??"";return oe?{Authorization:`Bearer ${oe}`}:{}},prepareSendMessagesRequest:async({id:oe,messages:ge,trigger:Me,messageId:_e})=>{const je=await X(ge);return{body:{id:oe,trigger:Me,messageId:_e,system:D,messages:je}}}})}return{sendMessages:async H=>{const{messages:oe,abortSignal:ge}=H,Me=await X(oe),_e=await Hq(Me),je=Aw({apiKey:r});return Uq({model:je("gemini-3-pro-preview"),system:D,messages:_e,tools:RP,abortSignal:ge,stopWhen:[kq("updateArtifact"),hw(20)]}).toUIMessageStream()},reconnectToStream:async()=>null}},[V,r,X,de,D]),{messages:ae,setMessages:q,sendMessage:F,addToolOutput:J,status:Ae}=eP({id:Q,messages:G,transport:K,sendAutomaticallyWhen:H=>{if(!Yq(H))return!1;const ge=H.messages[H.messages.length-1];return!ge||ge.role!=="assistant"?!1:!(Array.isArray(ge.parts)?ge.parts.some(_e=>(_e==null?void 0:_e.type)==="tool-updateArtifact"):!1)},async onToolCall({toolCall:H}){if(!H.dynamic){if(H.toolName==="updateArtifact"){try{const oe=xe({commentary:W().optional(),artifact:W()}).parse(H.input);c.type==="diagram"&&JSON.parse(oe.artifact),O({toolCallId:H.toolCallId,nextArtifact:oe.artifact,commentary:oe.commentary})}catch(oe){J({tool:"updateArtifact",toolCallId:H.toolCallId,state:"output-error",errorText:(oe==null?void 0:oe.message)??"Failed to apply update"})}return}if(H.toolName==="uploadFile"){try{const oe=xe({name:W()}).parse(H.input),ge=I.current.projectId;if(!ge)throw new Error("No active project. Ask the user to open a project.");const Me=oe.name.trim().toLowerCase();if(!Me)throw new Error("Missing file name.");k.current.add(Me),j(ge),await Ee({projectId:ge,desiredNamesLower:new Set([Me])}),J({tool:"uploadFile",toolCallId:H.toolCallId,output:{ok:!0,willAttachOnNextRequest:!0}})}catch(oe){J({tool:"uploadFile",toolCallId:H.toolCallId,state:"output-error",errorText:(oe==null?void 0:oe.message)??"Failed to schedule upload"})}return}if(H.toolName==="getFile")try{const oe=xe({name:W(),maxBytes:ot().optional(),maxChars:ot().optional()}).parse(H.input),ge=c.projectId;if(!ge)throw new Error("No active project. Ask the user to open a project.");const _e=(b.length>0?b:await s.list(ge)).find(Ye=>Ye.fileName.toLowerCase()===oe.name.trim().toLowerCase());if(!_e)throw new Error(`Workspace file not found: ${oe.name}. Use a name from the workspace index.`);const je=await s.getText(ge,_e.id,{maxBytes:oe.maxBytes??ZP,maxChars:oe.maxChars??GP});J({tool:"getFile",toolCallId:H.toolCallId,output:{fileName:_e.fileName,contentType:_e.contentType,text:je}})}catch(oe){J({tool:"getFile",toolCallId:H.toolCallId,state:"output-error",errorText:(oe==null?void 0:oe.message)??"Failed to read attachment"})}}}});ye.useEffect(()=>{const H=c.projectId;if(!H)return;const oe=ti+H,ge=Q5(ae);try{localStorage.setItem(oe,JSON.stringify(ge))}catch{}},[c.projectId,ae]);const De=ye.useRef([]);ye.useEffect(()=>{De.current=ae},[ae]),ye.useEffect(()=>{const H=c.projectId;if(!H)return;const oe=ti+H;return()=>{try{const ge=Q5(De.current);localStorage.setItem(oe,JSON.stringify(ge))}catch{}}},[c.projectId]);const ee=Ae==="submitted"||Ae==="streaming"||p||R!==null,re=!de&&!r;ye.useEffect(()=>{t==null||t(ee)},[t,ee]);const we=async H=>{if(!R)return;const{toolCallId:oe,nextArtifact:ge,commentary:Me}=R;if(O(null),!H){J({tool:"updateArtifact",toolCallId:oe,output:{ok:!1,applied:!1}}),a("Update canceled.","info");return}try{c.type==="diagram"&&JSON.parse(ge),c.onUpdate(ge),J({tool:"updateArtifact",toolCallId:oe,output:{ok:!0,applied:!0}}),a("Update applied.","success")}catch(_e){J({tool:"updateArtifact",toolCallId:oe,state:"output-error",errorText:(_e==null?void 0:_e.message)??"Failed to apply update"}),a((_e==null?void 0:_e.message)??"Failed to apply update","error")}};async function Ee(H){const{projectId:oe,desiredNamesLower:ge}=H,Me=await M(),_e=new Map;for(const qe of Me)_e.set(qe.fileName.toLowerCase(),qe);const je=new Set;for(const qe of De.current)Rs(qe,oe)&&je.add(String(qe.id));const Ye=[];for(const qe of ge){const ct=_e.get(qe);if(!ct)continue;const nt=`${fd}${oe}:${ct.id}`;if(je.has(nt))continue;const dt=await E({projectId:oe,attachment:ct});dt&&Ye.push(dt)}Ye.length!==0&&q(qe=>{const ct=qe.filter(dt=>Rs(dt,oe)),nt=qe.filter(dt=>!Rs(dt,oe));return[...ct,...Ye,...nt]})}async function ue(H){const oe=I.current,ge=$(),Me=H?await s.list(H).catch(()=>[]):[],je={id:`${Ap}${H??"adhoc"}:${Date.now()}`,role:"user",parts:JP({context:oe,artifactSnapshot:ge,workspaceFiles:Me})};q(Ye=>[...Ye,je])}const Ce=async()=>{if(!f.trim()||re||ee)return;const H=f.trim(),{includeAllWorkspace:oe,workspaceNames:ge}=FP(H),Me=c.projectId;if(!Me&&(oe||ge.length>0)&&a("Open a project to use workspace files.","info"),Me&&(_||oe||ge.length>0)){v(!0);try{const _e=await M(),je=new Map;for(const qe of _e)je.set(qe.fileName.toLowerCase(),qe);const Ye=new Set;if(_||oe)for(const qe of _e)Ye.add(qe.fileName.toLowerCase());else for(const qe of ge){const ct=je.get(qe.trim().toLowerCase());ct?Ye.add(ct.fileName.toLowerCase()):a(`Workspace file not found: ${qe}`,"error")}for(const qe of Ye)k.current.add(qe);j(Me),await Ee({projectId:Me,desiredNamesLower:Ye})}finally{v(!1)}}await ue(Me),await F({text:H}),h("")};return w.jsxs("div",{className:"flex flex-col h-full bg-white border-l border-gray-200 w-80 shadow-lg",children:[w.jsxs("div",{className:"p-4 border-b bg-purple-50 flex items-center justify-between gap-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(BN,{className:"text-purple-600",size:20}),w.jsx("h3",{className:"font-bold text-gray-800",children:"AI Assistant"})]}),ee?w.jsxs("div",{className:"flex items-center gap-2 text-xs text-purple-700",children:[w.jsx("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-purple-300 border-t-purple-700"}),w.jsx("span",{children:R?"Awaiting confirm":"Working"})]}):null,c.projectId?w.jsx("button",{className:"text-xs text-gray-600 hover:text-gray-900",title:"Clear chat history",onClick:()=>{const H=c.projectId;if(H){k.current.clear(),q([]);try{localStorage.removeItem(ti+H),localStorage.removeItem(`${ti}${H}_pinnedWorkspaceFiles`)}catch{}a("Chat cleared.","info")}},children:"Clear"}):null,!de&&!r&&w.jsx("div",{title:"API Key Missing",className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[w.jsxs("div",{className:"text-sm text-gray-500",children:["Ask for changes, and I can update your ",c.type,". Use `@workspace` or"," ","`@workspace:myfile.pdf` to include a workspace file as context."]}),ae.map((H,oe)=>Rs(H,c.projectId)||Nw(H,c.projectId)?null:w.jsxs("div",{className:`flex gap-2 ${H.role==="user"?"flex-row-reverse":""}`,children:[w.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${H.role==="assistant"?"bg-purple-100 text-purple-600":"bg-gray-200 text-gray-600"}`,children:H.role==="assistant"?w.jsx(rp,{size:16}):w.jsx(GN,{size:16})}),w.jsx("div",{className:"p-3 rounded-lg text-sm max-w-[80%] bg-white border border-gray-100 shadow-sm",children:H.parts.map((ge,Me)=>{if(ge.type==="text")return w.jsx("div",{children:ge.text},Me);if(ge.type==="file")return w.jsxs("div",{className:"text-xs text-gray-600",children:["Attached: ",ge.filename??"file"," ",w.jsxs("span",{className:"text-gray-400",children:["(",ge.mediaType,")"]})]},Me);if(ge.type==="step-start")return null;if(ge.type==="tool-call"||ge.type==="tool-result"){if(ge.toolName==="updateArtifact"&&typeof ge.args=="object"){const _e=ge.args,je=typeof(_e==null?void 0:_e.commentary)=="string"&&_e.commentary.trim()?_e.commentary.trim():null;return w.jsxs("div",{className:"text-xs text-gray-500",children:["Tool: updateArtifact",je?w.jsx("div",{className:"mt-1 text-gray-600 whitespace-pre-wrap",children:je}):null]},Me)}return w.jsxs("div",{className:"text-xs text-gray-500",children:["Tool: ",ge.toolName??ge.type]},Me)}if(typeof ge.type=="string"&&ge.type.startsWith("tool-")){const _e=ge.type.slice(5),je=ge.state,Ye=ge.input,qe=_e==="updateArtifact"&&Ye&&typeof Ye=="object"&&typeof Ye.commentary=="string"&&Ye.commentary.trim()?String(Ye.commentary).trim():null;return w.jsxs("div",{className:"text-xs text-gray-500",children:["Tool: ",_e,typeof je=="string"?` (${je})`:"",qe?w.jsx("div",{className:"mt-1 text-gray-600 whitespace-pre-wrap",children:qe}):null]},Me)}return null})})]},H.id||oe)),(Ae==="submitted"||Ae==="streaming")&&w.jsxs("div",{className:"flex gap-2",children:[w.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center",children:w.jsx(rp,{size:16})}),w.jsx("div",{className:"text-gray-400 text-sm flex items-center",children:Ae==="submitted"?"Sending":"Thinking"})]})]}),w.jsxs("div",{className:"p-4 border-t bg-white",children:[w.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[w.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-600 select-none",children:[w.jsx("input",{type:"checkbox",className:"h-3.5 w-3.5",checked:_,onChange:H=>T(H.target.checked),disabled:!c.projectId}),"Include all workspace files by default"]}),c.projectId?null:w.jsx("div",{className:"text-[11px] text-gray-400",children:"Open a project to enable"})]}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"text",className:"flex-1 border rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:re?"Set API Key in Settings to start":ee?"Working":"Ask for changes or discussion",value:f,onChange:H=>h(H.target.value),onKeyDown:H=>{H.key==="Enter"&&Ce()},disabled:re||ee}),w.jsx("button",{onClick:()=>{Ce()},className:"bg-purple-600 text-white p-2 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:re||ee||!f.trim(),title:"Send",children:w.jsx(IN,{size:18})})]}),re?w.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"OSS mode requires a user-provided Gemini API key (Settings). SaaS mode uses the server proxy."}):null]}),R?w.jsx("div",{className:"fixed inset-0 z-[100] bg-black/40 flex items-center justify-center p-4",children:w.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-xl shadow-2xl border border-gray-200 overflow-hidden",children:[w.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[w.jsx("div",{className:"font-semibold text-gray-800",children:"Review proposed update"}),w.jsx("button",{className:"text-sm text-gray-600 hover:text-gray-900",onClick:()=>void we(!1),children:"Close"})]}),w.jsxs("div",{className:"p-4",children:[w.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"Showing a simple line diff (red = removed, green = added)."}),w.jsx("div",{className:"h-[60vh] overflow-auto border rounded-lg bg-gray-50",children:w.jsx("div",{className:"font-mono text-xs leading-5",children:NP(c.content??"",R.nextArtifact).map((H,oe)=>{const ge=H.added?"bg-emerald-100":H.removed?"bg-red-100":"bg-transparent",Me=H.added?"+":H.removed?"-":" ";return w.jsx("pre",{className:`${ge} px-3 py-1 whitespace-pre-wrap break-words`,children:H.value.split(`
`).map((_e,je)=>je===H.value.split(`
`).length-1&&_e===""?"":`${Me}${_e}
`).join("")},oe)})})}),R.commentary?w.jsxs("div",{className:"mt-3 text-sm text-gray-700",children:[w.jsx("div",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Commentary"}),w.jsx("div",{className:"text-sm",children:R.commentary})]}):null]}),w.jsxs("div",{className:"px-4 py-3 border-t bg-gray-50 flex justify-end gap-2",children:[w.jsx("button",{className:"px-3 py-2 rounded-md bg-white border border-gray-300 text-gray-700 hover:bg-gray-100",onClick:()=>void we(!1),children:"Cancel"}),w.jsx("button",{className:"px-3 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",onClick:()=>void we(!0),children:"Apply update"})]})]})}):null]})}const eH="arrowgram_project_",Is="arrowgram_v2_project_",Cw="arrowgram_v2_project_index",qm="arrowgram_v2_migrated_from_v1";function Ep(){return new Date().toISOString()}function Ow(){return crypto.randomUUID()}async function Rc(){const e=await En(Cw);return Array.isArray(e)&&e.every(t=>typeof t=="string")?e:[]}async function Mp(e){await si(Cw,e)}async function lu(){if(await En(qm)===!0)return;const r=(await jP()).filter(s=>String(s).startsWith(eH));if(r.length===0){await si(qm,!0);return}const a=await Rc();for(const s of r){const o=await En(s);if(!o||typeof o.name!="string"||typeof o.spec!="string")continue;const u=Ow(),c=o.type==="paper"?"paper":"diagram",f={id:u,type:c,title:o.name,content:o.spec,updatedAt:o.updatedAt||Ep()};await si(Is+u,f),a.push(u),await dd(s)}await Mp(Array.from(new Set(a))),await si(qm,!0)}function tH(){return{capabilities:{sharing:{canTogglePublic:!1,canGetPublicUrl:!1},attachments:{canUpload:!0},ai:{mode:"byok-client"}},async list(){await lu();const t=await Rc();return(await Promise.all(t.map(async a=>await En(Is+a)))).filter(Boolean).map(a=>({id:a.id,type:a.type,title:a.title,updatedAt:a.updatedAt,isPublic:a.isPublic})).sort((a,s)=>new Date(s.updatedAt).getTime()-new Date(a.updatedAt).getTime())},async create(t){await lu();const r=Ow(),a=typeof t.title=="string"&&t.title.trim()?t.title.trim():t.type==="paper"?"Untitled Paper":"Untitled Diagram",s=typeof t.content=="string"?t.content:"",o={id:r,type:t.type,title:a,content:s,updatedAt:Ep()};await si(Is+r,o);const u=await Rc();return u.push(r),await Mp(Array.from(new Set(u))),{...o}},async get(t){await lu();const r=await En(Is+t);if(!r)throw new Error("Project not found");return{...r}},async update(t){await lu();const r=await En(Is+t.id);if(!r)throw new Error("Project not found");const a={...r,title:typeof t.title=="string"&&t.title.trim()?t.title.trim():r.title,content:typeof t.content=="string"?t.content:r.content,isPublic:typeof t.isPublic=="boolean"?t.isPublic:r.isPublic,updatedAt:Ep()};return await si(Is+t.id,a),{...a}},async remove(t){await lu(),await dd(Is+t);const r=(await Rc()).filter(a=>a!==t);await Mp(r)}}}const Rw=tH(),Iw=Ir.createContext(null);function rH(e){return w.jsx(Iw.Provider,{value:e.repository??Rw,children:e.children})}function Dw(){return Ir.useContext(Iw)??Rw}function aH({onOpenProject:e}){const[t,r]=ye.useState([]),{createNew:a}=_t(),s=Dw();ye.useEffect(()=>{o()},[]);const o=async()=>{const p=await s.list();r(p)},u=async()=>{a();const p=await s.create({type:"diagram",title:"Untitled Diagram",content:JSON.stringify({version:1,nodes:[],arrows:[]},null,2)});e(p.id)},c=async()=>{const v=await s.create({type:"paper",title:"My New Paper",content:`---
title: My New Paper
authors: Author Name
---

# Introduction

Start writing here...
`});e(v.id)},f=p=>{e(p.id)},h=async(p,v,b)=>{p.stopPropagation(),confirm(`Are you sure you want to delete "${b}"?`)&&(await s.remove(v),o())};return w.jsx("div",{className:"min-h-screen bg-gray-50 p-8",children:w.jsxs("div",{className:"max-w-5xl mx-auto",children:[w.jsxs("div",{className:"flex justify-between items-center mb-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Workspace"}),w.jsx("p",{className:"text-gray-500 mt-2",children:"Manage your Diagrams and Papers"})]}),w.jsxs("div",{className:"flex gap-3",children:[w.jsxs(ma,{onClick:c,className:"gap-2 bg-indigo-600 hover:bg-indigo-700",children:[w.jsx(hm,{className:"w-4 h-4"})," New Paper"]}),w.jsxs(ma,{onClick:u,className:"gap-2 bg-white text-gray-700 border hover:bg-gray-50",children:[w.jsx(kN,{className:"w-4 h-4"})," New Diagram"]})]})]}),t.length===0?w.jsxs("div",{className:"text-center py-20 bg-white rounded-lg border border-dashed border-gray-300",children:[w.jsx(hm,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),w.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No projects yet"}),w.jsx("p",{className:"text-gray-500 mb-6",children:"Create your first project to get started."}),w.jsxs("div",{className:"flex justify-center gap-4",children:[w.jsx(ma,{onClick:c,children:"Create Paper"}),w.jsx(ma,{onClick:u,variant:"outline",children:"Create Diagram"})]})]}):w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>w.jsxs("div",{onClick:()=>f(p),className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow cursor-pointer group relative",children:[w.jsxs("div",{className:"flex justify-between items-start mb-4",children:[w.jsx("div",{className:`p-3 rounded-lg transition-colors ${p.type==="paper"?"bg-indigo-50 group-hover:bg-indigo-100":"bg-blue-50 group-hover:bg-blue-100"}`,children:p.type==="paper"?w.jsx(hm,{className:`w-6 h-6 ${p.type==="paper"?"text-indigo-600":"text-blue-600"}`}):w.jsxs("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[w.jsx("circle",{cx:"6",cy:"6",r:"3"}),w.jsx("circle",{cx:"18",cy:"18",r:"3"}),w.jsx("path",{d:"M8.5 8.5l7 7"})]})}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider py-1 px-2 rounded-full ${p.type==="paper"?"bg-indigo-100 text-indigo-700":"bg-blue-100 text-blue-700"}`,children:p.type||"Diagram"}),w.jsx("button",{onClick:v=>h(v,p.id,p.title),className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",children:w.jsx(i1,{className:"w-4 h-4"})})]})]}),w.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:p.title}),w.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Edited ",new Date(p.updatedAt).toLocaleDateString()]})]},p.id))})]})})}function nH({markdown:e,isTwoColumn:t}){const r=ye.useRef(null);return ye.useEffect(()=>{let a=!0;return(async()=>{var ne;const[o,u,c,f,h,p,v]=await Promise.all([ha(()=>import("./server.browser-C4gUHZZC.js").then(ee=>ee.s),[]),ha(()=>import("./showdown-DiCeiskw.js").then(ee=>ee.s),[]),ha(()=>import("./mermaid.core-nSwYP8W5.js").then(ee=>ee.b7),__vite__mapDeps([0,1])),ha(()=>Promise.resolve().then(()=>lb),void 0),ha(()=>import("./vega.module-DlPeonZJ.js"),__vite__mapDeps([2,3,1,4,5,6,7,8,9,10,11])),ha(()=>import("./index-ByJ9Ii8b.js"),__vite__mapDeps([12,2,3,1,4,5,6,7,8,9,10,11])),ha(()=>import("./index-B3N4dkTF.js"),[])]),b=u.default??u,y=c.default??c,k=f.default??f,_=v.Previewer??((ne=v.default)==null?void 0:ne.Previewer);let T=e;const R=/<div class="vega-lite"([^>]*)>([\s\S]*?)<\/div>/g,O=Array.from(T.matchAll(R)),M=await Promise.all(O.map(async ee=>{try{const re=JSON.parse(ee[2].trim()),we=p.compile(re).spec,ue=await new h.View(h.parse(we),{renderer:"svg"}).toSVG();return{original:ee[0],replacement:`<div class="vega-container"${ee[1]}>${ue}</div>`}}catch(re){return{original:ee[0],replacement:`<div class="vega-error">Chart Error: ${re.message}</div>`}}}));for(const ee of M)T=T.replace(ee.original,ee.replacement);y.initialize({startOnLoad:!1,theme:"base"});const j=/<div class="mermaid"([^>]*)>([\s\S]*?)<\/div>/g,I=Array.from(T.matchAll(j)),$=await Promise.all(I.map(async(ee,re)=>{try{const{svg:we}=await y.render(`mermaid-svg-${Date.now()}-${re}`,ee[2].trim());return{original:ee[0],replacement:`<div class="mermaid-container"${ee[1]}>${we}</div>`}}catch{return{original:ee[0],replacement:'<div class="mermaid-error">Diagram Error</div>'}}}));for(const ee of $)T=T.replace(ee.original,ee.replacement);const E=/<div class="arrowgram"([^>]*)>([\s\S]*?)<\/div>/g,V=Array.from(T.matchAll(E)).map(ee=>{try{const re=ee[2].trim();JSON.parse(re);const we=o.renderToStaticMarkup(w.jsx(ip,{spec:re}));return{original:ee[0],replacement:`<div class="arrowgram-container"${ee[1]}>${we}</div>`}}catch(re){return console.error("Arrowgram Error:",re),{original:ee[0],replacement:`<div class="arrowgram-error">Diagram Error: ${re.message}</div>`}}});for(const ee of V)T=T.replace(ee.original,ee.replacement);const de=new Map;let Q=0;const G=ee=>{const re=`AGPROTMATH${Q++}AGPROT`;return de.set(re,ee),re};T=T.replace(/\$\$[\s\S]+?\$\$/g,G),T=T.replace(/\$(?!\$)(?:\\.|[^$\\\n])+\$/g,G);const X=new b.Converter({metadata:!0,noHeaderId:!0,literalMidWordUnderscores:!0});let K=X.makeHtml(T);const ae=X.getMetadata();for(const[ee,re]of de.entries())K=K.split(ee).join(re);const q=new Map;let F=0;const J=ee=>{const re=`__AG_PROTECTED_BLOCK_${F++}__`;return q.set(re,ee),re};K=K.replace(/<pre[^>]*>.*?<\/pre>/gs,J),K=K.replace(/<code[^>]*>.*?<\/code>/gs,J),K=K.replace(/\$\$([\s\S]+?)\$\$/g,(ee,re)=>k.renderToString(re.trim(),{throwOnError:!1,displayMode:!0})),K=K.replace(/\$([^$]+?)\$/g,(ee,re)=>k.renderToString(re.trim(),{throwOnError:!1,displayMode:!1}));for(const[ee,re]of q.entries())K=K.replace(ee,re);const Ae=`<div class="title-block">${ae.title?`<div class="title">${ae.title}</div>`:""}${ae.authors?`<div class="authors">${ae.authors}</div>`:""}</div>`,L=`<div class="${t?"layout-two-column":"layout-single-column"}">${Ae}<div class="paper-body">${K}</div></div>`;a&&r.current&&(r.current.innerHTML="",new _().preview(L,["https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"],r.current))})(),()=>{a=!1}},[e,t]),w.jsx("div",{ref:r,className:"preview-content-area",children:w.jsx("p",{className:"loading-indicator",children:"Processing Document..."})})}function iH({markdown:e,initialIsTwoColumn:t=!1,showCloseButton:r=!1,onClose:a}){const[s,o]=ye.useState(t);return w.jsxs("div",{className:"preview-container",children:[w.jsxs("div",{className:"preview-controls",children:[r&&w.jsx("button",{className:"control-button",onClick:()=>a?a():window.close(),children:"Close"}),w.jsx("button",{className:`control-button ${s?"active":""}`,onClick:()=>o(!s),children:s?"Single Column":"Two Column"}),w.jsx("button",{className:"control-button",onClick:()=>window.print(),children:"Print / Save PDF"})]}),w.jsx(nH,{markdown:e,isTwoColumn:s})]})}function sH(){const[e,t]=ye.useState(null),[r,a]=ye.useState(!1);return ye.useEffect(()=>{const s=localStorage.getItem("print_content"),o=localStorage.getItem("print_layout");t(s||`# Error: No content found

Please close this window and try printing again.`),o&&a(o==="true")},[]),e?w.jsx(iH,{markdown:e,initialIsTwoColumn:r,showCloseButton:!0}):w.jsx("div",{className:"p-8 text-center text-gray-500",children:"Loading..."})}const oH='@font-face{font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_AMS-Regular-BQhdFMY1.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_AMS-Regular-DMm9YOAa.woff) format("woff"),url(/arrowgram/assets/KaTeX_AMS-Regular-DRggAlZN.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(/arrowgram/assets/KaTeX_Caligraphic-Bold-Dq_IR9rO.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Caligraphic-Bold-BEiXGLvX.woff) format("woff"),url(/arrowgram/assets/KaTeX_Caligraphic-Bold-ATXxdsX0.ttf) format("truetype")}@font-face{font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Caligraphic-Regular-Di6jR-x-.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Caligraphic-Regular-CTRA-rTL.woff) format("woff"),url(/arrowgram/assets/KaTeX_Caligraphic-Regular-wX97UBjC.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(/arrowgram/assets/KaTeX_Fraktur-Bold-CL6g_b3V.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Fraktur-Bold-BsDP51OF.woff) format("woff"),url(/arrowgram/assets/KaTeX_Fraktur-Bold-BdnERNNW.ttf) format("truetype")}@font-face{font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Fraktur-Regular-CTYiF6lA.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Fraktur-Regular-Dxdc4cR9.woff) format("woff"),url(/arrowgram/assets/KaTeX_Fraktur-Regular-CB_wures.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(/arrowgram/assets/KaTeX_Main-Bold-Cx986IdX.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Main-Bold-Jm3AIy58.woff) format("woff"),url(/arrowgram/assets/KaTeX_Main-Bold-waoOVXN0.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(/arrowgram/assets/KaTeX_Main-BoldItalic-DxDJ3AOS.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Main-BoldItalic-SpSLRI95.woff) format("woff"),url(/arrowgram/assets/KaTeX_Main-BoldItalic-DzxPMmG6.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(/arrowgram/assets/KaTeX_Main-Italic-NWA7e6Wa.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Main-Italic-BMLOBm91.woff) format("woff"),url(/arrowgram/assets/KaTeX_Main-Italic-3WenGoN9.ttf) format("truetype")}@font-face{font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Main-Regular-B22Nviop.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Main-Regular-Dr94JaBh.woff) format("woff"),url(/arrowgram/assets/KaTeX_Main-Regular-ypZvNtVU.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(/arrowgram/assets/KaTeX_Math-BoldItalic-CZnvNsCZ.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Math-BoldItalic-iY-2wyZ7.woff) format("woff"),url(/arrowgram/assets/KaTeX_Math-BoldItalic-B3XSjfu4.ttf) format("truetype")}@font-face{font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(/arrowgram/assets/KaTeX_Math-Italic-t53AETM-.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Math-Italic-DA0__PXp.woff) format("woff"),url(/arrowgram/assets/KaTeX_Math-Italic-flOr_0UB.ttf) format("truetype")}@font-face{font-family:KaTeX_SansSerif;font-style:normal;font-weight:700;src:url(/arrowgram/assets/KaTeX_SansSerif-Bold-D1sUS0GD.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_SansSerif-Bold-DbIhKOiC.woff) format("woff"),url(/arrowgram/assets/KaTeX_SansSerif-Bold-CFMepnvq.ttf) format("truetype")}@font-face{font-family:KaTeX_SansSerif;font-style:italic;font-weight:400;src:url(/arrowgram/assets/KaTeX_SansSerif-Italic-C3H0VqGB.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_SansSerif-Italic-DN2j7dab.woff) format("woff"),url(/arrowgram/assets/KaTeX_SansSerif-Italic-YYjJ1zSn.ttf) format("truetype")}@font-face{font-family:KaTeX_SansSerif;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_SansSerif-Regular-DDBCnlJ7.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_SansSerif-Regular-CS6fqUqJ.woff) format("woff"),url(/arrowgram/assets/KaTeX_SansSerif-Regular-BNo7hRIc.ttf) format("truetype")}@font-face{font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Script-Regular-D3wIWfF6.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Script-Regular-D5yQViql.woff) format("woff"),url(/arrowgram/assets/KaTeX_Script-Regular-C5JkGWo-.ttf) format("truetype")}@font-face{font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Size1-Regular-mCD8mA8B.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Size1-Regular-C195tn64.woff) format("woff"),url(/arrowgram/assets/KaTeX_Size1-Regular-Dbsnue_I.ttf) format("truetype")}@font-face{font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Size2-Regular-Dy4dx90m.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Size2-Regular-oD1tc_U0.woff) format("woff"),url(/arrowgram/assets/KaTeX_Size2-Regular-B7gKUWhC.ttf) format("truetype")}@font-face{font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(data:font/woff2;base64,d09GMgABAAAAAA4oAA4AAAAAHbQAAA3TAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAABmAAgRQIDgmcDBEICo1oijYBNgIkA14LMgAEIAWJAAeBHAyBHBvbGiMRdnO0IkRRkiYDgr9KsJ1NUAf2kILNxgUmgqIgq1P89vcbIcmsQbRps3vCcXdYOKSWEPEKgZgQkprQQsxIXUgq0DqpGKmIvrgkeVGtEQD9DzAO29fM9jYhxZEsL2FeURH2JN4MIcTdO049NCVdxQ/w9NrSYFEBKTDKpLKfNkCGDc1RwjZLQcm3vqJ2UW9Xfa3tgAHz6ivp6vgC2yD4/6352ndnN0X0TL7seypkjZlMsjmZnf0Mm5Q+JykRWQBKCVCVPbARPXWyQtb5VgLB6Biq7/Uixcj2WGqdI8tGSgkuRG+t910GKP2D7AQH0DB9FMDW/obJZ8giFI3Wg8Cvevz0M+5m0rTh7XDBlvo9Y4vm13EXmfttwI4mBo1EG15fxJhUiCLbiiyCf/ZA6MFAhg3pGIZGdGIVjtPn6UcMk9A/UUr9PhoNsCENw1APAq0gpH73e+M+0ueyHbabc3vkbcdtzcf/fiy+NxQEjf9ud/ELBHAXJ0nk4z+MXH2Ev/kWyV4k7SkvpPc9Qr38F6RPWnM9cN6DJ0AdD1BhtgABtmoRoFCvPsBAumNm6soZG2Gk5GyVTo2sJncSyp0jQTYoR6WDvTwaaEcHsxHfvuWhHA3a6bN7twRKtcGok6NsCi7jYRrM2jExsUFMxMQYuJbMhuWNOumEJy9hi29Dmg5zMp/A5+hhPG19j1vBrq8JTLr8ki5VLPmG/PynJHVul440bxg5xuymHUFPBshC+nA9I1FmwbRBTNHAcik3Oae0cxKoI3MOriM42UrPe51nsaGxJ+WfXubAsP84aabUlQSJ1IiE0iPETLUU4CATgfXSCSpuRFRmCGbO+wSpAnzaeaCYW1VNEysRtuXCEL1kUFUbbtMv3Tilt/1c11jt3Q5bbMa84cpWipp8Elw3MZhOHsOlwwVUQM3lAR35JiFQbaYCRnMF2lxAWoOg2gyoIV4PouX8HytNIfLhqpJtXB4vjiViUI8IJ7bkC4ikkQvKksnOTKICwnqWSZ9YS5f0WCxmpgjbIq7EJcM4aI2nmhLNY2JIUgOjXZFWBHb+x5oh6cwb0Tv1ackHdKi0I9OO2wE9aogIOn540CCCziyhN+IaejtgAONKznHlHyutPrHGwCx9S6B8kfS4Mfi4Eyv7OU730bT1SCBjt834cXsf43zVjPUqqJjgrjeGnBxSG4aYAKFuVbeCfkDIjAqMb6yLNIbCuvXhMH2/+k2vkNpkORhR59N1CkzoOENvneIosjYmuTxlhUzaGEJQ/iWqx4dmwpmKjrwTiTGTCVozNAYqk/zXOndWxuWSmJkQpJw3pK5KX6QrLt5LATMqpmPAQhkhK6PUjzHUn7E0gHE0kPE0iKkolgkUx9SZmVAdDgpffdyJKg3k7VmzYGCwVXGz/tXmkOIp+vcWs+EMuhhvN0h9uhfzWJziBQmCREGSIFmQIkgVpAnSBRmC//6hkLZwaVhwxlrJSOdqlFtOYxlau9F2QN5Y98xmIAsiM1HVp2VFX+DHHGg6Ecjh3vmqtidX3qHI2qycTk/iwxSt5UzTmEP92ZBnEWTk4Mx8Mpl78ZDokxg/KWb+Q0QkvdKVmq3TMW+RXEgrsziSAfNXFMhDc60N5N9jQzjfO0kBKpUZl0ZmwJ41j/B9Hz6wmRaJB84niNmQrzp9eSlQCDDzazGDdVi3P36VZQ+Jy4f9UBNp+3zTjqI4abaFAm+GShVaXlsGdF3FYzZcDI6cori4kMxUECl9IjJZpzkvitAoxKue+90pDMvcKRxLl53TmOKCmV/xRolNKSqqUxc6LStOETmFOiLZZptlZepcKiAzteG8PEdpnQpbOMNcMsR4RR2Bs0cKFEvSmIjAFcnarqwUL4lDhHmnVkwu1IwshbiCcgvOheZuYyOteufZZwlcTlLgnZ3o/WcYdzZHW/WGaqaVfmTZ1aWCceJjkbZqsfbkOtcFlUZM/jy+hXHDbaUobWqqXaeWobbLO99yG5N3U4wxco0rQGGcOLASFMXeJoham8M+/x6O2WywK2l4HGbq1CoUyC/IZikQhdq3SiuNrvAEj0AVu9x2x3lp/xWzahaxidezFVtdcb5uEnzyl0ZmYiuKI0exvCd4Xc9CV1KB0db00z92wDPde0kukbvZIWN6jUWFTmPIC/Y4UPCm8UfDTFZpZNon1qLFTkBhxzB+FjQRA2Q/YRJT8pQigslMaUpFyAG8TMlXigiqmAZX4xgijKjRlGpLE0GdplRfCaJo0JQaSxNBk6ZmMzcya0FmrcisDdn0Q3HI2sWSppYigmlM1XT/kLQZSNpMJG0WkjYbSZuDpM1F0uYhFc1HxU4m1QJjDK6iL0S5uSj5rgXc3RejEigtcRBtqYPQsiTskmO5vosV+q4VGIKbOkDg0jtRrq+Em1YloaTFar3EGr1EUC8R0kus1Uus00usL97ABr2BjXoDm/QGNhuWtMVBKOwg/i78lT7hBsAvDmwHc/ao3vmUbBmhjeYySZNWvGkfZAgISDSaDo1SVpzGDsAEkF8B+gEapViUoZgUWXcRIGFZNm6gWbAKk0bp0k1MHG9fLYtV4iS2SmLEQFARzRcnf9PUS0LVn05/J9MiRRBU3v2IrvW974v4N00L7ZMk0wXP1409CHo/an8zTRHD3eSJ6m8D4YMkZNl3M79sqeuAsr/m3f+8/yl7A50aiAEJgeBeMWzu7ui9UfUBCe2TIqZIoOd/3/udRBOQidQZUERzb2/VwZN1H/Sju82ew2H2Wfr6qvfVf3hqwDvAIpkQVFy4B9Pe9e4/XvPeceu7h3dvO56iJPf0+A6cqA2ip18ER+iFgggiuOkvj24bby0N9j2UHIkgqIt+sVgfodC4YghLSMjSZbH0VR/6dMDrYJeKHilKTemt6v6kvzvn3/RrdWtr0GoN/xL+Sex/cPYLUpepx9cz/D46UPU5KXgAQa+NDps1v6J3xP1i2HtaDB0M9aX2deA7SYff//+gUCovMmIK/qfsFcOk+4Y5ZN97XlG6zebqtMbKgeRFi51vnxTQYBUik2rS/Cn6PC8ADR8FGxsRPB82dzfND90gIcshOcYUkfjherBz53odpm6TP8txlwOZ71xmfHHOvq053qFF/MRlS3jP0ELudrf2OeN8DHvp6ZceLe8qKYvWz/7yp0u4dKPfli3CYq0O13Ih71mylJ80tOi10On8wi+F4+LWgDPeJ30msSQt9/vkmHq9/Lvo2b461mP801v3W4xTcs6CbvF9UDdrSt+A8OUbpSh55qAUFXWznBBfdeJ8a4d7ugT5tvxUza3h9m4H7ptTqiG4z0g5dc0X29OcGlhpGFMpQo9ytTS+NViZpNdvU4kWx+LKxNY10kQ1yqGXrhe4/1nvP7E+nd5A92TtaRplbHSqoIdOqtRWti+fkB5/n1+/VvCmz12pG1kpQWsfi1ftlBobm0bpngs16CHkbIwdLnParxtTV3QYRlfJ0KFskH7pdN/YDn+yRuSd7sNH3aO0DYPggk6uWuXrfOc+fa3VTxFVvKaNxHsiHmsXyCLIE5yuOeN3/Jdf8HBL/5M6shjyhxHx9BjB1O0+4NLOnjLLSxwO7ukN4jMbOIcD879KLSi6Pk61Oqm2377n8079PXEEQ7cy7OKEC9nbpet118fxweTafpt69x/Bt8UqGzNQt7aelpc44dn5cqhwf71+qKp/Zf/+a0zcizOUWpl/iBcSXip0pplkatCchoH5c5aUM8I7/dWxAej8WicPL1URFZ9BDJelUwEwTkGqUhgSlydVes95YdXvhh9Gfz/aeFWvgVb4tuLbcv4+wLdutVZv/cUonwBD/6eDlE0aSiKK/uoH3+J1wDE/jMVqY2ysGufN84oIXB0sPzy8ollX/LegY74DgJXJR57sn+VGza0x3DnuIgABFM15LmajjjsNlYj+JEZGbuRYcAMOWxFkPN2w6Wd46xo4gVWQR/X4lyI/R6K/YK0110GzudPRW7Y+UOBGTfNNzHeYT0fiH0taunBpq9HEW8OKSaBGj21L0MqenEmNRWBAWDWAk4CpNoEZJ2tTaPFgbQYj8HxtFilErs3BTRwT8uO1NXQaWfIotchmPkAF5mMBAliEmZiOGVgCG9LgRzpscMAOOwowlT3JhusdazXGSC/hxR3UlmWVwWHpOIKheqONvjyhSiTHIkVUco5bnji8m//zL7PKaT1Vl5I6UE609f+gkr6MZKVyKc7zJRmCahLsdlyA5fdQkRSan9LgnnLEyGSkaKJCJog0wAgvepWBt80+1yKln1bMVtCljfNWDueKLsWwaEbBSfSPTEmVRsUcYYMnEjcjeyCZzBXK9E9BYBXLKjOSpUDR+nEV3TFSUdQaz+ot98QxgXwx0GQ+EEUAKB2qZPkQQ0GqFD8UPFMqyaCHM24BZmSGic9EYMagKizOw9Hz50DMrDLrqqLkTAhplMictiCAx5S3BIUQdeJeLnBy2CNtMfz6cV4u8XKoFZQesbf9YZiIERiHjaNodDW6LgcirX/mPnJIkBGDUpTBhSa0EIr38D5hCIszhCM8URGBqImoWjpvpt1ebu/v3Gl3qJfMnNM+9V+kiRFyROTPHQWOcs1dNW94/ukKMPZBvDi55i5CttdeJz84DLngLqjcdwEZ87bFFR8CIG35OAkDVN6VRDZ7aq67NteYqZ2lpT8oYB2CytoBd6VuAx4WgiAsnuj3WohG+LugzXiQRDeM3XYXlULv4dp5VFYC) format("woff2"),url(/arrowgram/assets/KaTeX_Size3-Regular-CTq5MqoE.woff) format("woff"),url(/arrowgram/assets/KaTeX_Size3-Regular-DgpXs0kz.ttf) format("truetype")}@font-face{font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Size4-Regular-Dl5lxZxV.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Size4-Regular-BF-4gkZK.woff) format("woff"),url(/arrowgram/assets/KaTeX_Size4-Regular-DWFBv043.ttf) format("truetype")}@font-face{font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(/arrowgram/assets/KaTeX_Typewriter-Regular-CO6r4hn1.woff2) format("woff2"),url(/arrowgram/assets/KaTeX_Typewriter-Regular-C0xS9mPB.woff) format("woff"),url(/arrowgram/assets/KaTeX_Typewriter-Regular-D3Ib7_Hf.ttf) format("truetype")}.katex{font: 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto}.katex *{-ms-high-contrast-adjust:none!important;border-color:currentColor}.katex .katex-version:after{content:"0.16.22"}.katex .katex-mathml{clip:rect(1px,1px,1px,1px);border:0;height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-style:italic;font-weight:700}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathboldfrak,.katex .textboldfrak{font-family:KaTeX_Fraktur;font-weight:700}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .mathsfit,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{border-collapse:collapse;display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .vbox{align-items:baseline;display:inline-flex;flex-direction:column}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{max-width:0;width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{position:relative;width:0}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{border:0 solid;display:inline-block;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{border-bottom-style:solid;display:inline-block;width:100%}.katex .hdashline{border-bottom-style:dashed;display:inline-block;width:100%}.katex .sqrt>.root{margin-left:.2777777778em;margin-right:-.5555555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.8333333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.1666666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.3333333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.6666666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.4566666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.1466666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.7142857143em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.8571428571em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.1428571429em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.2857142857em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.4285714286em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.7142857143em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.0571428571em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.4685714286em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.9628571429em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.5542857143em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.5555555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.6666666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.7777777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.8888888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.1111111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.3333333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.3044444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.7644444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.4166666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.5833333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.6666666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.8333333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.7283333333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.0733333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.3472222222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.4166666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.4861111111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.5555555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.6944444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.8333333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.4402777778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.7277777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.2893518519em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.3472222222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.4050925926em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.462962963em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.5208333333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.6944444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.8333333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.2002314815em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.4398148148em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.2410800386em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.2892960463em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.337512054em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.3857280617em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.4339440694em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.4821600771em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.5785920926em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.6943105111em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.8331726133em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.1996142719em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.2009646302em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.2411575563em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.2813504823em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.3215434084em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.3617363344em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.4019292605em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.4823151125em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.578778135em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.6945337621em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.8336012862em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;display:block;height:inherit;position:absolute;width:100%}.katex svg path{stroke:none}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;position:relative;width:100%}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{overflow:hidden;position:relative;width:100%}.katex .halfarrow-left{left:0;overflow:hidden;position:absolute;width:50.2%}.katex .halfarrow-right{overflow:hidden;position:absolute;right:0;width:50.2%}.katex .brace-left{left:0;overflow:hidden;position:absolute;width:25.1%}.katex .brace-center{left:25%;overflow:hidden;position:absolute;width:50%}.katex .brace-right{overflow:hidden;position:absolute;right:0;width:25.1%}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{border:.04em solid;box-sizing:border-box}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{border-right:.049em solid;border-top:.049em solid;box-sizing:border-box;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{content:"(" counter(katexEqnNo) ")";counter-increment:katexEqnNo}.katex .mml-eqn-num:before{content:"(" counter(mmlEqnNo) ")";counter-increment:mmlEqnNo}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;left:calc(50% + .3em);position:absolute;text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{padding-left:2em;text-align:left}body{counter-reset:katexEqnNo mmlEqnNo}',lH={enablePrintPreview:!0},uH=Ir.createContext(lH);function cH(){return Ir.useContext(uH)}function dH(e){if(!Number.isFinite(e)||e<0)return"";if(e<1024)return`${e} B`;const t=e/1024;return t<1024?`${t.toFixed(1)} KB`:`${(t/1024).toFixed(1)} MB`}function t6(e){const t=Mw(),{addToast:r}=Vs(),[a,s]=Ir.useState([]),[o,u]=Ir.useState(!1),[c,f]=Ir.useState(!1),h=Ir.useCallback(async()=>{u(!0);try{const k=await t.list(e.projectId);s(k)}catch(k){console.error(k),r((k==null?void 0:k.message)??"Failed to load files","error")}finally{u(!1)}},[r,e.projectId,t]);Ir.useEffect(()=>{h()},[h]);const p=Ir.useRef(null),v=async k=>{if(!(!k||k.length===0)){if(!t.capabilities.canUpload){r("Uploads are not supported in this host.","error");return}f(!0);try{for(const _ of Array.from(k))await t.upload(e.projectId,_);r("Uploaded.","success"),await h()}catch(_){console.error(_),r((_==null?void 0:_.message)??"Upload failed","error")}finally{f(!1),p.current&&(p.current.value="")}}},b=async(k,_)=>{try{const T=await t.getBlob(e.projectId,k),R=URL.createObjectURL(T);try{const O=document.createElement("a");O.href=R,O.download=_||"download.bin",document.body.appendChild(O),O.click(),document.body.removeChild(O)}finally{URL.revokeObjectURL(R)}}catch(T){console.error(T),r((T==null?void 0:T.message)??"Download failed","error")}},y=async k=>{if(!t.capabilities.canDelete){r("Delete is not supported in this host.","error");return}try{await t.remove(e.projectId,k),r("Deleted.","success"),await h()}catch(_){console.error(_),r((_==null?void 0:_.message)??"Delete failed","error")}};return w.jsxs("div",{className:"h-full flex flex-col","data-testid":"attachments-panel",children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50/50 flex items-center justify-between gap-2",children:[w.jsxs("div",{className:"flex items-center gap-2 text-gray-800 font-semibold",children:[w.jsx(ap,{size:16}),w.jsx("span",{children:"Files"})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>void h(),className:"px-2 py-1 rounded border border-gray-200 bg-white text-gray-700 text-xs hover:bg-gray-50 disabled:opacity-50",disabled:o||c,title:"Refresh",children:w.jsx(CN,{size:14})}),w.jsx("button",{onClick:()=>{var k;return(k=p.current)==null?void 0:k.click()},className:"px-2 py-1 rounded border border-gray-200 bg-white text-gray-700 text-xs hover:bg-gray-50 disabled:opacity-50",disabled:!t.capabilities.canUpload||c,title:"Upload",children:w.jsx(HN,{size:14})}),w.jsx("input",{ref:p,type:"file",className:"hidden",multiple:!0,"data-testid":"attachments-file-input",onChange:k=>void v(k.target.files)})]})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-white",children:o?w.jsx("div",{className:"text-sm text-gray-500",children:"Loading"}):a.length===0?w.jsx("div",{className:"text-sm text-gray-500",children:"No files yet. Upload attachments to reference them in your work (and optionally in AI)."}):w.jsx("div",{className:"space-y-2",children:a.map(k=>w.jsxs("div",{className:"flex items-center justify-between gap-3 border border-gray-200 rounded-lg px-3 py-2",children:[w.jsxs("div",{className:"min-w-0",children:[w.jsx("div",{className:"text-sm font-medium text-gray-800 truncate",children:k.fileName}),w.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[k.contentType,"  ",dH(k.sizeBytes)]})]}),w.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[w.jsx("button",{onClick:()=>void b(k.id,k.fileName),className:"p-2 rounded hover:bg-gray-100 text-gray-600",title:"Download",children:w.jsx(Pb,{size:16})}),w.jsx("button",{onClick:()=>void y(k.id),className:"p-2 rounded hover:bg-red-50 text-red-600",title:"Delete",children:w.jsx(i1,{size:16})})]})]},k.id))})}),c?w.jsx("div",{className:"px-4 py-2 border-t border-gray-100 text-xs text-gray-600 bg-gray-50",children:"Uploading"}):null]})}function fH(){var we,Ee,ue,Ce;const e=Dw(),t=cH(),r=new URL("/arrowgram/",window.location.origin).pathname.replace(/\/$/,""),a=window.location.pathname.startsWith(r+"/")?window.location.pathname.slice(r.length):window.location.pathname;if(t.enablePrintPreview&&(a==="/print-preview"||a==="/print-preview/"))return w.jsx(sH,{});const s=_t(H=>H.spec),o=_t(H=>H.setSpec),u=_t(H=>H.filename),f={key:_t(H=>H.selectedIds).values().next().value},[h,p]=ye.useState("dashboard"),[v,b]=ye.useState(null),[y,k]=ye.useState(null),[_,T]=ye.useState(null),[R,O]=ye.useState(!1),[M,j]=ye.useState(""),[I,$]=ye.useState(!1),[E,D]=ye.useState(!1),[V,de]=ye.useState(!1),[Q,G]=ye.useState(!0),[X,K]=ye.useState("properties"),[ae,q]=ye.useState(!1),[F,J]=ye.useState(""),{addToast:Ae}=Vs(),De=async(H,oe={fitView:!0,showGrid:!0})=>{if(H==="tikz"){const _e=vO(s);j(_e),O(!0);return}const ge=document.getElementById("arrowgram-canvas");if(!ge){Ae("Could not find the diagram to export.","error");return}let Me=ge.getAttribute("viewBox")||"0 0 1000 600";if(oe.fitView){const _e=Su(s);_e.viewBox&&(Me=_e.viewBox)}try{const _e=ge.cloneNode(!0);if(_e.setAttribute("viewBox",Me),!oe.showGrid){const qe=_e.querySelector('rect[fill*="#grid"]');qe&&qe.remove()}let je=oH;je=je.replace(/url\((['"]?)fonts\//g,(qe,ct)=>`url(${ct}https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/fonts/`);const Ye=document.createElementNS("http://www.w3.org/2000/svg","style");if(Ye.textContent=je,_e.insertBefore(Ye,_e.firstChild),H==="svg"){const qe=new XMLSerializer().serializeToString(_e),ct=new Blob([qe],{type:"image/svg+xml"});SO.saveAs(ct,`${u||"diagram"}.svg`),Ae("Diagram exported as SVG","success")}else if(H==="png"){const qe=Me.split(" ").map(parseFloat),ct={backgroundColor:"white",scale:2,left:qe[0],top:qe[1],width:qe[2],height:qe[3]},nt=document.createElement("div");nt.style.position="absolute",nt.style.top="-9999px",nt.style.left="-9999px",nt.style.visibility="hidden",nt.appendChild(_e),document.body.appendChild(nt);try{await bO.saveSvgAsPng(_e,`${u||"diagram"}.png`,ct),Ae("Diagram exported as PNG","success")}finally{document.body.removeChild(nt)}}}catch(_e){console.error("Export failed:",_e),Ae("Failed to export diagram.","error")}},L=async()=>{try{if(!y)throw new Error("No active project");const H=await e.update({id:y.id,title:u,content:s});k(H),Ae("Project saved successfully!","success")}catch(H){console.error(H),Ae("Failed to save project.","error")}},ne=async()=>{const H=F.trim();if(q(!1),!H||H===u){J(u);return}_t.getState().setFilename(H);try{if(y){const oe=await e.update({id:y.id,title:H});k(oe)}}catch(oe){console.error(oe),Ae("Failed to rename project.","error")}},ee=async()=>{var H;try{if(y&&e.getPublicUrl&&((H=e.capabilities.sharing)!=null&&H.canGetPublicUrl)){const je=await e.getPublicUrl(y.id);return await navigator.clipboard.writeText(je),T(je),Ae("Share link copied to clipboard!","success"),je}const oe=new TextEncoder().encode(s),ge=String.fromCharCode.apply(null,oe),Me=btoa(ge),_e=`${window.location.origin}${window.location.pathname}?spec=${Me}`;return navigator.clipboard.writeText(_e),T(_e),Ae("Shareable URL copied to clipboard!","success"),_e}catch(oe){return console.error(oe),Ae("Failed to create share URL","error"),null}};ye.useEffect(()=>{T(null),q(!1),J(u)},[y==null?void 0:y.id]),ye.useEffect(()=>{h==="dashboard"&&(b(null),k(null))},[h]),ye.useEffect(()=>{const oe=new URLSearchParams(window.location.search).get("spec");if(oe)try{const ge=atob(oe),Me=new Uint8Array(ge.length);for(let Ye=0;Ye<ge.length;Ye++)Me[Ye]=ge.charCodeAt(Ye);const _e=new TextDecoder().decode(Me);o(_e),p("editor");const je=`shared:${Date.now()}`;b(je),k({id:je,title:"Shared Diagram",content:_e,updatedAt:"",type:"diagram"})}catch(ge){console.error("Failed to load shared spec",ge)}},[]);const re=async H=>{b(H),p("editor");const oe=await e.get(H);k(oe),oe.type==="diagram"&&(_t.getState().setFilename(oe.title),o(oe.content))};return h==="dashboard"?w.jsx(aH,{onOpenProject:re}):(y==null?void 0:y.type)==="paper"?w.jsx("div",{className:"h-screen w-screen bg-gray-50 flex flex-col font-sans overflow-hidden",children:w.jsxs("div",{className:"flex-1 relative flex overflow-hidden",children:[w.jsx("div",{className:`transition-all duration-300 ease-in-out border-r border-gray-200 bg-white relative z-30 shadow-xl ${I?"w-80 translate-x-0":"w-0 -translate-x-full opacity-0"}`,children:w.jsx("div",{className:"w-80 h-full absolute right-0",children:w.jsx(e6,{context:{type:"paper",projectId:v??y.id,content:y.content,getCurrentContent:()=>y.content,onUpdate:H=>k(oe=>oe?{...oe,content:H}:null)},onBusyChange:D})})}),w.jsxs("div",{className:"flex-1 relative flex flex-col min-w-0",children:[w.jsx("div",{className:"absolute top-3 left-4 z-40",children:w.jsx("button",{onClick:()=>p("dashboard"),className:"p-2 bg-white/50 hover:bg-white text-gray-500 hover:text-gray-900 border border-transparent hover:border-gray-200 rounded-lg transition-all shadow-sm backdrop-blur",title:"Back to Dashboard",children:w.jsx(L2,{size:20})})}),w.jsx("div",{className:"absolute top-3 right-20 z-40",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>de(!V),className:`p-2 rounded-lg transition-colors border shadow-sm ${V?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white text-gray-600 hover:bg-gray-50 border-gray-200"}`,title:V?"Close Files":"Files",children:w.jsx(ap,{size:18})}),w.jsx("button",{onClick:()=>$(!I),className:`p-2 rounded-lg transition-colors border shadow-sm ${I?"bg-indigo-100 text-indigo-700 border-indigo-200":"bg-white text-gray-600 hover:bg-gray-50 border-gray-200"}`,children:w.jsxs("span",{className:"flex items-center gap-2",children:[!I&&E?w.jsx("span",{className:"h-3 w-3 animate-spin rounded-full border-2 border-indigo-200 border-t-indigo-700"}):null,w.jsx("span",{children:I?"Close AI":"Ask AI"})]})})]})}),w.jsx(WC,{initialMarkdown:y.content,filename:y.title,onRename:async H=>{const oe=await e.update({id:y.id,title:H});k(oe)},onPersist:async H=>{const oe=await e.update({id:y.id,title:y.title,content:H});k(oe)},onChange:H=>{k(oe=>oe?{...oe,content:H}:null)},showPrintButton:t.enablePrintPreview,sharing:(we=e.capabilities.sharing)!=null&&we.canTogglePublic&&e.getPublicUrl&&((Ee=e.capabilities.sharing)!=null&&Ee.canGetPublicUrl)?{isPublic:!!y.isPublic,publicUrl:_??void 0,onTogglePublic:async H=>{const oe=await e.update({id:y.id,isPublic:H});k(oe),H||T(null)},onCopyShareLink:async()=>{await ee()}}:void 0})]}),w.jsx("div",{className:`transition-all duration-300 ease-in-out border-l border-gray-200 bg-white relative z-30 shadow-xl ${V?"w-80 translate-x-0":"w-0 translate-x-full opacity-0"}`,children:w.jsx("div",{className:"w-80 h-full absolute left-0",children:w.jsx(t6,{projectId:y.id})})})]})}):w.jsxs("div",{className:"h-screen w-screen bg-gray-50 flex flex-col font-sans overflow-hidden",children:[w.jsxs("nav",{className:"h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 z-10 shadow-sm relative",children:[w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{onClick:()=>p("dashboard"),className:"p-2 -ml-2 text-gray-500 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:w.jsx(L2,{size:20})}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-bold shadow-sm",children:"A"}),w.jsx("span",{className:"font-semibold text-gray-800 text-lg tracking-tight hidden sm:block",children:"Arrowgram"}),w.jsx("div",{className:"h-4 w-px bg-gray-300 mx-2 hidden sm:block"}),ae?w.jsx("input",{className:"min-w-0 max-w-[380px] w-[28ch] border border-gray-200 rounded px-2 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-400 bg-white",value:F,onChange:H=>J(H.target.value),onBlur:()=>void ne(),onKeyDown:H=>{H.key==="Enter"&&ne(),H.key==="Escape"&&(q(!1),J(u))},autoFocus:!0}):w.jsx("button",{type:"button",className:"text-gray-600 font-medium hover:underline min-w-0 truncate text-left",title:"Click to rename",onClick:()=>{J(u),q(!0)},children:u})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-3 py-1.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md text-sm font-medium transition-colors",children:[w.jsx(Hb,{size:16}),w.jsx("span",{className:"hidden sm:inline",children:"Save"})]}),y&&((ue=e.capabilities.sharing)==null?void 0:ue.canTogglePublic)&&e.getPublicUrl&&((Ce=e.capabilities.sharing)==null?void 0:Ce.canGetPublicUrl)&&w.jsxs(w.Fragment,{children:[w.jsx("button",{onClick:async()=>{try{const H=await e.update({id:y.id,isPublic:!y.isPublic});k(H),Ae(H.isPublic?"Diagram is now public":"Diagram is now private","success")}catch(H){console.error(H),Ae("Failed to update sharing","error")}},className:`px-3 py-1.5 rounded-md text-sm font-medium border transition-colors ${y.isPublic?"bg-emerald-50 border-emerald-200 text-emerald-700 hover:bg-emerald-100":"bg-white border-gray-200 text-gray-600 hover:bg-gray-50"}`,title:y.isPublic?"Public (click to make private)":"Private (click to make public)",children:y.isPublic?"Public":"Private"}),w.jsx("button",{onClick:()=>ee(),className:"px-3 py-1.5 rounded-md text-sm font-medium bg-gray-100 hover:bg-gray-200 text-gray-700 transition-colors",title:"Copy share link",children:"Share"})]}),w.jsx("button",{onClick:()=>G(!Q),className:`p-2 rounded-lg transition-colors ${Q?"bg-purple-100 text-purple-700":"text-gray-500 hover:bg-gray-100"}`,title:"Toggle Right Panel",children:w.jsx(Fc,{size:20})}),w.jsx("button",{onClick:()=>{K("files"),G(!0)},className:`p-2 rounded-lg transition-colors ${Q&&X==="files"?"bg-purple-100 text-purple-700":"text-gray-500 hover:bg-gray-100"}`,title:"Files",children:w.jsx(ap,{size:20})})]})]}),w.jsxs("div",{className:"flex-1 flex overflow-hidden relative",children:[w.jsx("div",{className:`transition-all duration-300 ease-in-out border-r border-gray-200 bg-white relative z-20 shadow-xl ${I?"w-80 translate-x-0":"w-0 -translate-x-full opacity-0"}`,children:w.jsx("div",{className:"w-80 h-full absolute right-0",children:w.jsx(e6,{context:{type:"diagram",projectId:v??(y==null?void 0:y.id),content:s,getCurrentContent:()=>_t.getState().spec,onUpdate:o},onBusyChange:D})})}),w.jsxs("div",{className:"flex-1 relative bg-gray-50 flex flex-col min-w-0",children:[w.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 z-30",children:w.jsx(pO,{onExport:De,onShare:ee,onToggleChat:()=>$(!I),isChatOpen:I,isChatBusy:E})}),w.jsx("div",{className:"flex-1 overflow-hidden relative",children:w.jsx(Yb,{})})]}),w.jsx("div",{className:`${Q?"w-80 border-l border-gray-200":"w-0"} transition-all duration-300 ease-in-out bg-white z-20 shadow-xl flex flex-col overflow-hidden`,children:w.jsxs("div",{className:"w-80 h-full flex flex-col",children:[w.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("button",{onClick:()=>K("properties"),className:`text-sm font-semibold px-2 py-1 rounded ${X==="properties"?"bg-white shadow text-gray-800":"text-gray-600 hover:bg-white/60"}`,children:"Properties"}),w.jsx("button",{onClick:()=>K("files"),className:`text-sm font-semibold px-2 py-1 rounded ${X==="files"?"bg-white shadow text-gray-800":"text-gray-600 hover:bg-white/60"}`,children:"Files"})]}),w.jsx("button",{onClick:()=>G(!1),className:"text-gray-400 hover:text-gray-600 lg:hidden",children:w.jsx(Fc,{size:16})})]}),X==="properties"?w.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:w.jsx(h7,{selection:f,spec:s,onSpecChange:o})}):w.jsx("div",{className:"flex-1 overflow-hidden",children:y?w.jsx(t6,{projectId:y.id}):w.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No project selected."})})]})})]}),w.jsx(gO,{tikzCode:M,onClose:()=>O(!1),isOpen:R})]})}(()=>{const e=window.location;if(e.search&&e.search[1]==="/"){const t=e.search.slice(1).split("&").map(a=>a.replace(/~and~/g,"&")).join("?"),r=new URL("/arrowgram/",e.origin).pathname.replace(/\/$/,"");window.history.replaceState(null,"",r+t+e.hash)}})();const r6=document.getElementById("root");r6&&i6.createRoot(r6).render(w.jsx(ye.StrictMode,{children:w.jsx(rC,{children:w.jsx(rH,{children:w.jsx(fH,{})})})}));export{ha as _,n6 as a,a6 as g,lb as k,Np as r};
